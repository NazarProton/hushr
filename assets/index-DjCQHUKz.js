const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-CfDOy3xt.js","assets/if-defined-CHFRam0f.js","assets/index-Y0li528a.js","assets/index-BFzTwSt9.js","assets/ref-DB-elGzR.js","assets/index-Dwgz6UeU.js","assets/index-aNEf2hlr.js","assets/index-B_AQ8f45.js","assets/index-C4RjoFkO.js","assets/index-CVDVXbaL.js","assets/index-C0Xys-fx.js","assets/index-Dk2XE8YU.js","assets/email-3WT4MjUy.js","assets/index-yU7u_ODi.js","assets/socials-Ds-QhU8-.js","assets/index-C4E4vo3_.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-Cg_tAYeu.js","assets/index-Dt7cuhBe.js","assets/index-Q0WocHtq.js","assets/index-D_Aa_S_u.js","assets/swaps-3qWx75O4.js","assets/index-BEAE5Ao3.js","assets/index-C3tIjaI4.js","assets/index-Wlrq9KQ0.js","assets/send-CVvvnwuB.js","assets/index-BNKHqKTb.js","assets/index-BFnbzG8_.js","assets/receive-D3dqxqwc.js","assets/index-BO0WU92s.js","assets/onramp-qFhiio1R.js","assets/index-BuZVV-EP.js","assets/index-BXTy4IkU.js","assets/index-BmEjeIGt.js","assets/transactions-C9wBOu1U.js","assets/index-DuJdk22d.js","assets/index-m9b_yTwT.js","assets/index-C_MRurb-.js","assets/index-BqLtgZkU.js","assets/index-CcjTGpLo.js","assets/w3m-modal-BMmqR0Rq.js"])))=>i.map(i=>d[i]);
var yx=t=>{throw TypeError(t)};var b0=(t,e,n)=>e.has(t)||yx("Cannot "+n);var z=(t,e,n)=>(b0(t,e,"read from private field"),n?n.call(t):e.get(t)),qe=(t,e,n)=>e.has(t)?yx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ne=(t,e,n,r)=>(b0(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),pn=(t,e,n)=>(b0(t,e,"access private method"),n);var Tf=(t,e,n,r)=>({set _(s){Ne(t,e,s,n)},get _(){return z(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function sI(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var iI={exports:{}},fg={},oI={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rf=Symbol.for("react.element"),MR=Symbol.for("react.portal"),BR=Symbol.for("react.fragment"),FR=Symbol.for("react.strict_mode"),zR=Symbol.for("react.profiler"),qR=Symbol.for("react.provider"),HR=Symbol.for("react.context"),WR=Symbol.for("react.forward_ref"),VR=Symbol.for("react.suspense"),GR=Symbol.for("react.memo"),KR=Symbol.for("react.lazy"),wx=Symbol.iterator;function YR(t){return t===null||typeof t!="object"?null:(t=wx&&t[wx]||t["@@iterator"],typeof t=="function"?t:null)}var aI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cI=Object.assign,lI={};function Zl(t,e,n){this.props=t,this.context=e,this.refs=lI,this.updater=n||aI}Zl.prototype.isReactComponent={};Zl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uI(){}uI.prototype=Zl.prototype;function Zv(t,e,n){this.props=t,this.context=e,this.refs=lI,this.updater=n||aI}var Jv=Zv.prototype=new uI;Jv.constructor=Zv;cI(Jv,Zl.prototype);Jv.isPureReactComponent=!0;var bx=Array.isArray,dI=Object.prototype.hasOwnProperty,Qv={current:null},hI={key:!0,ref:!0,__self:!0,__source:!0};function fI(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)dI.call(e,r)&&!hI.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:rf,type:t,key:i,ref:o,props:s,_owner:Qv.current}}function ZR(t,e){return{$$typeof:rf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xv(t){return typeof t=="object"&&t!==null&&t.$$typeof===rf}function JR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vx=/\/+/g;function v0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?JR(""+t.key):e.toString(36)}function Pp(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case rf:case MR:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+v0(o,0):r,bx(s)?(n="",t!=null&&(n=t.replace(vx,"$&/")+"/"),Pp(s,e,n,"",function(l){return l})):s!=null&&(Xv(s)&&(s=ZR(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(vx,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",bx(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+v0(i,a);o+=Pp(i,e,n,c,s)}else if(c=YR(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+v0(i,a++),o+=Pp(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pf(t,e,n){if(t==null)return t;var r=[],s=0;return Pp(t,r,"","",function(i){return e.call(n,i,s++)}),r}function QR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mn={current:null},Op={transition:null},XR={ReactCurrentDispatcher:Mn,ReactCurrentBatchConfig:Op,ReactCurrentOwner:Qv};function pI(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:Pf,forEach:function(t,e,n){Pf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pf(t,function(){e++}),e},toArray:function(t){return Pf(t,function(e){return e})||[]},only:function(t){if(!Xv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$e.Component=Zl;$e.Fragment=BR;$e.Profiler=zR;$e.PureComponent=Zv;$e.StrictMode=FR;$e.Suspense=VR;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XR;$e.act=pI;$e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cI({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Qv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)dI.call(e,c)&&!hI.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:rf,type:t.type,key:s,ref:i,props:r,_owner:o}};$e.createContext=function(t){return t={$$typeof:HR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qR,_context:t},t.Consumer=t};$e.createElement=fI;$e.createFactory=function(t){var e=fI.bind(null,t);return e.type=t,e};$e.createRef=function(){return{current:null}};$e.forwardRef=function(t){return{$$typeof:WR,render:t}};$e.isValidElement=Xv;$e.lazy=function(t){return{$$typeof:KR,_payload:{_status:-1,_result:t},_init:QR}};$e.memo=function(t,e){return{$$typeof:GR,type:t,compare:e===void 0?null:e}};$e.startTransition=function(t){var e=Op.transition;Op.transition={};try{t()}finally{Op.transition=e}};$e.unstable_act=pI;$e.useCallback=function(t,e){return Mn.current.useCallback(t,e)};$e.useContext=function(t){return Mn.current.useContext(t)};$e.useDebugValue=function(){};$e.useDeferredValue=function(t){return Mn.current.useDeferredValue(t)};$e.useEffect=function(t,e){return Mn.current.useEffect(t,e)};$e.useId=function(){return Mn.current.useId()};$e.useImperativeHandle=function(t,e,n){return Mn.current.useImperativeHandle(t,e,n)};$e.useInsertionEffect=function(t,e){return Mn.current.useInsertionEffect(t,e)};$e.useLayoutEffect=function(t,e){return Mn.current.useLayoutEffect(t,e)};$e.useMemo=function(t,e){return Mn.current.useMemo(t,e)};$e.useReducer=function(t,e,n){return Mn.current.useReducer(t,e,n)};$e.useRef=function(t){return Mn.current.useRef(t)};$e.useState=function(t){return Mn.current.useState(t)};$e.useSyncExternalStore=function(t,e,n){return Mn.current.useSyncExternalStore(t,e,n)};$e.useTransition=function(){return Mn.current.useTransition()};$e.version="18.3.1";oI.exports=$e;var te=oI.exports;const e1=Yl(te);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$=te,t$=Symbol.for("react.element"),n$=Symbol.for("react.fragment"),r$=Object.prototype.hasOwnProperty,s$=e$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i$={key:!0,ref:!0,__self:!0,__source:!0};function mI(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)r$.call(e,r)&&!i$.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:t$,type:t,key:i,ref:o,props:s,_owner:s$.current}}fg.Fragment=n$;fg.jsx=mI;fg.jsxs=mI;iI.exports=fg;var g=iI.exports,gI={exports:{}},Cr={},yI={exports:{}},wI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,O){var D=A.length;A.push(O);e:for(;0<D;){var M=D-1>>>1,H=A[M];if(0<s(H,O))A[M]=O,A[D]=H,D=M;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var O=A[0],D=A.pop();if(D!==O){A[0]=D;e:for(var M=0,H=A.length,Z=H>>>1;M<Z;){var F=2*(M+1)-1,Q=A[F],me=F+1,De=A[me];if(0>s(Q,D))me<H&&0>s(De,Q)?(A[M]=De,A[me]=D,M=me):(A[M]=Q,A[F]=D,M=F);else if(me<H&&0>s(De,D))A[M]=De,A[me]=D,M=me;else break e}}return O}function s(A,O){var D=A.sortIndex-O.sortIndex;return D!==0?D:A.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(A){for(var O=n(l);O!==null;){if(O.callback===null)r(l);else if(O.startTime<=A)r(l),O.sortIndex=O.expirationTime,e(c,O);else break;O=n(l)}}function C(A){if(m=!1,b(A),!p)if(n(c)!==null)p=!0,I(x);else{var O=n(l);O!==null&&$(C,O.startTime-A)}}function x(A,O){p=!1,m&&(m=!1,y(U),U=-1),f=!0;var D=h;try{for(b(O),d=n(c);d!==null&&(!(d.expirationTime>O)||A&&!R());){var M=d.callback;if(typeof M=="function"){d.callback=null,h=d.priorityLevel;var H=M(d.expirationTime<=O);O=t.unstable_now(),typeof H=="function"?d.callback=H:d===n(c)&&r(c),b(O)}else r(c);d=n(c)}if(d!==null)var Z=!0;else{var F=n(l);F!==null&&$(C,F.startTime-O),Z=!1}return Z}finally{d=null,h=D,f=!1}}var T=!1,N=null,U=-1,E=5,k=-1;function R(){return!(t.unstable_now()-k<E)}function j(){if(N!==null){var A=t.unstable_now();k=A;var O=!0;try{O=N(!0,A)}finally{O?L():(T=!1,N=null)}}else T=!1}var L;if(typeof w=="function")L=function(){w(j)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,S=B.port2;B.port1.onmessage=j,L=function(){S.postMessage(null)}}else L=function(){v(j,0)};function I(A){N=A,T||(T=!0,L())}function $(A,O){U=v(function(){A(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,I(x))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(A){switch(h){case 1:case 2:case 3:var O=3;break;default:O=h}var D=h;h=O;try{return A()}finally{h=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,O){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var D=h;h=A;try{return O()}finally{h=D}},t.unstable_scheduleCallback=function(A,O,D){var M=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?M+D:M):D=M,A){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=D+H,A={id:u++,callback:O,priorityLevel:A,startTime:D,expirationTime:H,sortIndex:-1},D>M?(A.sortIndex=D,e(l,A),n(c)===null&&A===n(l)&&(m?(y(U),U=-1):m=!0,$(C,D-M))):(A.sortIndex=H,e(c,A),p||f||(p=!0,I(x))),A},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(A){var O=h;return function(){var D=h;h=O;try{return A.apply(this,arguments)}finally{h=D}}}})(wI);yI.exports=wI;var o$=yI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a$=te,Er=o$;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bI=new Set,$d={};function ac(t,e){Tl(t,e),Tl(t+"Capture",e)}function Tl(t,e){for($d[t]=e,t=0;t<e.length;t++)bI.add(e[t])}var Ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),aw=Object.prototype.hasOwnProperty,c$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ex={},xx={};function l$(t){return aw.call(xx,t)?!0:aw.call(Ex,t)?!1:c$.test(t)?xx[t]=!0:(Ex[t]=!0,!1)}function u$(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function d$(t,e,n,r){if(e===null||typeof e>"u"||u$(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){cn[t]=new Bn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];cn[e]=new Bn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){cn[t]=new Bn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){cn[t]=new Bn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){cn[t]=new Bn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){cn[t]=new Bn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){cn[t]=new Bn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){cn[t]=new Bn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){cn[t]=new Bn(t,5,!1,t.toLowerCase(),null,!1,!1)});var t1=/[\-:]([a-z])/g;function n1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(t1,n1);cn[e]=new Bn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(t1,n1);cn[e]=new Bn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(t1,n1);cn[e]=new Bn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){cn[t]=new Bn(t,1,!1,t.toLowerCase(),null,!1,!1)});cn.xlinkHref=new Bn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){cn[t]=new Bn(t,1,!1,t.toLowerCase(),null,!0,!0)});function r1(t,e,n,r){var s=cn.hasOwnProperty(e)?cn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(d$(e,n,s,r)&&(n=null),r||s===null?l$(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Di=a$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Of=Symbol.for("react.element"),Gc=Symbol.for("react.portal"),Kc=Symbol.for("react.fragment"),s1=Symbol.for("react.strict_mode"),cw=Symbol.for("react.profiler"),vI=Symbol.for("react.provider"),EI=Symbol.for("react.context"),i1=Symbol.for("react.forward_ref"),lw=Symbol.for("react.suspense"),uw=Symbol.for("react.suspense_list"),o1=Symbol.for("react.memo"),no=Symbol.for("react.lazy"),xI=Symbol.for("react.offscreen"),Cx=Symbol.iterator;function du(t){return t===null||typeof t!="object"?null:(t=Cx&&t[Cx]||t["@@iterator"],typeof t=="function"?t:null)}var St=Object.assign,E0;function Vu(t){if(E0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);E0=e&&e[1]||""}return`
`+E0+t}var x0=!1;function C0(t,e){if(!t||x0)return"";x0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{x0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vu(t):""}function h$(t){switch(t.tag){case 5:return Vu(t.type);case 16:return Vu("Lazy");case 13:return Vu("Suspense");case 19:return Vu("SuspenseList");case 0:case 2:case 15:return t=C0(t.type,!1),t;case 11:return t=C0(t.type.render,!1),t;case 1:return t=C0(t.type,!0),t;default:return""}}function dw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Kc:return"Fragment";case Gc:return"Portal";case cw:return"Profiler";case s1:return"StrictMode";case lw:return"Suspense";case uw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case EI:return(t.displayName||"Context")+".Consumer";case vI:return(t._context.displayName||"Context")+".Provider";case i1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case o1:return e=t.displayName||null,e!==null?e:dw(t.type)||"Memo";case no:e=t._payload,t=t._init;try{return dw(t(e))}catch{}}return null}function f$(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dw(e);case 8:return e===s1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function CI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function p$(t){var e=CI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kf(t){t._valueTracker||(t._valueTracker=p$(t))}function _I(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=CI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function rm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hw(t,e){var n=e.checked;return St({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _x(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Bo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function SI(t,e){e=e.checked,e!=null&&r1(t,"checked",e,!1)}function fw(t,e){SI(t,e);var n=Bo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pw(t,e.type,n):e.hasOwnProperty("defaultValue")&&pw(t,e.type,Bo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pw(t,e,n){(e!=="number"||rm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gu=Array.isArray;function cl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Bo(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function mw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return St({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ax(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Gu(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Bo(n)}}function AI(t,e){var n=Bo(e.value),r=Bo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ix(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function II(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?II(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Rf,NI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Rf=Rf||document.createElement("div"),Rf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Rf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Dd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var od={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m$=["Webkit","ms","Moz","O"];Object.keys(od).forEach(function(t){m$.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),od[e]=od[t]})});function TI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||od.hasOwnProperty(t)&&od[t]?(""+e).trim():e+"px"}function PI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=TI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var g$=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yw(t,e){if(e){if(g$[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function ww(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bw=null;function a1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vw=null,ll=null,ul=null;function Nx(t){if(t=af(t)){if(typeof vw!="function")throw Error(K(280));var e=t.stateNode;e&&(e=wg(e),vw(t.stateNode,t.type,e))}}function OI(t){ll?ul?ul.push(t):ul=[t]:ll=t}function kI(){if(ll){var t=ll,e=ul;if(ul=ll=null,Nx(t),e)for(t=0;t<e.length;t++)Nx(e[t])}}function RI(t,e){return t(e)}function $I(){}var _0=!1;function DI(t,e,n){if(_0)return t(e,n);_0=!0;try{return RI(t,e,n)}finally{_0=!1,(ll!==null||ul!==null)&&($I(),kI())}}function Ud(t,e){var n=t.stateNode;if(n===null)return null;var r=wg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var Ew=!1;if(Ni)try{var hu={};Object.defineProperty(hu,"passive",{get:function(){Ew=!0}}),window.addEventListener("test",hu,hu),window.removeEventListener("test",hu,hu)}catch{Ew=!1}function y$(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var ad=!1,sm=null,im=!1,xw=null,w$={onError:function(t){ad=!0,sm=t}};function b$(t,e,n,r,s,i,o,a,c){ad=!1,sm=null,y$.apply(w$,arguments)}function v$(t,e,n,r,s,i,o,a,c){if(b$.apply(this,arguments),ad){if(ad){var l=sm;ad=!1,sm=null}else throw Error(K(198));im||(im=!0,xw=l)}}function cc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function UI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Tx(t){if(cc(t)!==t)throw Error(K(188))}function E$(t){var e=t.alternate;if(!e){if(e=cc(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Tx(s),t;if(i===r)return Tx(s),e;i=i.sibling}throw Error(K(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function jI(t){return t=E$(t),t!==null?LI(t):null}function LI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LI(t);if(e!==null)return e;t=t.sibling}return null}var MI=Er.unstable_scheduleCallback,Px=Er.unstable_cancelCallback,x$=Er.unstable_shouldYield,C$=Er.unstable_requestPaint,Pt=Er.unstable_now,_$=Er.unstable_getCurrentPriorityLevel,c1=Er.unstable_ImmediatePriority,BI=Er.unstable_UserBlockingPriority,om=Er.unstable_NormalPriority,S$=Er.unstable_LowPriority,FI=Er.unstable_IdlePriority,pg=null,qs=null;function A$(t){if(qs&&typeof qs.onCommitFiberRoot=="function")try{qs.onCommitFiberRoot(pg,t,void 0,(t.current.flags&128)===128)}catch{}}var gs=Math.clz32?Math.clz32:T$,I$=Math.log,N$=Math.LN2;function T$(t){return t>>>=0,t===0?32:31-(I$(t)/N$|0)|0}var $f=64,Df=4194304;function Ku(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function am(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ku(a):(i&=o,i!==0&&(r=Ku(i)))}else o=n&~s,o!==0?r=Ku(o):i!==0&&(r=Ku(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gs(e),s=1<<n,r|=t[n],e&=~s;return r}function P$(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O$(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-gs(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=P$(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function Cw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zI(){var t=$f;return $f<<=1,!($f&4194240)&&($f=64),t}function S0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function sf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gs(e),t[e]=n}function k$(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-gs(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function l1(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gs(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var nt=0;function qI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var HI,u1,WI,VI,GI,_w=!1,Uf=[],Ao=null,Io=null,No=null,jd=new Map,Ld=new Map,uo=[],R$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ox(t,e){switch(t){case"focusin":case"focusout":Ao=null;break;case"dragenter":case"dragleave":Io=null;break;case"mouseover":case"mouseout":No=null;break;case"pointerover":case"pointerout":jd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ld.delete(e.pointerId)}}function fu(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=af(e),e!==null&&u1(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function $$(t,e,n,r,s){switch(e){case"focusin":return Ao=fu(Ao,t,e,n,r,s),!0;case"dragenter":return Io=fu(Io,t,e,n,r,s),!0;case"mouseover":return No=fu(No,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return jd.set(i,fu(jd.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ld.set(i,fu(Ld.get(i)||null,t,e,n,r,s)),!0}return!1}function KI(t){var e=wa(t.target);if(e!==null){var n=cc(e);if(n!==null){if(e=n.tag,e===13){if(e=UI(n),e!==null){t.blockedOn=e,GI(t.priority,function(){WI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);bw=r,n.target.dispatchEvent(r),bw=null}else return e=af(n),e!==null&&u1(e),t.blockedOn=n,!1;e.shift()}return!0}function kx(t,e,n){kp(t)&&n.delete(e)}function D$(){_w=!1,Ao!==null&&kp(Ao)&&(Ao=null),Io!==null&&kp(Io)&&(Io=null),No!==null&&kp(No)&&(No=null),jd.forEach(kx),Ld.forEach(kx)}function pu(t,e){t.blockedOn===e&&(t.blockedOn=null,_w||(_w=!0,Er.unstable_scheduleCallback(Er.unstable_NormalPriority,D$)))}function Md(t){function e(s){return pu(s,t)}if(0<Uf.length){pu(Uf[0],t);for(var n=1;n<Uf.length;n++){var r=Uf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ao!==null&&pu(Ao,t),Io!==null&&pu(Io,t),No!==null&&pu(No,t),jd.forEach(e),Ld.forEach(e),n=0;n<uo.length;n++)r=uo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<uo.length&&(n=uo[0],n.blockedOn===null);)KI(n),n.blockedOn===null&&uo.shift()}var dl=Di.ReactCurrentBatchConfig,cm=!0;function U$(t,e,n,r){var s=nt,i=dl.transition;dl.transition=null;try{nt=1,d1(t,e,n,r)}finally{nt=s,dl.transition=i}}function j$(t,e,n,r){var s=nt,i=dl.transition;dl.transition=null;try{nt=4,d1(t,e,n,r)}finally{nt=s,dl.transition=i}}function d1(t,e,n,r){if(cm){var s=Sw(t,e,n,r);if(s===null)D0(t,e,r,lm,n),Ox(t,r);else if($$(s,t,e,n,r))r.stopPropagation();else if(Ox(t,r),e&4&&-1<R$.indexOf(t)){for(;s!==null;){var i=af(s);if(i!==null&&HI(i),i=Sw(t,e,n,r),i===null&&D0(t,e,r,lm,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else D0(t,e,r,null,n)}}var lm=null;function Sw(t,e,n,r){if(lm=null,t=a1(r),t=wa(t),t!==null)if(e=cc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=UI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return lm=t,null}function YI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_$()){case c1:return 1;case BI:return 4;case om:case S$:return 16;case FI:return 536870912;default:return 16}default:return 16}}var Eo=null,h1=null,Rp=null;function ZI(){if(Rp)return Rp;var t,e=h1,n=e.length,r,s="value"in Eo?Eo.value:Eo.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Rp=s.slice(t,1<r?1-r:void 0)}function $p(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jf(){return!0}function Rx(){return!1}function _r(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jf:Rx,this.isPropagationStopped=Rx,this}return St(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jf)},persist:function(){},isPersistent:jf}),e}var Jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},f1=_r(Jl),of=St({},Jl,{view:0,detail:0}),L$=_r(of),A0,I0,mu,mg=St({},of,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:p1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mu&&(mu&&t.type==="mousemove"?(A0=t.screenX-mu.screenX,I0=t.screenY-mu.screenY):I0=A0=0,mu=t),A0)},movementY:function(t){return"movementY"in t?t.movementY:I0}}),$x=_r(mg),M$=St({},mg,{dataTransfer:0}),B$=_r(M$),F$=St({},of,{relatedTarget:0}),N0=_r(F$),z$=St({},Jl,{animationName:0,elapsedTime:0,pseudoElement:0}),q$=_r(z$),H$=St({},Jl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),W$=_r(H$),V$=St({},Jl,{data:0}),Dx=_r(V$),G$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Z$(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Y$[t])?!!e[t]:!1}function p1(){return Z$}var J$=St({},of,{key:function(t){if(t.key){var e=G$[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$p(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?K$[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:p1,charCode:function(t){return t.type==="keypress"?$p(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$p(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Q$=_r(J$),X$=St({},mg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ux=_r(X$),e4=St({},of,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:p1}),t4=_r(e4),n4=St({},Jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),r4=_r(n4),s4=St({},mg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),i4=_r(s4),o4=[9,13,27,32],m1=Ni&&"CompositionEvent"in window,cd=null;Ni&&"documentMode"in document&&(cd=document.documentMode);var a4=Ni&&"TextEvent"in window&&!cd,JI=Ni&&(!m1||cd&&8<cd&&11>=cd),jx=" ",Lx=!1;function QI(t,e){switch(t){case"keyup":return o4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yc=!1;function c4(t,e){switch(t){case"compositionend":return XI(e);case"keypress":return e.which!==32?null:(Lx=!0,jx);case"textInput":return t=e.data,t===jx&&Lx?null:t;default:return null}}function l4(t,e){if(Yc)return t==="compositionend"||!m1&&QI(t,e)?(t=ZI(),Rp=h1=Eo=null,Yc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JI&&e.locale!=="ko"?null:e.data;default:return null}}var u4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!u4[t.type]:e==="textarea"}function eN(t,e,n,r){OI(r),e=um(e,"onChange"),0<e.length&&(n=new f1("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ld=null,Bd=null;function d4(t){dN(t,0)}function gg(t){var e=Qc(t);if(_I(e))return t}function h4(t,e){if(t==="change")return e}var tN=!1;if(Ni){var T0;if(Ni){var P0="oninput"in document;if(!P0){var Bx=document.createElement("div");Bx.setAttribute("oninput","return;"),P0=typeof Bx.oninput=="function"}T0=P0}else T0=!1;tN=T0&&(!document.documentMode||9<document.documentMode)}function Fx(){ld&&(ld.detachEvent("onpropertychange",nN),Bd=ld=null)}function nN(t){if(t.propertyName==="value"&&gg(Bd)){var e=[];eN(e,Bd,t,a1(t)),DI(d4,e)}}function f4(t,e,n){t==="focusin"?(Fx(),ld=e,Bd=n,ld.attachEvent("onpropertychange",nN)):t==="focusout"&&Fx()}function p4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gg(Bd)}function m4(t,e){if(t==="click")return gg(e)}function g4(t,e){if(t==="input"||t==="change")return gg(e)}function y4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Es=typeof Object.is=="function"?Object.is:y4;function Fd(t,e){if(Es(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!aw.call(e,s)||!Es(t[s],e[s]))return!1}return!0}function zx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qx(t,e){var n=zx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zx(n)}}function rN(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rN(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sN(){for(var t=window,e=rm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rm(t.document)}return e}function g1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function w4(t){var e=sN(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&rN(n.ownerDocument.documentElement,n)){if(r!==null&&g1(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=qx(n,i);var o=qx(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var b4=Ni&&"documentMode"in document&&11>=document.documentMode,Zc=null,Aw=null,ud=null,Iw=!1;function Hx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Iw||Zc==null||Zc!==rm(r)||(r=Zc,"selectionStart"in r&&g1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ud&&Fd(ud,r)||(ud=r,r=um(Aw,"onSelect"),0<r.length&&(e=new f1("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zc)))}function Lf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Jc={animationend:Lf("Animation","AnimationEnd"),animationiteration:Lf("Animation","AnimationIteration"),animationstart:Lf("Animation","AnimationStart"),transitionend:Lf("Transition","TransitionEnd")},O0={},iN={};Ni&&(iN=document.createElement("div").style,"AnimationEvent"in window||(delete Jc.animationend.animation,delete Jc.animationiteration.animation,delete Jc.animationstart.animation),"TransitionEvent"in window||delete Jc.transitionend.transition);function yg(t){if(O0[t])return O0[t];if(!Jc[t])return t;var e=Jc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in iN)return O0[t]=e[n];return t}var oN=yg("animationend"),aN=yg("animationiteration"),cN=yg("animationstart"),lN=yg("transitionend"),uN=new Map,Wx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qo(t,e){uN.set(t,e),ac(e,[t])}for(var k0=0;k0<Wx.length;k0++){var R0=Wx[k0],v4=R0.toLowerCase(),E4=R0[0].toUpperCase()+R0.slice(1);Qo(v4,"on"+E4)}Qo(oN,"onAnimationEnd");Qo(aN,"onAnimationIteration");Qo(cN,"onAnimationStart");Qo("dblclick","onDoubleClick");Qo("focusin","onFocus");Qo("focusout","onBlur");Qo(lN,"onTransitionEnd");Tl("onMouseEnter",["mouseout","mouseover"]);Tl("onMouseLeave",["mouseout","mouseover"]);Tl("onPointerEnter",["pointerout","pointerover"]);Tl("onPointerLeave",["pointerout","pointerover"]);ac("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ac("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ac("onBeforeInput",["compositionend","keypress","textInput","paste"]);ac("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ac("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ac("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yu));function Vx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,v$(r,e,void 0,t),t.currentTarget=null}function dN(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Vx(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Vx(s,a,l),i=c}}}if(im)throw t=xw,im=!1,xw=null,t}function pt(t,e){var n=e[kw];n===void 0&&(n=e[kw]=new Set);var r=t+"__bubble";n.has(r)||(hN(e,t,2,!1),n.add(r))}function $0(t,e,n){var r=0;e&&(r|=4),hN(n,t,r,e)}var Mf="_reactListening"+Math.random().toString(36).slice(2);function zd(t){if(!t[Mf]){t[Mf]=!0,bI.forEach(function(n){n!=="selectionchange"&&(x4.has(n)||$0(n,!1,t),$0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Mf]||(e[Mf]=!0,$0("selectionchange",!1,e))}}function hN(t,e,n,r){switch(YI(e)){case 1:var s=U$;break;case 4:s=j$;break;default:s=d1}n=s.bind(null,e,n,t),s=void 0,!Ew||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function D0(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=wa(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}DI(function(){var l=i,u=a1(n),d=[];e:{var h=uN.get(t);if(h!==void 0){var f=f1,p=t;switch(t){case"keypress":if($p(n)===0)break e;case"keydown":case"keyup":f=Q$;break;case"focusin":p="focus",f=N0;break;case"focusout":p="blur",f=N0;break;case"beforeblur":case"afterblur":f=N0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=$x;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=B$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=t4;break;case oN:case aN:case cN:f=q$;break;case lN:f=r4;break;case"scroll":f=L$;break;case"wheel":f=i4;break;case"copy":case"cut":case"paste":f=W$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Ux}var m=(e&4)!==0,v=!m&&t==="scroll",y=m?h!==null?h+"Capture":null:h;m=[];for(var w=l,b;w!==null;){b=w;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,y!==null&&(C=Ud(w,y),C!=null&&m.push(qd(w,C,b)))),v)break;w=w.return}0<m.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==bw&&(p=n.relatedTarget||n.fromElement)&&(wa(p)||p[Ti]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?wa(p):null,p!==null&&(v=cc(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(m=$x,C="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(m=Ux,C="onPointerLeave",y="onPointerEnter",w="pointer"),v=f==null?h:Qc(f),b=p==null?h:Qc(p),h=new m(C,w+"leave",f,n,u),h.target=v,h.relatedTarget=b,C=null,wa(u)===l&&(m=new m(y,w+"enter",p,n,u),m.target=b,m.relatedTarget=v,C=m),v=C,f&&p)t:{for(m=f,y=p,w=0,b=m;b;b=vc(b))w++;for(b=0,C=y;C;C=vc(C))b++;for(;0<w-b;)m=vc(m),w--;for(;0<b-w;)y=vc(y),b--;for(;w--;){if(m===y||y!==null&&m===y.alternate)break t;m=vc(m),y=vc(y)}m=null}else m=null;f!==null&&Gx(d,h,f,m,!1),p!==null&&v!==null&&Gx(d,v,p,m,!0)}}e:{if(h=l?Qc(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var x=h4;else if(Mx(h))if(tN)x=g4;else{x=p4;var T=f4}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=m4);if(x&&(x=x(t,l))){eN(d,x,n,u);break e}T&&T(t,h,l),t==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&pw(h,"number",h.value)}switch(T=l?Qc(l):window,t){case"focusin":(Mx(T)||T.contentEditable==="true")&&(Zc=T,Aw=l,ud=null);break;case"focusout":ud=Aw=Zc=null;break;case"mousedown":Iw=!0;break;case"contextmenu":case"mouseup":case"dragend":Iw=!1,Hx(d,n,u);break;case"selectionchange":if(b4)break;case"keydown":case"keyup":Hx(d,n,u)}var N;if(m1)e:{switch(t){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else Yc?QI(t,n)&&(U="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(U="onCompositionStart");U&&(JI&&n.locale!=="ko"&&(Yc||U!=="onCompositionStart"?U==="onCompositionEnd"&&Yc&&(N=ZI()):(Eo=u,h1="value"in Eo?Eo.value:Eo.textContent,Yc=!0)),T=um(l,U),0<T.length&&(U=new Dx(U,t,null,n,u),d.push({event:U,listeners:T}),N?U.data=N:(N=XI(n),N!==null&&(U.data=N)))),(N=a4?c4(t,n):l4(t,n))&&(l=um(l,"onBeforeInput"),0<l.length&&(u=new Dx("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=N))}dN(d,e)})}function qd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function um(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ud(t,n),i!=null&&r.unshift(qd(t,i,s)),i=Ud(t,e),i!=null&&r.push(qd(t,i,s))),t=t.return}return r}function vc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gx(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=Ud(n,i),c!=null&&o.unshift(qd(n,c,a))):s||(c=Ud(n,i),c!=null&&o.push(qd(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var C4=/\r\n?/g,_4=/\u0000|\uFFFD/g;function Kx(t){return(typeof t=="string"?t:""+t).replace(C4,`
`).replace(_4,"")}function Bf(t,e,n){if(e=Kx(e),Kx(t)!==e&&n)throw Error(K(425))}function dm(){}var Nw=null,Tw=null;function Pw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ow=typeof setTimeout=="function"?setTimeout:void 0,S4=typeof clearTimeout=="function"?clearTimeout:void 0,Yx=typeof Promise=="function"?Promise:void 0,A4=typeof queueMicrotask=="function"?queueMicrotask:typeof Yx<"u"?function(t){return Yx.resolve(null).then(t).catch(I4)}:Ow;function I4(t){setTimeout(function(){throw t})}function U0(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Md(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Md(e)}function To(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ql=Math.random().toString(36).slice(2),Fs="__reactFiber$"+Ql,Hd="__reactProps$"+Ql,Ti="__reactContainer$"+Ql,kw="__reactEvents$"+Ql,N4="__reactListeners$"+Ql,T4="__reactHandles$"+Ql;function wa(t){var e=t[Fs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ti]||n[Fs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Zx(t);t!==null;){if(n=t[Fs])return n;t=Zx(t)}return e}t=n,n=t.parentNode}return null}function af(t){return t=t[Fs]||t[Ti],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function wg(t){return t[Hd]||null}var Rw=[],Xc=-1;function Xo(t){return{current:t}}function yt(t){0>Xc||(t.current=Rw[Xc],Rw[Xc]=null,Xc--)}function dt(t,e){Xc++,Rw[Xc]=t.current,t.current=e}var Fo={},Nn=Xo(Fo),nr=Xo(!1),za=Fo;function Pl(t,e){var n=t.type.contextTypes;if(!n)return Fo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rr(t){return t=t.childContextTypes,t!=null}function hm(){yt(nr),yt(Nn)}function Jx(t,e,n){if(Nn.current!==Fo)throw Error(K(168));dt(Nn,e),dt(nr,n)}function fN(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(K(108,f$(t)||"Unknown",s));return St({},n,r)}function fm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fo,za=Nn.current,dt(Nn,t),dt(nr,nr.current),!0}function Qx(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=fN(t,e,za),r.__reactInternalMemoizedMergedChildContext=t,yt(nr),yt(Nn),dt(Nn,t)):yt(nr),dt(nr,n)}var pi=null,bg=!1,j0=!1;function pN(t){pi===null?pi=[t]:pi.push(t)}function P4(t){bg=!0,pN(t)}function ea(){if(!j0&&pi!==null){j0=!0;var t=0,e=nt;try{var n=pi;for(nt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pi=null,bg=!1}catch(s){throw pi!==null&&(pi=pi.slice(t+1)),MI(c1,ea),s}finally{nt=e,j0=!1}}return null}var el=[],tl=0,pm=null,mm=0,jr=[],Lr=0,qa=null,bi=1,vi="";function da(t,e){el[tl++]=mm,el[tl++]=pm,pm=t,mm=e}function mN(t,e,n){jr[Lr++]=bi,jr[Lr++]=vi,jr[Lr++]=qa,qa=t;var r=bi;t=vi;var s=32-gs(r)-1;r&=~(1<<s),n+=1;var i=32-gs(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,bi=1<<32-gs(e)+s|n<<s|r,vi=i+t}else bi=1<<i|n<<s|r,vi=t}function y1(t){t.return!==null&&(da(t,1),mN(t,1,0))}function w1(t){for(;t===pm;)pm=el[--tl],el[tl]=null,mm=el[--tl],el[tl]=null;for(;t===qa;)qa=jr[--Lr],jr[Lr]=null,vi=jr[--Lr],jr[Lr]=null,bi=jr[--Lr],jr[Lr]=null}var vr=null,wr=null,bt=!1,ls=null;function gN(t,e){var n=Mr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Xx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vr=t,wr=To(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vr=t,wr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qa!==null?{id:bi,overflow:vi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vr=t,wr=null,!0):!1;default:return!1}}function $w(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dw(t){if(bt){var e=wr;if(e){var n=e;if(!Xx(t,e)){if($w(t))throw Error(K(418));e=To(n.nextSibling);var r=vr;e&&Xx(t,e)?gN(r,n):(t.flags=t.flags&-4097|2,bt=!1,vr=t)}}else{if($w(t))throw Error(K(418));t.flags=t.flags&-4097|2,bt=!1,vr=t}}}function eC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vr=t}function Ff(t){if(t!==vr)return!1;if(!bt)return eC(t),bt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Pw(t.type,t.memoizedProps)),e&&(e=wr)){if($w(t))throw yN(),Error(K(418));for(;e;)gN(t,e),e=To(e.nextSibling)}if(eC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wr=To(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wr=null}}else wr=vr?To(t.stateNode.nextSibling):null;return!0}function yN(){for(var t=wr;t;)t=To(t.nextSibling)}function Ol(){wr=vr=null,bt=!1}function b1(t){ls===null?ls=[t]:ls.push(t)}var O4=Di.ReactCurrentBatchConfig;function gu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function zf(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tC(t){var e=t._init;return e(t._payload)}function wN(t){function e(y,w){if(t){var b=y.deletions;b===null?(y.deletions=[w],y.flags|=16):b.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function s(y,w){return y=Ro(y,w),y.index=0,y.sibling=null,y}function i(y,w,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<w?(y.flags|=2,w):b):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,w,b,C){return w===null||w.tag!==6?(w=H0(b,y.mode,C),w.return=y,w):(w=s(w,b),w.return=y,w)}function c(y,w,b,C){var x=b.type;return x===Kc?u(y,w,b.props.children,C,b.key):w!==null&&(w.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===no&&tC(x)===w.type)?(C=s(w,b.props),C.ref=gu(y,w,b),C.return=y,C):(C=Fp(b.type,b.key,b.props,null,y.mode,C),C.ref=gu(y,w,b),C.return=y,C)}function l(y,w,b,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=W0(b,y.mode,C),w.return=y,w):(w=s(w,b.children||[]),w.return=y,w)}function u(y,w,b,C,x){return w===null||w.tag!==7?(w=Ua(b,y.mode,C,x),w.return=y,w):(w=s(w,b),w.return=y,w)}function d(y,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=H0(""+w,y.mode,b),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Of:return b=Fp(w.type,w.key,w.props,null,y.mode,b),b.ref=gu(y,null,w),b.return=y,b;case Gc:return w=W0(w,y.mode,b),w.return=y,w;case no:var C=w._init;return d(y,C(w._payload),b)}if(Gu(w)||du(w))return w=Ua(w,y.mode,b,null),w.return=y,w;zf(y,w)}return null}function h(y,w,b,C){var x=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return x!==null?null:a(y,w,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Of:return b.key===x?c(y,w,b,C):null;case Gc:return b.key===x?l(y,w,b,C):null;case no:return x=b._init,h(y,w,x(b._payload),C)}if(Gu(b)||du(b))return x!==null?null:u(y,w,b,C,null);zf(y,b)}return null}function f(y,w,b,C,x){if(typeof C=="string"&&C!==""||typeof C=="number")return y=y.get(b)||null,a(w,y,""+C,x);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Of:return y=y.get(C.key===null?b:C.key)||null,c(w,y,C,x);case Gc:return y=y.get(C.key===null?b:C.key)||null,l(w,y,C,x);case no:var T=C._init;return f(y,w,b,T(C._payload),x)}if(Gu(C)||du(C))return y=y.get(b)||null,u(w,y,C,x,null);zf(w,C)}return null}function p(y,w,b,C){for(var x=null,T=null,N=w,U=w=0,E=null;N!==null&&U<b.length;U++){N.index>U?(E=N,N=null):E=N.sibling;var k=h(y,N,b[U],C);if(k===null){N===null&&(N=E);break}t&&N&&k.alternate===null&&e(y,N),w=i(k,w,U),T===null?x=k:T.sibling=k,T=k,N=E}if(U===b.length)return n(y,N),bt&&da(y,U),x;if(N===null){for(;U<b.length;U++)N=d(y,b[U],C),N!==null&&(w=i(N,w,U),T===null?x=N:T.sibling=N,T=N);return bt&&da(y,U),x}for(N=r(y,N);U<b.length;U++)E=f(N,y,U,b[U],C),E!==null&&(t&&E.alternate!==null&&N.delete(E.key===null?U:E.key),w=i(E,w,U),T===null?x=E:T.sibling=E,T=E);return t&&N.forEach(function(R){return e(y,R)}),bt&&da(y,U),x}function m(y,w,b,C){var x=du(b);if(typeof x!="function")throw Error(K(150));if(b=x.call(b),b==null)throw Error(K(151));for(var T=x=null,N=w,U=w=0,E=null,k=b.next();N!==null&&!k.done;U++,k=b.next()){N.index>U?(E=N,N=null):E=N.sibling;var R=h(y,N,k.value,C);if(R===null){N===null&&(N=E);break}t&&N&&R.alternate===null&&e(y,N),w=i(R,w,U),T===null?x=R:T.sibling=R,T=R,N=E}if(k.done)return n(y,N),bt&&da(y,U),x;if(N===null){for(;!k.done;U++,k=b.next())k=d(y,k.value,C),k!==null&&(w=i(k,w,U),T===null?x=k:T.sibling=k,T=k);return bt&&da(y,U),x}for(N=r(y,N);!k.done;U++,k=b.next())k=f(N,y,U,k.value,C),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?U:k.key),w=i(k,w,U),T===null?x=k:T.sibling=k,T=k);return t&&N.forEach(function(j){return e(y,j)}),bt&&da(y,U),x}function v(y,w,b,C){if(typeof b=="object"&&b!==null&&b.type===Kc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Of:e:{for(var x=b.key,T=w;T!==null;){if(T.key===x){if(x=b.type,x===Kc){if(T.tag===7){n(y,T.sibling),w=s(T,b.props.children),w.return=y,y=w;break e}}else if(T.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===no&&tC(x)===T.type){n(y,T.sibling),w=s(T,b.props),w.ref=gu(y,T,b),w.return=y,y=w;break e}n(y,T);break}else e(y,T);T=T.sibling}b.type===Kc?(w=Ua(b.props.children,y.mode,C,b.key),w.return=y,y=w):(C=Fp(b.type,b.key,b.props,null,y.mode,C),C.ref=gu(y,w,b),C.return=y,y=C)}return o(y);case Gc:e:{for(T=b.key;w!==null;){if(w.key===T)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(y,w.sibling),w=s(w,b.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=W0(b,y.mode,C),w.return=y,y=w}return o(y);case no:return T=b._init,v(y,w,T(b._payload),C)}if(Gu(b))return p(y,w,b,C);if(du(b))return m(y,w,b,C);zf(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(y,w.sibling),w=s(w,b),w.return=y,y=w):(n(y,w),w=H0(b,y.mode,C),w.return=y,y=w),o(y)):n(y,w)}return v}var kl=wN(!0),bN=wN(!1),gm=Xo(null),ym=null,nl=null,v1=null;function E1(){v1=nl=ym=null}function x1(t){var e=gm.current;yt(gm),t._currentValue=e}function Uw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hl(t,e){ym=t,v1=nl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(er=!0),t.firstContext=null)}function qr(t){var e=t._currentValue;if(v1!==t)if(t={context:t,memoizedValue:e,next:null},nl===null){if(ym===null)throw Error(K(308));nl=t,ym.dependencies={lanes:0,firstContext:t}}else nl=nl.next=t;return e}var ba=null;function C1(t){ba===null?ba=[t]:ba.push(t)}function vN(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,C1(e)):(n.next=s.next,s.next=n),e.interleaved=n,Pi(t,r)}function Pi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ro=!1;function _1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function EN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Po(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Pi(t,n)}return s=r.interleaved,s===null?(e.next=e,C1(r)):(e.next=s.next,s.next=e),r.interleaved=e,Pi(t,n)}function Dp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,l1(t,n)}}function nC(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wm(t,e,n,r){var s=t.updateQueue;ro=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=St({},d,h);break e;case 2:ro=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Wa|=o,t.lanes=o,t.memoizedState=d}}function rC(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(K(191,s));s.call(r)}}}var cf={},Hs=Xo(cf),Wd=Xo(cf),Vd=Xo(cf);function va(t){if(t===cf)throw Error(K(174));return t}function S1(t,e){switch(dt(Vd,e),dt(Wd,t),dt(Hs,cf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gw(e,t)}yt(Hs),dt(Hs,e)}function Rl(){yt(Hs),yt(Wd),yt(Vd)}function xN(t){va(Vd.current);var e=va(Hs.current),n=gw(e,t.type);e!==n&&(dt(Wd,t),dt(Hs,n))}function A1(t){Wd.current===t&&(yt(Hs),yt(Wd))}var Ct=Xo(0);function bm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var L0=[];function I1(){for(var t=0;t<L0.length;t++)L0[t]._workInProgressVersionPrimary=null;L0.length=0}var Up=Di.ReactCurrentDispatcher,M0=Di.ReactCurrentBatchConfig,Ha=0,_t=null,Bt=null,Vt=null,vm=!1,dd=!1,Gd=0,k4=0;function mn(){throw Error(K(321))}function N1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Es(t[n],e[n]))return!1;return!0}function T1(t,e,n,r,s,i){if(Ha=i,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Up.current=t===null||t.memoizedState===null?U4:j4,t=n(r,s),dd){i=0;do{if(dd=!1,Gd=0,25<=i)throw Error(K(301));i+=1,Vt=Bt=null,e.updateQueue=null,Up.current=L4,t=n(r,s)}while(dd)}if(Up.current=Em,e=Bt!==null&&Bt.next!==null,Ha=0,Vt=Bt=_t=null,vm=!1,e)throw Error(K(300));return t}function P1(){var t=Gd!==0;return Gd=0,t}function ks(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?_t.memoizedState=Vt=t:Vt=Vt.next=t,Vt}function Hr(){if(Bt===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=Bt.next;var e=Vt===null?_t.memoizedState:Vt.next;if(e!==null)Vt=e,Bt=t;else{if(t===null)throw Error(K(310));Bt=t,t={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Vt===null?_t.memoizedState=Vt=t:Vt=Vt.next=t}return Vt}function Kd(t,e){return typeof e=="function"?e(t):e}function B0(t){var e=Hr(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=Bt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((Ha&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,_t.lanes|=u,Wa|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Es(r,e.memoizedState)||(er=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,_t.lanes|=i,Wa|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function F0(t){var e=Hr(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Es(i,e.memoizedState)||(er=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function CN(){}function _N(t,e){var n=_t,r=Hr(),s=e(),i=!Es(r.memoizedState,s);if(i&&(r.memoizedState=s,er=!0),r=r.queue,O1(IN.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Vt!==null&&Vt.memoizedState.tag&1){if(n.flags|=2048,Yd(9,AN.bind(null,n,r,s,e),void 0,null),Zt===null)throw Error(K(349));Ha&30||SN(n,e,s)}return s}function SN(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AN(t,e,n,r){e.value=n,e.getSnapshot=r,NN(e)&&TN(t)}function IN(t,e,n){return n(function(){NN(e)&&TN(t)})}function NN(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Es(t,n)}catch{return!0}}function TN(t){var e=Pi(t,1);e!==null&&ys(e,t,1,-1)}function sC(t){var e=ks();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kd,lastRenderedState:t},e.queue=t,t=t.dispatch=D4.bind(null,_t,t),[e.memoizedState,t]}function Yd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function PN(){return Hr().memoizedState}function jp(t,e,n,r){var s=ks();_t.flags|=t,s.memoizedState=Yd(1|e,n,void 0,r===void 0?null:r)}function vg(t,e,n,r){var s=Hr();r=r===void 0?null:r;var i=void 0;if(Bt!==null){var o=Bt.memoizedState;if(i=o.destroy,r!==null&&N1(r,o.deps)){s.memoizedState=Yd(e,n,i,r);return}}_t.flags|=t,s.memoizedState=Yd(1|e,n,i,r)}function iC(t,e){return jp(8390656,8,t,e)}function O1(t,e){return vg(2048,8,t,e)}function ON(t,e){return vg(4,2,t,e)}function kN(t,e){return vg(4,4,t,e)}function RN(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $N(t,e,n){return n=n!=null?n.concat([t]):null,vg(4,4,RN.bind(null,e,t),n)}function k1(){}function DN(t,e){var n=Hr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&N1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function UN(t,e){var n=Hr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&N1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jN(t,e,n){return Ha&21?(Es(n,e)||(n=zI(),_t.lanes|=n,Wa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,er=!0),t.memoizedState=n)}function R4(t,e){var n=nt;nt=n!==0&&4>n?n:4,t(!0);var r=M0.transition;M0.transition={};try{t(!1),e()}finally{nt=n,M0.transition=r}}function LN(){return Hr().memoizedState}function $4(t,e,n){var r=ko(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},MN(t))BN(e,n);else if(n=vN(t,e,n,r),n!==null){var s=$n();ys(n,t,r,s),FN(n,e,r)}}function D4(t,e,n){var r=ko(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(MN(t))BN(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Es(a,o)){var c=e.interleaved;c===null?(s.next=s,C1(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=vN(t,e,s,r),n!==null&&(s=$n(),ys(n,t,r,s),FN(n,e,r))}}function MN(t){var e=t.alternate;return t===_t||e!==null&&e===_t}function BN(t,e){dd=vm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function FN(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,l1(t,n)}}var Em={readContext:qr,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useInsertionEffect:mn,useLayoutEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useMutableSource:mn,useSyncExternalStore:mn,useId:mn,unstable_isNewReconciler:!1},U4={readContext:qr,useCallback:function(t,e){return ks().memoizedState=[t,e===void 0?null:e],t},useContext:qr,useEffect:iC,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jp(4194308,4,RN.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jp(4194308,4,t,e)},useInsertionEffect:function(t,e){return jp(4,2,t,e)},useMemo:function(t,e){var n=ks();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ks();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=$4.bind(null,_t,t),[r.memoizedState,t]},useRef:function(t){var e=ks();return t={current:t},e.memoizedState=t},useState:sC,useDebugValue:k1,useDeferredValue:function(t){return ks().memoizedState=t},useTransition:function(){var t=sC(!1),e=t[0];return t=R4.bind(null,t[1]),ks().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_t,s=ks();if(bt){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),Zt===null)throw Error(K(349));Ha&30||SN(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,iC(IN.bind(null,r,i,t),[t]),r.flags|=2048,Yd(9,AN.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ks(),e=Zt.identifierPrefix;if(bt){var n=vi,r=bi;n=(r&~(1<<32-gs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Gd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=k4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},j4={readContext:qr,useCallback:DN,useContext:qr,useEffect:O1,useImperativeHandle:$N,useInsertionEffect:ON,useLayoutEffect:kN,useMemo:UN,useReducer:B0,useRef:PN,useState:function(){return B0(Kd)},useDebugValue:k1,useDeferredValue:function(t){var e=Hr();return jN(e,Bt.memoizedState,t)},useTransition:function(){var t=B0(Kd)[0],e=Hr().memoizedState;return[t,e]},useMutableSource:CN,useSyncExternalStore:_N,useId:LN,unstable_isNewReconciler:!1},L4={readContext:qr,useCallback:DN,useContext:qr,useEffect:O1,useImperativeHandle:$N,useInsertionEffect:ON,useLayoutEffect:kN,useMemo:UN,useReducer:F0,useRef:PN,useState:function(){return F0(Kd)},useDebugValue:k1,useDeferredValue:function(t){var e=Hr();return Bt===null?e.memoizedState=t:jN(e,Bt.memoizedState,t)},useTransition:function(){var t=F0(Kd)[0],e=Hr().memoizedState;return[t,e]},useMutableSource:CN,useSyncExternalStore:_N,useId:LN,unstable_isNewReconciler:!1};function ss(t,e){if(t&&t.defaultProps){e=St({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:St({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Eg={isMounted:function(t){return(t=t._reactInternals)?cc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$n(),s=ko(t),i=xi(r,s);i.payload=e,n!=null&&(i.callback=n),e=Po(t,i,s),e!==null&&(ys(e,t,s,r),Dp(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$n(),s=ko(t),i=xi(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Po(t,i,s),e!==null&&(ys(e,t,s,r),Dp(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$n(),r=ko(t),s=xi(n,r);s.tag=2,e!=null&&(s.callback=e),e=Po(t,s,r),e!==null&&(ys(e,t,r,n),Dp(e,t,r))}};function oC(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Fd(n,r)||!Fd(s,i):!0}function zN(t,e,n){var r=!1,s=Fo,i=e.contextType;return typeof i=="object"&&i!==null?i=qr(i):(s=rr(e)?za:Nn.current,r=e.contextTypes,i=(r=r!=null)?Pl(t,s):Fo),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Eg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function aC(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Eg.enqueueReplaceState(e,e.state,null)}function Lw(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},_1(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=qr(i):(i=rr(e)?za:Nn.current,s.context=Pl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(jw(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Eg.enqueueReplaceState(s,s.state,null),wm(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function $l(t,e){try{var n="",r=e;do n+=h$(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function z0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Mw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var M4=typeof WeakMap=="function"?WeakMap:Map;function qN(t,e,n){n=xi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cm||(Cm=!0,Yw=r),Mw(t,e)},n}function HN(t,e,n){n=xi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Mw(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Mw(t,e),typeof r!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function cC(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new M4;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=X4.bind(null,t,e,n),e.then(t,t))}function lC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uC(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xi(-1,1),e.tag=2,Po(n,e,1))),n.lanes|=1),t)}var B4=Di.ReactCurrentOwner,er=!1;function kn(t,e,n,r){e.child=t===null?bN(e,null,n,r):kl(e,t.child,n,r)}function dC(t,e,n,r,s){n=n.render;var i=e.ref;return hl(e,s),r=T1(t,e,n,r,i,s),n=P1(),t!==null&&!er?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Oi(t,e,s)):(bt&&n&&y1(e),e.flags|=1,kn(t,e,r,s),e.child)}function hC(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!B1(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,WN(t,e,i,r,s)):(t=Fp(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Fd,n(o,r)&&t.ref===e.ref)return Oi(t,e,s)}return e.flags|=1,t=Ro(i,r),t.ref=e.ref,t.return=e,e.child=t}function WN(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Fd(i,r)&&t.ref===e.ref)if(er=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(er=!0);else return e.lanes=t.lanes,Oi(t,e,s)}return Bw(t,e,n,r,s)}function VN(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(sl,pr),pr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,dt(sl,pr),pr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,dt(sl,pr),pr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,dt(sl,pr),pr|=r;return kn(t,e,s,n),e.child}function GN(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bw(t,e,n,r,s){var i=rr(n)?za:Nn.current;return i=Pl(e,i),hl(e,s),n=T1(t,e,n,r,i,s),r=P1(),t!==null&&!er?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Oi(t,e,s)):(bt&&r&&y1(e),e.flags|=1,kn(t,e,n,s),e.child)}function fC(t,e,n,r,s){if(rr(n)){var i=!0;fm(e)}else i=!1;if(hl(e,s),e.stateNode===null)Lp(t,e),zN(e,n,r),Lw(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=qr(l):(l=rr(n)?za:Nn.current,l=Pl(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&aC(e,o,r,l),ro=!1;var h=e.memoizedState;o.state=h,wm(e,r,o,s),c=e.memoizedState,a!==r||h!==c||nr.current||ro?(typeof u=="function"&&(jw(e,n,u,r),c=e.memoizedState),(a=ro||oC(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,EN(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:ss(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=qr(c):(c=rr(n)?za:Nn.current,c=Pl(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&aC(e,o,r,c),ro=!1,h=e.memoizedState,o.state=h,wm(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||nr.current||ro?(typeof f=="function"&&(jw(e,n,f,r),p=e.memoizedState),(l=ro||oC(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Fw(t,e,n,r,i,s)}function Fw(t,e,n,r,s,i){GN(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Qx(e,n,!1),Oi(t,e,i);r=e.stateNode,B4.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=kl(e,t.child,null,i),e.child=kl(e,null,a,i)):kn(t,e,a,i),e.memoizedState=r.state,s&&Qx(e,n,!0),e.child}function KN(t){var e=t.stateNode;e.pendingContext?Jx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jx(t,e.context,!1),S1(t,e.containerInfo)}function pC(t,e,n,r,s){return Ol(),b1(s),e.flags|=256,kn(t,e,n,r),e.child}var zw={dehydrated:null,treeContext:null,retryLane:0};function qw(t){return{baseLanes:t,cachePool:null,transitions:null}}function YN(t,e,n){var r=e.pendingProps,s=Ct.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),dt(Ct,s&1),t===null)return Dw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=_g(o,r,0,null),t=Ua(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=qw(n),e.memoizedState=zw,t):R1(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return F4(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ro(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ro(a,i):(i=Ua(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?qw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=zw,r}return i=t.child,t=i.sibling,r=Ro(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function R1(t,e){return e=_g({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qf(t,e,n,r){return r!==null&&b1(r),kl(e,t.child,null,n),t=R1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function F4(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=z0(Error(K(422))),qf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=_g({mode:"visible",children:r.children},s,0,null),i=Ua(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&kl(e,t.child,null,o),e.child.memoizedState=qw(o),e.memoizedState=zw,i);if(!(e.mode&1))return qf(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(K(419)),r=z0(i,r,void 0),qf(t,e,o,r)}if(a=(o&t.childLanes)!==0,er||a){if(r=Zt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Pi(t,s),ys(r,t,s,-1))}return M1(),r=z0(Error(K(421))),qf(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=e8.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,wr=To(s.nextSibling),vr=e,bt=!0,ls=null,t!==null&&(jr[Lr++]=bi,jr[Lr++]=vi,jr[Lr++]=qa,bi=t.id,vi=t.overflow,qa=e),e=R1(e,r.children),e.flags|=4096,e)}function mC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Uw(t.return,e,n)}function q0(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ZN(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(kn(t,e,r.children,n),r=Ct.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mC(t,n,e);else if(t.tag===19)mC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(dt(Ct,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&bm(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),q0(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&bm(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}q0(e,!0,n,null,i);break;case"together":q0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Oi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=Ro(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ro(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function z4(t,e,n){switch(e.tag){case 3:KN(e),Ol();break;case 5:xN(e);break;case 1:rr(e.type)&&fm(e);break;case 4:S1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;dt(gm,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(dt(Ct,Ct.current&1),e.flags|=128,null):n&e.child.childLanes?YN(t,e,n):(dt(Ct,Ct.current&1),t=Oi(t,e,n),t!==null?t.sibling:null);dt(Ct,Ct.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ZN(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),dt(Ct,Ct.current),r)break;return null;case 22:case 23:return e.lanes=0,VN(t,e,n)}return Oi(t,e,n)}var JN,Hw,QN,XN;JN=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hw=function(){};QN=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,va(Hs.current);var i=null;switch(n){case"input":s=hw(t,s),r=hw(t,r),i=[];break;case"select":s=St({},s,{value:void 0}),r=St({},r,{value:void 0}),i=[];break;case"textarea":s=mw(t,s),r=mw(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dm)}yw(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&($d.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&($d.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&pt("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};XN=function(t,e,n,r){n!==r&&(e.flags|=4)};function yu(t,e){if(!bt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function gn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function q4(t,e,n){var r=e.pendingProps;switch(w1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(e),null;case 1:return rr(e.type)&&hm(),gn(e),null;case 3:return r=e.stateNode,Rl(),yt(nr),yt(Nn),I1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ff(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ls!==null&&(Qw(ls),ls=null))),Hw(t,e),gn(e),null;case 5:A1(e);var s=va(Vd.current);if(n=e.type,t!==null&&e.stateNode!=null)QN(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return gn(e),null}if(t=va(Hs.current),Ff(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Fs]=e,r[Hd]=i,t=(e.mode&1)!==0,n){case"dialog":pt("cancel",r),pt("close",r);break;case"iframe":case"object":case"embed":pt("load",r);break;case"video":case"audio":for(s=0;s<Yu.length;s++)pt(Yu[s],r);break;case"source":pt("error",r);break;case"img":case"image":case"link":pt("error",r),pt("load",r);break;case"details":pt("toggle",r);break;case"input":_x(r,i),pt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},pt("invalid",r);break;case"textarea":Ax(r,i),pt("invalid",r)}yw(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Bf(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Bf(r.textContent,a,t),s=["children",""+a]):$d.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&pt("scroll",r)}switch(n){case"input":kf(r),Sx(r,i,!0);break;case"textarea":kf(r),Ix(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=dm)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=II(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Fs]=e,t[Hd]=r,JN(t,e,!1,!1),e.stateNode=t;e:{switch(o=ww(n,r),n){case"dialog":pt("cancel",t),pt("close",t),s=r;break;case"iframe":case"object":case"embed":pt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Yu.length;s++)pt(Yu[s],t);s=r;break;case"source":pt("error",t),s=r;break;case"img":case"image":case"link":pt("error",t),pt("load",t),s=r;break;case"details":pt("toggle",t),s=r;break;case"input":_x(t,r),s=hw(t,r),pt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=St({},r,{value:void 0}),pt("invalid",t);break;case"textarea":Ax(t,r),s=mw(t,r),pt("invalid",t);break;default:s=r}yw(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?PI(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&NI(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Dd(t,c):typeof c=="number"&&Dd(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&($d.hasOwnProperty(i)?c!=null&&i==="onScroll"&&pt("scroll",t):c!=null&&r1(t,i,c,o))}switch(n){case"input":kf(t),Sx(t,r,!1);break;case"textarea":kf(t),Ix(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Bo(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?cl(t,!!r.multiple,i,!1):r.defaultValue!=null&&cl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=dm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gn(e),null;case 6:if(t&&e.stateNode!=null)XN(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=va(Vd.current),va(Hs.current),Ff(e)){if(r=e.stateNode,n=e.memoizedProps,r[Fs]=e,(i=r.nodeValue!==n)&&(t=vr,t!==null))switch(t.tag){case 3:Bf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bf(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fs]=e,e.stateNode=r}return gn(e),null;case 13:if(yt(Ct),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bt&&wr!==null&&e.mode&1&&!(e.flags&128))yN(),Ol(),e.flags|=98560,i=!1;else if(i=Ff(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(K(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[Fs]=e}else Ol(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gn(e),i=!1}else ls!==null&&(Qw(ls),ls=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ct.current&1?zt===0&&(zt=3):M1())),e.updateQueue!==null&&(e.flags|=4),gn(e),null);case 4:return Rl(),Hw(t,e),t===null&&zd(e.stateNode.containerInfo),gn(e),null;case 10:return x1(e.type._context),gn(e),null;case 17:return rr(e.type)&&hm(),gn(e),null;case 19:if(yt(Ct),i=e.memoizedState,i===null)return gn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)yu(i,!1);else{if(zt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=bm(t),o!==null){for(e.flags|=128,yu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return dt(Ct,Ct.current&1|2),e.child}t=t.sibling}i.tail!==null&&Pt()>Dl&&(e.flags|=128,r=!0,yu(i,!1),e.lanes=4194304)}else{if(!r)if(t=bm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!bt)return gn(e),null}else 2*Pt()-i.renderingStartTime>Dl&&n!==1073741824&&(e.flags|=128,r=!0,yu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Pt(),e.sibling=null,n=Ct.current,dt(Ct,r?n&1|2:n&1),e):(gn(e),null);case 22:case 23:return L1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?pr&1073741824&&(gn(e),e.subtreeFlags&6&&(e.flags|=8192)):gn(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function H4(t,e){switch(w1(e),e.tag){case 1:return rr(e.type)&&hm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Rl(),yt(nr),yt(Nn),I1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return A1(e),null;case 13:if(yt(Ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));Ol()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return yt(Ct),null;case 4:return Rl(),null;case 10:return x1(e.type._context),null;case 22:case 23:return L1(),null;case 24:return null;default:return null}}var Hf=!1,In=!1,W4=typeof WeakSet=="function"?WeakSet:Set,pe=null;function rl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Nt(t,e,r)}else n.current=null}function Ww(t,e,n){try{n()}catch(r){Nt(t,e,r)}}var gC=!1;function V4(t,e){if(Nw=cm,t=sN(),g1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tw={focusedElem:t,selectionRange:n},cm=!1,pe=e;pe!==null;)if(e=pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pe=t;else for(;pe!==null;){e=pe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,v=p.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:ss(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(C){Nt(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,pe=t;break}pe=e.return}return p=gC,gC=!1,p}function hd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ww(e,n,i)}s=s.next}while(s!==r)}}function xg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Vw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function eT(t){var e=t.alternate;e!==null&&(t.alternate=null,eT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fs],delete e[Hd],delete e[kw],delete e[N4],delete e[T4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tT(t){return t.tag===5||t.tag===3||t.tag===4}function yC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dm));else if(r!==4&&(t=t.child,t!==null))for(Gw(t,e,n),t=t.sibling;t!==null;)Gw(t,e,n),t=t.sibling}function Kw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Kw(t,e,n),t=t.sibling;t!==null;)Kw(t,e,n),t=t.sibling}var on=null,cs=!1;function Mi(t,e,n){for(n=n.child;n!==null;)nT(t,e,n),n=n.sibling}function nT(t,e,n){if(qs&&typeof qs.onCommitFiberUnmount=="function")try{qs.onCommitFiberUnmount(pg,n)}catch{}switch(n.tag){case 5:In||rl(n,e);case 6:var r=on,s=cs;on=null,Mi(t,e,n),on=r,cs=s,on!==null&&(cs?(t=on,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):on.removeChild(n.stateNode));break;case 18:on!==null&&(cs?(t=on,n=n.stateNode,t.nodeType===8?U0(t.parentNode,n):t.nodeType===1&&U0(t,n),Md(t)):U0(on,n.stateNode));break;case 4:r=on,s=cs,on=n.stateNode.containerInfo,cs=!0,Mi(t,e,n),on=r,cs=s;break;case 0:case 11:case 14:case 15:if(!In&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ww(n,e,o),s=s.next}while(s!==r)}Mi(t,e,n);break;case 1:if(!In&&(rl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Nt(n,e,a)}Mi(t,e,n);break;case 21:Mi(t,e,n);break;case 22:n.mode&1?(In=(r=In)||n.memoizedState!==null,Mi(t,e,n),In=r):Mi(t,e,n);break;default:Mi(t,e,n)}}function wC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new W4),e.forEach(function(r){var s=t8.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:on=a.stateNode,cs=!1;break e;case 3:on=a.stateNode.containerInfo,cs=!0;break e;case 4:on=a.stateNode.containerInfo,cs=!0;break e}a=a.return}if(on===null)throw Error(K(160));nT(i,o,s),on=null,cs=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Nt(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rT(e,t),e=e.sibling}function rT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jr(e,t),Ss(t),r&4){try{hd(3,t,t.return),xg(3,t)}catch(m){Nt(t,t.return,m)}try{hd(5,t,t.return)}catch(m){Nt(t,t.return,m)}}break;case 1:Jr(e,t),Ss(t),r&512&&n!==null&&rl(n,n.return);break;case 5:if(Jr(e,t),Ss(t),r&512&&n!==null&&rl(n,n.return),t.flags&32){var s=t.stateNode;try{Dd(s,"")}catch(m){Nt(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&SI(s,i),ww(a,o);var l=ww(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?PI(s,d):u==="dangerouslySetInnerHTML"?NI(s,d):u==="children"?Dd(s,d):r1(s,u,d,l)}switch(a){case"input":fw(s,i);break;case"textarea":AI(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?cl(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?cl(s,!!i.multiple,i.defaultValue,!0):cl(s,!!i.multiple,i.multiple?[]:"",!1))}s[Hd]=i}catch(m){Nt(t,t.return,m)}}break;case 6:if(Jr(e,t),Ss(t),r&4){if(t.stateNode===null)throw Error(K(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){Nt(t,t.return,m)}}break;case 3:if(Jr(e,t),Ss(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Md(e.containerInfo)}catch(m){Nt(t,t.return,m)}break;case 4:Jr(e,t),Ss(t);break;case 13:Jr(e,t),Ss(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(U1=Pt())),r&4&&wC(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(In=(l=In)||u,Jr(e,t),In=l):Jr(e,t),Ss(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(pe=t,u=t.child;u!==null;){for(d=pe=u;pe!==null;){switch(h=pe,f=h.child,h.tag){case 0:case 11:case 14:case 15:hd(4,h,h.return);break;case 1:rl(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Nt(r,n,m)}}break;case 5:rl(h,h.return);break;case 22:if(h.memoizedState!==null){vC(d);continue}}f!==null?(f.return=h,pe=f):vC(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=TI("display",o))}catch(m){Nt(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(m){Nt(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Jr(e,t),Ss(t),r&4&&wC(t);break;case 21:break;default:Jr(e,t),Ss(t)}}function Ss(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tT(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Dd(s,""),r.flags&=-33);var i=yC(t);Kw(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=yC(t);Gw(t,a,o);break;default:throw Error(K(161))}}catch(c){Nt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function G4(t,e,n){pe=t,sT(t)}function sT(t,e,n){for(var r=(t.mode&1)!==0;pe!==null;){var s=pe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Hf;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||In;a=Hf;var l=In;if(Hf=o,(In=c)&&!l)for(pe=s;pe!==null;)o=pe,c=o.child,o.tag===22&&o.memoizedState!==null?EC(s):c!==null?(c.return=o,pe=c):EC(s);for(;i!==null;)pe=i,sT(i),i=i.sibling;pe=s,Hf=a,In=l}bC(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,pe=i):bC(t)}}function bC(t){for(;pe!==null;){var e=pe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:In||xg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!In)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ss(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&rC(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rC(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Md(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}In||e.flags&512&&Vw(e)}catch(h){Nt(e,e.return,h)}}if(e===t){pe=null;break}if(n=e.sibling,n!==null){n.return=e.return,pe=n;break}pe=e.return}}function vC(t){for(;pe!==null;){var e=pe;if(e===t){pe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,pe=n;break}pe=e.return}}function EC(t){for(;pe!==null;){var e=pe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xg(4,e)}catch(c){Nt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Nt(e,s,c)}}var i=e.return;try{Vw(e)}catch(c){Nt(e,i,c)}break;case 5:var o=e.return;try{Vw(e)}catch(c){Nt(e,o,c)}}}catch(c){Nt(e,e.return,c)}if(e===t){pe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,pe=a;break}pe=e.return}}var K4=Math.ceil,xm=Di.ReactCurrentDispatcher,$1=Di.ReactCurrentOwner,Fr=Di.ReactCurrentBatchConfig,Fe=0,Zt=null,Dt=null,an=0,pr=0,sl=Xo(0),zt=0,Zd=null,Wa=0,Cg=0,D1=0,fd=null,Xn=null,U1=0,Dl=1/0,fi=null,Cm=!1,Yw=null,Oo=null,Wf=!1,xo=null,_m=0,pd=0,Zw=null,Mp=-1,Bp=0;function $n(){return Fe&6?Pt():Mp!==-1?Mp:Mp=Pt()}function ko(t){return t.mode&1?Fe&2&&an!==0?an&-an:O4.transition!==null?(Bp===0&&(Bp=zI()),Bp):(t=nt,t!==0||(t=window.event,t=t===void 0?16:YI(t.type)),t):1}function ys(t,e,n,r){if(50<pd)throw pd=0,Zw=null,Error(K(185));sf(t,n,r),(!(Fe&2)||t!==Zt)&&(t===Zt&&(!(Fe&2)&&(Cg|=n),zt===4&&ho(t,an)),sr(t,r),n===1&&Fe===0&&!(e.mode&1)&&(Dl=Pt()+500,bg&&ea()))}function sr(t,e){var n=t.callbackNode;O$(t,e);var r=am(t,t===Zt?an:0);if(r===0)n!==null&&Px(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Px(n),e===1)t.tag===0?P4(xC.bind(null,t)):pN(xC.bind(null,t)),A4(function(){!(Fe&6)&&ea()}),n=null;else{switch(qI(r)){case 1:n=c1;break;case 4:n=BI;break;case 16:n=om;break;case 536870912:n=FI;break;default:n=om}n=hT(n,iT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iT(t,e){if(Mp=-1,Bp=0,Fe&6)throw Error(K(327));var n=t.callbackNode;if(fl()&&t.callbackNode!==n)return null;var r=am(t,t===Zt?an:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Sm(t,r);else{e=r;var s=Fe;Fe|=2;var i=aT();(Zt!==t||an!==e)&&(fi=null,Dl=Pt()+500,Da(t,e));do try{J4();break}catch(a){oT(t,a)}while(!0);E1(),xm.current=i,Fe=s,Dt!==null?e=0:(Zt=null,an=0,e=zt)}if(e!==0){if(e===2&&(s=Cw(t),s!==0&&(r=s,e=Jw(t,s))),e===1)throw n=Zd,Da(t,0),ho(t,r),sr(t,Pt()),n;if(e===6)ho(t,r);else{if(s=t.current.alternate,!(r&30)&&!Y4(s)&&(e=Sm(t,r),e===2&&(i=Cw(t),i!==0&&(r=i,e=Jw(t,i))),e===1))throw n=Zd,Da(t,0),ho(t,r),sr(t,Pt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:ha(t,Xn,fi);break;case 3:if(ho(t,r),(r&130023424)===r&&(e=U1+500-Pt(),10<e)){if(am(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){$n(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ow(ha.bind(null,t,Xn,fi),e);break}ha(t,Xn,fi);break;case 4:if(ho(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-gs(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*K4(r/1960))-r,10<r){t.timeoutHandle=Ow(ha.bind(null,t,Xn,fi),r);break}ha(t,Xn,fi);break;case 5:ha(t,Xn,fi);break;default:throw Error(K(329))}}}return sr(t,Pt()),t.callbackNode===n?iT.bind(null,t):null}function Jw(t,e){var n=fd;return t.current.memoizedState.isDehydrated&&(Da(t,e).flags|=256),t=Sm(t,e),t!==2&&(e=Xn,Xn=n,e!==null&&Qw(e)),t}function Qw(t){Xn===null?Xn=t:Xn.push.apply(Xn,t)}function Y4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Es(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ho(t,e){for(e&=~D1,e&=~Cg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gs(e),r=1<<n;t[n]=-1,e&=~r}}function xC(t){if(Fe&6)throw Error(K(327));fl();var e=am(t,0);if(!(e&1))return sr(t,Pt()),null;var n=Sm(t,e);if(t.tag!==0&&n===2){var r=Cw(t);r!==0&&(e=r,n=Jw(t,r))}if(n===1)throw n=Zd,Da(t,0),ho(t,e),sr(t,Pt()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ha(t,Xn,fi),sr(t,Pt()),null}function j1(t,e){var n=Fe;Fe|=1;try{return t(e)}finally{Fe=n,Fe===0&&(Dl=Pt()+500,bg&&ea())}}function Va(t){xo!==null&&xo.tag===0&&!(Fe&6)&&fl();var e=Fe;Fe|=1;var n=Fr.transition,r=nt;try{if(Fr.transition=null,nt=1,t)return t()}finally{nt=r,Fr.transition=n,Fe=e,!(Fe&6)&&ea()}}function L1(){pr=sl.current,yt(sl)}function Da(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,S4(n)),Dt!==null)for(n=Dt.return;n!==null;){var r=n;switch(w1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hm();break;case 3:Rl(),yt(nr),yt(Nn),I1();break;case 5:A1(r);break;case 4:Rl();break;case 13:yt(Ct);break;case 19:yt(Ct);break;case 10:x1(r.type._context);break;case 22:case 23:L1()}n=n.return}if(Zt=t,Dt=t=Ro(t.current,null),an=pr=e,zt=0,Zd=null,D1=Cg=Wa=0,Xn=fd=null,ba!==null){for(e=0;e<ba.length;e++)if(n=ba[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ba=null}return t}function oT(t,e){do{var n=Dt;try{if(E1(),Up.current=Em,vm){for(var r=_t.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}vm=!1}if(Ha=0,Vt=Bt=_t=null,dd=!1,Gd=0,$1.current=null,n===null||n.return===null){zt=1,Zd=e,Dt=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=an,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=lC(o);if(f!==null){f.flags&=-257,uC(f,o,a,i,e),f.mode&1&&cC(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var m=new Set;m.add(c),e.updateQueue=m}else p.add(c);break e}else{if(!(e&1)){cC(i,l,e),M1();break e}c=Error(K(426))}}else if(bt&&a.mode&1){var v=lC(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),uC(v,o,a,i,e),b1($l(c,a));break e}}i=c=$l(c,a),zt!==4&&(zt=2),fd===null?fd=[i]:fd.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=qN(i,c,e);nC(i,y);break e;case 1:a=c;var w=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Oo===null||!Oo.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=HN(i,a,e);nC(i,C);break e}}i=i.return}while(i!==null)}lT(n)}catch(x){e=x,Dt===n&&n!==null&&(Dt=n=n.return);continue}break}while(!0)}function aT(){var t=xm.current;return xm.current=Em,t===null?Em:t}function M1(){(zt===0||zt===3||zt===2)&&(zt=4),Zt===null||!(Wa&268435455)&&!(Cg&268435455)||ho(Zt,an)}function Sm(t,e){var n=Fe;Fe|=2;var r=aT();(Zt!==t||an!==e)&&(fi=null,Da(t,e));do try{Z4();break}catch(s){oT(t,s)}while(!0);if(E1(),Fe=n,xm.current=r,Dt!==null)throw Error(K(261));return Zt=null,an=0,zt}function Z4(){for(;Dt!==null;)cT(Dt)}function J4(){for(;Dt!==null&&!x$();)cT(Dt)}function cT(t){var e=dT(t.alternate,t,pr);t.memoizedProps=t.pendingProps,e===null?lT(t):Dt=e,$1.current=null}function lT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=H4(n,e),n!==null){n.flags&=32767,Dt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{zt=6,Dt=null;return}}else if(n=q4(n,e,pr),n!==null){Dt=n;return}if(e=e.sibling,e!==null){Dt=e;return}Dt=e=t}while(e!==null);zt===0&&(zt=5)}function ha(t,e,n){var r=nt,s=Fr.transition;try{Fr.transition=null,nt=1,Q4(t,e,n,r)}finally{Fr.transition=s,nt=r}return null}function Q4(t,e,n,r){do fl();while(xo!==null);if(Fe&6)throw Error(K(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(k$(t,i),t===Zt&&(Dt=Zt=null,an=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wf||(Wf=!0,hT(om,function(){return fl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Fr.transition,Fr.transition=null;var o=nt;nt=1;var a=Fe;Fe|=4,$1.current=null,V4(t,n),rT(n,t),w4(Tw),cm=!!Nw,Tw=Nw=null,t.current=n,G4(n),C$(),Fe=a,nt=o,Fr.transition=i}else t.current=n;if(Wf&&(Wf=!1,xo=t,_m=s),i=t.pendingLanes,i===0&&(Oo=null),A$(n.stateNode),sr(t,Pt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Cm)throw Cm=!1,t=Yw,Yw=null,t;return _m&1&&t.tag!==0&&fl(),i=t.pendingLanes,i&1?t===Zw?pd++:(pd=0,Zw=t):pd=0,ea(),null}function fl(){if(xo!==null){var t=qI(_m),e=Fr.transition,n=nt;try{if(Fr.transition=null,nt=16>t?16:t,xo===null)var r=!1;else{if(t=xo,xo=null,_m=0,Fe&6)throw Error(K(331));var s=Fe;for(Fe|=4,pe=t.current;pe!==null;){var i=pe,o=i.child;if(pe.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(pe=l;pe!==null;){var u=pe;switch(u.tag){case 0:case 11:case 15:hd(8,u,i)}var d=u.child;if(d!==null)d.return=u,pe=d;else for(;pe!==null;){u=pe;var h=u.sibling,f=u.return;if(eT(u),u===l){pe=null;break}if(h!==null){h.return=f,pe=h;break}pe=f}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}pe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,pe=o;else e:for(;pe!==null;){if(i=pe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:hd(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,pe=y;break e}pe=i.return}}var w=t.current;for(pe=w;pe!==null;){o=pe;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,pe=b;else e:for(o=w;pe!==null;){if(a=pe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:xg(9,a)}}catch(x){Nt(a,a.return,x)}if(a===o){pe=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,pe=C;break e}pe=a.return}}if(Fe=s,ea(),qs&&typeof qs.onPostCommitFiberRoot=="function")try{qs.onPostCommitFiberRoot(pg,t)}catch{}r=!0}return r}finally{nt=n,Fr.transition=e}}return!1}function CC(t,e,n){e=$l(n,e),e=qN(t,e,1),t=Po(t,e,1),e=$n(),t!==null&&(sf(t,1,e),sr(t,e))}function Nt(t,e,n){if(t.tag===3)CC(t,t,n);else for(;e!==null;){if(e.tag===3){CC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Oo===null||!Oo.has(r))){t=$l(n,t),t=HN(e,t,1),e=Po(e,t,1),t=$n(),e!==null&&(sf(e,1,t),sr(e,t));break}}e=e.return}}function X4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$n(),t.pingedLanes|=t.suspendedLanes&n,Zt===t&&(an&n)===n&&(zt===4||zt===3&&(an&130023424)===an&&500>Pt()-U1?Da(t,0):D1|=n),sr(t,e)}function uT(t,e){e===0&&(t.mode&1?(e=Df,Df<<=1,!(Df&130023424)&&(Df=4194304)):e=1);var n=$n();t=Pi(t,e),t!==null&&(sf(t,e,n),sr(t,n))}function e8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uT(t,n)}function t8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),uT(t,n)}var dT;dT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nr.current)er=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return er=!1,z4(t,e,n);er=!!(t.flags&131072)}else er=!1,bt&&e.flags&1048576&&mN(e,mm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Lp(t,e),t=e.pendingProps;var s=Pl(e,Nn.current);hl(e,n),s=T1(null,e,r,t,s,n);var i=P1();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rr(r)?(i=!0,fm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_1(e),s.updater=Eg,e.stateNode=s,s._reactInternals=e,Lw(e,r,t,n),e=Fw(null,e,r,!0,i,n)):(e.tag=0,bt&&i&&y1(e),kn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Lp(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=r8(r),t=ss(r,t),s){case 0:e=Bw(null,e,r,t,n);break e;case 1:e=fC(null,e,r,t,n);break e;case 11:e=dC(null,e,r,t,n);break e;case 14:e=hC(null,e,r,ss(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ss(r,s),Bw(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ss(r,s),fC(t,e,r,s,n);case 3:e:{if(KN(e),t===null)throw Error(K(387));r=e.pendingProps,i=e.memoizedState,s=i.element,EN(t,e),wm(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=$l(Error(K(423)),e),e=pC(t,e,r,n,s);break e}else if(r!==s){s=$l(Error(K(424)),e),e=pC(t,e,r,n,s);break e}else for(wr=To(e.stateNode.containerInfo.firstChild),vr=e,bt=!0,ls=null,n=bN(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ol(),r===s){e=Oi(t,e,n);break e}kn(t,e,r,n)}e=e.child}return e;case 5:return xN(e),t===null&&Dw(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Pw(r,s)?o=null:i!==null&&Pw(r,i)&&(e.flags|=32),GN(t,e),kn(t,e,o,n),e.child;case 6:return t===null&&Dw(e),null;case 13:return YN(t,e,n);case 4:return S1(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=kl(e,null,r,n):kn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ss(r,s),dC(t,e,r,s,n);case 7:return kn(t,e,e.pendingProps,n),e.child;case 8:return kn(t,e,e.pendingProps.children,n),e.child;case 12:return kn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,dt(gm,r._currentValue),r._currentValue=o,i!==null)if(Es(i.value,o)){if(i.children===s.children&&!nr.current){e=Oi(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=xi(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Uw(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Uw(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}kn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,hl(e,n),s=qr(s),r=r(s),e.flags|=1,kn(t,e,r,n),e.child;case 14:return r=e.type,s=ss(r,e.pendingProps),s=ss(r.type,s),hC(t,e,r,s,n);case 15:return WN(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ss(r,s),Lp(t,e),e.tag=1,rr(r)?(t=!0,fm(e)):t=!1,hl(e,n),zN(e,r,s),Lw(e,r,s,n),Fw(null,e,r,!0,t,n);case 19:return ZN(t,e,n);case 22:return VN(t,e,n)}throw Error(K(156,e.tag))};function hT(t,e){return MI(t,e)}function n8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(t,e,n,r){return new n8(t,e,n,r)}function B1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function r8(t){if(typeof t=="function")return B1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===i1)return 11;if(t===o1)return 14}return 2}function Ro(t,e){var n=t.alternate;return n===null?(n=Mr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fp(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")B1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Kc:return Ua(n.children,s,i,e);case s1:o=8,s|=8;break;case cw:return t=Mr(12,n,e,s|2),t.elementType=cw,t.lanes=i,t;case lw:return t=Mr(13,n,e,s),t.elementType=lw,t.lanes=i,t;case uw:return t=Mr(19,n,e,s),t.elementType=uw,t.lanes=i,t;case xI:return _g(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vI:o=10;break e;case EI:o=9;break e;case i1:o=11;break e;case o1:o=14;break e;case no:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=Mr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ua(t,e,n,r){return t=Mr(7,t,r,e),t.lanes=n,t}function _g(t,e,n,r){return t=Mr(22,t,r,e),t.elementType=xI,t.lanes=n,t.stateNode={isHidden:!1},t}function H0(t,e,n){return t=Mr(6,t,null,e),t.lanes=n,t}function W0(t,e,n){return e=Mr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function s8(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=S0(0),this.expirationTimes=S0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=S0(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function F1(t,e,n,r,s,i,o,a,c){return t=new s8(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Mr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_1(i),t}function i8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fT(t){if(!t)return Fo;t=t._reactInternals;e:{if(cc(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(rr(n))return fN(t,n,e)}return e}function pT(t,e,n,r,s,i,o,a,c){return t=F1(n,r,!0,t,s,i,o,a,c),t.context=fT(null),n=t.current,r=$n(),s=ko(n),i=xi(r,s),i.callback=e??null,Po(n,i,s),t.current.lanes=s,sf(t,s,r),sr(t,r),t}function Sg(t,e,n,r){var s=e.current,i=$n(),o=ko(s);return n=fT(n),e.context===null?e.context=n:e.pendingContext=n,e=xi(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Po(s,e,o),t!==null&&(ys(t,s,o,i),Dp(t,s,o)),o}function Am(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _C(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function z1(t,e){_C(t,e),(t=t.alternate)&&_C(t,e)}function o8(){return null}var mT=typeof reportError=="function"?reportError:function(t){console.error(t)};function q1(t){this._internalRoot=t}Ag.prototype.render=q1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));Sg(t,e,null,null)};Ag.prototype.unmount=q1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Va(function(){Sg(null,t,null,null)}),e[Ti]=null}};function Ag(t){this._internalRoot=t}Ag.prototype.unstable_scheduleHydration=function(t){if(t){var e=VI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<uo.length&&e!==0&&e<uo[n].priority;n++);uo.splice(n,0,t),n===0&&KI(t)}};function H1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ig(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function SC(){}function a8(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=Am(o);i.call(l)}}var o=pT(e,r,t,0,null,!1,!1,"",SC);return t._reactRootContainer=o,t[Ti]=o.current,zd(t.nodeType===8?t.parentNode:t),Va(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=Am(c);a.call(l)}}var c=F1(t,0,!1,null,null,!1,!1,"",SC);return t._reactRootContainer=c,t[Ti]=c.current,zd(t.nodeType===8?t.parentNode:t),Va(function(){Sg(e,c,n,r)}),c}function Ng(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Am(o);a.call(c)}}Sg(e,o,t,s)}else o=a8(n,e,t,s,r);return Am(o)}HI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ku(e.pendingLanes);n!==0&&(l1(e,n|1),sr(e,Pt()),!(Fe&6)&&(Dl=Pt()+500,ea()))}break;case 13:Va(function(){var r=Pi(t,1);if(r!==null){var s=$n();ys(r,t,1,s)}}),z1(t,1)}};u1=function(t){if(t.tag===13){var e=Pi(t,134217728);if(e!==null){var n=$n();ys(e,t,134217728,n)}z1(t,134217728)}};WI=function(t){if(t.tag===13){var e=ko(t),n=Pi(t,e);if(n!==null){var r=$n();ys(n,t,e,r)}z1(t,e)}};VI=function(){return nt};GI=function(t,e){var n=nt;try{return nt=t,e()}finally{nt=n}};vw=function(t,e,n){switch(e){case"input":if(fw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=wg(r);if(!s)throw Error(K(90));_I(r),fw(r,s)}}}break;case"textarea":AI(t,n);break;case"select":e=n.value,e!=null&&cl(t,!!n.multiple,e,!1)}};RI=j1;$I=Va;var c8={usingClientEntryPoint:!1,Events:[af,Qc,wg,OI,kI,j1]},wu={findFiberByHostInstance:wa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l8={bundleType:wu.bundleType,version:wu.version,rendererPackageName:wu.rendererPackageName,rendererConfig:wu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Di.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jI(t),t===null?null:t.stateNode},findFiberByHostInstance:wu.findFiberByHostInstance||o8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vf.isDisabled&&Vf.supportsFiber)try{pg=Vf.inject(l8),qs=Vf}catch{}}Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c8;Cr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!H1(e))throw Error(K(200));return i8(t,e,null,n)};Cr.createRoot=function(t,e){if(!H1(t))throw Error(K(299));var n=!1,r="",s=mT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=F1(t,1,!1,null,null,n,!1,r,s),t[Ti]=e.current,zd(t.nodeType===8?t.parentNode:t),new q1(e)};Cr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=jI(e),t=t===null?null:t.stateNode,t};Cr.flushSync=function(t){return Va(t)};Cr.hydrate=function(t,e,n){if(!Ig(e))throw Error(K(200));return Ng(null,t,e,!0,n)};Cr.hydrateRoot=function(t,e,n){if(!H1(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=mT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=pT(e,null,t,1,n??null,s,!1,i,o),t[Ti]=e.current,zd(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ag(e)};Cr.render=function(t,e,n){if(!Ig(e))throw Error(K(200));return Ng(null,t,e,!1,n)};Cr.unmountComponentAtNode=function(t){if(!Ig(t))throw Error(K(40));return t._reactRootContainer?(Va(function(){Ng(null,null,t,!1,function(){t._reactRootContainer=null,t[Ti]=null})}),!0):!1};Cr.unstable_batchedUpdates=j1;Cr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ig(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Ng(t,e,n,!1,r)};Cr.version="18.3.1-next-f1338f8080-20240426";function gT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gT)}catch(t){console.error(t)}}gT(),gI.exports=Cr;var u8=gI.exports,yT,AC=u8;yT=AC.createRoot,AC.hydrateRoot;const wT="2.31.4";let bu={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${wT}`},G=class Xw extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Xw?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Xw&&n.cause.docsPath||n.docsPath,i=(a=bu.getDocsUrl)==null?void 0:a.call(bu,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...bu.version?[`Version: ${bu.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=wT}walk(e){return bT(this,e)}};function bT(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?bT(t.cause,e):e?null:t}let vT=class extends G{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class d8 extends G{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}let h8=class extends G{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};class ET extends G{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let xT=class extends G{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class IC extends G{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Xl(t,{dir:e,size:n=32}={}){return typeof t=="string"?$o(t,{dir:e,size:n}):f8(t,{dir:e,size:n})}function $o(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new xT({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function f8(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new xT({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function zo(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Ut(t){return zo(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function ki(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const p8=new TextEncoder;function Tg(t,e={}){return typeof t=="number"||typeof t=="bigint"?g8(t,e):typeof t=="boolean"?m8(t,e):zo(t)?Ys(t,e):CT(t,e)}function m8(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Cs(n,{size:e.size}),Xl(n,{size:e.size})):n}const ei={zero:48,nine:57,A:65,F:70,a:97,f:102};function NC(t){if(t>=ei.zero&&t<=ei.nine)return t-ei.zero;if(t>=ei.A&&t<=ei.F)return t-(ei.A-10);if(t>=ei.a&&t<=ei.f)return t-(ei.a-10)}function Ys(t,e={}){let n=t;e.size&&(Cs(n,{size:e.size}),n=Xl(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=NC(r.charCodeAt(a++)),l=NC(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new G(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function g8(t,e){const n=ae(t,e);return Ys(n)}function CT(t,e={}){const n=p8.encode(t);return typeof e.size=="number"?(Cs(n,{size:e.size}),Xl(n,{dir:"right",size:e.size})):n}function Cs(t,{size:e}){if(Ut(t)>e)throw new h8({givenSize:Ut(t),maxSize:e})}function ds(t,e={}){const{signed:n}=e;e.size&&Cs(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function qo(t,e={}){return Number(ds(t,e))}function _T(t,e={}){let n=Ys(t);return e.size&&(Cs(n,{size:e.size}),n=ki(n,{dir:"right"})),new TextDecoder().decode(n)}const y8=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ci(t,e={}){return typeof t=="number"||typeof t=="bigint"?ae(t,e):typeof t=="string"?Pg(t,e):typeof t=="boolean"?ST(t,e):jn(t,e)}function ST(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Cs(n,{size:e.size}),Xl(n,{size:e.size})):n}function jn(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=y8[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Cs(r,{size:e.size}),Xl(r,{dir:"right",size:e.size})):r}function ae(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new vT({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Xl(a,{size:r}):a}const w8=new TextEncoder;function Pg(t,e={}){const n=w8.encode(t);return jn(n,e)}function Ho(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new P8(t.type);return`${t.name}(${Og(t.inputs,{includeName:e})})`}function Og(t,{includeName:e=!1}={}){return t?t.map(n=>b8(n,{includeName:e})).join(e?", ":","):""}function b8(t,{includeName:e}){return t.type.startsWith("tuple")?`(${Og(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class v8 extends G{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class TC extends G{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class AT extends G{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Og(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class kg extends G{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class E8 extends G{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class x8 extends G{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Ut(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class C8 extends G{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Xae extends G{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class ece extends G{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class IT extends G{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class _8 extends G{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class NT extends G{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class Im extends G{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class S8 extends G{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class tce extends G{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class A8 extends G{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Ho(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Ho(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class nce extends G{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class eb extends G{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Og(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class TT extends G{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Ho(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class I8 extends G{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class N8 extends G{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class T8 extends G{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class P8 extends G{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function Ul(t){return typeof t[0]=="string"?Ui(t):O8(t)}function O8(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Ui(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}class ar extends G{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}let Rg=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Gf=BigInt(2**32-1),PC=BigInt(32);function k8(t,e=!1){return e?{h:Number(t&Gf),l:Number(t>>PC&Gf)}:{h:Number(t>>PC&Gf)|0,l:Number(t&Gf)|0}}function R8(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=k8(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const $8=(t,e,n)=>t<<n|e>>>32-n,D8=(t,e,n)=>e<<n|t>>>32-n,U8=(t,e,n)=>e<<n-32|t>>>64-n,j8=(t,e,n)=>t<<n-32|e>>>64-n,Ec=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function L8(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Nm(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ga(t,...e){if(!L8(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function sce(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Nm(t.outputLen),Nm(t.blockLen)}function Tm(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function PT(t,e){Ga(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function M8(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Jd(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function V0(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function As(t,e){return t<<32-e|t>>>e}const B8=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function F8(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function z8(t){for(let e=0;e<t.length;e++)t[e]=F8(t[e]);return t}const OC=B8?t=>t:z8,OT=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",q8=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ice(t){if(Ga(t),OT)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=q8[t[n]];return e}const ti={_0:48,_9:57,A:65,F:70,a:97,f:102};function kC(t){if(t>=ti._0&&t<=ti._9)return t-ti._0;if(t>=ti.A&&t<=ti.F)return t-(ti.A-10);if(t>=ti.a&&t<=ti.f)return t-(ti.a-10)}function oce(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(OT)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=kC(t.charCodeAt(i)),a=kC(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function H8(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function W1(t){return typeof t=="string"&&(t=H8(t)),Ga(t),t}function ace(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Ga(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let kT=class{};function RT(t){const e=r=>t().update(W1(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function lce(t=32){if(Ec&&typeof Ec.getRandomValues=="function")return Ec.getRandomValues(new Uint8Array(t));if(Ec&&typeof Ec.randomBytes=="function")return Uint8Array.from(Ec.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const W8=BigInt(0),vu=BigInt(1),V8=BigInt(2),G8=BigInt(7),K8=BigInt(256),Y8=BigInt(113),$T=[],DT=[],UT=[];for(let t=0,e=vu,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],$T.push(2*(5*r+n)),DT.push((t+1)*(t+2)/2%64);let s=W8;for(let i=0;i<7;i++)e=(e<<vu^(e>>G8)*Y8)%K8,e&V8&&(s^=vu<<(vu<<BigInt(i))-vu);UT.push(s)}const jT=R8(UT,!0),Z8=jT[0],J8=jT[1],RC=(t,e,n)=>n>32?U8(t,e,n):$8(t,e,n),$C=(t,e,n)=>n>32?j8(t,e,n):D8(t,e,n);function Q8(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=RC(l,u,1)^n[a],h=$C(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=DT[o],c=RC(s,i,a),l=$C(s,i,a),u=$T[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Z8[r],t[1]^=J8[r]}Jd(n)}let X8=class LT extends kT{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Nm(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=M8(this.state)}clone(){return this._cloneInto()}keccak(){OC(this.state32),Q8(this.state32,this.rounds),OC(this.state32),this.posOut=0,this.pos=0}update(e){Tm(this),e=W1(e),Ga(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Tm(this,!1),Ga(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Nm(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(PT(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Jd(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new LT(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const eD=(t,e,n)=>RT(()=>new X8(e,t,n)),tD=eD(1,136,256/8);function lf(t,e){const n=e||"hex",r=tD(zo(t,{strict:!1})?Tg(t):t);return n==="bytes"?r:Ci(r)}const G0=new Rg(8192);function $g(t,e){if(G0.has(`${t}.${e}`))return G0.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=lf(CT(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return G0.set(`${t}.${e}`,i),i}function Ea(t,e){if(!ln(t,{strict:!1}))throw new ar({address:t});return $g(t,e)}const nD=/^0x[a-fA-F0-9]{40}$/,K0=new Rg(8192);function ln(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(K0.has(r))return K0.get(r);const s=nD.test(t)?t.toLowerCase()===t?!0:n?$g(t)===t:!0:!1;return K0.set(r,s),s}function Qd(t,e,n,{strict:r}={}){return zo(t,{strict:!1})?rD(t,e,n,{strict:r}):FT(t,e,n,{strict:r})}function MT(t,e){if(typeof e=="number"&&e>0&&e>Ut(t)-1)throw new ET({offset:e,position:"start",size:Ut(t)})}function BT(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Ut(t)!==n-e)throw new ET({offset:n,position:"end",size:Ut(t)})}function FT(t,e,n,{strict:r}={}){MT(t,e);const s=t.slice(e,n);return r&&BT(s,e,n),s}function rD(t,e,n,{strict:r}={}){MT(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&BT(s,e,n),s}const uce=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,sD=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function zT(t,e){if(t.length!==e.length)throw new C8({expectedLength:t.length,givenLength:e.length});const n=iD({params:t,values:e}),r=G1(n);return r.length===0?"0x":r}function iD({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(V1({param:t[r],value:e[r]}));return n}function V1({param:t,value:e}){const n=K1(t.type);if(n){const[r,s]=n;return aD(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return hD(e,{param:t});if(t.type==="address")return oD(e);if(t.type==="bool")return lD(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=sD.exec(t.type)??[];return uD(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return cD(e,{param:t});if(t.type==="string")return dD(e);throw new I8(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function G1(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Ut(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(ae(e+s,{size:32})),r.push(a),s+=Ut(a)):n.push(a)}return Ul([...n,...r])}function oD(t){if(!ln(t))throw new ar({address:t});return{dynamic:!1,encoded:$o(t.toLowerCase())}}function aD(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new T8(t);if(!r&&t.length!==e)throw new E8({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=V1({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=G1(i);if(r){const a=ae(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Ul([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Ul(i.map(({encoded:o})=>o))}}function cD(t,{param:e}){const[,n]=e.type.split("bytes"),r=Ut(t);if(!n){let s=t;return r%32!==0&&(s=$o(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Ul([$o(ae(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new x8({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:$o(t,{dir:"right"})}}function lD(t){if(typeof t!="boolean")throw new G(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:$o(ST(t))}}function uD(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new vT({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:ae(t,{size:32,signed:e})}}function dD(t){const e=Pg(t),n=Math.ceil(Ut(e)/32),r=[];for(let s=0;s<n;s++)r.push($o(Qd(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Ul([$o(ae(Ut(e),{size:32})),...r])}}function hD(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=V1({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?G1(r):Ul(r.map(({encoded:s})=>s))}}function K1(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const Y0="/docs/contract/encodeDeployData";function qT(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new v8({docsPath:Y0});if(!("inputs"in s))throw new TC({docsPath:Y0});if(!s.inputs||s.inputs.length===0)throw new TC({docsPath:Y0});const i=zT(s.inputs,n);return Ui([r,i])}function Xs(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class Y1 extends G{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Z0 extends G{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function fD(t){const e=lf(`0x${t.substring(4)}`).substring(26);return $g(`0x${e}`)}const pD="modulepreload",mD=function(t){return"/hushr/"+t},DC={},_n=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=mD(c),c in DC)return;DC[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":pD,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function gD({hash:t,signature:e}){const n=zo(t)?t:Ci(t),{secp256k1:r}=await _n(async()=>{const{secp256k1:o}=await import("./secp256k1-8nzun0kL.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=UC(f);return new r.Signature(ds(l),ds(u)).addRecoveryBit(p)}const o=zo(e)?e:Ci(e);if(Ut(o)!==65)throw new Error("invalid signature length");const a=qo(`0x${o.slice(130)}`),c=UC(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function UC(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function yD({hash:t,signature:e}){return fD(await gD({hash:t,signature:e}))}class jC extends G{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class HT extends G{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class wD extends G{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const bD={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new wD({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new HT({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new jC({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new jC({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function Z1(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(bD);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function Wo(t,e="hex"){const n=WT(t),r=Z1(new Uint8Array(n.length));return n.encode(r),e==="hex"?jn(r.bytes):r.bytes}function WT(t){return Array.isArray(t)?vD(t.map(e=>WT(e))):ED(t)}function vD(t){const e=t.reduce((s,i)=>s+i.length,0),n=VT(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function ED(t){const e=typeof t=="string"?Ys(t):t,n=VT(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function VT(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new G("Length is too large.")}function xD(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=lf(Ui(["0x05",Wo([e?ae(e):"0x",s,n?ae(n):"0x"])]));return r==="bytes"?Ys(i):i}async function GT(t){const{authorization:e,signature:n}=t;return yD({hash:xD(e),signature:n??e})}class tb extends G{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class CD extends G{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class _D extends G{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class KT extends G{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class Dg extends G{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}function SD({chain:t,currentChainId:e}){if(!t)throw new _D;if(e!==t.id)throw new CD({chain:t,currentChainId:e})}const AD={gwei:9,wei:18},ID={ether:-9,wei:9},ND={ether:-18,gwei:-9};function uf(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function ir(t,e="wei"){return uf(t,ID[e])}let il=class extends G{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}};Object.defineProperty(il,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(il,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Ka extends G{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ir(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Ka,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class nb extends G{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ir(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(nb,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class rb extends G{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(rb,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class sb extends G{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(sb,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class ib extends G{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(ib,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class ob extends G{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(ob,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class ab extends G{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(ab,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class cb extends G{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(cb,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class lb extends G{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(lb,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Xd extends G{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${ir(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${ir(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Xd,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Ug extends G{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function J1(t,e="wei"){return uf(t,AD[e])}function df(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class TD extends G{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class PD extends G{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class OD extends G{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",df(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class kD extends G{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class RD extends G{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=df({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${J1(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ir(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ir(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ir(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class YT extends G{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class ZT extends G{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class $D extends G{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Vo=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),DD=t=>t,JT=t=>t;let QT=class extends G{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${JT(o)}`,e&&`Request body: ${Vo(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}},XT=class extends G{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${JT(r)}`,`Request body: ${Vo(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}};const UD=-1;let cr=class extends G{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof XT?e.code:n??UD}},Sr=class extends cr{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}},ub=class e3 extends cr{constructor(e){super(e,{code:e3.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}};Object.defineProperty(ub,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});let db=class t3 extends cr{constructor(e){super(e,{code:t3.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}};Object.defineProperty(db,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});let hb=class n3 extends cr{constructor(e,{method:n}={}){super(e,{code:n3.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}};Object.defineProperty(hb,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});let fb=class r3 extends cr{constructor(e){super(e,{code:r3.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(fb,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});let eh=class s3 extends cr{constructor(e){super(e,{code:s3.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}};Object.defineProperty(eh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});let pb=class i3 extends cr{constructor(e){super(e,{code:i3.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(pb,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});let mb=class o3 extends cr{constructor(e){super(e,{code:o3.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}};Object.defineProperty(mb,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});let pl=class a3 extends cr{constructor(e){super(e,{code:a3.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}};Object.defineProperty(pl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});let gb=class c3 extends cr{constructor(e){super(e,{code:c3.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}};Object.defineProperty(gb,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});let Zu=class l3 extends cr{constructor(e,{method:n}={}){super(e,{code:l3.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}};Object.defineProperty(Zu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});let Pm=class u3 extends cr{constructor(e){super(e,{code:u3.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}};Object.defineProperty(Pm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});let yb=class d3 extends cr{constructor(e){super(e,{code:d3.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}};Object.defineProperty(yb,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});let Sn=class h3 extends Sr{constructor(e){super(e,{code:h3.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}};Object.defineProperty(Sn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});let wb=class f3 extends Sr{constructor(e){super(e,{code:f3.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}};Object.defineProperty(wb,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});let bb=class p3 extends Sr{constructor(e,{method:n}={}){super(e,{code:p3.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}};Object.defineProperty(bb,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});let vb=class m3 extends Sr{constructor(e){super(e,{code:m3.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}};Object.defineProperty(vb,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});let Eb=class g3 extends Sr{constructor(e){super(e,{code:g3.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}};Object.defineProperty(Eb,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});let Go=class y3 extends Sr{constructor(e){super(e,{code:y3.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}};Object.defineProperty(Go,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});let xb=class w3 extends Sr{constructor(e){super(e,{code:w3.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}};Object.defineProperty(xb,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});let Cb=class b3 extends Sr{constructor(e){super(e,{code:b3.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}};Object.defineProperty(Cb,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});let _b=class v3 extends Sr{constructor(e){super(e,{code:v3.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}};Object.defineProperty(_b,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});let Sb=class E3 extends Sr{constructor(e){super(e,{code:E3.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}};Object.defineProperty(Sb,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});let Ab=class x3 extends Sr{constructor(e){super(e,{code:x3.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}};Object.defineProperty(Ab,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});let Ib=class C3 extends Sr{constructor(e){super(e,{code:C3.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}};Object.defineProperty(Ib,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});let Nb=class _3 extends Sr{constructor(e){super(e,{code:_3.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}};Object.defineProperty(Nb,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});let jD=class extends cr{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}};function Q1(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof G?t.walk(s=>(s==null?void 0:s.code)===il.code):t;return r instanceof G?new il({cause:t,message:r.details}):il.nodeMessage.test(n)?new il({cause:t,message:t.details}):Ka.nodeMessage.test(n)?new Ka({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):nb.nodeMessage.test(n)?new nb({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):rb.nodeMessage.test(n)?new rb({cause:t,nonce:e==null?void 0:e.nonce}):sb.nodeMessage.test(n)?new sb({cause:t,nonce:e==null?void 0:e.nonce}):ib.nodeMessage.test(n)?new ib({cause:t,nonce:e==null?void 0:e.nonce}):ob.nodeMessage.test(n)?new ob({cause:t}):ab.nodeMessage.test(n)?new ab({cause:t,gas:e==null?void 0:e.gas}):cb.nodeMessage.test(n)?new cb({cause:t,gas:e==null?void 0:e.gas}):lb.nodeMessage.test(n)?new lb({cause:t}):Xd.nodeMessage.test(n)?new Xd({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new Ug({cause:t})}function LD(t,{docsPath:e,...n}){const r=(()=>{const s=Q1(t,n);return s instanceof Ug?t:s})();return new RD(r,{docsPath:e,...n})}function X1(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}function eE(t,e){return({exclude:n,format:r})=>({exclude:n,format:s=>{const i=e(s);if(n)for(const o of n)delete i[o];return{...i,...r(s)}},type:t})}const MD={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function tE(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=BD(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>jn(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=ae(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=ae(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=ae(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=ae(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=ae(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=ae(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=MD[t.type]),typeof t.value<"u"&&(e.value=ae(t.value)),e}function BD(t){return t.map(e=>({address:e.address,r:e.r?ae(BigInt(e.r)):e.r,s:e.s?ae(BigInt(e.s)):e.s,chainId:ae(e.chainId),nonce:ae(e.nonce),...typeof e.yParity<"u"?{yParity:ae(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:ae(e.v)}:{}}))}function vt(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const jg=2n**256n-1n;function Lg(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Xs(e):void 0;if(o&&!ln(o.address))throw new ar({address:o.address});if(i&&!ln(i))throw new ar({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new TD;if(r&&r>jg)throw new Ka({maxFeePerGas:r});if(s&&r&&s>r)throw new Xd({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function S3(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return qo(e)}class FD extends G{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class nE extends G{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class zD extends G{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ir(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class A3 extends G{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const I3={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Mg(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?qo(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?qo(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?I3[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=HD(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}const qD=eE("transaction",Mg);function HD(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function N3(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:Mg(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}const WD=eE("block",N3);async function th(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?ae(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new A3({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||N3)(c)}async function T3(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function VD(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await vt(t,th,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return ds(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):vt(t,th,"getBlock")({}),vt(t,T3,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new nE;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function LC(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,m;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((m=r==null?void 0:r.fees)==null?void 0:m.baseFeeMultiplier)??1.2})();if(o<1)throw new FD;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await vt(t,th,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new nE;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await VD(t,{block:u,chain:r,request:s}),m=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??m+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await vt(t,T3,"getGasPrice")({}))}}class GD extends G{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=df({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${J1(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ir(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ir(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ir(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function KD(t,{docsPath:e,...n}){const r=(()=>{const s=Q1(t,n);return s instanceof Ug?t:s})();return new GD(r,{docsPath:e,...n})}class YD extends G{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class ZD extends G{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function MC(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function JD(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=MC(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=MC(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function BC(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new IC({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new IC({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function QD(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=ae(e)),n!==void 0&&(o.nonce=ae(n)),r!==void 0&&(o.state=BC(r)),s!==void 0){if(o.state)throw new ZD;o.stateDiff=BC(s)}return o}function P3(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!ln(n,{strict:!1}))throw new ar({address:n});if(e[n])throw new YD({address:n});e[n]=QD(r)}return e}async function O3(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?ae(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function k3(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Xs(n):void 0;try{let B=function(I){const{block:$,request:A,rpcStateOverride:O}=I;return t.request({method:"eth_estimateGas",params:O?[A,$??"latest",O]:$?[A,$]:[A]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:m,maxFeePerBlobGas:v,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:b,value:C,stateOverride:x,...T}=await oE(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),U=(typeof d=="bigint"?ae(d):void 0)||h,E=P3(x),k=await(async()=>{if(T.to)return T.to;if(c&&c.length>0)return await GT({authorization:c[0]}).catch(()=>{throw new G("`to` is required. Could not infer from `authorizationList`")})})();Lg(e);const R=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,L=(R||tE)({...X1(T,{format:R}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:m,maxFeePerBlobGas:v,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:b,to:k,value:C});let S=BigInt(await B({block:U,request:L,rpcStateOverride:E}));if(c){const I=await O3(t,{address:L.from}),$=await Promise.all(c.map(async A=>{const{address:O}=A,D=await B({block:U,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:O,value:ae(I)},rpcStateOverride:E}).catch(()=>100000n);return 2n*BigInt(D)}));S+=$.reduce((A,O)=>A+O,0n)}return S}catch(a){throw KD(a,{...e,account:r,chain:t.chain})}}async function XD(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?ae(r):n]},{dedupe:!!r});return qo(s)}function rE(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Ys(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>jn(i))}function sE(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Ys(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Ys(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>jn(o))}function e6(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function t6(t,e,n){return t&e^~t&n}function n6(t,e,n){return t&e^t&n^e&n}class r6 extends kT{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=V0(this.buffer)}update(e){Tm(this),e=W1(e),Ga(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=V0(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Tm(this),PT(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Jd(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;e6(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=V0(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Bi=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),s6=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fi=new Uint32Array(64);class i6 extends r6{constructor(e=32){super(64,e,8,!1),this.A=Bi[0]|0,this.B=Bi[1]|0,this.C=Bi[2]|0,this.D=Bi[3]|0,this.E=Bi[4]|0,this.F=Bi[5]|0,this.G=Bi[6]|0,this.H=Bi[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Fi[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Fi[d-15],f=Fi[d-2],p=As(h,7)^As(h,18)^h>>>3,m=As(f,17)^As(f,19)^f>>>10;Fi[d]=m+Fi[d-7]+p+Fi[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=As(a,6)^As(a,11)^As(a,25),f=u+h+t6(a,c,l)+s6[d]+Fi[d]|0,m=(As(r,2)^As(r,13)^As(r,22))+n6(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Jd(Fi)}destroy(){this.set(0,0,0,0,0,0,0,0),Jd(this.buffer)}}const o6=RT(()=>new i6),a6=o6;function c6(t,e){return a6(zo(t,{strict:!1})?Tg(t):t)}function l6(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=c6(e);return s.set([n],0),r==="bytes"?s:jn(s)}function R3(t){const{commitments:e,version:n}=t,r=t.to??(typeof e[0]=="string"?"hex":"bytes"),s=[];for(const i of e)s.push(l6({commitment:i,to:r,version:n}));return s}const FC=6,$3=32,iE=4096,D3=$3*iE,zC=D3*FC-1-1*iE*FC,U3=1;class u6 extends G{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class j3 extends G{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class d6 extends G{constructor({hash:e,size:n}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class h6 extends G{constructor({hash:e,version:n}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${U3}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function f6(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),n=typeof t.data=="string"?Ys(t.data):t.data,r=Ut(n);if(!r)throw new j3;if(r>zC)throw new u6({maxSize:zC,size:r});const s=[];let i=!0,o=0;for(;i;){const a=Z1(new Uint8Array(D3));let c=0;for(;c<iE;){const l=n.slice(o,o+($3-1));if(a.pushByte(0),a.pushBytes(l),l.length<31){a.pushByte(128),i=!1;break}c++,o+=31}s.push(a)}return e==="bytes"?s.map(a=>a.bytes):s.map(a=>jn(a.bytes))}function L3(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??f6({data:e,to:r}),i=t.commitments??rE({blobs:s,kzg:n,to:r}),o=t.proofs??sE({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function M3(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new OD({transaction:t})}const B3=["blobVersionedHashes","chainId","fees","gas","nonce","type"],qC=new Map;async function oE(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=B3,type:u}=e,d=n&&Xs(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await vt(t,th,"getBlock")({blockTag:"latest"}),f)}let m;async function v(){return m||(s?s.id:typeof e.chainId<"u"?e.chainId:(m=await vt(t,S3,"getChainId")({}),m))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await v();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await vt(t,XD,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=rE({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const w=R3({commitments:y,to:"hex"});h.blobVersionedHashes=w}if(l.includes("sidecars")){const w=sE({blobs:r,commitments:y,kzg:o}),b=L3({blobs:r,commitments:y,proofs:w,to:"hex"});h.sidecars=b}}if(l.includes("chainId")&&(h.chainId=await v()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=M3(h)}catch{let y=qC.get(t.uid);if(typeof y>"u"){const w=await p();y=typeof(w==null?void 0:w.baseFeePerGas)=="bigint",qC.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:w,maxPriorityFeePerGas:b}=await LC(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<b)throw new zD({maxPriorityFeePerGas:b});h.maxPriorityFeePerGas=b,h.maxFeePerGas=w}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new nE;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:w}=await LC(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=w}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await vt(t,k3,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),Lg(h),delete h.parameters,h}async function p6(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const J0=new Rg(128);async function F3(t,e){var w,b,C,x;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:m,...v}=e;if(typeof n>"u")throw new Y1({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?Xs(n):null;try{Lg(e);const T=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await GT({authorization:i[0]}).catch(()=>{throw new G("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let N;r!==null&&(N=await vt(t,S3,"getChainId")({}),SD({currentChainId:N,chain:r}));const U=(C=(b=(w=t.chain)==null?void 0:w.formatters)==null?void 0:b.transactionRequest)==null?void 0:C.format,k=(U||tE)({...X1(v,{format:U}),accessList:s,authorizationList:i,blobs:o,chainId:N,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:T,type:p,value:m}),R=J0.get(t.uid),j=R?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:j,params:[k]},{retryCount:0})}catch(L){if(R===!1)throw L;const B=L;if(B.name==="InvalidInputRpcError"||B.name==="InvalidParamsRpcError"||B.name==="MethodNotFoundRpcError"||B.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[k]},{retryCount:0}).then(S=>(J0.set(t.uid,!0),S)).catch(S=>{const I=S;throw I.name==="MethodNotFoundRpcError"||I.name==="MethodNotSupportedRpcError"?(J0.set(t.uid,!1),B):I});throw B}}if((y==null?void 0:y.type)==="local"){const N=await vt(t,oE,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...B3,"sidecars"],type:p,value:m,...v,to:T}),U=(x=r==null?void 0:r.serializers)==null?void 0:x.transaction,E=await y.signTransaction(N,{serializer:U});return await vt(t,p6,"sendRawTransaction")({serializedTransaction:E})}throw(y==null?void 0:y.type)==="smart"?new Z0({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Z0({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(T){throw T instanceof Z0?T:LD(T,{...e,account:y,chain:e.chain||void 0})}}const Tb=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],yce=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}];function m6(t,e={}){typeof e.size<"u"&&Cs(t,{size:e.size});const n=jn(t,e);return ds(n,e)}function g6(t,e={}){let n=t;if(typeof e.size<"u"&&(Cs(n,{size:e.size}),n=ki(n)),n.length>1||n[0]>1)throw new d8(n);return!!n[0]}function _i(t,e={}){typeof e.size<"u"&&Cs(t,{size:e.size});const n=jn(t,e);return qo(n,e)}function y6(t,e={}){let n=t;return typeof e.size<"u"&&(Cs(n,{size:e.size}),n=ki(n,{dir:"right"})),new TextDecoder().decode(n)}function Bg(t,e){const n=typeof e=="string"?Ys(e):e,r=Z1(n);if(Ut(n)===0&&t.length>0)throw new kg;if(Ut(e)&&Ut(e)<32)throw new AT({data:typeof e=="string"?e:jn(e),params:t,size:Ut(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=ml(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function ml(t,e,{staticPosition:n}){const r=K1(e.type);if(r){const[s,i]=r;return b6(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return C6(t,e,{staticPosition:n});if(e.type==="address")return w6(t);if(e.type==="bool")return v6(t);if(e.type.startsWith("bytes"))return E6(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return x6(t,e);if(e.type==="string")return _6(t,{staticPosition:n});throw new N8(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const HC=32,Pb=32;function w6(t){const e=t.readBytes(32);return[$g(jn(FT(e,-20))),32]}function b6(t,e,{length:n,staticPosition:r}){if(!n){const o=_i(t.readBytes(Pb)),a=r+o,c=a+HC;t.setPosition(a);const l=_i(t.readBytes(HC)),u=nh(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,m]=ml(t,e,{staticPosition:c});d+=m,h.push(p)}return t.setPosition(r+32),[h,32]}if(nh(e)){const o=_i(t.readBytes(Pb)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=ml(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=ml(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function v6(t){return[g6(t.readBytes(32),{size:32}),32]}function E6(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=_i(t.readBytes(32));t.setPosition(n+o);const a=_i(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[jn(c),32]}return[jn(t.readBytes(Number.parseInt(s),32)),32]}function x6(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?m6(s,{signed:n}):_i(s,{signed:n}),32]}function C6(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(nh(e)){const o=_i(t.readBytes(Pb)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=ml(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=ml(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function _6(t,{staticPosition:e}){const n=_i(t.readBytes(32)),r=e+n;t.setPosition(r);const s=_i(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=y6(ki(i));return t.setPosition(e+32),[o,32]}function nh(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(nh);const n=K1(t.type);return!!(n&&nh({...t,type:n[1]}))}const S6=t=>lf(Tg(t));function A6(t){return S6(t)}const I6="1.0.8";let Gr=class Ob extends Error{constructor(e,n={}){var o;const r=n.cause instanceof Ob?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof Ob&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${I6}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function ji(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const z3=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,q3=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,H3=/^\(.+?\).*?$/,WC=/^tuple(?<array>(\[(\d*)\])*)$/;function kb(t){let e=t.type;if(WC.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=kb(i),s<n-1&&(e+=", ")}const r=ji(WC,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,kb({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Eu(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=kb(s),r!==n-1&&(e+=", ")}return e}function N6(t){var e;return t.type==="function"?`function ${t.name}(${Eu(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Eu(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Eu(t.inputs)})`:t.type==="error"?`error ${t.name}(${Eu(t.inputs)})`:t.type==="constructor"?`constructor(${Eu(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const W3=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function T6(t){return W3.test(t)}function P6(t){return ji(W3,t)}const V3=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function O6(t){return V3.test(t)}function k6(t){return ji(V3,t)}const G3=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function R6(t){return G3.test(t)}function $6(t){return ji(G3,t)}const K3=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function Y3(t){return K3.test(t)}function D6(t){return ji(K3,t)}const Z3=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function U6(t){return Z3.test(t)}function j6(t){return ji(Z3,t)}const J3=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function L6(t){return J3.test(t)}function M6(t){return ji(J3,t)}const B6=/^receive\(\) external payable$/;function F6(t){return B6.test(t)}const z6=new Set(["indexed"]),Rb=new Set(["calldata","memory","storage"]);class q6 extends Gr{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class H6 extends Gr{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class W6 extends Gr{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class V6 extends Gr{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class G6 extends Gr{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class K6 extends Gr{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Y6 extends Gr{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class eu extends Gr{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Z6 extends Gr{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class J6 extends Gr{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class Q6 extends Gr{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class X6 extends Gr{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function eU(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const Q0=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function tU(t,e={}){if(R6(t))return nU(t,e);if(O6(t))return rU(t,e);if(T6(t))return sU(t,e);if(U6(t))return iU(t,e);if(L6(t))return oU(t);if(F6(t))return{type:"receive",stateMutability:"payable"};throw new Z6({signature:t})}function nU(t,e={}){const n=$6(t);if(!n)throw new eu({signature:t,type:"function"});const r=hs(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Ya(r[a],{modifiers:Rb,structs:e,type:"function"}));const o=[];if(n.returns){const a=hs(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Ya(a[l],{modifiers:Rb,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function rU(t,e={}){const n=k6(t);if(!n)throw new eu({signature:t,type:"event"});const r=hs(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Ya(r[o],{modifiers:z6,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function sU(t,e={}){const n=P6(t);if(!n)throw new eu({signature:t,type:"error"});const r=hs(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Ya(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function iU(t,e={}){const n=j6(t);if(!n)throw new eu({signature:t,type:"constructor"});const r=hs(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Ya(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function oU(t){const e=M6(t);if(!e)throw new eu({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const aU=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,cU=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,lU=/^u?int$/;function Ya(t,e){var d,h;const n=eU(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(Q0.has(n))return Q0.get(n);const r=H3.test(t),s=ji(r?cU:aU,t);if(!s)throw new W6({param:t});if(s.name&&dU(s.name))throw new V6({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=hs(s.type),p=[],m=f.length;for(let v=0;v<m;v++)p.push(Ya(f[v],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(lU.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!Q3(c))throw new H6({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new G6({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(Rb.has(s.modifier)&&!hU(c,!!s.array))throw new K6({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return Q0.set(n,u),u}function hs(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?hs(a,[...e,n.trim()]):hs(a,e,`${n}${o}`,r);case"(":return hs(a,e,`${n}${o}`,r+1);case")":return hs(a,e,`${n}${o}`,r-1);default:return hs(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new X6({current:n,depth:r});return e.push(n.trim()),e}function Q3(t){return t==="address"||t==="bool"||t==="function"||t==="string"||z3.test(t)||q3.test(t)}const uU=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function dU(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||z3.test(t)||q3.test(t)||uU.test(t)}function hU(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function fU(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!Y3(a))continue;const c=D6(a);if(!c)throw new eu({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const m=Ya(p,{type:"struct"});u.push(m)}if(!u.length)throw new J6({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=X3(c,e)}return r}const pU=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function X3(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(H3.test(o.type))r.push(o);else{const c=ji(pU,o.type);if(!(c!=null&&c.type))throw new Y6({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new Q6({type:u});r.push({...o,type:`tuple${l??""}`,components:X3(e[u]??[],e,new Set([...n,u]))})}else if(Q3(u))r.push(o);else throw new q6({type:u})}}return r}function eP(t){const e=fU(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];Y3(i)||n.push(tU(i,e))}return n}function mU(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new G("Unable to normalize signature.");return s}const gU=t=>{const e=typeof t=="string"?t:N6(t);return mU(e)};function tP(t){return A6(gU(t))}const aE=tP,cE=t=>Qd(tP(t),0,4);function lE(t){const{abi:e,args:n=[],name:r}=t,s=zo(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?cE(a)===r:a.type==="event"?aE(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?$b(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=nP(a.inputs,o.inputs,n);if(l)throw new A8({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function $b(t,e){const n=typeof t,r=e.type;switch(r){case"address":return ln(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>$b(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>$b(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function nP(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return nP(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?ln(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?ln(n[r],{strict:!1}):!1)return o}}const X0="/docs/contract/decodeFunctionResult";function uE(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=lE({abi:e,args:n,name:r});if(!a)throw new Im(r,{docsPath:X0});i=a}if(i.type!=="function")throw new Im(void 0,{docsPath:X0});if(!i.outputs)throw new S8(i.name,{docsPath:X0});const o=Bg(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const VC="/docs/contract/encodeFunctionData";function yU(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=lE({abi:e,args:n,name:r});if(!i)throw new Im(r,{docsPath:VC});s=i}if(s.type!=="function")throw new Im(void 0,{docsPath:VC});return{abi:[s],functionName:cE(Ho(s))}}function Fg(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:yU(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?zT(s.inputs,e??[]):void 0;return Ui([i,o??"0x"])}function rP({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new tb({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new tb({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const wU={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},bU={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},vU={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function EU(t){const{abi:e,data:n}=t,r=Qd(n,0,4);if(r==="0x")throw new kg;const i=[...e||[],bU,vU].find(o=>o.type==="error"&&r===cE(Ho(o)));if(!i)throw new IT(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?Bg(i.inputs,Qd(n,4)):void 0,errorName:i.name}}function sP({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Vo(e[i]):e[i]}`).join(", ")})`}class xU extends G{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var v;const p=n?Xs(n):void 0;let m=df({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${J1(h)} ${((v=s==null?void 0:s.nativeCurrency)==null?void 0:v.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ir(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ir(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ir(l)} gwei`,nonce:u});f&&(m+=`
${JD(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",m].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class iP extends G{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=lE({abi:n,args:r,name:o}),l=c?sP({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Ho(c,{includeName:!0}):void 0,d=df({address:s&&DD(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class CU extends G{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=EU({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=wU[f]}else{const f=u?Ho(u,{includeName:!0}):void 0,p=u&&h?sP({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof IT&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class _U extends G{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class SU extends G{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class dE extends G{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}const AU=3;function Om(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof dE?t:t instanceof G?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof kg?new _U({functionName:i}):[AU,eh.code].includes(c)&&(l||u||d||h)?new CU({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof XT?u:h??d}):t;return new iP(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}const IU="0.1.1";function NU(){return IU}let oP=class Db extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof Db){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Db&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${NU()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return aP(this,e)}};function aP(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?aP(t.cause,e):e?null:t}function TU(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new kU({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function mi(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new OU({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?PU(c,r):c}function PU(t,e){return TU(t,{dir:"left",size:e})}let OU=class extends oP{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},kU=class extends oP{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function RU(t){return{address:t.address,amount:mi(t.amount),index:mi(t.index),validatorIndex:mi(t.validatorIndex)}}function $U(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:mi(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:mi(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:mi(t.gasLimit)},...typeof t.number=="bigint"&&{number:mi(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:mi(t.prevRandao)},...typeof t.time=="bigint"&&{time:mi(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(RU)}}}const DU="0x82ad56cb",UU="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",jU="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";function LU(t,{docsPath:e,...n}){const r=(()=>{const s=Q1(t,n);return s instanceof Ug?t:s})();return new xU(r,{docsPath:e,...n})}function cP(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const ey=new Map;function MU({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>ey.delete(e),a=()=>c().map(({args:u})=>u),c=()=>ey.get(e)||[],l=u=>ey.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=cP();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function lP(t,e){var L,B,S,I;const{account:n=t.account,authorizationList:r,batch:s=!!((L=t.batch)!=null&&L.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:m,maxFeePerBlobGas:v,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:b,to:C,value:x,stateOverride:T,...N}=e,U=n?Xs(n):void 0;if(u&&(h||f))throw new G("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&C)throw new G("Cannot provide both `code` & `to` as parameters.");const E=u&&d,k=h&&f&&C&&d,R=E||k,j=E?zU({code:u,data:d}):k?qU({data:d,factory:h,factoryData:f,to:C}):d;try{Lg(e);const A=(typeof i=="bigint"?ae(i):void 0)||o,O=l?$U(l):void 0,D=P3(T),M=(I=(S=(B=t.chain)==null?void 0:B.formatters)==null?void 0:S.transactionRequest)==null?void 0:I.format,Z=(M||tE)({...X1(N,{format:M}),from:U==null?void 0:U.address,accessList:a,authorizationList:r,blobs:c,data:j,gas:p,gasPrice:m,maxFeePerBlobGas:v,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:b,to:R?void 0:C,value:x});if(s&&BU({request:Z})&&!D&&!O)try{return await FU(t,{...Z,blockNumber:i,blockTag:o})}catch(me){if(!(me instanceof KT)&&!(me instanceof tb))throw me}const F=(()=>{const me=[Z,A];return D&&O?[...me,D,O]:D?[...me,D]:O?[...me,{},O]:me})(),Q=await t.request({method:"eth_call",params:F});return Q==="0x"?{data:void 0}:{data:Q}}catch($){const A=HU($),{offchainLookup:O,offchainLookupSignature:D}=await _n(async()=>{const{offchainLookup:M,offchainLookupSignature:H}=await import("./ccip-C91-EKfC.js");return{offchainLookup:M,offchainLookupSignature:H}},[]);if(t.ccipRead!==!1&&(A==null?void 0:A.slice(0,10))===D&&C)return{data:await O(t,{data:A,to:C})};throw R&&(A==null?void 0:A.slice(0,10))==="0x101bb98d"?new SU({factory:h}):LU($,{...e,account:U,chain:t.chain})}}function BU({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(DU)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function FU(t,e){var m;const{batchSize:n=1024,wait:r=0}=typeof((m=t.batch)==null?void 0:m.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new KT;l=rP({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?ae(s):void 0)||i,{schedule:h}=MU({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(v){return v.reduce((w,{data:b})=>w+(b.length-2),0)>n*2},fn:async v=>{const y=v.map(C=>({allowFailure:!0,callData:C.data,target:C.to})),w=Fg({abi:Tb,args:[y],functionName:"aggregate3"}),b=await t.request({method:"eth_call",params:[{data:w,to:l},d]});return uE({abi:Tb,args:[y],functionName:"aggregate3",data:b||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new dE({data:f});return f==="0x"?{data:void 0}:{data:f}}function zU(t){const{code:e,data:n}=t;return qT({abi:eP(["constructor(bytes, bytes)"]),bytecode:UU,args:[e,n]})}function qU(t){const{data:e,factory:n,factoryData:r,to:s}=t;return qT({abi:eP(["constructor(address, bytes, address, bytes)"]),bytecode:jU,args:[s,e,n,r]})}function HU(t){var n;if(!(t instanceof G))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function uP(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Fg({abi:n,args:s,functionName:i});try{const{data:c}=await vt(t,lP,"call")({...o,data:a,to:r});return uE({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Om(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}function WU(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function VU(t){const e=WU(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}const GU=new Map,KU=new Map;function YU(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,GU),r=e(t,KU);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function ZU(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=YU(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const JU=t=>`blockNumber.${t}`;async function QU(t,{cacheTime:e=t.cacheTime}={}){const n=await ZU(()=>t.request({method:"eth_blockNumber"}),{cacheKey:JU(t.uid),cacheTime:e});return BigInt(n)}function XU(t,e){if(!ln(t,{strict:!1}))throw new ar({address:t});if(!ln(e,{strict:!1}))throw new ar({address:e});return t.toLowerCase()===e.toLowerCase()}const GC="/docs/contract/decodeEventLog";function ej(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new _8({docsPath:GC});const c=e.find(m=>m.type==="event"&&o===aE(Ho(m)));if(!(c&&"name"in c)||c.type!=="event")throw new NT(o,{docsPath:GC});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(m=>!("name"in m&&m.name)),h=d?[]:{},f=u.map((m,v)=>[m,v]).filter(([m])=>"indexed"in m&&m.indexed);for(let m=0;m<f.length;m++){const[v,y]=f[m],w=a[m];if(!w)throw new TT({abiItem:c,param:v});h[d?y:v.name||y]=tj({param:v,value:w})}const p=u.filter(m=>!("indexed"in m&&m.indexed));if(p.length>0){if(n&&n!=="0x")try{const m=Bg(p,n);if(m)if(d)for(let v=0;v<u.length;v++)h[v]=h[v]??m.shift();else for(let v=0;v<p.length;v++)h[p[v].name]=m[v]}catch(m){if(i)throw m instanceof AT||m instanceof HT?new eb({abiItem:c,data:n,params:p,size:Ut(n)}):m}else if(i)throw new eb({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function tj({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(Bg([t],e)||[])[0]}function nj(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===aE(u));if(!c)return null;const l=ej({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!rj({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof NT)return null;if(c instanceof eb||c instanceof TT){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function rj(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?XU(o,a):i.type==="string"||i.type==="bytes"?lf(Tg(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function dP(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function sj(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>dP(i));return!("abi"in e)||!e.abi?s:nj({abi:e.abi,logs:s,strict:n})}async function hP(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?ae(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,ae(i)]},{dedupe:!0}):(a||o)&&(c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,ae(i)]},{dedupe:!!a})),!c)throw new YT({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||Mg)(c)}const ij={"0x0":"reverted","0x1":"success"};function fP(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>dP(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?qo(t.transactionIndex):null,status:t.status?ij[t.status]:null,type:t.type?I3[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const oj=eE("transactionReceipt",fP);async function KC(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new ZT({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||fP)(n)}async function aj(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=rP({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let w=0;w<l.length;w++){const{abi:b,address:C,args:x,functionName:T}=l[w];try{const N=Fg({abi:b,args:x,functionName:T});p+=(N.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(N.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:N,target:C}]}catch(N){const U=Om(N,{abi:b,address:C,args:x,docsPath:"/docs/contract/multicall",functionName:T,sender:n});if(!r)throw U;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:C}]}}const m=await Promise.allSettled(h.map(w=>vt(t,uP,"readContract")({abi:Tb,account:n,address:d,args:[w],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),v=[];for(let w=0;w<m.length;w++){const b=m[w];if(b.status==="rejected"){if(!r)throw b.reason;for(let x=0;x<h[w].length;x++)v.push({status:"failure",error:b.reason,result:void 0});continue}const C=b.value;for(let x=0;x<C.length;x++){const{returnData:T,success:N}=C[x],{callData:U}=h[w][x],{abi:E,address:k,functionName:R,args:j}=l[v.length];try{if(U==="0x")throw new kg;if(!N)throw new dE({data:T});const L=uE({abi:E,args:j,data:T,functionName:R});v.push(r?{result:L,status:"success"}:L)}catch(L){const B=Om(L,{abi:E,address:k,args:j,docsPath:"/docs/contract/multicall",functionName:R});if(!r)throw B;v.push({error:B,result:void 0,status:"failure"})}}}if(v.length!==l.length)throw new G("multicall results mismatch");return v}const Kf=new Rg(8192);function cj(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(Kf.get(n))return Kf.get(n);const r=t().finally(()=>Kf.delete(n));return Kf.set(n,r),r}async function Ub(t){return new Promise(e=>setTimeout(e,t))}function km(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await Ub(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function lj(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Zu(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Zu(new Error("method not supported"),{method:l});const u=s?Pg(`${c}.${Vo(n)}`):void 0;return cj(()=>km(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case ub.code:throw new ub(f);case db.code:throw new db(f);case hb.code:throw new hb(f,{method:n.method});case fb.code:throw new fb(f);case eh.code:throw new eh(f);case pb.code:throw new pb(f);case mb.code:throw new mb(f);case pl.code:throw new pl(f);case gb.code:throw new gb(f);case Zu.code:throw new Zu(f,{method:n.method});case Pm.code:throw new Pm(f);case yb.code:throw new yb(f);case Sn.code:throw new Sn(f);case wb.code:throw new wb(f);case bb.code:throw new bb(f);case vb.code:throw new vb(f);case Eb.code:throw new Eb(f);case Go.code:throw new Go(f);case xb.code:throw new xb(f);case Cb.code:throw new Cb(f);case _b.code:throw new _b(f);case Sb.code:throw new Sb(f);case Ab.code:throw new Ab(f);case Ib.code:throw new Ib(f);case Nb.code:throw new Nb(f);case 5e3:throw new Sn(f);default:throw h instanceof G?h:new jD(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof QT){const m=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(m!=null&&m.match(/\d/))return Number.parseInt(m)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>uj(h)}),{enabled:s,id:u})}}function uj(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Pm.code||t.code===eh.code:t instanceof QT&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function zg(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function dj(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function hj(t){const{authorizationList:e}=t;if(e)for(const n of e){const{chainId:r}=n,s=n.address;if(!ln(s))throw new ar({address:s});if(r<0)throw new Dg({chainId:r})}hE(t)}function fj(t){const{blobVersionedHashes:e}=t;if(e){if(e.length===0)throw new j3;for(const n of e){const r=Ut(n),s=qo(Qd(n,0,1));if(r!==32)throw new d6({hash:n,size:r});if(s!==U3)throw new h6({hash:n,version:s})}}hE(t)}function hE(t){const{chainId:e,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=t;if(e<=0)throw new Dg({chainId:e});if(s&&!ln(s))throw new ar({address:s});if(r&&r>jg)throw new Ka({maxFeePerGas:r});if(n&&r&&n>r)throw new Xd({maxFeePerGas:r,maxPriorityFeePerGas:n})}function pj(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(e<=0)throw new Dg({chainId:e});if(i&&!ln(i))throw new ar({address:i});if(n||s)throw new G("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>jg)throw new Ka({maxFeePerGas:r})}function mj(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(i&&!ln(i))throw new ar({address:i});if(typeof e<"u"&&e<=0)throw new Dg({chainId:e});if(n||s)throw new G("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>jg)throw new Ka({maxFeePerGas:r})}function qg(t){if(!t||t.length===0)return[];const e=[];for(let n=0;n<t.length;n++){const{address:r,storageKeys:s}=t[n];for(let i=0;i<s.length;i++)if(s[i].length-2!==64)throw new kD({storageKey:s[i]});if(!ln(r,{strict:!1}))throw new ar({address:r});e.push([r,s])}return e}function gj(t,e){const n=M3(t);return n==="eip1559"?bj(t,e):n==="eip2930"?vj(t,e):n==="eip4844"?wj(t,e):n==="eip7702"?yj(t,e):Ej(t,e)}function yj(t,e){const{authorizationList:n,chainId:r,gas:s,nonce:i,to:o,value:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:d}=t;hj(t);const h=qg(u),f=xj(n);return Ui(["0x04",Wo([ae(r),i?ae(i):"0x",l?ae(l):"0x",c?ae(c):"0x",s?ae(s):"0x",o??"0x",a?ae(a):"0x",d??"0x",h,f,...hf(t,e)])])}function wj(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:o,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:d}=t;fj(t);let h=t.blobVersionedHashes,f=t.sidecars;if(t.blobs&&(typeof h>"u"||typeof f>"u")){const b=typeof t.blobs[0]=="string"?t.blobs:t.blobs.map(T=>jn(T)),C=t.kzg,x=rE({blobs:b,kzg:C});if(typeof h>"u"&&(h=R3({commitments:x})),typeof f>"u"){const T=sE({blobs:b,commitments:x,kzg:C});f=L3({blobs:b,commitments:x,proofs:T})}}const p=qg(u),m=[ae(n),s?ae(s):"0x",l?ae(l):"0x",c?ae(c):"0x",r?ae(r):"0x",i??"0x",o?ae(o):"0x",d??"0x",p,a?ae(a):"0x",h??[],...hf(t,e)],v=[],y=[],w=[];if(f)for(let b=0;b<f.length;b++){const{blob:C,commitment:x,proof:T}=f[b];v.push(C),y.push(x),w.push(T)}return Ui(["0x03",Wo(f?[m,v,y,w]:m)])}function bj(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:l,data:u}=t;hE(t);const d=qg(l),h=[ae(n),s?ae(s):"0x",c?ae(c):"0x",a?ae(a):"0x",r?ae(r):"0x",i??"0x",o?ae(o):"0x",u??"0x",d,...hf(t,e)];return Ui(["0x02",Wo(h)])}function vj(t,e){const{chainId:n,gas:r,data:s,nonce:i,to:o,value:a,accessList:c,gasPrice:l}=t;pj(t);const u=qg(c),d=[ae(n),i?ae(i):"0x",l?ae(l):"0x",r?ae(r):"0x",o??"0x",a?ae(a):"0x",s??"0x",u,...hf(t,e)];return Ui(["0x01",Wo(d)])}function Ej(t,e){const{chainId:n=0,gas:r,data:s,nonce:i,to:o,value:a,gasPrice:c}=t;mj(t);let l=[i?ae(i):"0x",c?ae(c):"0x",r?ae(r):"0x",o??"0x",a?ae(a):"0x",s??"0x"];if(e){const u=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+e.v-27n);const f=27n+(e.v===27n?0n:1n);if(e.v!==f)throw new PD({v:e.v});return f})(),d=ki(e.r),h=ki(e.s);l=[...l,ae(u),d==="0x00"?"0x":d,h==="0x00"?"0x":h]}else n>0&&(l=[...l,ae(n),"0x","0x"]);return Wo(l)}function hf(t,e){const n=e??t,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const i=ki(n.r),o=ki(n.s);return[typeof s=="number"?s?ae(1):"0x":r===0n?"0x":r===1n?ae(1):r===27n?"0x":ae(1),i==="0x00"?"0x":i,o==="0x00"?"0x":o]}function xj(t){if(!t||t.length===0)return[];const e=[];for(const n of t){const{chainId:r,nonce:s,...i}=n,o=n.address;e.push([r?Ci(r):"0x",o,s?Ci(s):"0x",...hf({},i)])}return e}class Cj extends G{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function _j(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new Cj({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const ty=new Map,YC=new Map;let Sj=0;function Rm(t,e,n){const r=++Sj,s=()=>ty.get(t)||[],i=()=>{const u=s();ty.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=YC.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(ty.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const m of h)(p=(f=m.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&YC.set(t,l),o}function pP(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await Ub(c);const l=async()=>{s&&(await t({unpoll:i}),await Ub(r),l())};l()})(),i}function Aj(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Vo(["watchBlockNumber",t.uid,e,n,o]);return Rm(d,{onBlockNumber:r,onError:s},h=>pP(async()=>{var f;try{const p=await vt(t,QU,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let m=c+1n;m<p;m++)h.onBlockNumber(m,c),c=m}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Vo(["watchBlockNumber",t.uid,e,n]);return Rm(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const m=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(w=>w.config.type==="webSocket"||w.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:v}=await m.subscribe({params:["newHeads"],onData(y){var b;if(!f)return;const w=ds((b=y.result)==null?void 0:b.number);h.onBlockNumber(w,c),c=w},onError(y){var w;(w=h.onError)==null||w.call(h,y)}});p=v,f||p()}catch(m){s==null||s(m)}})(),()=>p()})})()}async function Ij(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function Nj(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Vo(["watchPendingTransactions",t.uid,e,i]);return Rm(l,{onTransactions:r,onError:n},u=>{let d;const h=pP(async()=>{var f;try{if(!d)try{d=await vt(t,VU,"createPendingTransactionFilter")({});return}catch(m){throw h(),m}const p=await vt(t,sj,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const m of p)u.onTransactions([m])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await vt(t,Ij,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function Tj(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Vo(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:m,resolve:v,reject:y}=cP(),w=a?setTimeout(()=>{p(),f(),y(new $D({hash:n}))},a):void 0;return f=Rm(c,{onReplaced:r,resolve:v,reject:y},b=>{p=vt(t,Aj,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(C){const x=N=>{clearTimeout(w),p(),N(),f()};let T=C;if(!h)try{if(d){if(e>1&&(!d.blockNumber||T-d.blockNumber+1n<e))return;x(()=>b.resolve(d));return}if(l||(h=!0,await km(async()=>{l=await vt(t,hP,"getTransaction")({hash:n}),l.blockNumber&&(T=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await vt(t,KC,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||T-d.blockNumber+1n<e))return;x(()=>b.resolve(d))}catch(N){if(N instanceof YT||N instanceof ZT){if(!l){h=!1;return}try{u=l,h=!0;const U=await km(()=>vt(t,th,"getBlock")({blockNumber:T,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:R})=>R instanceof A3});h=!1;const E=U.transactions.find(({from:R,nonce:j})=>R===u.from&&j===u.nonce);if(!E||(d=await vt(t,KC,"getTransactionReceipt")({hash:E.hash}),e>1&&(!d.blockNumber||T-d.blockNumber+1n<e)))return;let k="replaced";E.to===u.to&&E.value===u.value&&E.input===u.input?k="repriced":E.from===E.to&&E.value===0n&&(k="cancelled"),x(()=>{var R;(R=b.onReplaced)==null||R.call(b,{reason:k,replacedTransaction:u,transaction:E,transactionReceipt:d}),b.resolve(d)})}catch(U){x(()=>b.reject(U))}}else x(()=>b.reject(N))}}})}),m}async function Pj(t,{account:e=t.account,message:n}){if(!e)throw new Y1({docsPath:"/docs/actions/wallet/signMessage"});const r=Xs(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?Pg(n):n.raw instanceof Uint8Array?Ci(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function Oj(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new Y1({docsPath:"/docs/contract/writeContract"});const l=r?Xs(r):null,u=Fg({abi:n,args:i,functionName:a});try{return await vt(t,F3,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw Om(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function zr(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const zp="2.17.3",kj=()=>`@wagmi/core@${zp}`;var mP=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},$m,gP;let ta=class jb extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return kj()}constructor(e,n={}){var i;super(),$m.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof jb?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof jb&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return mP(this,$m,"m",gP).call(this,this,e)}};$m=new WeakSet,gP=function t(e,n){return n!=null&&n(e)?e:e.cause?mP(this,$m,"m",t).call(this,e.cause,n):e};class rh extends ta{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class Rj extends ta{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class $j extends ta{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class Dj extends ta{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class Uj extends ta{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class jj extends ta{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function ny(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new Rj;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const Lb=256;let Yf=Lb,Zf;function yP(t=11){if(!Zf||Yf+t>Lb*2){Zf="",Yf=0;for(let e=0;e<Lb;e++)Zf+=(256+Math.random()*256|0).toString(16).substring(1)}return Zf.substring(Yf,Yf+++t)}function wP(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Xs(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),m={...h,...p},v={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:m,type:o,uid:yP()};function y(w){return b=>{const C=b(w);for(const T in v)delete C[T];const x={...w,...C};return Object.assign(x,{extend:y(x)})}}return Object.assign(v,{extend:y(v)})}function Lj({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=yP();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:lj(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function Mj(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>Lj({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}async function Hg(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new jj({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new $j;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new Uj({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Xs(e.account??n.accounts[0]);if(o&&(o.address=Ea(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new Dj({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return wP({account:o,chain:a,name:"Connector Client",transport:l=>Mj(c)({...l,retryCount:0})})}async function Bj(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function Fj(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await Hg(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return zr(o,k3,"estimateGas")({...s,account:i})}function bP(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(ND[t])}function md(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function zj(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return zr(o,aj,"multicall")({allowFailure:n,contracts:s,...i})}function qj(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return zr(s,uP,"readContract")(r)}async function Hj(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>zj(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof iP)throw c;const l=()=>o.map(u=>qj(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function Wj(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await ZC(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await ZC(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=_T(ki(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await zr(c,O3,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:uf(u,bP(a)),symbol:d.nativeCurrency.symbol,value:u}}async function ZC(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await Hj(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=uf(c??"0",bP(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function Dm(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Dm(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Dm(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let Jf=[];function sa(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Dm(Jf,e)?Jf:(Jf=e,e)}async function Vj(t,e){const{account:n,chainId:r,...s}=e,i=n??md(t).address,o=t.getClient({chainId:r});return zr(o,oE,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let ry=!1;async function Mb(t,e={}){var l,u;if(ry)return[];ry=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(m=>m===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(m=>{const v=new Map(o?m.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...m,current:o?m.current:d.uid,connections:v}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),ry=!1,a}async function Gj(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await Hg(t,{account:n??void 0,chainId:r,connector:s}),await zr(o,F3,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function Kj(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await Hg(t,{account:n,connector:r}),zr(i,Pj,"signMessage")({...s,...n?{account:n}:{}})}class so extends ta{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class Yj extends ta{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function JC(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new Yj({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new rh;return t.setState(a=>({...a,chainId:r})),i}function Zj(t,e){const{onChange:n}=e;return t.subscribe(()=>md(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Dm(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function Jj(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function Qj(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=zr(l,Nj,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function Xj(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await zr(i,Tj,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await zr(i,hP,"getTransaction")({hash:a.transactionHash}),d=await zr(i,lP,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?_T(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function eL(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await Hg(t,{account:n??void 0,chainId:r,connector:s}),await zr(o,Oj,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function vce(t){return t}Wg.type="injected";function Wg(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...tL[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:Wg.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,m,v,y,w;const d=await this.getProvider();if(!d)throw new so;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(v=(m=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:m.value)==null?void 0:v.map(C=>Ea(C)),h.length>0&&(h=await this.getAccounts())}catch(b){const C=b;if(C.code===Sn.code)throw new Sn(C);if(C.code===pl.code)throw C}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(x=>Ea(x))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let b=await this.getChainId();if(l&&b!==l){const C=await this.switchChain({chainId:l}).catch(x=>{if(x.code===Sn.code)throw x;return{id:b}});b=(C==null?void 0:C.id)??b}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((w=c.storage)==null?void 0:w.setItem("injected.connected",!0)),{accounts:h,chainId:b}}catch(b){const C=b;throw C.code===Sn.code?new Sn(C):C.code===pl.code?new pl(C):C}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new so;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await dj(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new so;return(await l.request({method:"eth_accounts"})).map(d=>Ea(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new so;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=qp(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),m=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),m))]))return!0}throw new so}return!!(await km(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,m,v,y;const d=await this.getProvider();if(!d)throw new so;const h=c.chains.find(w=>w.id===u);if(!h)throw new Go(new rh);const f=new Promise(w=>{const b=C=>{"chainId"in C&&C.chainId===u&&(c.emitter.off("change",b),w())};c.emitter.on("change",b)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:ae(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(w){const b=w;if(b.code===4902||((m=(p=b==null?void 0:b.data)==null?void 0:p.originalError)==null?void 0:m.code)===4902)try{const{default:C,...x}=h.blockExplorers??{};let T;l!=null&&l.blockExplorerUrls?T=l.blockExplorerUrls:C&&(T=[C.url,...Object.values(x).map(E=>E.url)]);let N;(v=l==null?void 0:l.rpcUrls)!=null&&v.length?N=l.rpcUrls:N=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const U={blockExplorerUrls:T,chainId:ae(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:N};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[U]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Sn(new Error("User rejected switch after adding network."))}),f]),h}catch(C){throw new Sn(C)}throw b.code===Sn.code?new Sn(b):new Go(b)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Ea(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const tL={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:qp(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return qp(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:qp(t,"isPhantom")}}};function qp(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function nL(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function rL(){const t=new Set;let e=[];const n=()=>nL(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const sL=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},iL=sL;function oL(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Bb=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Bb(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Bb(r)(n)}}}},aL=(t,e)=>(n,r,s)=>{let i={storage:oL(()=>localStorage),partialize:m=>m,version:0,merge:(m,v)=>({...v,...m}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...m)},r,s);const u=()=>{const m=i.partialize({...r()});return l.setItem(i.name,{state:m,version:i.version})},d=s.setState;s.setState=(m,v)=>{d(m,v),u()};const h=t((...m)=>{n(...m),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var m,v;if(!l)return;o=!1,a.forEach(w=>{var b;return w((b=r())!=null?b:h)});const y=((v=i.onRehydrateStorage)==null?void 0:v.call(i,(m=r())!=null?m:h))||void 0;return Bb(l.getItem.bind(l))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate)return[!0,i.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var b;const[C,x]=w;if(f=i.merge(x,(b=r())!=null?b:h),n(f,!0),C)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(w=>w(f))}).catch(w=>{y==null||y(void 0,w)})};return s.persist={setOptions:m=>{i={...i,...m},m.storage&&(l=m.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(c.add(m),()=>{c.delete(m)})},i.skipHydration||p(),f||h},cL=aL,QC=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},sy=t=>t?QC(t):QC;var vP={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var m=n?n+l:l;if(!this._events[m])return!1;var v=this._events[m],y=arguments.length,w,b;if(v.fn){switch(v.once&&this.removeListener(l,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,d),!0;case 4:return v.fn.call(v.context,u,d,h),!0;case 5:return v.fn.call(v.context,u,d,h,f),!0;case 6:return v.fn.call(v.context,u,d,h,f,p),!0}for(b=1,w=new Array(y-1);b<y;b++)w[b-1]=arguments[b];v.fn.apply(v.context,w)}else{var C=v.length,x;for(b=0;b<C;b++)switch(v[b].once&&this.removeListener(l,v[b].fn,void 0,!0),y){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,u);break;case 3:v[b].fn.call(v[b].context,u,d);break;case 4:v[b].fn.call(v[b].context,u,d,h);break;default:if(!w)for(x=1,w=new Array(y-1);x<y;x++)w[x-1]=arguments[x];v[b].fn.apply(v[b].context,w)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var m=0,v=[],y=p.length;m<y;m++)(p[m].fn!==u||h&&!p[m].once||d&&p[m].context!==d)&&v.push(p[m]);v.length?this._events[f]=v.length===1?v[0]:v:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(vP);var lL=vP.exports;const uL=Yl(lL);class dL{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new uL})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function hL(t){return new dL(t)}function fL(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function XC(t,e){return t.slice(0,e).join(".")||"."}function e_(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function pL(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=e_(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=e_(s,c);if(u!==0)return r?e.call(this,a,c,XC(i,u)):`[ref=${XC(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function mL(t,e,n,r){return JSON.stringify(t,pL((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function gL(t){const{deserialize:e=fL,key:n="wagmi",serialize:r=mL,storage:s=EP}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const EP={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function yL(){const t=typeof window<"u"&&window.localStorage?window.localStorage:EP;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const Fb=256;let Qf=Fb,Xf;function wL(t=11){if(!Xf||Qf+t>Fb*2){Xf="",Qf=0;for(let e=0;e<Fb;e++)Xf+=(256+Math.random()*256|0).toString(16).substring(1)}return Xf.substring(Qf,Qf+++t)}function bL(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=gL({storage:yL()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?rL():void 0,a=sy(()=>i.chains),c=sy(()=>{const x=[],T=new Set;for(const N of i.connectors??[]){const U=l(N);if(x.push(U),!s&&U.rdns){const E=typeof U.rdns=="string"?[U.rdns]:U.rdns;for(const k of E)T.add(k)}}if(!s&&o){const N=o.getProviders();for(const U of N)T.has(U.info.rdns)||x.push(l(u(U)))}return x});function l(x){var U;const T=hL(wL()),N={...x({emitter:T,chains:a.getState(),storage:n,transports:i.transports}),emitter:T,uid:T.uid};return T.on("connect",b),(U=N.setup)==null||U.call(N),N}function u(x){const{info:T}=x,N=x.provider;return Wg({target:{...T,id:T.rdns,provider:N}})}const d=new Map;function h(x={}){const T=x.chainId??v.getState().chainId,N=a.getState().find(E=>E.id===T);if(x.chainId&&!N)throw new rh;{const E=d.get(v.getState().chainId);if(E&&!N)return E;if(!N)throw new rh}{const E=d.get(T);if(E)return E}let U;if(i.client)U=i.client({chain:N});else{const E=N.id,k=a.getState().map(L=>L.id),R={},j=Object.entries(i);for(const[L,B]of j)if(!(L==="chains"||L==="client"||L==="connectors"||L==="transports"))if(typeof B=="object")if(E in B)R[L]=B[E];else{if(k.some(I=>I in B))continue;R[L]=B}else R[L]=B;U=wP({...R,chain:N,batch:R.batch??{multicall:!0},transport:L=>i.transports[E]({...L,connectors:c})})}return d.set(T,U),U}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const m="0.0.0-canary-";zp.startsWith(m)?p=Number.parseInt(zp.replace(m,"")):p=Number.parseInt(zp.split(".")[0]??"0");const v=sy(iL(n?cL(f,{migrate(x,T){if(T===p)return x;const N=f(),U=y(x,N.chainId);return{...N,chainId:U}},name:"store",partialize(x){return{connections:{__type:"Map",value:Array.from(x.connections.entries()).map(([T,N])=>{const{id:U,name:E,type:k,uid:R}=N.connector;return[T,{...N,connector:{id:U,name:E,type:k,uid:R}}]})},chainId:x.chainId,current:x.current}},merge(x,T){typeof x=="object"&&x&&"status"in x&&delete x.status;const N=y(x,T.chainId);return{...T,...x,chainId:N}},skipHydration:s,storage:n,version:p}):f));v.setState(f());function y(x,T){return x&&typeof x=="object"&&"chainId"in x&&typeof x.chainId=="number"&&a.getState().some(N=>N.id===x.chainId)?x.chainId:T}r&&v.subscribe(({connections:x,current:T})=>{var N;return T?(N=x.get(T))==null?void 0:N.chainId:void 0},x=>{if(a.getState().some(N=>N.id===x))return v.setState(N=>({...N,chainId:x??N.chainId}))}),o==null||o.subscribe(x=>{const T=new Set,N=new Set;for(const E of c.getState())if(T.add(E.id),E.rdns){const k=typeof E.rdns=="string"?[E.rdns]:E.rdns;for(const R of k)N.add(R)}const U=[];for(const E of x){if(N.has(E.info.rdns))continue;const k=l(u(E));T.has(k.id)||U.push(k)}n&&!v.persist.hasHydrated()||c.setState(E=>[...E,...U],!0)});function w(x){v.setState(T=>{const N=T.connections.get(x.uid);return N?{...T,connections:new Map(T.connections).set(x.uid,{accounts:x.accounts??N.accounts,chainId:x.chainId??N.chainId,connector:N.connector})}:T})}function b(x){v.getState().status==="connecting"||v.getState().status==="reconnecting"||v.setState(T=>{const N=c.getState().find(U=>U.uid===x.uid);return N?(N.emitter.listenerCount("connect")&&N.emitter.off("connect",w),N.emitter.listenerCount("change")||N.emitter.on("change",w),N.emitter.listenerCount("disconnect")||N.emitter.on("disconnect",C),{...T,connections:new Map(T.connections).set(x.uid,{accounts:x.accounts,chainId:x.chainId,connector:N}),current:x.uid,status:"connected"}):T})}function C(x){v.setState(T=>{const N=T.connections.get(x.uid);if(N){const E=N.connector;E.emitter.listenerCount("change")&&N.connector.emitter.off("change",w),E.emitter.listenerCount("disconnect")&&N.connector.emitter.off("disconnect",C),E.emitter.listenerCount("connect")||N.connector.emitter.on("connect",b)}if(T.connections.delete(x.uid),T.connections.size===0)return{...T,connections:new Map,current:null,status:"disconnected"};const U=T.connections.values().next().value;return{...T,connections:new Map(T.connections),current:U.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return v.getState()},setState(x){let T;typeof x=="function"?T=x(v.getState()):T=x;const N=f();typeof T!="object"&&(T=N),Object.keys(N).some(E=>!(E in T))&&(T=N),v.setState(T,!0)},subscribe(x,T,N){return v.subscribe(x,T,N?{...N,fireImmediately:N.emitImmediately}:void 0)},_internal:{mipd:o,store:v,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(x){const T=typeof x=="function"?x(a.getState()):x;if(T.length!==0)return a.setState(T,!0)},subscribe(x){return a.subscribe(x)}},connectors:{providerDetailToConnector:u,setup:l,setState(x){return c.setState(typeof x=="function"?x(c.getState()):x,!0)},subscribe(x){return c.subscribe(x)}},events:{change:w,connect:b,disconnect:C}}}}function vL(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?Mb(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function EL(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=vL(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=te.useRef(!0);return te.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const xL=te.createContext(void 0);function CL(t){const{children:e,config:n}=t,r={value:n};return te.createElement(EL,t,te.createElement(xL.Provider,r,e))}var Vg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Gg=typeof window>"u"||"Deno"in globalThis;function is(){}function _L(t,e){return typeof t=="function"?t(e):t}function SL(t){return typeof t=="number"&&t>=0&&t!==1/0}function AL(t,e){return Math.max(t+(e||0)-Date.now(),0)}function zb(t,e){return typeof t=="function"?t(e):t}function IL(t,e){return typeof t=="function"?t(e):t}function t_(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==fE(o,e.options))return!1}else if(!ih(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function n_(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(sh(e.options.mutationKey)!==sh(i))return!1}else if(!ih(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function fE(t,e){return((e==null?void 0:e.queryKeyHashFn)||sh)(t)}function sh(t){return JSON.stringify(t,(e,n)=>qb(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ih(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>ih(t[n],e[n])):!1}function xP(t,e){if(t===e)return t;const n=r_(t)&&r_(e);if(n||qb(t)&&qb(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=xP(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function r_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function qb(t){if(!s_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!s_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function s_(t){return Object.prototype.toString.call(t)==="[object Object]"}function NL(t){return new Promise(e=>{setTimeout(e,t)})}function TL(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?xP(t,e):e}function PL(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function OL(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var pE=Symbol();function CP(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===pE?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ta,go,El,YA,kL=(YA=class extends Vg{constructor(){super();qe(this,Ta);qe(this,go);qe(this,El);Ne(this,El,e=>{if(!Gg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){z(this,go)||this.setEventListener(z(this,El))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,go))==null||e.call(this),Ne(this,go,void 0))}setEventListener(e){var n;Ne(this,El,e),(n=z(this,go))==null||n.call(this),Ne(this,go,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){z(this,Ta)!==e&&(Ne(this,Ta,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof z(this,Ta)=="boolean"?z(this,Ta):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ta=new WeakMap,go=new WeakMap,El=new WeakMap,YA),_P=new kL,xl,yo,Cl,ZA,RL=(ZA=class extends Vg{constructor(){super();qe(this,xl,!0);qe(this,yo);qe(this,Cl);Ne(this,Cl,e=>{if(!Gg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){z(this,yo)||this.setEventListener(z(this,Cl))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,yo))==null||e.call(this),Ne(this,yo,void 0))}setEventListener(e){var n;Ne(this,Cl,e),(n=z(this,yo))==null||n.call(this),Ne(this,yo,e(this.setOnline.bind(this)))}setOnline(e){z(this,xl)!==e&&(Ne(this,xl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return z(this,xl)}},xl=new WeakMap,yo=new WeakMap,Cl=new WeakMap,ZA),Um=new RL;function $L(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function DL(t){return Math.min(1e3*2**t,3e4)}function SP(t){return(t??"online")==="online"?Um.isOnline():!0}var AP=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function iy(t){return t instanceof AP}function IP(t){let e=!1,n=0,r=!1,s;const i=$L(),o=m=>{var v;r||(h(new AP(m)),(v=t.abort)==null||v.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>_P.isFocused()&&(t.networkMode==="always"||Um.isOnline())&&t.canRun(),u=()=>SP(t.networkMode)&&t.canRun(),d=m=>{var v;r||(r=!0,(v=t.onSuccess)==null||v.call(t,m),s==null||s(),i.resolve(m))},h=m=>{var v;r||(r=!0,(v=t.onError)==null||v.call(t,m),s==null||s(),i.reject(m))},f=()=>new Promise(m=>{var v;s=y=>{(r||l())&&m(y)},(v=t.onPause)==null||v.call(t)}).then(()=>{var m;s=void 0,r||(m=t.onContinue)==null||m.call(t)}),p=()=>{if(r)return;let m;const v=n===0?t.initialPromise:void 0;try{m=v??t.fn()}catch(y){m=Promise.reject(y)}Promise.resolve(m).then(d).catch(y=>{var T;if(r)return;const w=t.retry??(Gg?0:3),b=t.retryDelay??DL,C=typeof b=="function"?b(n,y):b,x=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,y);if(e||!x){h(y);return}n++,(T=t.onFail)==null||T.call(t,n,y),NL(C).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var UL=t=>setTimeout(t,0);function jL(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=UL;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Rn=jL(),Pa,JA,NP=(JA=class{constructor(){qe(this,Pa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),SL(this.gcTime)&&Ne(this,Pa,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Gg?1/0:5*60*1e3))}clearGcTimeout(){z(this,Pa)&&(clearTimeout(z(this,Pa)),Ne(this,Pa,void 0))}},Pa=new WeakMap,JA),_l,Oa,$r,ka,Cn,tf,Ra,os,ui,QA,LL=(QA=class extends NP{constructor(e){super();qe(this,os);qe(this,_l);qe(this,Oa);qe(this,$r);qe(this,ka);qe(this,Cn);qe(this,tf);qe(this,Ra);Ne(this,Ra,!1),Ne(this,tf,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ne(this,ka,e.client),Ne(this,$r,z(this,ka).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ne(this,_l,BL(this.options)),this.state=e.state??z(this,_l),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=z(this,Cn))==null?void 0:e.promise}setOptions(e){this.options={...z(this,tf),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&z(this,$r).remove(this)}setData(e,n){const r=TL(this.state.data,e,this.options);return pn(this,os,ui).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){pn(this,os,ui).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=z(this,Cn))==null?void 0:r.promise;return(s=z(this,Cn))==null||s.cancel(e),n?n.then(is).catch(is):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(z(this,_l))}isActive(){return this.observers.some(e=>IL(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===pE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>zb(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!AL(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=z(this,Cn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=z(this,Cn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),z(this,$r).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(z(this,Cn)&&(z(this,Ra)?z(this,Cn).cancel({revert:!0}):z(this,Cn).cancelRetry()),this.scheduleGc()),z(this,$r).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||pn(this,os,ui).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(z(this,Cn))return z(this,Cn).continueRetry(),z(this,Cn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(Ne(this,Ra,!0),r.signal)})},i=()=>{const h=CP(this.options,n),p=(()=>{const m={client:z(this,ka),queryKey:this.queryKey,meta:this.meta};return s(m),m})();return Ne(this,Ra,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:z(this,ka),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),Ne(this,Oa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&pn(this,os,ui).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,m,v;iy(h)&&h.silent||pn(this,os,ui).call(this,{type:"error",error:h}),iy(h)||((p=(f=z(this,$r).config).onError)==null||p.call(f,h,this),(v=(m=z(this,$r).config).onSettled)==null||v.call(m,this.state.data,h,this)),this.scheduleGc()};return Ne(this,Cn,IP({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,m,v;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=z(this,$r).config).onSuccess)==null||p.call(f,h,this),(v=(m=z(this,$r).config).onSettled)==null||v.call(m,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{pn(this,os,ui).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{pn(this,os,ui).call(this,{type:"pause"})},onContinue:()=>{pn(this,os,ui).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),z(this,Cn).start()}},_l=new WeakMap,Oa=new WeakMap,$r=new WeakMap,ka=new WeakMap,Cn=new WeakMap,tf=new WeakMap,Ra=new WeakMap,os=new WeakSet,ui=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...ML(r.data,this.options),fetchMeta:e.meta??null};case"success":return Ne(this,Oa,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return iy(s)&&s.revert&&z(this,Oa)?{...z(this,Oa),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Rn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),z(this,$r).notify({query:this,type:"updated",action:e})})},QA);function ML(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:SP(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function BL(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ds,XA,FL=(XA=class extends Vg{constructor(e={}){super();qe(this,Ds);this.config=e,Ne(this,Ds,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??fE(s,n);let o=this.get(i);return o||(o=new LL({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){z(this,Ds).has(e.queryHash)||(z(this,Ds).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=z(this,Ds).get(e.queryHash);n&&(e.destroy(),n===e&&z(this,Ds).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Rn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return z(this,Ds).get(e)}getAll(){return[...z(this,Ds).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>t_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>t_(e,r)):n}notify(e){Rn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Rn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Rn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ds=new WeakMap,XA),Us,On,$a,js,to,eI,zL=(eI=class extends NP{constructor(e){super();qe(this,js);qe(this,Us);qe(this,On);qe(this,$a);this.mutationId=e.mutationId,Ne(this,On,e.mutationCache),Ne(this,Us,[]),this.state=e.state||qL(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){z(this,Us).includes(e)||(z(this,Us).push(e),this.clearGcTimeout(),z(this,On).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ne(this,Us,z(this,Us).filter(n=>n!==e)),this.scheduleGc(),z(this,On).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){z(this,Us).length||(this.state.status==="pending"?this.scheduleGc():z(this,On).remove(this))}continue(){var e;return((e=z(this,$a))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,m,v,y,w,b,C,x,T,N,U;const n=()=>{pn(this,js,to).call(this,{type:"continue"})};Ne(this,$a,IP({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(E,k)=>{pn(this,js,to).call(this,{type:"failed",failureCount:E,error:k})},onPause:()=>{pn(this,js,to).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>z(this,On).canRun(this)}));const r=this.state.status==="pending",s=!z(this,$a).canStart();try{if(r)n();else{pn(this,js,to).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=z(this,On).config).onMutate)==null?void 0:o.call(i,e,this));const k=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));k!==this.state.context&&pn(this,js,to).call(this,{type:"pending",context:k,variables:e,isPaused:s})}const E=await z(this,$a).start();return await((u=(l=z(this,On).config).onSuccess)==null?void 0:u.call(l,E,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,E,e,this.state.context)),await((p=(f=z(this,On).config).onSettled)==null?void 0:p.call(f,E,null,this.state.variables,this.state.context,this)),await((v=(m=this.options).onSettled)==null?void 0:v.call(m,E,null,e,this.state.context)),pn(this,js,to).call(this,{type:"success",data:E}),E}catch(E){try{throw await((w=(y=z(this,On).config).onError)==null?void 0:w.call(y,E,e,this.state.context,this)),await((C=(b=this.options).onError)==null?void 0:C.call(b,E,e,this.state.context)),await((T=(x=z(this,On).config).onSettled)==null?void 0:T.call(x,void 0,E,this.state.variables,this.state.context,this)),await((U=(N=this.options).onSettled)==null?void 0:U.call(N,void 0,E,e,this.state.context)),E}finally{pn(this,js,to).call(this,{type:"error",error:E})}}finally{z(this,On).runNext(this)}}},Us=new WeakMap,On=new WeakMap,$a=new WeakMap,js=new WeakSet,to=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Rn.batch(()=>{z(this,Us).forEach(r=>{r.onMutationUpdate(e)}),z(this,On).notify({mutation:this,type:"updated",action:e})})},eI);function qL(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yi,as,nf,tI,HL=(tI=class extends Vg{constructor(e={}){super();qe(this,yi);qe(this,as);qe(this,nf);this.config=e,Ne(this,yi,new Set),Ne(this,as,new Map),Ne(this,nf,0)}build(e,n,r){const s=new zL({mutationCache:this,mutationId:++Tf(this,nf)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){z(this,yi).add(e);const n=ep(e);if(typeof n=="string"){const r=z(this,as).get(n);r?r.push(e):z(this,as).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(z(this,yi).delete(e)){const n=ep(e);if(typeof n=="string"){const r=z(this,as).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&z(this,as).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=ep(e);if(typeof n=="string"){const r=z(this,as).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=ep(e);if(typeof n=="string"){const s=(r=z(this,as).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Rn.batch(()=>{z(this,yi).forEach(e=>{this.notify({type:"removed",mutation:e})}),z(this,yi).clear(),z(this,as).clear()})}getAll(){return Array.from(z(this,yi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>n_(n,r))}findAll(e={}){return this.getAll().filter(n=>n_(e,n))}notify(e){Rn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Rn.batch(()=>Promise.all(e.map(n=>n.continue().catch(is))))}},yi=new WeakMap,as=new WeakMap,nf=new WeakMap,tI);function ep(t){var e;return(e=t.options.scope)==null?void 0:e.id}function i_(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let m=!1;const v=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},y=CP(e.options,e.fetchOptions),w=async(b,C,x)=>{if(m)return Promise.reject();if(C==null&&b.pages.length)return Promise.resolve(b);const N=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:C,direction:x?"backward":"forward",meta:e.options.meta};return v(R),R})(),U=await y(N),{maxPages:E}=e.options,k=x?OL:PL;return{pages:k(b.pages,U,E),pageParams:k(b.pageParams,C,E)}};if(s&&i.length){const b=s==="backward",C=b?WL:o_,x={pages:i,pageParams:o},T=C(r,x);a=await w(x,T,b)}else{const b=t??i.length;do{const C=c===0?o[0]??r.initialPageParam:o_(r,a);if(c>0&&C==null)break;a=await w(a,C),c++}while(c<b)}return a};e.options.persister?e.fetchFn=()=>{var m,v;return(v=(m=e.options).persister)==null?void 0:v.call(m,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function o_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function WL(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var It,wo,bo,Sl,Al,vo,Il,Nl,nI,VL=(nI=class{constructor(t={}){qe(this,It);qe(this,wo);qe(this,bo);qe(this,Sl);qe(this,Al);qe(this,vo);qe(this,Il);qe(this,Nl);Ne(this,It,t.queryCache||new FL),Ne(this,wo,t.mutationCache||new HL),Ne(this,bo,t.defaultOptions||{}),Ne(this,Sl,new Map),Ne(this,Al,new Map),Ne(this,vo,0)}mount(){Tf(this,vo)._++,z(this,vo)===1&&(Ne(this,Il,_P.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,It).onFocus())})),Ne(this,Nl,Um.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,It).onOnline())})))}unmount(){var t,e;Tf(this,vo)._--,z(this,vo)===0&&((t=z(this,Il))==null||t.call(this),Ne(this,Il,void 0),(e=z(this,Nl))==null||e.call(this),Ne(this,Nl,void 0))}isFetching(t){return z(this,It).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return z(this,wo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,It).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=z(this,It).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(zb(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return z(this,It).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=z(this,It).get(r.queryHash),i=s==null?void 0:s.state.data,o=_L(e,i);if(o!==void 0)return z(this,It).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Rn.batch(()=>z(this,It).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,It).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=z(this,It);Rn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=z(this,It);return Rn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Rn.batch(()=>z(this,It).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(is).catch(is)}invalidateQueries(t,e={}){return Rn.batch(()=>(z(this,It).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Rn.batch(()=>z(this,It).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(is)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(is)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=z(this,It).build(this,e);return n.isStaleByTime(zb(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(is).catch(is)}fetchInfiniteQuery(t){return t.behavior=i_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(is).catch(is)}ensureInfiniteQueryData(t){return t.behavior=i_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Um.isOnline()?z(this,wo).resumePausedMutations():Promise.resolve()}getQueryCache(){return z(this,It)}getMutationCache(){return z(this,wo)}getDefaultOptions(){return z(this,bo)}setDefaultOptions(t){Ne(this,bo,t)}setQueryDefaults(t,e){z(this,Sl).set(sh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...z(this,Sl).values()],n={};return e.forEach(r=>{ih(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){z(this,Al).set(sh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...z(this,Al).values()],n={};return e.forEach(r=>{ih(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...z(this,bo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=fE(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===pE&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...z(this,bo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){z(this,It).clear(),z(this,wo).clear()}},It=new WeakMap,wo=new WeakMap,bo=new WeakMap,Sl=new WeakMap,Al=new WeakMap,vo=new WeakMap,Il=new WeakMap,Nl=new WeakMap,nI),GL=te.createContext(void 0),KL=({client:t,children:e})=>(te.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),g.jsx(GL.Provider,{value:t,children:e}));const oe=t=>typeof window<"u"&&window.location.hostname==="localhost"?t:"/hushr"+t,ye=t=>{const e=t.toString();let n=0;for(let s=0;s<e.length;s++){const i=e.charCodeAt(s);n=(n<<5)-n+i,n=n&n}const r=Math.abs(n%16)+1;return oe(`/avatars/${r}.webp`)},YL=Symbol(),mE=Symbol(),xu="a",gd="w";let ZL=(t,e)=>new Proxy(t,e);const Hb=Object.getPrototypeOf,Wb=new WeakMap,TP=t=>t&&(Wb.has(t)?Wb.get(t):Hb(t)===Object.prototype||Hb(t)===Array.prototype),jm=t=>typeof t=="object"&&t!==null,JL=t=>{if(Array.isArray(t))return Array.from(t);const e=Object.getOwnPropertyDescriptors(t);return Object.values(e).forEach(n=>{n.configurable=!0}),Object.create(Hb(t),e)},gE=t=>t[mE]||t,PP=(t,e,n,r)=>{if(!TP(t))return t;let s=r&&r.get(t);if(!s){const c=gE(t);s=(l=>Object.values(Object.getOwnPropertyDescriptors(l)).some(u=>!u.configurable&&!u.writable))(c)?[c,JL(c)]:[c],r==null||r.set(t,s)}const[i,o]=s;let a=n&&n.get(i);return a&&a[1].f===!!o||(a=((c,l)=>{const u={f:l};let d=!1;const h=(p,m)=>{if(!d){let v=u[xu].get(c);if(v||(v={},u[xu].set(c,v)),p===gd)v[gd]=!0;else{let y=v[p];y||(y=new Set,v[p]=y),y.add(m)}}},f={get:(p,m)=>m===mE?c:(h("k",m),PP(Reflect.get(p,m),u[xu],u.c,u.t)),has:(p,m)=>m===YL?(d=!0,u[xu].delete(c),!0):(h("h",m),Reflect.has(p,m)),getOwnPropertyDescriptor:(p,m)=>(h("o",m),Reflect.getOwnPropertyDescriptor(p,m)),ownKeys:p=>(h(gd),Reflect.ownKeys(p))};return l&&(f.set=f.deleteProperty=()=>!1),[f,u]})(i,!!o),a[1].p=ZL(o||i,a[0]),n&&n.set(i,a)),a[1][xu]=e,a[1].c=n,a[1].t=r,a[1].p},OP=(t,e,n,r,s=Object.is)=>{if(s(t,e))return!1;if(!jm(t)||!jm(e))return!0;const i=n.get(gE(t));if(!i)return!0;if(r){const a=r.get(t);if(a&&a.n===e)return a.g;r.set(t,{n:e,g:!1})}let o=null;try{for(const a of i.h||[])if(o=Reflect.has(t,a)!==Reflect.has(e,a),o)return o;if(i[gd]===!0){if(o=((a,c)=>{const l=Reflect.ownKeys(a),u=Reflect.ownKeys(c);return l.length!==u.length||l.some((d,h)=>d!==u[h])})(t,e),o)return o}else for(const a of i.o||[])if(o=!!Reflect.getOwnPropertyDescriptor(t,a)!=!!Reflect.getOwnPropertyDescriptor(e,a),o)return o;for(const a of i.k||[])if(o=OP(t[a],e[a],n,r,s),o)return o;return o===null&&(o=!0),o}finally{r&&r.set(t,{n:e,g:o})}},QL=t=>TP(t)&&t[mE]||null,a_=(t,e=!0)=>{Wb.set(t,e)},XL=(t,e,n)=>{const r=[],s=new WeakSet,i=(o,a)=>{if(s.has(o))return;jm(o)&&s.add(o);const c=jm(o)&&e.get(gE(o));if(c){var l,u;if((l=c.h)==null||l.forEach(h=>{const f=`:has(${String(h)})`;r.push(a?[...a,f]:[f])}),c[gd]===!0){const h=":ownKeys";r.push(a?[...a,h]:[h])}else{var d;(d=c.o)==null||d.forEach(h=>{const f=`:hasOwn(${String(h)})`;r.push(a?[...a,f]:[f])})}(u=c.k)==null||u.forEach(h=>{!("value"in(Object.getOwnPropertyDescriptor(o,h)||{}))||i(o[h],a?[...a,h]:[h])})}else a&&r.push(a)};return i(t),r},Lm={BASE_URL:"/hushr/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},oy=t=>typeof t=="object"&&t!==null,io=new WeakMap,Ju=new WeakSet,eM=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>oy(l)&&!Ju.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return a_(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const m=Reflect.get(l,p),{enumerable:v}=Reflect.getOwnPropertyDescriptor(l,p),y={value:m,enumerable:v,configurable:!0};if(Ju.has(m))a_(m,!1);else if(m instanceof Promise)delete y.value,y.get=()=>d(m);else if(io.has(m)){const[w,b]=io.get(m);y.value=i(w,b(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!oy(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(E,k=++a[0])=>{d!==k&&(d=k,h.forEach(R=>R(E,k)))};let p=a[1];const m=(E=++a[1])=>(p!==E&&!h.size&&(p=E,y.forEach(([k])=>{const R=k[1](E);R>d&&(d=R)})),d),v=E=>(k,R)=>{const j=[...k];j[1]=[E,...j[1]],f(j,R)},y=new Map,w=(E,k)=>{if((Lm?"production":void 0)!=="production"&&y.has(E))throw new Error("prop listener already exists");if(h.size){const R=k[3](v(E));y.set(E,[k,R])}else y.set(E,[k])},b=E=>{var k;const R=y.get(E);R&&(y.delete(E),(k=R[1])==null||k.call(R))},C=E=>(h.add(E),h.size===1&&y.forEach(([R,j],L)=>{if((Lm?"production":void 0)!=="production"&&j)throw new Error("remove already exists");const B=R[3](v(L));y.set(L,[R,B])}),()=>{h.delete(E),h.size===0&&y.forEach(([R,j],L)=>{j&&(j(),y.set(L,[R]))})}),x=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),N=e(x,{deleteProperty(E,k){const R=Reflect.get(E,k);b(k);const j=Reflect.deleteProperty(E,k);return j&&f(["delete",[k],R]),j},set(E,k,R,j){const L=Reflect.has(E,k),B=Reflect.get(E,k,j);if(L&&(t(B,R)||o.has(R)&&t(B,o.get(R))))return!0;b(k),oy(R)&&(R=QL(R)||R);let S=R;if(R instanceof Promise)R.then(I=>{R.status="fulfilled",R.value=I,f(["resolve",[k],I])}).catch(I=>{R.status="rejected",R.reason=I,f(["reject",[k],I])});else{!io.has(R)&&n(R)&&(S=c(R));const I=!Ju.has(S)&&io.get(S);I&&w(k,I)}return Reflect.set(E,k,S,j),f(["set",[k],R,B]),!0}});o.set(l,N);const U=[x,m,i,C];return io.set(N,U),Reflect.ownKeys(l).forEach(E=>{const k=Object.getOwnPropertyDescriptor(l,E);"value"in k&&(N[E]=l[E],delete k.value,delete k.writable),Object.defineProperty(x,E,k)}),N})=>[c,io,Ju,t,e,n,r,s,i,o,a],[tM]=eM();function ht(t={}){return tM(t)}function Qt(t,e,n){const r=io.get(t);(Lm?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function Za(t,e){const n=io.get(t);(Lm?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function Ja(t){return Ju.add(t),t}function un(t,e,n,r){let s=t[e];return Qt(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function nM(t){const e=ht({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var c_={};const q={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof c_<"u"?c_.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},oh={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=q.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var rM=20,sM=1,Qa=1e6,l_=1e6,iM=-7,oM=21,aM=!1,ff="[big.js] ",lc=ff+"Invalid ",Kg=lc+"decimal places",cM=lc+"rounding mode",kP=ff+"Division by zero",rt={},Ws=void 0,lM=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function RP(){function t(e){var n=this;if(!(n instanceof t))return e===Ws?RP():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(lc+"value");e=e===0&&1/e<0?"-0":String(e)}uM(n,e)}n.constructor=t}return t.prototype=rt,t.DP=rM,t.RM=sM,t.NE=iM,t.PE=oM,t.strict=aM,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function uM(t,e){var n,r,s;if(!lM.test(e))throw Error(lc+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function uc(t,e,n,r){var s=t.c;if(n===Ws&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(cM);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Ws))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Ws||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function dc(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}rt.abs=function(){var t=new this.constructor(this);return t.s=1,t};rt.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};rt.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Qa)throw Error(Kg);if(!s[0])throw Error(kP);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,m=r.slice(0,a),v=m.length,y=t,w=y.c=[],b=0,C=o+(y.e=e.e-t.e)+1;for(y.s=i,i=C<0?0:C,h.unshift(0);v++<a;)m.push(0);do{for(l=0;l<10;l++){if(a!=(v=m.length))u=a>v?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=m[d]){u=s[d]>m[d]?1:-1;break}if(u<0){for(c=v==a?s:h;v;){if(m[--v]<c[v]){for(d=v;d&&!m[--d];)m[d]=9;--m[d],m[v]+=10}m[v]-=c[v]}for(;!m[0];)m.shift()}else break}w[b++]=u?l:++l,m[0]&&u?m[v]=r[f]||0:m=[r[f]]}while((f++<p||m[0]!==Ws)&&i--);return!w[0]&&b!=1&&(w.shift(),y.e--,C--),b>C&&uc(y,C,n.RM,m[0]!==Ws),y};rt.eq=function(t){return this.cmp(t)===0};rt.gt=function(t){return this.cmp(t)>0};rt.gte=function(t){return this.cmp(t)>-1};rt.lt=function(t){return this.cmp(t)<0};rt.lte=function(t){return this.cmp(t)<1};rt.minus=rt.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};rt.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(kP);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};rt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};rt.plus=rt.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};rt.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-l_||t>l_)throw Error(lc+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};rt.prec=function(t,e){if(t!==~~t||t<1||t>Qa)throw Error(lc+"precision");return uc(new this.constructor(this),t,e)};rt.round=function(t,e){if(t===Ws)t=0;else if(t!==~~t||t<-Qa||t>Qa)throw Error(Kg);return uc(new this.constructor(this),t+this.e+1,e)};rt.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(ff+"No square root");i=Math.sqrt(+dc(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return uc(t,(s.DP-=4)+t.e+1,s.RM)};rt.times=rt.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};rt.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Ws){if(t!==~~t||t<0||t>Qa)throw Error(Kg);for(n=uc(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return dc(n,!0,!!r)};rt.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Ws){if(t!==~~t||t<0||t>Qa)throw Error(Kg);for(n=uc(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return dc(n,!1,!!r)};rt[Symbol.for("nodejs.util.inspect.custom")]=rt.toJSON=rt.toString=function(){var t=this,e=t.constructor;return dc(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};rt.toNumber=function(){var t=+dc(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(ff+"Imprecise conversion");return t};rt.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Ws){if(t!==~~t||t<1||t>Qa)throw Error(lc+"precision");for(n=uc(new r(n),t,e);n.c.length<t;)n.c.push(0)}return dc(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};rt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(ff+"valueOf disallowed");return dc(t,t.e<=e.NE||t.e>=e.PE,!0)};var Cu=RP();const dM={bigNumber(t){return t?new Cu(t):new Cu(0)},multiply(t,e){if(t===void 0||e===void 0)return new Cu(0);const n=new Cu(t),r=new Cu(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},hM=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],fM=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],pM=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],mM={getERC20Abi:t=>q.USDT_CONTRACT_ADDRESSES.includes(t)?pM:hM,getSwapAbi:()=>fM},mr={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Ae={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function ay(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Ce={setItem(t,e){Qu()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Qu())return localStorage.getItem(t)||void 0},removeItem(t){Qu()&&localStorage.removeItem(t)},clear(){Qu()&&localStorage.clear()}};function Qu(){return typeof window<"u"&&typeof localStorage<"u"}function Ei(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var u_={};const cy=(typeof process<"u"&&typeof u_<"u"?u_.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",$P=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]},{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]}],gM="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",et={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:cy,SECURE_SITE_DASHBOARD:`${cy}/dashboard`,SECURE_SITE_FAVICON:`${cy}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld","coinbase"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},ee={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=ee.getActiveNamespace(),e=ee.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Ce.setItem(Ae.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Ce.getItem(Ae.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Ce.removeItem(Ae.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Ce.setItem(Ae.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Ce.setItem(Ae.ACTIVE_CAIP_NETWORK_ID,t),ee.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Ce.getItem(Ae.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Ce.removeItem(Ae.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=ay(t);Ce.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=ee.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Ce.setItem(Ae.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Ce.getItem(Ae.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=ay(t);Ce.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Ce.getItem(Ae.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=ay(t);return Ce.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Ce.setItem(Ae.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Ce.getItem(Ae.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Ce.removeItem(Ae.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Ce.getItem(Ae.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Ce.getItem(Ae.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Ce.setItem(Ae.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Ce.getItem(Ae.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Ce.getItem(Ae.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Ce.setItem(Ae.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=ee.getConnectedNamespaces();e.includes(t)||(e.push(t),ee.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=ee.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),ee.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Ce.getItem(Ae.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Ce.setItem(Ae.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Ce.removeItem(Ae.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Ce.getItem(Ae.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=ee.getBalanceCache();Ce.setItem(Ae.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=ee.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;ee.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=ee.getBalanceCache();e[t.caipAddress]=t,Ce.setItem(Ae.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Ce.getItem(Ae.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=ee.getBalanceCache();Ce.setItem(Ae.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=ee.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),ee.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=ee.getNativeBalanceCache();e[t.caipAddress]=t,Ce.setItem(Ae.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Ce.getItem(Ae.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=ee.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;ee.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=ee.getEnsCache();e[t.address]=t,Ce.setItem(Ae.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=ee.getEnsCache();Ce.setItem(Ae.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Ce.getItem(Ae.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=ee.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;ee.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=ee.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Ce.setItem(Ae.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=ee.getIdentityCache();Ce.setItem(Ae.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Ce.removeItem(Ae.PORTFOLIO_CACHE),Ce.removeItem(Ae.NATIVE_BALANCE_CACHE),Ce.removeItem(Ae.ENS_CACHE),Ce.removeItem(Ae.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Ce.setItem(Ae.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Ce.getItem(Ae.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=ee.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===q.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Ce.setItem(Ae.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Ce.getItem(Ae.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=ee.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Ce.setItem(Ae.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Ce.getItem(Ae.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=ee.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Ce.setItem(Ae.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=ee.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Ce.setItem(Ae.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(ee.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},ge={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ge.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=et.TEN_SEC_MS:!0},isAllowedRetry(t,e=et.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ge.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+et.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ge.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ge.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?ee.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ge.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return q.W3M_API_URL},getBlockchainApiUrl(){return q.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return q.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?et.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in q.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function _u(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class pf{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await _u(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await _u(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await _u(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await _u(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await _u(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const yM={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?et.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ge.isTelegram()){if(ge.isIos())return t.filter(e=>e!=="google");if(ge.isMac())return t.filter(e=>e!=="x");if(ge.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},ve=ht({features:et.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:et.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),V={state:ve,subscribeKey(t,e){return un(ve,t,e)},setOptions(t){Object.assign(ve,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...ve.remoteFeatures,...t};ve.remoteFeatures=e,(n=ve.remoteFeatures)!=null&&n.socials&&(ve.remoteFeatures.socials=yM.filterSocialsByPlatform(ve.remoteFeatures.socials))},setFeatures(t){if(!t)return;ve.features||(ve.features=et.DEFAULT_FEATURES);const e={...ve.features,...t};ve.features=e},setProjectId(t){ve.projectId=t},setCustomRpcUrls(t){ve.customRpcUrls=t},setAllWallets(t){ve.allWallets=t},setIncludeWalletIds(t){ve.includeWalletIds=t},setExcludeWalletIds(t){ve.excludeWalletIds=t},setFeaturedWalletIds(t){ve.featuredWalletIds=t},setTokens(t){ve.tokens=t},setTermsConditionsUrl(t){ve.termsConditionsUrl=t},setPrivacyPolicyUrl(t){ve.privacyPolicyUrl=t},setCustomWallets(t){ve.customWallets=t},setIsSiweEnabled(t){ve.isSiweEnabled=t},setIsUniversalProvider(t){ve.isUniversalProvider=t},setSdkVersion(t){ve.sdkVersion=t},setMetadata(t){ve.metadata=t},setDisableAppend(t){ve.disableAppend=t},setEIP6963Enabled(t){ve.enableEIP6963=t},setDebug(t){ve.debug=t},setEnableWalletConnect(t){ve.enableWalletConnect=t},setEnableWalletGuide(t){ve.enableWalletGuide=t},setEnableAuthLogger(t){ve.enableAuthLogger=t},setEnableWallets(t){ve.enableWallets=t},setPreferUniversalLinks(t){ve.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){ve.hasMultipleAddresses=t},setSIWX(t){ve.siwx=t},setConnectMethodsOrder(t){ve.features={...ve.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){ve.features={...ve.features,walletFeaturesOrder:t}},setSocialsOrder(t){ve.remoteFeatures={...ve.remoteFeatures,socials:t}},setCollapseWallets(t){ve.features={...ve.features,collapseWallets:t}},setEnableEmbedded(t){ve.enableEmbedded=t},setAllowUnsupportedChain(t){ve.allowUnsupportedChain=t},setManualWCControl(t){ve.manualWCControl=t},setEnableNetworkSwitch(t){ve.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(ve.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){ve.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return ve.universalProviderConfigOverride},getSnapshot(){return Za(ve)}},wM=Object.freeze({enabled:!0,events:[]}),bM=new pf({baseUrl:ge.getAnalyticsUrl(),clientId:null}),vM=5,EM=60*1e3,zi=ht({...wM}),xM={state:zi,subscribeKey(t,e){return un(zi,t,e)},async sendError(t,e){if(!zi.enabled)return;const n=Date.now();if(zi.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<EM}).length>=vM)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};zi.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=V.state;await bM.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ge.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){zi.enabled=!0},disable(){zi.enabled=!1},clearEvents(){zi.events=[]}};class jl extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,jl.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,jl):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function d_(t,e){const n=t instanceof jl?t:new jl(t instanceof Error?t.message:String(t),e,t);throw xM.sendError(n,n.category),n}function Ar(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return d_(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return d_(a,e)}},n[r]=i}else n[r]=s}),n}const Ms={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},CM={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Ms.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Ms.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Ms.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Ms.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===q.CHAIN.SOLANA&&t===Ms.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Ms.COINBASE.url}/dapp?cb_url=${r}`)}},dr=ht({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),_M={state:dr,subscribeNetworkImages(t){return Qt(dr.networkImages,()=>t(dr.networkImages))},subscribeKey(t,e){return un(dr,t,e)},subscribe(t){return Qt(dr,()=>t(dr))},setWalletImage(t,e){dr.walletImages[t]=e},setNetworkImage(t,e){dr.networkImages[t]=e},setChainImage(t,e){dr.chainImages[t]=e},setConnectorImage(t,e){dr.connectorImages={...dr.connectorImages,[t]:e}},setTokenImage(t,e){dr.tokenImages[t]=e},setCurrencyImage(t,e){dr.currencyImages[t]=e}},us=Ar(_M),SM={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},ly=ht({networkImagePromises:{}}),DP={async fetchWalletImage(t){if(t)return await we._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(ly.networkImagePromises[t]||(ly.networkImagePromises[t]=we._fetchNetworkImage(t)),await ly.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return us.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return us.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return us.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return us.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return us.state.connectorImages[t.imageId]},getChainImage(t){return us.state.networkImages[SM[t]]}},qi=ht({message:"",variant:"info",open:!1}),AM={state:qi,subscribeKey(t,e){return un(qi,t,e)},open(t,e){const{debug:n}=V.state,{shortMessage:r,longMessage:s}=t;n&&(qi.message=r,qi.variant=e,qi.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){qi.open=!1,qi.message="",qi.variant="info"}},Rt=Ar(AM),IM=ge.getAnalyticsUrl(),NM=new pf({baseUrl:IM,clientId:null}),TM=["MODAL_CREATED"],ni=ht({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),tt={state:ni,subscribe(t){return Qt(ni,()=>t(ni))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=V.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=ne.state.address;if(TM.includes(t.data.event)||typeof window>"u")return;await NM.post({path:"/e",params:tt.getSdkProperties(),body:{eventId:ge.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),ni.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===q.HTTP_STATUS_CODES.FORBIDDEN&&!ni.reportedErrors.FORBIDDEN&&(Rt.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Qu()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),ni.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;ni.timestamp=Date.now(),ni.data=t,(e=V.state.features)!=null&&e.analytics&&tt._sendAnalyticsEvent(ni)}},PM=ge.getApiUrl(),Fn=new pf({baseUrl:PM,clientId:null}),OM=40,h_=4,kM=20,Te=ht({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),we={state:Te,subscribeKey(t,e){return un(Te,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=V.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return V.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Fn.baseUrl}/getWalletImage/${t}`,n=await Fn.getBlob({path:e,params:we._getSdkProperties()});us.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Fn.baseUrl}/public/getAssetImage/${t}`,n=await Fn.getBlob({path:e,params:we._getSdkProperties()});us.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Fn.baseUrl}/public/getAssetImage/${t}`,n=await Fn.getBlob({path:e,params:we._getSdkProperties()});us.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Fn.baseUrl}/public/getCurrencyImage/${t}`,n=await Fn.getBlob({path:e,params:we._getSdkProperties()});us.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Fn.baseUrl}/public/getTokenImage/${t}`,n=await Fn.getBlob({path:e,params:we._getSdkProperties()});us.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ge.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Ms.COINBASE.id?!0:P.state.activeChain==="solana"&&(n.id===Ms.SOLFLARE.id||n.id===Ms.PHANTOM.id)):t},async fetchProjectConfig(){return(await Fn.get({path:"/appkit/v1/config",params:we._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Fn.get({path:"/projects/v1/origins",params:we._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===q.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=q.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=P.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!DP.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>we._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=re.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>we._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>we._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>we._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];we._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Ms).map(o=>o.id));const r=await Fn.get({path:"/getWallets",params:{...we._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:we._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=V.state;if(t!=null&&t.length){const e={...we._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??h_,include:t},{data:n}=await we.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>we._fetchWalletImage(i))),Te.featured=r,Te.allFeatured=r}},async fetchRecommendedWallets(){try{Te.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=V.state,r=[...e??[],...n??[]].filter(Boolean),s=P.getRequestedCaipNetworkIds().join(","),i={page:1,entries:h_,include:t,exclude:r,chains:s},{data:o,count:a}=await we.fetchWallets(i),c=ee.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>we._fetchWalletImage(d))),Te.recommended=o,Te.allRecommended=o,Te.count=a??0}catch{}finally{Te.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=V.state,s=P.getRequestedCaipNetworkIds().join(","),i=[...Te.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:OM,include:e,exclude:i,chains:s},{data:a,count:c}=await we.fetchWallets(o),l=a.slice(0,kM).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>we._fetchWalletImage(u))),Te.wallets=ge.uniqueBy([...Te.wallets,...we._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Te.count=c>Te.count?c:Te.count,Te.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await we.fetchWallets(e);n&&n.forEach(r=>{Te.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=V.state,s=P.getRequestedCaipNetworkIds().join(",");Te.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await we.fetchWallets(i);tt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>we._fetchWalletImage(c)),ge.wait(300)]),Te.search=we._filterOutExtensions(o)},initPromise(t,e){const n=Te.promises[t];return n||(Te.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&we.initPromise("connectorImages",we.fetchConnectorImages),e&&we.initPromise("featuredWallets",we.fetchFeaturedWallets),n&&we.initPromise("recommendedWallets",we.fetchRecommendedWallets),r&&we.initPromise("networkImages",we.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=V.state.features)!=null&&t.analytics&&we.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Fn.get({path:"/getAnalyticsConfig",params:we._getSdkProperties()});V.setFeatures({analytics:t})}catch{V.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Te.featured=Te.allFeatured,Te.recommended=Te.allRecommended;return}const e=P.getRequestedCaipNetworkIds().join(",");Te.featured=Te.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Te.recommended=Te.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Te.filteredWallets=Te.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Te.filteredWallets=[]},setFilterByNamespace(t){if(!t){Te.featured=Te.allFeatured,Te.recommended=Te.allRecommended;return}const e=P.getRequestedCaipNetworkIds().join(",");Te.featured=Te.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Te.recommended=Te.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Te.filteredWallets=Te.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},st=ht({view:"Connect",history:["Connect"],transactionStack:[]}),RM={state:st,subscribeKey(t,e){return un(st,t,e)},pushTransactionStack(t){st.transactionStack.push(t)},popTransactionStack(t){const e=st.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),xe.goBack();break;case"cancel":s==null||s(),xe.goBack();break}},push(t,e){t!==st.view&&(st.view=t,st.history.push(t),st.data=e)},reset(t,e){st.view=t,st.history=[t],st.data=e},replace(t,e){st.history.at(-1)===t||(st.view=t,st.history[st.history.length-1]=t,st.data=e)},goBack(){var r;const t=P.state.activeCaipAddress,e=xe.state.view==="ConnectingFarcaster",n=!t&&e;if(st.history.length>1){st.history.pop();const[s]=st.history.slice(-1);s&&(t&&s==="Connect"?st.view="Account":st.view=s)}else Qe.close();(r=st.data)!=null&&r.wallet&&(st.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){ne.setFarcasterUrl(void 0,P.state.activeChain);const a=re.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=Za(V.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(st.history.length>1){st.history=st.history.slice(0,t+1);const[e]=st.history.slice(-1);e&&(st.view=e)}},goBackOrCloseModal(){xe.state.history.length>1?xe.goBack():Qe.close()}},xe=Ar(RM),ri=ht({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Vb={state:ri,subscribe(t){return Qt(ri,()=>t(ri))},setThemeMode(t){ri.themeMode=t;try{const e=re.getAuthConnector();if(e){const n=Vb.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Ei(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){ri.themeVariables={...ri.themeVariables,...t};try{const e=re.getAuthConnector();if(e){const n=Vb.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Ei(ri.themeVariables,ri.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Za(ri)}},Zn=Ar(Vb),UP={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},He=ht({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...UP},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),$M={state:He,subscribe(t){return Qt(He,()=>{t(He)})},subscribeKey(t,e){return un(He,t,e)},initialize(t){t.forEach(e=>{const n=ee.getConnectedConnectorId(e);n&&re.setConnectorId(n,e)})},setActiveConnector(t){t&&(He.activeConnector=Ja(t))},setConnectors(t){t.filter(s=>!He.allConnectors.some(i=>i.id===s.id&&re.getConnectorName(i.name)===re.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&He.allConnectors.push(Ja(s))});const n=re.getEnabledNamespaces(),r=re.getEnabledConnectors(n);He.connectors=re.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(He.filterByNamespaceMap).forEach(e=>{He.filterByNamespaceMap[e]=!1}),t.forEach(e=>{He.filterByNamespaceMap[e]=!0}),re.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){He.filterByNamespaceMap[t]=e,re.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=re.getEnabledNamespaces(),e=re.getEnabledConnectors(t),n=re.areAllNamespacesEnabled();He.connectors=re.mergeMultiChainConnectors(e),n?we.clearFilterByNamespaces():we.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(He.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return He.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(He.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=re.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===q.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=re.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===q.CONNECTOR_ID.AUTH){const s=t,i=Za(V.state),o=Zn.getSnapshot().themeMode,a=Zn.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Ei(a,o)}),re.setConnectors([t])}else re.setConnectors([t])},getAuthConnector(t){var r;const e=t||P.state.activeChain,n=He.connectors.find(s=>s.id===q.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return He.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return He.allConnectors.find(e=>e.id===t)},getConnector(t,e){return He.allConnectors.filter(r=>r.chain===P.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=Za(V.state),r=Zn.getSnapshot().themeMode,s=Zn.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Ei(s,r)})},getConnectorsByNamespace(t){const e=He.allConnectors.filter(n=>n.chain===t);return re.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=re.getConnector(t.id,t.rdns),n=P.state.activeChain;CM.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?xe.push("ConnectingExternal",{connector:e}):xe.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?re.getConnectorsByNamespace(t):re.mergeMultiChainConnectors(He.allConnectors)},setFilterByNamespace(t){He.filterByNamespace=t,He.connectors=re.getConnectors(t),we.setFilterByNamespace(t)},setConnectorId(t,e){t&&(He.activeConnectorIds={...He.activeConnectorIds,[e]:t},ee.setConnectedConnectorId(e,t))},removeConnectorId(t){He.activeConnectorIds={...He.activeConnectorIds,[t]:void 0},ee.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return He.activeConnectorIds[t]},isConnected(t){return t?!!He.activeConnectorIds[t]:Object.values(He.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){He.activeConnectorIds={...UP}}},re=Ar($M),ah={getConnectionStatus(t,e){const n=re.state.activeConnectorIds[e],r=de.state.connections.get(e)??[];return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},validateAccountSwitch({namespace:t,connection:e,address:n}){if(t===q.CHAIN.BITCOIN){if(!n)throw new Error("Address parameter is required for switching bip122 connection");const{type:s}=e.accounts.find(i=>i.address.toLowerCase()===n.toLowerCase())??{};if(typeof s=="string"&&s!=="payment")throw new Error(`Switching to non-payment accounts is not allowed for ${t}`)}},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},filterConnectionsByAccountType(t,e){return t.map(n=>{const r=n.accounts.filter(s=>typeof s.type=="string"?s.type.toLowerCase()===e.toLowerCase():!0);return{...n,accounts:r}})},getConnectionsData(t){const e=de.state.connections.get(t)??[],n=e.filter(a=>!a.recent),r=re.state.activeConnectorIds[t],i=e.filter(a=>a.recent).filter(a=>re.getConnectorById(a.connectorId)),o=ah.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],i);return{connections:n,recentConnections:o}}};var Ll={};const DM="https://secure.walletconnect.org/sdk",UM=(typeof process<"u"&&typeof Ll<"u"?Ll.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||DM,jM=(typeof process<"u"&&typeof Ll<"u"?Ll.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",LM=(typeof process<"u"&&typeof Ll<"u"?Ll.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",fe={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Jt={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},MM=1e3,wi={checkNamespaceConnectorId(t,e){return re.getConnectorId(t)===e},isSocialProvider(t){return et.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&re.setActiveConnector(e),s==null||s(ge.isMobile()&&t),r){const l=Qe.subscribeKey("open",u=>{u||(xe.state.view!==r&&xe.replace(r),l(),a(new Error("Modal closed")))})}const c=P.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&Qe.close(),c(),o(mr.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=P.subscribeKey("activeCaipAddress",s=>{s&&(Qe.close(),r(),e(mr.parseCaipAddress(s)))});de.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=ne.state.socialWindow,i=ne.state.socialProvider,o=!1,a=null;const c=P.subscribeKey("activeCaipAddress",l=>{l&&(e&&Qe.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===q.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const m=re.getAuthConnector();if(m&&!o){s&&(s.close(),ne.setSocialWindow(void 0,P.state.activeChain),s=ne.state.socialWindow),o=!0;const v=f.data.resultUri;if(i&&tt.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),await m.provider.connectSocial(v),i){ee.setConnectedSocialProvider(i),await de.connectExternal({id:m.id,type:m.type,socialUri:v},m.chain);const y=P.state.activeCaipAddress;if(!y){u(new Error("Failed to connect"));return}l(mr.parseCaipAddress(y)),tt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&tt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&tt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(ne.setSocialProvider(t,P.state.activeChain),i=ne.state.socialProvider,tt.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=Qe.subscribeKey("open",m=>{!m&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=re.getAuthConnector();if(p&&!ne.state.farcasterUrl)try{const{url:m}=await p.provider.getFarcasterUri();ne.setFarcasterUrl(m,P.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=re.getAuthConnector();a=ge.returnOpenHref(`${q.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){ne.setSocialWindow(a,P.state.activeChain),s=ne.state.socialWindow,a.location.href=p;const m=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(m))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Qe.subscribeKey("open",c=>{c||(xe.state.view!==e&&xe.replace(e),a(),i(new Error("Modal closed")))})}const o=P.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Qe.close(),o(),s(mr.parseCaipAddress(a)))})})},async updateEmail(){const t=ee.getConnectedConnectorId(P.state.activeChain),e=re.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==q.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return xe.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Qe.close(),clearInterval(i),o(),r({email:a}))},MM),o=Qe.subscribeKey("open",a=>{a||(xe.state.view!=="Connect"&&xe.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){var n;return P.checkIfSmartAccountEnabled()&&((n=ne.state.preferredAccountTypes)==null?void 0:n[t])===Jt.ACCOUNT_TYPES.EOA}},fa=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),jt=ht({...fa}),BM={state:jt,subscribeKey(t,e){return un(jt,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ge.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){jt.message=fa.message,jt.variant=fa.variant,jt.svg=fa.svg,jt.open=fa.open,jt.autoClose=fa.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=fa.autoClose}){jt.open?(jt.open=!1,setTimeout(()=>{jt.message=t,jt.variant=n,jt.svg=e,jt.open=!0,jt.autoClose=r},150)):(jt.message=t,jt.variant=n,jt.svg=e,jt.open=!0,jt.autoClose=r)}},fs=BM,ct=ht({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),FM={state:ct,subscribe(t){return Qt(ct,()=>t(ct))},setLastNetworkInView(t){ct.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");ct.loading=!0;try{const s=await Ee.fetchTransactions({account:t,cursor:ct.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=P.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=Xu.filterSpamTransactions(s.data),o=Xu.filterByConnectedChain(i),a=[...ct.transactions,...o];ct.loading=!1,e==="coinbase"?ct.coinbaseTransactions=Xu.groupTransactionsByYearAndMonth(ct.coinbaseTransactions,s.data):(ct.transactions=a,ct.transactionsByYear=Xu.groupTransactionsByYearAndMonth(ct.transactionsByYear,o)),ct.empty=a.length===0,ct.next=s.next?s.next:void 0}catch{const i=P.state.activeChain;tt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:V.state.projectId,cursor:ct.next,isSmartAccount:((r=ne.state.preferredAccountTypes)==null?void 0:r[i])===Jt.ACCOUNT_TYPES.SMART_ACCOUNT}}),fs.showError("Failed to fetch transactions"),ct.loading=!1,ct.empty=!0,ct.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=P.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){ct.next=void 0},resetTransactions(){ct.transactions=[],ct.transactionsByYear={},ct.lastNetworkInView=void 0,ct.loading=!1,ct.empty=!1,ct.next=void 0}},Xu=Ar(FM,"API_ERROR"),Me=ht({connections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let ia;const zM={state:Me,subscribe(t){return Qt(Me,()=>t(Me))},subscribeKey(t,e){return un(Me,t,e)},_getClient(){return Me._client},setClient(t){Me._client=Ja(t)},initialize(t){const e=ee.getConnections();for(const n of t){const r=n.namespace;if(r){const s=Me.connections.get(r)??[],i=e[r]??[],o=[...s,...i];Me.connections.set(r,o)}}},async connectWalletConnect(){var t,e,n,r;if(ge.isTelegram()||ge.isSafari()&&ge.isIos()){if(ia){await ia,ia=void 0;return}if(!ge.isPairingExpired(Me==null?void 0:Me.wcPairingExpiry)){const s=Me.wcUri;Me.wcUri=s;return}ia=(e=(t=de._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),de.state.status="connecting",await ia,ia=void 0,Me.wcPairingExpiry=void 0,de.state.status="connected"}else await((r=(n=de._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=de._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&P.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=de._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||P.state.activeChain;e&&re.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;Qe.setLoading(!0,P.state.activeChain);const n=re.getAuthConnector();n&&(ne.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),ee.setPreferredAccountTypes(ne.state.preferredAccountTypes??{[e]:t}),await de.reconnectExternal(n),Qe.setLoading(!1,P.state.activeChain),tt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=P.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=de._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=de._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=de._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=de._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=de._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=de._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=de._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=de._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=de._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=de._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=de._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=de._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Me.wcUri=void 0,Me.wcPairingExpiry=void 0,Me.wcLinking=void 0,Me.recentWallet=void 0,Me.status="disconnected",Xu.resetTransactions(),ee.deleteWalletConnectDeepLink()},resetUri(){Me.wcUri=void 0,Me.wcPairingExpiry=void 0,ia=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=de.state;t&&ee.setWalletConnectDeepLink(t),e&&ee.setAppKitRecent(e),tt.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=xe.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Me.wcBasic=t},setUri(t){Me.wcUri=t,Me.wcPairingExpiry=ge.getPairingExpiry()},setWcLinking(t){Me.wcLinking=t},setWcError(t){Me.wcError=t,Me.buffering=!1},setRecentWallet(t){Me.recentWallet=t},setBuffering(t){Me.buffering=t},setStatus(t){Me.status=t},setIsSwitchingConnection(t){Me.isSwitchingConnection=t},async disconnect({id:t,namespace:e}={}){var n;try{await((n=de._getClient())==null?void 0:n.disconnect({id:t,chainNamespace:e}))}catch(r){throw new jl("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){Me.connections=new Map(Me.connections.set(e,t))},async handleAuthAccountSwitch({address:t,connection:e,namespace:n}){var o;const r=(o=e.accounts.find(a=>a.type==="smartAccount"))==null?void 0:o.address,i=(r==null?void 0:r.toLowerCase())===t.toLowerCase()&&wi.canSwitchToSmartAccount(n)?"smartAccount":"eoa";await de.setPreferredAccountType(i,n)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=re.getConnectorById(t.connectorId),s=t.connectorId===q.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);const i=await de.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return s&&n&&await de.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),i==null?void 0:i.address},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=re.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===q.CONNECTOR_ID.AUTH,a=t.connectorId===q.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&wi.isSocialProvider(i)){const{address:d}=await wi.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Qe.open({view:"ConnectingFarcaster"})},onConnect(){xe.replace("ProfileWallets")}});c=d}else{const{address:d}=await wi.connectEmail({closeModalOnConnect:r,onOpen(){Qe.open({view:"EmailLogin"})},onConnect(){xe.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await wi.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){Qe.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){xe.replace("ProfileWallets")}});c=d}else{const d=await de.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await de.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){ah.validateAccountSwitch({namespace:n,connection:t,address:e});let i;const o=ne.getCaipAddress(n);if(o){const{address:c}=mr.parseCaipAddress(o);i=c}const a=ah.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await de.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await de.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},de=Ar(zM),xc=ht({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Vs={state:xc,subscribe(t){return Qt(xc,()=>t(xc))},subscribeOpen(t){return un(xc,"open",t)},set(t){Object.assign(xc,{...xc,...t})}};function qM(t){const e=Array.from(P.state.chains.keys());let n=[];return t?(n.push([t,P.state.chains.get(t)]),wi.checkNamespaceConnectorId(t,q.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&wi.checkNamespaceConnectorId(r,q.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,P.state.chains.get(r)])}):wi.checkNamespaceConnectorId(t,q.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&wi.checkNamespaceConnectorId(r,q.CONNECTOR_ID.AUTH)&&n.push([r,P.state.chains.get(r)])})):n=Array.from(P.state.chains.entries()),n}function jP(){var r,s;const t=((r=P.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=P.state.activeCaipNetwork)==null?void 0:s.id)||1,n=et.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}const HM={async getTokenList(){var r;const t=P.state.activeCaipNetwork,e=await Ee.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=P.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(de==null?void 0:de.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await Ee.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await Ee.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=de.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await yE.getMyTokensWithBalance(t);return ne.setTokenBalance(e,P.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:jP(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Xe=ht({tokenBalances:[],loading:!1}),WM={state:Xe,subscribe(t){return Qt(Xe,()=>t(Xe))},subscribeKey(t,e){return un(Xe,t,e)},setToken(t){t&&(Xe.token=Ja(t))},setTokenAmount(t){Xe.sendTokenAmount=t},setReceiverAddress(t){Xe.receiverAddress=t},setReceiverProfileImageUrl(t){Xe.receiverProfileImageUrl=t},setReceiverProfileName(t){Xe.receiverProfileName=t},setNetworkBalanceInUsd(t){Xe.networkBalanceInUSD=t},setLoading(t){Xe.loading=t},async sendToken(){var t;try{switch(Ze.setLoading(!0),(t=P.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Ze.sendEvmToken();return;case"solana":await Ze.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Ze.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=P.state.activeChain,e=(n=ne.state.preferredAccountTypes)==null?void 0:n[t];if(!Ze.state.sendTokenAmount||!Ze.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Ze.state.token)throw new Error("A token is required");(r=Ze.state.token)!=null&&r.address?(tt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Jt.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ze.state.token.address,amount:Ze.state.sendTokenAmount,network:((s=P.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Ze.sendERC20Token({receiverAddress:Ze.state.receiverAddress,tokenAddress:Ze.state.token.address,sendTokenAmount:Ze.state.sendTokenAmount,decimals:Ze.state.token.quantity.decimals})):(tt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Jt.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ze.state.token.symbol||"",amount:Ze.state.sendTokenAmount,network:((i=P.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await Ze.sendNativeToken({receiverAddress:Ze.state.receiverAddress,sendTokenAmount:Ze.state.sendTokenAmount,decimals:Ze.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Xe.loading=!0;const e=(i=P.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=P.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=P.state.activeCaipAddress,s=r?ge.getPlainAddress(r):void 0;if(Xe.lastRetry&&!ge.isAllowedRetry(Xe.lastRetry,30*et.ONE_SEC_MS))return Xe.loading=!1,[];try{if(s&&e&&n){const a=await yE.getMyTokensWithBalance();return Xe.tokenBalances=a,Xe.lastRetry=void 0,a}}catch(a){Xe.lastRetry=Date.now(),t==null||t(a),fs.showError("Token Balance Unavailable")}finally{Xe.loading=!1}return[]},fetchNetworkBalance(){if(Xe.tokenBalances.length===0)return;const t=HM.mapBalancesToSwapTokens(Xe.tokenBalances);if(!t)return;const e=t.find(n=>n.address===jP());e&&(Xe.networkBalanceInUSD=e?dM.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;xe.pushTransactionStack({});const e=t.receiverAddress,n=ne.state.address,r=de.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await de.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),tt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=ne.state.preferredAccountTypes)==null?void 0:i.eip155)===Jt.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=Ze.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=P.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=de._getClient())==null||c.updateBalance("eip155"),Ze.resetSend()},async sendERC20Token(t){xe.pushTransactionStack({onSuccess(){xe.replace("Account")}});const e=de.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(ne.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ge.getPlainAddress(t.tokenAddress);await de.writeContract({fromAddress:ne.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:mM.getERC20Abi(n),chainNamespace:"eip155"}),Ze.resetSend()}},async sendSolanaToken(){var t;if(!Ze.state.sendTokenAmount||!Ze.state.receiverAddress)throw new Error("An amount and receiver address are required");xe.pushTransactionStack({onSuccess(){xe.replace("Account")}}),await de.sendTransaction({chainNamespace:"solana",to:Ze.state.receiverAddress,value:Ze.state.sendTokenAmount}),(t=de._getClient())==null||t.updateBalance("solana"),Ze.resetSend()},resetSend(){Xe.token=void 0,Xe.sendTokenAmount=void 0,Xe.receiverAddress=void 0,Xe.receiverProfileImageUrl=void 0,Xe.receiverProfileName=void 0,Xe.loading=!1,Xe.tokenBalances=[]}},Ze=Ar(WM),uy={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},tp={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},se=ht({chains:nM(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),VM={state:se,subscribe(t){return Qt(se,()=>{t(se)})},subscribeKey(t,e){return un(se,t,e)},subscribeChainProp(t,e,n){let r;return Qt(se.chains,()=>{var i;const s=n||se.activeChain;if(s){const o=(i=se.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=ee.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=V.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(se.noAdapters=!0),se.noAdapters||(se.activeChain=a==null?void 0:a.namespace,se.activeCaipNetwork=i,P.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),se.activeChain&&Vs.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);P.state.chains.set(u,{namespace:u,networkState:ht({...tp,caipNetwork:d==null?void 0:d[0]}),accountState:ht(uy),caipNetworks:d??[],...n}),P.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(se.activeChain===t){const r=Array.from(se.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&P.setActiveCaipNetwork(s)}}se.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){se.chains.set(t.namespace,{namespace:t.namespace,networkState:{...tp,caipNetwork:r[0]},accountState:uy,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),P.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=se.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),se.chains.set(t.chainNamespace,{...e,caipNetworks:r}),P.setRequestedCaipNetworks(r,t.chainNamespace),re.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=se.chains.get(t);if(n){const o=((r=se.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&P.setActiveCaipNetwork(n.caipNetworks[0]),se.chains.set(t,{...n,caipNetworks:a}),P.setRequestedCaipNetworks(a||[],t),a.length===0&&re.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=se.chains.get(t);n&&(n.networkState={...n.networkState||tp,...e},se.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=se.chains.get(t);if(r){const s={...r.accountState||uy,...e};se.chains.set(t,{...r,accountState:s}),(se.chains.size===1||se.activeChain===t)&&(e.caipAddress&&(se.activeCaipAddress=e.caipAddress),ne.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=se.chains.get(t);if(n){const r={...n.networkState||tp,...e};se.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){P.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&re.removeConnectorId(n)},setActiveNamespace(t){var r,s;se.activeChain=t;const e=t?se.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(se.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,se.activeCaipNetwork=n,P.setChainNetworkData(t,{caipNetwork:n}),ee.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Vs.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;se.activeChain!==t.chainNamespace&&P.setIsSwitchingNamespace(!0);const e=se.chains.get(t.chainNamespace);se.activeChain=t.chainNamespace,se.activeCaipNetwork=t,P.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?se.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:se.activeCaipAddress=void 0,P.setAccountProp("caipAddress",se.activeCaipAddress,t.chainNamespace),e&&ne.replaceState(e.accountState),Ze.resetSend(),Vs.set({activeChain:se.activeChain,selectedNetworkId:(i=se.activeCaipNetwork)==null?void 0:i.caipNetworkId}),ee.setActiveCaipNetworkId(t.caipNetworkId),!P.checkIfSupportedNetwork(t.chainNamespace)&&V.state.enableNetworkSwitch&&!V.state.allowUnsupportedChain&&!de.state.wcBasic&&P.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=se.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==P.state.activeChain,n=(s=P.getNetworkData(t))==null?void 0:s.caipNetwork,r=P.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await P.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=P.state.chains.get(P.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=se.activeCaipNetwork)==null?void 0:o.id)})),r=P.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&Qe.close()}catch{xe.goBack()}tt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||se.activeChain,n=se.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||se.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=se.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=se.activeChain;if(e&&(n=e),!n)return;const r=(s=se.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=se.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=se.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ge.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return se.chains.forEach(e=>{const n=P.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){P.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=P.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));re.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return se.chains.forEach(e=>{const n=P.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return se.activeCaipNetwork},getActiveCaipAddress(){return se.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=se.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=P.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());P.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||se.activeCaipNetwork,r=P.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!se.activeChain)return!0;const e=P.getRequestedCaipNetworks(se.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){P.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=oh.caipNetworkIdToNumber((r=se.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=se.activeChain;if(!e||!t)return!1;const n=P.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){Qe.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=se.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&et.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){P.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");se.activeCaipAddress=void 0,P.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),re.removeConnectorId(e)},setIsSwitchingNamespace(t){se.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(se.chains.forEach(s=>{q.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=se.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=P.state.chains.get(t))==null?void 0:e.accountState:ne.state},getNetworkData(t){var n;const e=t||se.activeChain;if(e)return(n=P.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=P.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=re.state.filterByNamespace;return(t?[se.chains.get(t)]:Array.from(se.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?P.getRequestedCaipNetworks(t):P.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){se.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return se.lastConnectedSIWECaipNetwork}},P=Ar(VM),GM={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},LP=ge.getBlockchainApiUrl(),zn=ht({clientId:null,api:new pf({baseUrl:LP,clientId:null}),supportedChains:{http:[],ws:[]}}),Ee={state:zn,async get(t){const{st:e,sv:n}=Ee.getSdkProperties(),r=V.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return zn.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=V.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{zn.supportedChains.http.length||await Ee.getSupportedNetworks()}catch{return!1}return zn.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Ee.get({path:"v1/supported-chains"});return zn.supportedChains=t,t}catch{return zn.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Ee.isNetworkSupported(e))return{avatar:"",name:""};const r=ee.getIdentityFromCacheForAddress(t);if(r)return r;const s=await Ee.get({path:`/v1/identity/${t}`,params:{sender:P.state.activeCaipAddress?ge.getPlainAddress(P.state.activeCaipAddress):void 0}});return ee.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await Ee.isNetworkSupported((a=P.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?Ee.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await Ee.isNetworkSupported((o=P.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Ee.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await Ee.isNetworkSupported((n=P.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ee.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await Ee.isNetworkSupported((n=P.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?zn.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:V.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await Ee.isNetworkSupported((r=P.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ee.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=Ee.getSdkProperties();if(!await Ee.isNetworkSupported((s=P.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Ee.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await Ee.isNetworkSupported((o=P.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return zn.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:et.CONVERT_SLIPPAGE_TOLERANCE},projectId:V.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=Ee.getSdkProperties();if(!await Ee.isNetworkSupported((o=P.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ee.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=Ee.getSdkProperties();if(!await Ee.isNetworkSupported((l=P.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return fs.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=ee.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Ee.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return ee.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await Ee.isNetworkSupported((n=P.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ee.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await Ee.isNetworkSupported((n=P.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ee.get({path:`/v1/profile/reverse/${t}`,params:{sender:ne.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await Ee.isNetworkSupported((n=P.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ee.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await Ee.isNetworkSupported((i=P.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?zn.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await Ee.isNetworkSupported((a=P.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await zn.api.post({path:"/v1/generators/onrampurl",params:{projectId:V.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Ee.isNetworkSupported((e=P.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Ee.get({path:"/v1/onramp/options"})}catch{return GM}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await Ee.isNetworkSupported((s=P.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await zn.api.post({path:"/v1/onramp/quote",params:{projectId:V.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await Ee.isNetworkSupported((n=P.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ee.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await Ee.isNetworkSupported((s=P.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?zn.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:V.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){zn.clientId=t,zn.api=new pf({baseUrl:LP,clientId:t})}};function KM(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}const dy={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return KM(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},yE={async getMyTokensWithBalance(t){const e=ne.state.address,n=P.state.activeCaipNetwork,r=re.getConnectorId("eip155")===q.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=ee.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace==="eip155"&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await Ee.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=dy.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await de.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await de.walletGetAssets({account:t,chainFilter:[s]});if(!dy.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>dy.createBalance(l,e.caipNetworkId));return ee.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Nr=ht({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),YM={state:Nr,replaceState(t){t&&Object.assign(Nr,Ja(t))},subscribe(t){return P.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return P.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){P.setAccountProp("status",t,e)},getCaipAddress(t){return P.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ge.getPlainAddress(t):void 0;e===P.state.activeChain&&(P.state.activeCaipAddress=t),P.setAccountProp("caipAddress",t,e),P.setAccountProp("address",n,e)},setBalance(t,e,n){P.setAccountProp("balance",t,n),P.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){P.setAccountProp("profileName",t,e)},setProfileImage(t,e){P.setAccountProp("profileImage",t,e)},setUser(t,e){P.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){P.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){P.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){P.setAccountProp("currentTab",t,P.state.activeChain)},setTokenBalance(t,e){t&&P.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){P.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){P.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=P.getAccountProp("addressLabels",n)||new Map;r.set(t,e),P.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=P.getAccountProp("addressLabels",e)||new Map;n.delete(t),P.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){P.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){P.setAccountProp("preferredAccountTypes",{...Nr.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Nr.preferredAccountTypes=t},setSocialProvider(t,e){t&&P.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){P.setAccountProp("socialWindow",t?Ja(t):void 0,e)},setFarcasterUrl(t,e){P.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Nr.balanceLoading=!0;const e=(i=P.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=P.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=P.state.activeCaipAddress,s=r?ge.getPlainAddress(r):void 0;if(Nr.lastRetry&&!ge.isAllowedRetry(Nr.lastRetry,30*et.ONE_SEC_MS))return Nr.balanceLoading=!1,[];try{if(s&&e&&n){const a=await yE.getMyTokensWithBalance();return ne.setTokenBalance(a,n),Nr.lastRetry=void 0,Nr.balanceLoading=!1,a}}catch(a){Nr.lastRetry=Date.now(),t==null||t(a),fs.showError("Token Balance Unavailable")}finally{Nr.balanceLoading=!1}return[]},resetAccount(t){P.resetAccount(t)}},ne=Ar(YM),ZM={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=P.state.activeCaipNetwork,r=xe.state.data;if(t.id===(n==null?void 0:n.id))return;const i=ne.getCaipAddress(P.state.activeChain),o=t.chainNamespace!==P.state.activeChain,a=ne.getCaipAddress(t.chainNamespace),l=re.getConnectorId(P.state.activeChain)===q.CONNECTOR_ID.AUTH,u=q.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?xe.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?xe.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):xe.push("SwitchNetwork",{...r,network:t})}},qn=ht({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),JM={state:qn,subscribe(t){return Qt(qn,()=>t(qn))},subscribeKey(t,e){return un(qn,t,e)},async open(t){var o,a;const e=ne.state.status==="connected",n=t==null?void 0:t.namespace,r=P.state.activeChain,s=n&&n!==r,i=(o=P.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(de.state.wcBasic?we.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await we.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),re.setFilterByNamespace(t==null?void 0:t.namespace),Qe.setLoading(!0,n),n&&s){const c=((a=P.getNetworkData(n))==null?void 0:a.caipNetwork)||P.getRequestedCaipNetworks(n)[0];c&&ZM.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=P.state.noAdapters;V.state.manualWCControl||c&&!i?ge.isMobile()?xe.reset("AllWallets"):xe.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?xe.reset(t.view,t.data):i?xe.reset("Account"):xe.reset("Connect")}qn.open=!0,Vs.set({open:!0}),tt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=V.state.enableEmbedded,e=!!P.state.activeCaipAddress;qn.open&&tt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),qn.open=!1,xe.reset("Connect"),Qe.clearLoading(),t?e?xe.replace("Account"):xe.push("Connect"):Vs.set({open:!1}),de.resetUri()},setLoading(t,e){e&&qn.loadingNamespaceMap.set(e,t),qn.loading=t,Vs.set({loading:t})},clearLoading(){qn.loadingNamespaceMap.clear(),qn.loading=!1},shake(){qn.shake||(qn.shake=!0,setTimeout(()=>{qn.shake=!1},500))}},Qe=Ar(JM),yd={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},Gb={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},QM={providers:$P,selectedProvider:null,error:null,purchaseCurrency:yd,paymentCurrency:Gb,purchaseCurrencies:[yd],paymentCurrencies:[],quotesLoading:!1},Be=ht(QM),XM={state:Be,subscribe(t){return Qt(Be,()=>t(Be))},subscribeKey(t,e){return un(Be,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=P.state.activeChain===q.CHAIN.SOLANA?"SOL":"USDC",n=ne.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",gM),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",V.state.projectId),Be.selectedProvider={...t,url:r.toString()}}else Be.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=$P.filter(r=>e.includes(r.name));Be.providers=n}else Be.providers=[]},setPurchaseCurrency(t){Be.purchaseCurrency=t},setPaymentCurrency(t){Be.paymentCurrency=t},setPurchaseAmount(t){Kb.state.purchaseAmount=t},setPaymentAmount(t){Kb.state.paymentAmount=t},async getAvailableCurrencies(){const t=await Ee.getOnrampOptions();Be.purchaseCurrencies=t.purchaseCurrencies,Be.paymentCurrencies=t.paymentCurrencies,Be.paymentCurrency=t.paymentCurrencies[0]||Gb,Be.purchaseCurrency=t.purchaseCurrencies[0]||yd,await we.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await we.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;Be.quotesLoading=!0;try{const n=await Ee.getOnrampQuote({purchaseCurrency:Be.purchaseCurrency,paymentCurrency:Be.paymentCurrency,amount:((t=Be.paymentAmount)==null?void 0:t.toString())||"0",network:(e=Be.purchaseCurrency)==null?void 0:e.symbol});return Be.quotesLoading=!1,Be.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return Be.error=n.message,Be.quotesLoading=!1,null}finally{Be.quotesLoading=!1}},resetState(){Be.selectedProvider=null,Be.error=null,Be.purchaseCurrency=yd,Be.paymentCurrency=Gb,Be.purchaseCurrencies=[yd],Be.paymentCurrencies=[],Be.paymentAmount=void 0,Be.purchaseAmount=void 0,Be.quotesLoading=!1}},Kb=Ar(XM),f_=2147483648,e9={convertEVMChainIdToCoinType(t){if(t>=f_)throw new Error("Invalid chainId");return(f_|t)>>>0}},Tr=ht({suggestions:[],loading:!1}),t9={state:Tr,subscribe(t){return Qt(Tr,()=>t(Tr))},subscribeKey(t,e){return un(Tr,t,e)},async resolveName(t){var e,n;try{return await Ee.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Ee.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Tr.loading=!0,Tr.suggestions=[];const e=await Ee.getEnsNameSuggestions(t);return Tr.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Tr.suggestions}catch(e){const n=wd.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Tr.loading=!1}},async getNamesForAddress(t){try{if(!P.state.activeCaipNetwork)return[];const n=ee.getEnsFromCacheForAddress(t);if(n)return n;const r=await Ee.reverseLookupEnsName({address:t});return ee.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=wd.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=P.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=ne.state.address,r=re.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Tr.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});xe.pushTransactionStack({onCancel(){xe.replace("RegisterAccountName")}});const i=await de.signMessage(s);Tr.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=e9.convertEVMChainIdToCoinType(Number(o));await Ee.registerEnsName({coinType:a,address:n,signature:i,message:s}),ne.setProfileName(t,e.chainNamespace),xe.replace("RegisterAccountNameSuccess")}catch(s){const i=wd.parseEnsApiError(s,`Error registering name ${t}`);throw xe.replace("RegisterAccountName"),new Error(i)}finally{Tr.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},wd=Ar(t9);var wE={exports:{}},gl=typeof Reflect=="object"?Reflect:null,p_=gl&&typeof gl.apply=="function"?gl.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Hp;gl&&typeof gl.ownKeys=="function"?Hp=gl.ownKeys:Object.getOwnPropertySymbols?Hp=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Hp=function(e){return Object.getOwnPropertyNames(e)};function n9(t){console&&console.warn&&console.warn(t)}var MP=Number.isNaN||function(e){return e!==e};function ot(){ot.init.call(this)}wE.exports=ot;wE.exports.once=o9;ot.EventEmitter=ot;ot.prototype._events=void 0;ot.prototype._eventsCount=0;ot.prototype._maxListeners=void 0;var m_=10;function Yg(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ot,"defaultMaxListeners",{enumerable:!0,get:function(){return m_},set:function(t){if(typeof t!="number"||t<0||MP(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");m_=t}});ot.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ot.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||MP(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function BP(t){return t._maxListeners===void 0?ot.defaultMaxListeners:t._maxListeners}ot.prototype.getMaxListeners=function(){return BP(this)};ot.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")p_(c,this,n);else for(var l=c.length,u=WP(c,l),r=0;r<l;++r)p_(u[r],this,n);return!0};function FP(t,e,n,r){var s,i,o;if(Yg(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=BP(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,n9(a)}return t}ot.prototype.addListener=function(e,n){return FP(this,e,n,!1)};ot.prototype.on=ot.prototype.addListener;ot.prototype.prependListener=function(e,n){return FP(this,e,n,!0)};function r9(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function zP(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=r9.bind(r);return s.listener=n,r.wrapFn=s,s}ot.prototype.once=function(e,n){return Yg(n),this.on(e,zP(this,e,n)),this};ot.prototype.prependOnceListener=function(e,n){return Yg(n),this.prependListener(e,zP(this,e,n)),this};ot.prototype.removeListener=function(e,n){var r,s,i,o,a;if(Yg(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():s9(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};ot.prototype.off=ot.prototype.removeListener;ot.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function qP(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?i9(s):WP(s,s.length)}ot.prototype.listeners=function(e){return qP(this,e,!0)};ot.prototype.rawListeners=function(e){return qP(this,e,!1)};ot.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):HP.call(t,e)};ot.prototype.listenerCount=HP;function HP(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}ot.prototype.eventNames=function(){return this._eventsCount>0?Hp(this._events):[]};function WP(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function s9(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function i9(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function o9(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}VP(t,e,i,{once:!0}),e!=="error"&&a9(t,s,{once:!0})})}function a9(t,e,n){typeof t.on=="function"&&VP(t,"error",e,n)}function VP(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Kr=wE.exports;const bE=Yl(Kr);var J={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Yb=function(t,e){return Yb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},Yb(t,e)};function c9(t,e){Yb(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Zb=function(){return Zb=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Zb.apply(this,arguments)};function l9(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function u9(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function d9(t,e){return function(n,r){e(n,r,t)}}function h9(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function f9(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function p9(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function m9(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function g9(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Jb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function GP(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function y9(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(GP(arguments[e]));return t}function w9(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function ch(t){return this instanceof ch?(this.v=t,this):new ch(t)}function b9(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,m){i.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof ch?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function v9(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:ch(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function E9(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Jb=="function"?Jb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function x9(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function C9(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function _9(t){return t&&t.__esModule?t:{default:t}}function S9(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function A9(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const I9=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Zb},__asyncDelegator:v9,__asyncGenerator:b9,__asyncValues:E9,__await:ch,__awaiter:f9,__classPrivateFieldGet:S9,__classPrivateFieldSet:A9,__createBinding:m9,__decorate:u9,__exportStar:g9,__extends:c9,__generator:p9,__importDefault:_9,__importStar:C9,__makeTemplateObject:x9,__metadata:h9,__param:d9,__read:GP,__rest:l9,__spread:y9,__spreadArrays:w9,__values:Jb},Symbol.toStringTag,{value:"Module"})),Zg=sI(I9);var hy={},Su={},g_;function N9(){if(g_)return Su;g_=1,Object.defineProperty(Su,"__esModule",{value:!0}),Su.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Su.delay=t,Su}var oa={},fy={},aa={},y_;function T9(){return y_||(y_=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.ONE_THOUSAND=aa.ONE_HUNDRED=void 0,aa.ONE_HUNDRED=100,aa.ONE_THOUSAND=1e3),aa}var py={},w_;function P9(){return w_||(w_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(py)),py}var b_;function KP(){return b_||(b_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Zg;e.__exportStar(T9(),t),e.__exportStar(P9(),t)}(fy)),fy}var v_;function O9(){if(v_)return oa;v_=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.fromMiliseconds=oa.toMiliseconds=void 0;const t=KP();function e(r){return r*t.ONE_THOUSAND}oa.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return oa.fromMiliseconds=n,oa}var E_;function k9(){return E_||(E_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Zg;e.__exportStar(N9(),t),e.__exportStar(O9(),t)}(hy)),hy}var Cc={},x_;function R9(){if(x_)return Cc;x_=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Cc.Watch=t,Cc.default=t,Cc}var my={},Au={},C_;function $9(){if(C_)return Au;C_=1,Object.defineProperty(Au,"__esModule",{value:!0}),Au.IWatch=void 0;class t{}return Au.IWatch=t,Au}var __;function D9(){return __||(__=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Zg.__exportStar($9(),t)}(my)),my}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Zg;e.__exportStar(k9(),t),e.__exportStar(R9(),t),e.__exportStar(D9(),t),e.__exportStar(KP(),t)})(J);class hc{}let U9=class extends hc{constructor(e){super()}};const S_=J.FIVE_SECONDS,fc={pulse:"heartbeat_pulse"};let j9=class YP extends U9{constructor(e){super(e),this.events=new Kr.EventEmitter,this.interval=S_,this.interval=(e==null?void 0:e.interval)||S_}static async init(e){const n=new YP(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),J.toMiliseconds(this.interval))}pulse(){this.events.emit(fc.pulse)}};const L9=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,M9=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,B9=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function F9(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){z9(t);return}return e}function z9(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function np(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!B9.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(L9.test(t)||M9.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,F9)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function pc(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function ZP(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=pc(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let gy;function mf(){return gy||(gy=ZP("keyval-store","keyval")),gy}function A_(t,e=mf()){return e("readonly",n=>pc(n.get(t)))}function q9(t,e,n=mf()){return n("readwrite",r=>(r.put(e,t),pc(r.transaction)))}function H9(t,e=mf()){return e("readwrite",n=>(n.delete(t),pc(n.transaction)))}function W9(t=mf()){return t("readwrite",e=>(e.clear(),pc(e.transaction)))}function V9(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},pc(t.transaction)}function G9(t=mf()){return t("readonly",e=>{if(e.getAllKeys)return pc(e.getAllKeys());const n=[];return V9(e,r=>n.push(r.key)).then(()=>n)})}function K9(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var Y9=Z9;function Z9(t,e,n){var r=n&&n.stringify||K9,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const I_=Y9;var qc=Gs;const lh=oB().console||{},J9={mapHttpRequest:rp,mapHttpResponse:rp,wrapRequestSerializer:yy,wrapResponseSerializer:yy,wrapErrorSerializer:yy,req:rp,res:rp,err:nB};function Q9(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Gs(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||lh;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=Q9(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=uh),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:rB(t)};c.levels=Gs.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=uh,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=Qb());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,_c(l,c,"error","log"),_c(l,c,"fatal","error"),_c(l,c,"warn","error"),_c(l,c,"info","log"),_c(l,c,"debug","log"),_c(l,c,"trace","log")}function f(p,m){if(!p)throw new Error("missing bindings for child Pino");m=m||{},s&&p.serializers&&(m.serializers=p.serializers);const v=m.serializers;if(s&&v){var y=Object.assign({},r,v),w=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,Jg([p],w,y,this._stdErrSerialize)}function b(C){this._childLevel=(C._childLevel|0)+1,this.error=Sc(C,p,"error"),this.fatal=Sc(C,p,"fatal"),this.warn=Sc(C,p,"warn"),this.info=Sc(C,p,"info"),this.debug=Sc(C,p,"debug"),this.trace=Sc(C,p,"trace"),y&&(this.serializers=y,this._serialize=w),e&&(this._logEvent=Qb([].concat(C._logEvent.bindings,p)))}return b.prototype=this,new b(this)}return c}Gs.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Gs.stdSerializers=J9;Gs.stdTimeFunctions=Object.assign({},{nullTime:JP,epochTime:QP,unixTime:sB,isoTime:iB});function _c(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?uh:s[n]?s[n]:lh[n]||lh[r]||uh,X9(t,e,n)}function X9(t,e,n){!t.transmit&&e[n]===uh||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===lh?lh:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&Jg(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,eB(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Gs.levels.values[l],d=Gs.levels.values[n];if(d<u)return;tB(this,{ts:i,methodLevel:n,methodValue:d,transmitLevel:l,transmitValue:Gs.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function eB(t,e,n,r){t._serialize&&Jg(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Gs.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?I_(s.shift(),s):void 0}else typeof i=="string"&&(i=I_(s.shift(),s));return i!==void 0&&(o.msg=i),o}function Jg(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Gs.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Sc(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function tB(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;Jg(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=Qb(c)}function Qb(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function nB(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function rB(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?JP:QP}function rp(){return{}}function yy(t){return t}function uh(){}function JP(){return!1}function QP(){return Date.now()}function sB(){return Math.round(Date.now()/1e3)}function iB(){return new Date(Date.now()).toISOString()}function oB(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const gf=Yl(qc),aB=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n);function N_(t){return typeof t=="string"?t:aB(t)||""}const cB={level:"info"},yf="custom_context",vE=1e3*1024;let lB=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},T_=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new lB(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},XP=class{constructor(e,n=vE){this.level=e??"error",this.levelValue=qc.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new T_(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===qc.levels.values.error?console.error(e):n===qc.levels.values.warn?console.warn(e):n===qc.levels.values.debug?console.debug(e):n===qc.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(N_({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new T_(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(N_({extraMetadata:e})),new Blob(n,{type:"application/json"})}},uB=class{constructor(e,n=vE){this.baseChunkLogger=new XP(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},dB=class{constructor(e,n=vE){this.baseChunkLogger=new XP(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var hB=Object.defineProperty,fB=Object.defineProperties,pB=Object.getOwnPropertyDescriptors,P_=Object.getOwnPropertySymbols,mB=Object.prototype.hasOwnProperty,gB=Object.prototype.propertyIsEnumerable,O_=(t,e,n)=>e in t?hB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mm=(t,e)=>{for(var n in e||(e={}))mB.call(e,n)&&O_(t,n,e[n]);if(P_)for(var n of P_(e))gB.call(e,n)&&O_(t,n,e[n]);return t},Bm=(t,e)=>fB(t,pB(e));function tu(t){return Bm(Mm({},t),{level:(t==null?void 0:t.level)||cB.level})}function yB(t,e=yf){return t[e]||""}function wB(t,e,n=yf){return t[n]=e,t}function lr(t,e=yf){let n="";return typeof t.bindings>"u"?n=yB(t,e):n=t.bindings().context||"",n}function bB(t,e,n=yf){const r=lr(t,n);return r.trim()?`${r}/${e}`:e}function Pn(t,e,n=yf){const r=bB(t,e,n),s=t.child({context:r});return wB(s,r,n)}function vB(t){var e,n;const r=new uB((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:gf(Bm(Mm({},t.opts),{level:"trace",browser:Bm(Mm({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function EB(t){var e;const n=new dB((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:gf(Bm(Mm({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function EE(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?vB(t):EB(t)}const xB=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),CB=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function _B(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return CB(t)}catch{return t}}function SB(t){return typeof t=="string"?t:xB(t)||""}function AB(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function e5(t,...e){if(!AB(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function k_(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function IB(t,e){e5(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Ac=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wy=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function NB(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function t5(t){return typeof t=="string"&&(t=NB(t)),e5(t),t}let TB=class{clone(){return this._cloneInto()}};function PB(t){const e=r=>t().update(t5(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function n5(t=32){if(Ac&&typeof Ac.getRandomValues=="function")return Ac.getRandomValues(new Uint8Array(t));if(Ac&&typeof Ac.randomBytes=="function")return Ac.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function OB(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let kB=class extends TB{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=wy(this.buffer)}update(e){k_(this);const{view:n,buffer:r,blockLen:s}=this;e=t5(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=wy(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){k_(this),IB(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;OB(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=wy(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const sp=BigInt(2**32-1),Xb=BigInt(32);function r5(t,e=!1){return e?{h:Number(t&sp),l:Number(t>>Xb&sp)}:{h:Number(t>>Xb&sp)|0,l:Number(t&sp)|0}}function RB(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=r5(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const $B=(t,e)=>BigInt(t>>>0)<<Xb|BigInt(e>>>0),DB=(t,e,n)=>t>>>n,UB=(t,e,n)=>t<<32-n|e>>>n,jB=(t,e,n)=>t>>>n|e<<32-n,LB=(t,e,n)=>t<<32-n|e>>>n,MB=(t,e,n)=>t<<64-n|e>>>n-32,BB=(t,e,n)=>t>>>n-32|e<<64-n,FB=(t,e)=>e,zB=(t,e)=>t,qB=(t,e,n)=>t<<n|e>>>32-n,HB=(t,e,n)=>e<<n|t>>>32-n,WB=(t,e,n)=>e<<n-32|t>>>64-n,VB=(t,e,n)=>t<<n-32|e>>>64-n;function GB(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const KB=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),YB=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,ZB=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),JB=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,QB=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),XB=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,ke={fromBig:r5,split:RB,toBig:$B,shrSH:DB,shrSL:UB,rotrSH:jB,rotrSL:LB,rotrBH:MB,rotrBL:BB,rotr32H:FB,rotr32L:zB,rotlSH:qB,rotlSL:HB,rotlBH:WB,rotlBL:VB,add:GB,add3L:KB,add3H:YB,add4L:ZB,add4H:JB,add5H:XB,add5L:QB},[eF,tF]=ke.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Hi=new Uint32Array(80),Wi=new Uint32Array(80);let nF=class extends kB{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:m,Hl:v}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,v]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,v){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=m|0,this.Hl=v|0}process(e,n){for(let b=0;b<16;b++,n+=4)Hi[b]=e.getUint32(n),Wi[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const C=Hi[b-15]|0,x=Wi[b-15]|0,T=ke.rotrSH(C,x,1)^ke.rotrSH(C,x,8)^ke.shrSH(C,x,7),N=ke.rotrSL(C,x,1)^ke.rotrSL(C,x,8)^ke.shrSL(C,x,7),U=Hi[b-2]|0,E=Wi[b-2]|0,k=ke.rotrSH(U,E,19)^ke.rotrBH(U,E,61)^ke.shrSH(U,E,6),R=ke.rotrSL(U,E,19)^ke.rotrBL(U,E,61)^ke.shrSL(U,E,6),j=ke.add4L(N,R,Wi[b-7],Wi[b-16]),L=ke.add4H(j,T,k,Hi[b-7],Hi[b-16]);Hi[b]=L|0,Wi[b]=j|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:m,Gl:v,Hh:y,Hl:w}=this;for(let b=0;b<80;b++){const C=ke.rotrSH(d,h,14)^ke.rotrSH(d,h,18)^ke.rotrBH(d,h,41),x=ke.rotrSL(d,h,14)^ke.rotrSL(d,h,18)^ke.rotrBL(d,h,41),T=d&f^~d&m,N=h&p^~h&v,U=ke.add5L(w,x,N,tF[b],Wi[b]),E=ke.add5H(U,y,C,T,eF[b],Hi[b]),k=U|0,R=ke.rotrSH(r,s,28)^ke.rotrBH(r,s,34)^ke.rotrBH(r,s,39),j=ke.rotrSL(r,s,28)^ke.rotrBL(r,s,34)^ke.rotrBL(r,s,39),L=r&i^r&a^i&a,B=s&o^s&c^o&c;y=m|0,w=v|0,m=f|0,v=p|0,f=d|0,p=h|0,{h:d,l:h}=ke.add(l|0,u|0,E|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const S=ke.add3L(k,j,B);r=ke.add3H(S,E,R,L),s=S|0}({h:r,l:s}=ke.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ke.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ke.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=ke.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=ke.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=ke.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:m,l:v}=ke.add(this.Gh|0,this.Gl|0,m|0,v|0),{h:y,l:w}=ke.add(this.Hh|0,this.Hl|0,y|0,w|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,m,v,y,w)}roundClean(){Hi.fill(0),Wi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const rF=PB(()=>new nF);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xE=BigInt(0),s5=BigInt(1),sF=BigInt(2);function CE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function _E(t){if(!CE(t))throw new Error("Uint8Array expected")}function by(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const iF=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function SE(t){_E(t);let e="";for(let n=0;n<t.length;n++)e+=iF[t[n]];return e}function i5(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?xE:BigInt("0x"+t)}const si={_0:48,_9:57,A:65,F:70,a:97,f:102};function R_(t){if(t>=si._0&&t<=si._9)return t-si._0;if(t>=si.A&&t<=si.F)return t-(si.A-10);if(t>=si.a&&t<=si.f)return t-(si.a-10)}function o5(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=R_(t.charCodeAt(i)),a=R_(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function oF(t){return i5(SE(t))}function Wp(t){return _E(t),i5(SE(Uint8Array.from(t).reverse()))}function a5(t,e){return o5(t.toString(16).padStart(e*2,"0"))}function ev(t,e){return a5(t,e).reverse()}function ii(t,e,n){let r;if(typeof e=="string")try{r=o5(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(CE(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function $_(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];_E(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const vy=t=>typeof t=="bigint"&&xE<=t;function aF(t,e,n){return vy(t)&&vy(e)&&vy(n)&&e<=t&&t<n}function Iu(t,e,n,r){if(!aF(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function cF(t){let e;for(e=0;t>xE;t>>=s5,e+=1);return e}const lF=t=>(sF<<BigInt(t-1))-s5,uF={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||CE(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function AE(t,e,n={}){const r=(s,i,o)=>{const a=uF[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function D_(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Yt=BigInt(0),Ot=BigInt(1),ma=BigInt(2),dF=BigInt(3),tv=BigInt(4),U_=BigInt(5),j_=BigInt(8);function Ft(t,e){const n=t%e;return n>=Yt?n:e+n}function hF(t,e,n){if(e<Yt)throw new Error("invalid exponent, negatives unsupported");if(n<=Yt)throw new Error("invalid modulus");if(n===Ot)return Yt;let r=Ot;for(;e>Yt;)e&Ot&&(r=r*t%n),t=t*t%n,e>>=Ot;return r}function Is(t,e,n){let r=t;for(;e-- >Yt;)r*=r,r%=n;return r}function L_(t,e){if(t===Yt)throw new Error("invert: expected non-zero number");if(e<=Yt)throw new Error("invert: expected positive modulus, got "+e);let n=Ft(t,e),r=e,s=Yt,i=Ot;for(;n!==Yt;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Ot)throw new Error("invert: does not exist");return Ft(s,e)}function fF(t){const e=(t-Ot)/ma;let n,r,s;for(n=t-Ot,r=0;n%ma===Yt;n/=ma,r++);for(s=ma;s<t&&hF(s,e,t)!==t-Ot;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Ot)/tv;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Ot)/ma;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Ot<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function pF(t){if(t%tv===dF){const e=(t+Ot)/tv;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%j_===U_){const e=(t-U_)/j_;return function(n,r){const s=n.mul(r,ma),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,ma),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return fF(t)}const mF=(t,e)=>(Ft(t,e)&Ot)===Ot,gF=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function yF(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=gF.reduce((r,s)=>(r[s]="function",r),e);return AE(t,n)}function wF(t,e,n){if(n<Yt)throw new Error("invalid exponent, negatives unsupported");if(n===Yt)return t.ONE;if(n===Ot)return e;let r=t.ONE,s=e;for(;n>Yt;)n&Ot&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Ot;return r}function bF(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function c5(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function l5(t,e,n=!1,r={}){if(t<=Yt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=c5(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:lF(s),ZERO:Yt,ONE:Ot,create:c=>Ft(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Yt<=c&&c<t},is0:c=>c===Yt,isOdd:c=>(c&Ot)===Ot,neg:c=>Ft(-c,t),eql:(c,l)=>c===l,sqr:c=>Ft(c*c,t),add:(c,l)=>Ft(c+l,t),sub:(c,l)=>Ft(c-l,t),mul:(c,l)=>Ft(c*l,t),pow:(c,l)=>wF(a,c,l),div:(c,l)=>Ft(c*L_(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>L_(c,t),sqrt:r.sqrt||(c=>(o||(o=pF(t)),o(a,c))),invertBatch:c=>bF(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?ev(c,i):a5(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?Wp(c):oF(c)}});return Object.freeze(a)}const M_=BigInt(0),ip=BigInt(1);function Ey(t,e){const n=e.negate();return t?n:e}function u5(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function xy(t,e){u5(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function vF(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function EF(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Cy=new WeakMap,d5=new WeakMap;function _y(t){return d5.get(t)||1}function xF(t,e){return{constTimeNegate:Ey,hasPrecomputes(n){return _y(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>M_;)r&ip&&(s=s.add(i)),i=i.double(),r>>=ip;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=xy(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=xy(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=ip);const m=f,v=f+Math.abs(p)-1,y=h%2!==0,w=p<0;p===0?c=c.add(Ey(y,r[m])):a=a.add(Ey(w,r[v]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=xy(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===M_)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=ip),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=Cy.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Cy.set(r,s(i))),i},wNAFCached(n,r,s){const i=_y(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=_y(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){u5(r,e),d5.set(n,r),Cy.delete(n)}}}function CF(t,e,n,r){if(vF(n,t),EF(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=cF(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],m=Number(p>>BigInt(d)&BigInt(a));c[m]=c[m].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function _F(t){return yF(t.Fp),AE(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...c5(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Qr=BigInt(0),Hn=BigInt(1),op=BigInt(2),SF=BigInt(8),AF={zip215:!0};function IF(t){const e=_F(t);return AE(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function NF(t){const e=IF(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=op<<BigInt(a*8)-Hn,u=n.create,d=l5(e.n,e.nBitLength),h=e.uvRatio||((S,I)=>{try{return{isValid:!0,value:n.sqrt(S*n.inv(I))}}catch{return{isValid:!1,value:Qr}}}),f=e.adjustScalarBytes||(S=>S),p=e.domain||((S,I,$)=>{if(by("phflag",$),I.length||$)throw new Error("Contexts/pre-hash are not supported");return S});function m(S,I){Iu("coordinate "+S,I,Qr,l)}function v(S){if(!(S instanceof b))throw new Error("ExtendedPoint expected")}const y=D_((S,I)=>{const{ex:$,ey:A,ez:O}=S,D=S.is0();I==null&&(I=D?SF:n.inv(O));const M=u($*I),H=u(A*I),Z=u(O*I);if(D)return{x:Qr,y:Hn};if(Z!==Hn)throw new Error("invZ was invalid");return{x:M,y:H}}),w=D_(S=>{const{a:I,d:$}=e;if(S.is0())throw new Error("bad point: ZERO");const{ex:A,ey:O,ez:D,et:M}=S,H=u(A*A),Z=u(O*O),F=u(D*D),Q=u(F*F),me=u(H*I),De=u(F*u(me+Z)),ze=u(Q+u($*u(H*Z)));if(De!==ze)throw new Error("bad point: equation left != right (1)");const Ue=u(A*O),Tt=u(D*M);if(Ue!==Tt)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(I,$,A,O){this.ex=I,this.ey=$,this.ez=A,this.et=O,m("x",I),m("y",$),m("z",A),m("t",O),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(I){if(I instanceof b)throw new Error("extended point not allowed");const{x:$,y:A}=I||{};return m("x",$),m("y",A),new b($,A,Hn,u($*A))}static normalizeZ(I){const $=n.invertBatch(I.map(A=>A.ez));return I.map((A,O)=>A.toAffine($[O])).map(b.fromAffine)}static msm(I,$){return CF(b,d,I,$)}_setWindowSize(I){T.setWindowSize(this,I)}assertValidity(){w(this)}equals(I){v(I);const{ex:$,ey:A,ez:O}=this,{ex:D,ey:M,ez:H}=I,Z=u($*H),F=u(D*O),Q=u(A*H),me=u(M*O);return Z===F&&Q===me}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:I}=e,{ex:$,ey:A,ez:O}=this,D=u($*$),M=u(A*A),H=u(op*u(O*O)),Z=u(I*D),F=$+A,Q=u(u(F*F)-D-M),me=Z+M,De=me-H,ze=Z-M,Ue=u(Q*De),Tt=u(me*ze),Xt=u(Q*ze),ra=u(De*me);return new b(Ue,Tt,ra,Xt)}add(I){v(I);const{a:$,d:A}=e,{ex:O,ey:D,ez:M,et:H}=this,{ex:Z,ey:F,ez:Q,et:me}=I;if($===BigInt(-1)){const ux=u((D-O)*(F+Z)),dx=u((D+O)*(F-Z)),w0=u(dx-ux);if(w0===Qr)return this.double();const hx=u(M*op*me),fx=u(H*op*Q),px=fx+hx,mx=dx+ux,gx=fx-hx,DR=u(px*w0),UR=u(mx*gx),jR=u(px*gx),LR=u(w0*mx);return new b(DR,UR,LR,jR)}const De=u(O*Z),ze=u(D*F),Ue=u(H*A*me),Tt=u(M*Q),Xt=u((O+D)*(Z+F)-De-ze),ra=Tt-Ue,Nf=Tt+Ue,bc=u(ze-$*De),y0=u(Xt*ra),kR=u(Nf*bc),RR=u(Xt*bc),$R=u(ra*Nf);return new b(y0,kR,$R,RR)}subtract(I){return this.add(I.negate())}wNAF(I){return T.wNAFCached(this,I,b.normalizeZ)}multiply(I){const $=I;Iu("scalar",$,Hn,r);const{p:A,f:O}=this.wNAF($);return b.normalizeZ([A,O])[0]}multiplyUnsafe(I,$=b.ZERO){const A=I;return Iu("scalar",A,Qr,r),A===Qr?x:this.is0()||A===Hn?this:T.wNAFCachedUnsafe(this,A,b.normalizeZ,$)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return T.unsafeLadder(this,r).is0()}toAffine(I){return y(this,I)}clearCofactor(){const{h:I}=e;return I===Hn?this:this.multiplyUnsafe(I)}static fromHex(I,$=!1){const{d:A,a:O}=e,D=n.BYTES;I=ii("pointHex",I,D),by("zip215",$);const M=I.slice(),H=I[D-1];M[D-1]=H&-129;const Z=Wp(M),F=$?l:n.ORDER;Iu("pointHex.y",Z,Qr,F);const Q=u(Z*Z),me=u(Q-Hn),De=u(A*Q-O);let{isValid:ze,value:Ue}=h(me,De);if(!ze)throw new Error("Point.fromHex: invalid y coordinate");const Tt=(Ue&Hn)===Hn,Xt=(H&128)!==0;if(!$&&Ue===Qr&&Xt)throw new Error("Point.fromHex: x=0 and x_0=1");return Xt!==Tt&&(Ue=u(-Ue)),b.fromAffine({x:Ue,y:Z})}static fromPrivateKey(I){return E(I).point}toRawBytes(){const{x:I,y:$}=this.toAffine(),A=ev($,n.BYTES);return A[A.length-1]|=I&Hn?128:0,A}toHex(){return SE(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,Hn,u(e.Gx*e.Gy)),b.ZERO=new b(Qr,Hn,Hn,Qr);const{BASE:C,ZERO:x}=b,T=xF(b,a*8);function N(S){return Ft(S,r)}function U(S){return N(Wp(S))}function E(S){const I=n.BYTES;S=ii("private key",S,I);const $=ii("hashed private key",i(S),2*I),A=f($.slice(0,I)),O=$.slice(I,2*I),D=U(A),M=C.multiply(D),H=M.toRawBytes();return{head:A,prefix:O,scalar:D,point:M,pointBytes:H}}function k(S){return E(S).pointBytes}function R(S=new Uint8Array,...I){const $=$_(...I);return U(i(p($,ii("context",S),!!s)))}function j(S,I,$={}){S=ii("message",S),s&&(S=s(S));const{prefix:A,scalar:O,pointBytes:D}=E(I),M=R($.context,A,S),H=C.multiply(M).toRawBytes(),Z=R($.context,H,D,S),F=N(M+Z*O);Iu("signature.s",F,Qr,r);const Q=$_(H,ev(F,n.BYTES));return ii("result",Q,n.BYTES*2)}const L=AF;function B(S,I,$,A=L){const{context:O,zip215:D}=A,M=n.BYTES;S=ii("signature",S,2*M),I=ii("message",I),$=ii("publicKey",$,M),D!==void 0&&by("zip215",D),s&&(I=s(I));const H=Wp(S.slice(M,2*M));let Z,F,Q;try{Z=b.fromHex($,D),F=b.fromHex(S.slice(0,M),D),Q=C.multiplyUnsafe(H)}catch{return!1}if(!D&&Z.isSmallOrder())return!1;const me=R(O,F.toRawBytes(),Z.toRawBytes(),I);return F.add(Z.multiplyUnsafe(me)).subtract(Q).clearCofactor().equals(b.ZERO)}return C._setWindowSize(8),{CURVE:e,getPublicKey:k,sign:j,verify:B,ExtendedPoint:b,utils:{getExtendedPublicKey:E,randomPrivateKey:()=>o(n.BYTES),precompute(S=8,I=b.BASE){return I._setWindowSize(S),I.multiply(BigInt(3)),I}}}}BigInt(0),BigInt(1);const IE=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),B_=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const TF=BigInt(1),F_=BigInt(2);BigInt(3);const PF=BigInt(5),OF=BigInt(8);function kF(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=IE,o=t*t%i*t%i,a=Is(o,F_,i)*o%i,c=Is(a,TF,i)*t%i,l=Is(c,PF,i)*c%i,u=Is(l,e,i)*l%i,d=Is(u,n,i)*u%i,h=Is(d,r,i)*d%i,f=Is(h,s,i)*h%i,p=Is(f,s,i)*h%i,m=Is(p,e,i)*l%i;return{pow_p_5_8:Is(m,F_,i)*t%i,b2:o}}function RF(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function $F(t,e){const n=IE,r=Ft(e*e*e,n),s=Ft(r*r*e,n),i=kF(t*s).pow_p_5_8;let o=Ft(t*r*i,n);const a=Ft(e*o*o,n),c=o,l=Ft(o*B_,n),u=a===t,d=a===Ft(-t,n),h=a===Ft(-t*B_,n);return u&&(o=c),(d||h)&&(o=l),mF(o,n)&&(o=Ft(-o,n)),{isValid:u||d,value:o}}const DF=l5(IE,void 0,!0),UF={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:DF,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:OF,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:rF,randomBytes:n5,adjustScalarBytes:RF,uvRatio:$F},h5=NF(UF),jF="EdDSA",LF="JWT",Fm=".",Qg="base64url",f5="utf8",p5="utf8",MF=":",BF="did",FF="key",z_="base58btc",zF="z",qF="K36",HF=32;function NE(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function m5(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?NE(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function g5(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=m5(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return NE(n)}function WF(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,v=0,y=0,w=p.length;y!==w&&p[y]===0;)y++,m++;for(var b=(w-y)*u+1>>>0,C=new Uint8Array(b);y!==w;){for(var x=p[y],T=0,N=b-1;(x!==0||T<v)&&N!==-1;N--,T++)x+=256*C[N]>>>0,C[N]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");v=T,y++}for(var U=b-v;U!==b&&C[U]===0;)U++;for(var E=c.repeat(m);U<b;++U)E+=t.charAt(C[U]);return E}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var v=0,y=0;p[m]===c;)v++,m++;for(var w=(p.length-m)*l+1>>>0,b=new Uint8Array(w);p[m];){var C=n[p.charCodeAt(m)];if(C===255)return;for(var x=0,T=w-1;(C!==0||x<y)&&T!==-1;T--,x++)C+=a*b[T]>>>0,b[T]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");y=x,m++}if(p[m]!==" "){for(var N=w-y;N!==w&&b[N]===0;)N++;for(var U=new Uint8Array(v+(w-N)),E=v;N!==w;)U[E++]=b[N++];return U}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var VF=WF,GF=VF;const y5=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},KF=t=>new TextEncoder().encode(t),YF=t=>new TextDecoder().decode(t);let ZF=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},JF=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return w5(this,e)}},QF=class{constructor(e){this.decoders=e}or(e){return w5(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const w5=(t,e)=>new QF({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let XF=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new ZF(e,n,r),this.decoder=new JF(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Xg=({name:t,prefix:e,encode:n,decode:r})=>new XF(t,e,n,r),wf=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=GF(n,e);return Xg({prefix:t,name:e,encode:r,decode:i=>y5(s(i))})},e7=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},t7=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},dn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Xg({prefix:e,name:t,encode(s){return t7(s,r,n)},decode(s){return e7(s,r,n,t)}}),n7=Xg({prefix:"\0",name:"identity",encode:t=>YF(t),decode:t=>KF(t)});var r7=Object.freeze({__proto__:null,identity:n7});const s7=dn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var i7=Object.freeze({__proto__:null,base2:s7});const o7=dn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var a7=Object.freeze({__proto__:null,base8:o7});const c7=wf({prefix:"9",name:"base10",alphabet:"0123456789"});var l7=Object.freeze({__proto__:null,base10:c7});const u7=dn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),d7=dn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var h7=Object.freeze({__proto__:null,base16:u7,base16upper:d7});const f7=dn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),p7=dn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),m7=dn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),g7=dn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),y7=dn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),w7=dn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),b7=dn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),v7=dn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),E7=dn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var x7=Object.freeze({__proto__:null,base32:f7,base32upper:p7,base32pad:m7,base32padupper:g7,base32hex:y7,base32hexupper:w7,base32hexpad:b7,base32hexpadupper:v7,base32z:E7});const C7=wf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_7=wf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var S7=Object.freeze({__proto__:null,base36:C7,base36upper:_7});const A7=wf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),I7=wf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var N7=Object.freeze({__proto__:null,base58btc:A7,base58flickr:I7});const T7=dn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),P7=dn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),O7=dn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),k7=dn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var R7=Object.freeze({__proto__:null,base64:T7,base64pad:P7,base64url:O7,base64urlpad:k7});const b5=Array.from(""),$7=b5.reduce((t,e,n)=>(t[n]=e,t),[]),D7=b5.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function U7(t){return t.reduce((e,n)=>(e+=$7[n],e),"")}function j7(t){const e=[];for(const n of t){const r=D7[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const L7=Xg({prefix:"",name:"base256emoji",encode:U7,decode:j7});var M7=Object.freeze({__proto__:null,base256emoji:L7}),B7=v5,q_=128,F7=127,z7=~F7,q7=Math.pow(2,31);function v5(t,e,n){e=e||[],n=n||0;for(var r=n;t>=q7;)e[n++]=t&255|q_,t/=128;for(;t&z7;)e[n++]=t&255|q_,t>>>=7;return e[n]=t|0,v5.bytes=n-r+1,e}var H7=nv,W7=128,H_=127;function nv(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw nv.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&H_)<<s:(o&H_)*Math.pow(2,s),s+=7}while(o>=W7);return nv.bytes=i-r,n}var V7=Math.pow(2,7),G7=Math.pow(2,14),K7=Math.pow(2,21),Y7=Math.pow(2,28),Z7=Math.pow(2,35),J7=Math.pow(2,42),Q7=Math.pow(2,49),X7=Math.pow(2,56),ez=Math.pow(2,63),tz=function(t){return t<V7?1:t<G7?2:t<K7?3:t<Y7?4:t<Z7?5:t<J7?6:t<Q7?7:t<X7?8:t<ez?9:10},nz={encode:B7,decode:H7,encodingLength:tz},E5=nz;const W_=(t,e,n=0)=>(E5.encode(t,e,n),e),V_=t=>E5.encodingLength(t),rv=(t,e)=>{const n=e.byteLength,r=V_(t),s=r+V_(n),i=new Uint8Array(s+n);return W_(t,i,0),W_(n,i,r),i.set(e,s),new rz(t,n,e,i)};let rz=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const x5=({name:t,code:e,encode:n})=>new sz(t,e,n);let sz=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?rv(this.code,n):n.then(r=>rv(this.code,r))}else throw Error("Unknown type, must be binary type")}};const C5=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),iz=x5({name:"sha2-256",code:18,encode:C5("SHA-256")}),oz=x5({name:"sha2-512",code:19,encode:C5("SHA-512")});var az=Object.freeze({__proto__:null,sha256:iz,sha512:oz});const _5=0,cz="identity",S5=y5,lz=t=>rv(_5,S5(t)),uz={code:_5,name:cz,encode:S5,digest:lz};var dz=Object.freeze({__proto__:null,identity:uz});new TextEncoder,new TextDecoder;const G_={...r7,...i7,...a7,...l7,...h7,...x7,...S7,...N7,...R7,...M7};({...az,...dz});function A5(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const K_=A5("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Sy=A5("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=m5(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),I5={utf8:K_,"utf-8":K_,hex:G_.base16,latin1:Sy,ascii:Sy,binary:Sy,...G_};function e0(t,e="utf8"){const n=I5[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function nu(t,e="utf8"){const n=I5[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?NE(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function Y_(t){return _B(e0(nu(t,Qg),f5))}function zm(t){return e0(nu(SB(t),f5),Qg)}function N5(t){const e=nu(qF,z_),n=zF+e0(g5([e,t]),z_);return[BF,FF,n].join(MF)}function hz(t){return e0(t,Qg)}function fz(t){return nu(t,Qg)}function pz(t){return nu([zm(t.header),zm(t.payload)].join(Fm),p5)}function mz(t){return[zm(t.header),zm(t.payload),hz(t.signature)].join(Fm)}function sv(t){const e=t.split(Fm),n=Y_(e[0]),r=Y_(e[1]),s=fz(e[2]),i=nu(e.slice(0,2).join(Fm),p5);return{header:n,payload:r,signature:s,data:i}}function Z_(t=n5(HF)){const e=h5.getPublicKey(t);return{secretKey:g5([t,e]),publicKey:e}}async function gz(t,e,n,r,s=J.fromMiliseconds(Date.now())){const i={alg:jF,typ:LF},o=N5(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=pz({header:i,payload:c}),u=h5.sign(l,r.secretKey.slice(0,32));return mz({header:i,payload:c,signature:u})}function yz(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,m=new Uint8Array(p);for(;h!==f;){let w=l[h],b=0;for(let C=p-1;(w!==0||b<d)&&C!==-1;C--,b++)w+=256*m[C]>>>0,m[C]=w%n>>>0,w=w/n>>>0;if(w!==0)throw new Error("Non-zero carry");d=b,h++}let v=p-d;for(;v!==p&&m[v]===0;)v++;let y=r.repeat(u);for(;v<p;++v)y+=t.charAt(m[v]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const w=l.charCodeAt(u);if(w>255)return;let b=e[w];if(b===255)return;let C=0;for(let x=f-1;(b!==0||C<h)&&x!==-1;x--,C++)b+=n*p[x]>>>0,p[x]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");h=C,u++}let m=f-h;for(;m!==f&&p[m]===0;)m++;const v=new Uint8Array(d+(f-m));let y=d;for(;m!==f;)v[y++]=p[m++];return v}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var wz="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const ru=yz(wz);function bz(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function vz(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const Ez=new TextEncoder,xz=50;function Cz(t,e,n){Ez.encodeInto(t,e.subarray(n))}function _z(t,e,n){t.length>xz?Cz(t,e,n):vz(t,e,n)}const Sz=4096;function T5(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=Sz&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const Az=new TextDecoder,Iz=200;function Nz(t,e,n){const r=t.subarray(e,e+n);return Az.decode(r)}function Tz(t,e,n){return n>Iz?Nz(t,e,n):T5(t,e,n)}class ap{constructor(e,n){this.type=e,this.data=n}}class gr extends Error{constructor(e){super(e);const n=Object.create(gr.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:gr.name})}}const Nu=4294967295;function Pz(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function P5(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function O5(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function Oz(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const kz=-1,Rz=4294967296-1,$z=17179869184-1;function Dz({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=$z)if(e===0&&t<=Rz){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),P5(r,4,t),n}}function Uz(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function jz(t){if(t instanceof Date){const e=Uz(t);return Dz(e)}else return null}function Lz(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=O5(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new gr(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function Mz(t){const e=Lz(t);return new Date(e.sec*1e3+e.nsec/1e6)}const Bz={type:kz,encode:jz,decode:Mz};class qm{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Bz)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new ap(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new ap(o,i)}}}return e instanceof ap?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new ap(n,e)}}qm.defaultCodec=new qm;function Fz(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function iv(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Fz(t)?new Uint8Array(t):Uint8Array.from(t)}const zz=100,qz=2048;let Hz=class k5{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??qm.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??zz,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??qz,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new k5({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=bz(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),_z(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=iv(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),Pz(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),P5(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function Wz(t,e){return new Hz(e).encodeSharedRef(t)}function Ay(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const Vz=16,Gz=16;class Kz{constructor(e=Vz,n=Gz){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=T5(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const ov="array",bd="map_key",R5="map_value",Yz=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new gr("The type of key must be string or number but "+typeof t)};class Zz{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=ov,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=bd,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===ov){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===bd||e.type===R5){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Tu=-1,TE=new DataView(new ArrayBuffer(0)),Jz=new Uint8Array(TE.buffer);try{TE.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const J_=new RangeError("Insufficient data"),Qz=new Kz;let Xz=class $5{constructor(e){this.totalPos=0,this.pos=0,this.view=TE,this.bytes=Jz,this.headByte=Tu,this.stack=new Zz,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??qm.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??Nu,this.maxBinLength=(e==null?void 0:e.maxBinLength)??Nu,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??Nu,this.maxMapLength=(e==null?void 0:e.maxMapLength)??Nu,this.maxExtLength=(e==null?void 0:e.maxExtLength)??Nu,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:Qz,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??Yz}clone(){return new $5({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Tu,this.stack.reset()}setBuffer(e){const n=iv(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Tu&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=iv(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${Ay(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new gr(`Unrecognized type byte: ${Ay(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===ov)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===bd){if(n==="__proto__")throw new gr("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=R5;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=bd;continue e}}return n}}readHeadByte(){return this.headByte===Tu&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Tu}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new gr(`Unrecognized array type byte: ${Ay(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new gr(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new gr(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new gr(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw J_;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=Tz(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===bd:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new gr(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw J_;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new gr(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=Oz(this.view,this.pos);return this.pos+=8,e}readI64(){const e=O5(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function eq(t,e){return new Xz(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function tq(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function D5(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function Hm(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function PE(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function av(t){if(!Array.isArray(t))throw new Error("array expected")}function Wm(t,e){if(!D5(!0,e))throw new Error(`${t}: array of strings expected`)}function nq(t,e){if(!D5(!1,e))throw new Error(`${t}: array of numbers expected`)}function rq(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function sq(t){const e=typeof t=="string"?t.split(""):t,n=e.length;Wm("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(av(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(av(s),s.map(i=>{Hm("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function iq(t=""){return Hm("join",t),{encode:e=>(Wm("join.decode",e),e.join(t)),decode:e=>(Hm("join.decode",e),e.split(t))}}function oq(t,e="="){return PE(t),Hm("padding",e),{encode(n){for(Wm("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){Wm("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const U5=(t,e)=>e===0?t:U5(e,t%e),Vm=(t,e)=>t+(e-U5(t,e)),Iy=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function Q_(t,e,n,r){if(av(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Vm(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${Vm(e,n)}`);let s=0,i=0;const o=Iy[e],a=Iy[n]-1,c=[];for(const l of t){if(PE(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=Iy[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function aq(t,e=!1){if(PE(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Vm(8,t)>32||Vm(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!tq(n))throw new Error("radix2.encode input should be Uint8Array");return Q_(Array.from(n),8,t,!e)},decode:n=>(nq("radix2.decode",n),Uint8Array.from(Q_(n,t,8,e)))}}const cq=rq(aq(5),sq("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),oq(5),iq(""));function lq(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,v=0,y=0,w=p.length;y!==w&&p[y]===0;)y++,m++;for(var b=(w-y)*u+1>>>0,C=new Uint8Array(b);y!==w;){for(var x=p[y],T=0,N=b-1;(x!==0||T<v)&&N!==-1;N--,T++)x+=256*C[N]>>>0,C[N]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");v=T,y++}for(var U=b-v;U!==b&&C[U]===0;)U++;for(var E=c.repeat(m);U<b;++U)E+=t.charAt(C[U]);return E}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var v=0,y=0;p[m]===c;)v++,m++;for(var w=(p.length-m)*l+1>>>0,b=new Uint8Array(w);p[m];){var C=n[p.charCodeAt(m)];if(C===255)return;for(var x=0,T=w-1;(C!==0||x<y)&&T!==-1;T--,x++)C+=a*b[T]>>>0,b[T]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");y=x,m++}if(p[m]!==" "){for(var N=w-y;N!==w&&b[N]===0;)N++;for(var U=new Uint8Array(v+(w-N)),E=v;N!==w;)U[E++]=b[N++];return U}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var uq=lq,dq=uq;const hq=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fq=t=>new TextEncoder().encode(t),pq=t=>new TextDecoder().decode(t);class mq{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class gq{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return j5(this,e)}}class yq{constructor(e){this.decoders=e}or(e){return j5(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const j5=(t,e)=>new yq({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class wq{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new mq(e,n,r),this.decoder=new gq(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const t0=({name:t,prefix:e,encode:n,decode:r})=>new wq(t,e,n,r),bf=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=dq(n,e);return t0({prefix:t,name:e,encode:r,decode:i=>hq(s(i))})},bq=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},vq=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},hn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>t0({prefix:e,name:t,encode(s){return vq(s,r,n)},decode(s){return bq(s,r,n,t)}}),Eq=t0({prefix:"\0",name:"identity",encode:t=>pq(t),decode:t=>fq(t)}),xq=Object.freeze(Object.defineProperty({__proto__:null,identity:Eq},Symbol.toStringTag,{value:"Module"})),Cq=hn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),_q=Object.freeze(Object.defineProperty({__proto__:null,base2:Cq},Symbol.toStringTag,{value:"Module"})),Sq=hn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Aq=Object.freeze(Object.defineProperty({__proto__:null,base8:Sq},Symbol.toStringTag,{value:"Module"})),Iq=bf({prefix:"9",name:"base10",alphabet:"0123456789"}),Nq=Object.freeze(Object.defineProperty({__proto__:null,base10:Iq},Symbol.toStringTag,{value:"Module"})),Tq=hn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Pq=hn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Oq=Object.freeze(Object.defineProperty({__proto__:null,base16:Tq,base16upper:Pq},Symbol.toStringTag,{value:"Module"})),kq=hn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Rq=hn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),$q=hn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Dq=hn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Uq=hn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),jq=hn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Lq=hn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Mq=hn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Bq=hn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Fq=Object.freeze(Object.defineProperty({__proto__:null,base32:kq,base32hex:Uq,base32hexpad:Lq,base32hexpadupper:Mq,base32hexupper:jq,base32pad:$q,base32padupper:Dq,base32upper:Rq,base32z:Bq},Symbol.toStringTag,{value:"Module"})),zq=bf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),qq=bf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Hq=Object.freeze(Object.defineProperty({__proto__:null,base36:zq,base36upper:qq},Symbol.toStringTag,{value:"Module"})),Wq=bf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Vq=bf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Gq=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Wq,base58flickr:Vq},Symbol.toStringTag,{value:"Module"})),Kq=hn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Yq=hn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Zq=hn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Jq=hn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Qq=Object.freeze(Object.defineProperty({__proto__:null,base64:Kq,base64pad:Yq,base64url:Zq,base64urlpad:Jq},Symbol.toStringTag,{value:"Module"})),L5=Array.from(""),Xq=L5.reduce((t,e,n)=>(t[n]=e,t),[]),eH=L5.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function tH(t){return t.reduce((e,n)=>(e+=Xq[n],e),"")}function nH(t){const e=[];for(const n of t){const r=eH[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const rH=t0({prefix:"",name:"base256emoji",encode:tH,decode:nH}),sH=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:rH},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const X_={...xq,..._q,...Aq,...Nq,...Oq,...Fq,...Hq,...Gq,...Qq,...sH},iH={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},oH="Input must be an string, Buffer or Uint8Array";function aH(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(oH);return e}function cH(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function cp(t){return(4294967296+t).toString(16).substring(1)}function lH(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=cp(e[s]).toUpperCase(),r+=" ",r+=cp(e[s+1]).toUpperCase();else if(n===64)r+=cp(e[s+1]).toUpperCase(),r+=cp(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function uH(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=t(s),c=new Date().getTime(),l=c-r;r=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var M5={normalizeInput:aH,toHex:cH,debugPrint:lH,testSpeed:uH};const Vp=M5;function lp(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function e2(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function B5(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Vi(t,e,n,r,s,i){const o=ed[s],a=ed[s+1],c=ed[i],l=ed[i+1];lp(Pe,t,e),e2(Pe,t,o,a);let u=Pe[r]^Pe[t],d=Pe[r+1]^Pe[t+1];Pe[r]=d,Pe[r+1]=u,lp(Pe,n,r),u=Pe[e]^Pe[n],d=Pe[e+1]^Pe[n+1],Pe[e]=u>>>24^d<<8,Pe[e+1]=d>>>24^u<<8,lp(Pe,t,e),e2(Pe,t,c,l),u=Pe[r]^Pe[t],d=Pe[r+1]^Pe[t+1],Pe[r]=u>>>16^d<<16,Pe[r+1]=d>>>16^u<<16,lp(Pe,n,r),u=Pe[e]^Pe[n],d=Pe[e+1]^Pe[n+1],Pe[e]=d>>>31^u<<1,Pe[e+1]=u>>>31^d<<1}const F5=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),dH=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],yn=new Uint8Array(dH.map(function(t){return t*2})),Pe=new Uint32Array(32),ed=new Uint32Array(32);function z5(t,e){let n=0;for(n=0;n<16;n++)Pe[n]=t.h[n],Pe[n+16]=F5[n];for(Pe[24]=Pe[24]^t.t,Pe[25]=Pe[25]^t.t/4294967296,e&&(Pe[28]=~Pe[28],Pe[29]=~Pe[29]),n=0;n<32;n++)ed[n]=B5(t.b,4*n);for(n=0;n<12;n++)Vi(0,8,16,24,yn[n*16+0],yn[n*16+1]),Vi(2,10,18,26,yn[n*16+2],yn[n*16+3]),Vi(4,12,20,28,yn[n*16+4],yn[n*16+5]),Vi(6,14,22,30,yn[n*16+6],yn[n*16+7]),Vi(0,10,20,30,yn[n*16+8],yn[n*16+9]),Vi(2,12,22,24,yn[n*16+10],yn[n*16+11]),Vi(4,14,16,26,yn[n*16+12],yn[n*16+13]),Vi(6,8,18,28,yn[n*16+14],yn[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^Pe[n]^Pe[n+16]}const Gi=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function q5(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};Gi.fill(0),Gi[0]=t,e&&(Gi[1]=e.length),Gi[2]=1,Gi[3]=1,n&&Gi.set(n,32),r&&Gi.set(r,48);for(let i=0;i<16;i++)s.h[i]=F5[i]^B5(Gi,i*4);return e&&(OE(s,e),s.c=128),s}function OE(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,z5(t,!1),t.c=0),t.b[t.c++]=e[n]}function H5(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;z5(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function W5(t,e,n,r,s){n=n||64,t=Vp.normalizeInput(t),r&&(r=Vp.normalizeInput(r)),s&&(s=Vp.normalizeInput(s));const i=q5(n,e,r,s);return OE(i,t),H5(i)}function hH(t,e,n,r,s){const i=W5(t,e,n,r,s);return Vp.toHex(i)}var fH={blake2b:W5,blake2bHex:hH,blake2bInit:q5,blake2bUpdate:OE,blake2bFinal:H5};const V5=M5;function pH(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Ki(t,e,n,r,s,i){Ge[t]=Ge[t]+Ge[e]+s,Ge[r]=up(Ge[r]^Ge[t],16),Ge[n]=Ge[n]+Ge[r],Ge[e]=up(Ge[e]^Ge[n],12),Ge[t]=Ge[t]+Ge[e]+i,Ge[r]=up(Ge[r]^Ge[t],8),Ge[n]=Ge[n]+Ge[r],Ge[e]=up(Ge[e]^Ge[n],7)}function up(t,e){return t>>>e^t<<32-e}const G5=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wn=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Ge=new Uint32Array(16),en=new Uint32Array(16);function K5(t,e){let n=0;for(n=0;n<8;n++)Ge[n]=t.h[n],Ge[n+8]=G5[n];for(Ge[12]^=t.t,Ge[13]^=t.t/4294967296,e&&(Ge[14]=~Ge[14]),n=0;n<16;n++)en[n]=pH(t.b,4*n);for(n=0;n<10;n++)Ki(0,4,8,12,en[wn[n*16+0]],en[wn[n*16+1]]),Ki(1,5,9,13,en[wn[n*16+2]],en[wn[n*16+3]]),Ki(2,6,10,14,en[wn[n*16+4]],en[wn[n*16+5]]),Ki(3,7,11,15,en[wn[n*16+6]],en[wn[n*16+7]]),Ki(0,5,10,15,en[wn[n*16+8]],en[wn[n*16+9]]),Ki(1,6,11,12,en[wn[n*16+10]],en[wn[n*16+11]]),Ki(2,7,8,13,en[wn[n*16+12]],en[wn[n*16+13]]),Ki(3,4,9,14,en[wn[n*16+14]],en[wn[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=Ge[n]^Ge[n+8]}function Y5(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(G5),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(kE(r,e),r.c=64),r}function kE(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,K5(t,!1),t.c=0),t.b[t.c++]=e[n]}function Z5(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;K5(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function J5(t,e,n){n=n||32,t=V5.normalizeInput(t);const r=Y5(n,e);return kE(r,t),Z5(r)}function mH(t,e,n){const r=J5(t,e,n);return V5.toHex(r)}var gH={blake2s:J5,blake2sHex:mH,blake2sInit:Y5,blake2sUpdate:kE,blake2sFinal:Z5};const Pu=fH,Ou=gH;var yH={blake2b:Pu.blake2b,blake2bHex:Pu.blake2bHex,blake2bInit:Pu.blake2bInit,blake2bUpdate:Pu.blake2bUpdate,blake2bFinal:Pu.blake2bFinal,blake2s:Ou.blake2s,blake2sHex:Ou.blake2sHex,blake2sInit:Ou.blake2sInit,blake2sUpdate:Ou.blake2sUpdate,blake2sFinal:Ou.blake2sFinal};const wH="PARSE_ERROR",bH="INVALID_REQUEST",vH="METHOD_NOT_FOUND",EH="INVALID_PARAMS",Q5="INTERNAL_ERROR",RE="SERVER_ERROR",xH=[-32700,-32600,-32601,-32602,-32603],vd={[wH]:{code:-32700,message:"Parse error"},[bH]:{code:-32600,message:"Invalid Request"},[vH]:{code:-32601,message:"Method not found"},[EH]:{code:-32602,message:"Invalid params"},[Q5]:{code:-32603,message:"Internal error"},[RE]:{code:-32e3,message:"Server error"}},X5=RE;function CH(t){return xH.includes(t)}function t2(t){return Object.keys(vd).includes(t)?vd[t]:vd[X5]}function _H(t){const e=Object.values(vd).find(n=>n.code===t);return e||vd[X5]}function eO(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var tO={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cv=function(t,e){return cv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},cv(t,e)};function SH(t,e){cv(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var lv=function(){return lv=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},lv.apply(this,arguments)};function AH(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function IH(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function NH(t,e){return function(n,r){e(n,r,t)}}function TH(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function PH(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function OH(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function kH(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function RH(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function uv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nO(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function $H(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(nO(arguments[e]));return t}function DH(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function dh(t){return this instanceof dh?(this.v=t,this):new dh(t)}function UH(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,m){i.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof dh?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function jH(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:dh(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function LH(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof uv=="function"?uv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function MH(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function BH(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function FH(t){return t&&t.__esModule?t:{default:t}}function zH(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function qH(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const HH=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return lv},__asyncDelegator:jH,__asyncGenerator:UH,__asyncValues:LH,__await:dh,__awaiter:PH,__classPrivateFieldGet:zH,__classPrivateFieldSet:qH,__createBinding:kH,__decorate:IH,__exportStar:RH,__extends:SH,__generator:OH,__importDefault:FH,__importStar:BH,__makeTemplateObject:MH,__metadata:TH,__param:NH,__read:nO,__rest:AH,__spread:$H,__spreadArrays:DH,__values:uv},Symbol.toStringTag,{value:"Module"})),WH=sI(HH);var oi={},n2;function VH(){if(n2)return oi;n2=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.isBrowserCryptoAvailable=oi.getSubtleCrypto=oi.getBrowerCrypto=void 0;function t(){return(Ls==null?void 0:Ls.crypto)||(Ls==null?void 0:Ls.msCrypto)||{}}oi.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}oi.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return oi.isBrowserCryptoAvailable=n,oi}var ai={},r2;function GH(){if(r2)return ai;r2=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.isBrowser=ai.isNode=ai.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ai.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ai.isNode=e;function n(){return!t()&&!e()}return ai.isBrowser=n,ai}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=WH;e.__exportStar(VH(),t),e.__exportStar(GH(),t)})(tO);function Rs(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function xa(t=6){return BigInt(Rs(t))}function Co(t,e,n){return{id:n||Rs(),jsonrpc:"2.0",method:t,params:e}}function n0(t,e){return{id:t,jsonrpc:"2.0",result:e}}function r0(t,e,n){return{id:t,jsonrpc:"2.0",error:KH(e)}}function KH(t,e){return typeof t>"u"?t2(Q5):(typeof t=="string"&&(t=Object.assign(Object.assign({},t2(RE)),{message:t})),CH(t.code)&&(t=_H(t.code)),t)}let YH=class{},ZH=class extends YH{constructor(){super()}},JH=class extends ZH{constructor(e){super()}};const QH="^https?:",XH="^wss?:";function eW(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function rO(t,e){const n=eW(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function s2(t){return rO(t,QH)}function i2(t){return rO(t,XH)}function tW(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function sO(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function $E(t){return sO(t)&&"method"in t}function s0(t){return sO(t)&&($s(t)||Dr(t))}function $s(t){return"result"in t}function Dr(t){return"error"in t}let Yr=class extends JH{constructor(e){super(e),this.events=new Kr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Co(e.method,e.params||[],e.id||xa().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Dr(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),s0(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const nW=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),rW=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function sW(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return rW(t)}catch{return t}}function iW(t){return typeof t=="string"?t:nW(t)||""}const oW=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),aW=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",o2=t=>t.split("?")[0],a2=10,cW=oW();let lW=class{constructor(e){if(this.url=e,this.events=new Kr.EventEmitter,this.registering=!1,!i2(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(iW(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!i2(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=tO.isReactNative()?void 0:{rejectUnauthorized:!tW(e)},i=new cW(e,[],s);aW()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?sW(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=r0(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return eO(e,o2(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>a2&&this.events.setMaxListeners(a2)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${o2(this.url)}`));return this.events.emit("register_error",n),n}};var dv={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Ls<"u"&&Ls,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Ls<"u"&&Ls||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(S){return S&&DataView.prototype.isPrototypeOf(S)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(S){return S&&u.indexOf(Object.prototype.toString.call(S))>-1};function h(S){if(typeof S!="string"&&(S=String(S)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(S)||S==="")throw new TypeError('Invalid character in header field name: "'+S+'"');return S.toLowerCase()}function f(S){return typeof S!="string"&&(S=String(S)),S}function p(S){var I={next:function(){var $=S.shift();return{done:$===void 0,value:$}}};return c.iterable&&(I[Symbol.iterator]=function(){return I}),I}function m(S){this.map={},S instanceof m?S.forEach(function(I,$){this.append($,I)},this):Array.isArray(S)?S.forEach(function(I){if(I.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+I.length);this.append(I[0],I[1])},this):S&&Object.getOwnPropertyNames(S).forEach(function(I){this.append(I,S[I])},this)}m.prototype.append=function(S,I){S=h(S),I=f(I);var $=this.map[S];this.map[S]=$?$+", "+I:I},m.prototype.delete=function(S){delete this.map[h(S)]},m.prototype.get=function(S){return S=h(S),this.has(S)?this.map[S]:null},m.prototype.has=function(S){return this.map.hasOwnProperty(h(S))},m.prototype.set=function(S,I){this.map[h(S)]=f(I)},m.prototype.forEach=function(S,I){for(var $ in this.map)this.map.hasOwnProperty($)&&S.call(I,this.map[$],$,this)},m.prototype.keys=function(){var S=[];return this.forEach(function(I,$){S.push($)}),p(S)},m.prototype.values=function(){var S=[];return this.forEach(function(I){S.push(I)}),p(S)},m.prototype.entries=function(){var S=[];return this.forEach(function(I,$){S.push([$,I])}),p(S)},c.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function v(S){if(!S._noBody){if(S.bodyUsed)return Promise.reject(new TypeError("Already read"));S.bodyUsed=!0}}function y(S){return new Promise(function(I,$){S.onload=function(){I(S.result)},S.onerror=function(){$(S.error)}})}function w(S){var I=new FileReader,$=y(I);return I.readAsArrayBuffer(S),$}function b(S){var I=new FileReader,$=y(I),A=/charset=([A-Za-z0-9_-]+)/.exec(S.type),O=A?A[1]:"utf-8";return I.readAsText(S,O),$}function C(S){for(var I=new Uint8Array(S),$=new Array(I.length),A=0;A<I.length;A++)$[A]=String.fromCharCode(I[A]);return $.join("")}function x(S){if(S.slice)return S.slice(0);var I=new Uint8Array(S.byteLength);return I.set(new Uint8Array(S)),I.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(S){this.bodyUsed=this.bodyUsed,this._bodyInit=S,S?typeof S=="string"?this._bodyText=S:c.blob&&Blob.prototype.isPrototypeOf(S)?this._bodyBlob=S:c.formData&&FormData.prototype.isPrototypeOf(S)?this._bodyFormData=S:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)?this._bodyText=S.toString():c.arrayBuffer&&c.blob&&l(S)?(this._bodyArrayBuffer=x(S.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(S)||d(S))?this._bodyArrayBuffer=x(S):this._bodyText=S=Object.prototype.toString.call(S):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof S=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var S=v(this);if(S)return S;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var S=v(this);return S||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var S=v(this);if(S)return S;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}var N=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function U(S){var I=S.toUpperCase();return N.indexOf(I)>-1?I:S}function E(S,I){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');I=I||{};var $=I.body;if(S instanceof E){if(S.bodyUsed)throw new TypeError("Already read");this.url=S.url,this.credentials=S.credentials,I.headers||(this.headers=new m(S.headers)),this.method=S.method,this.mode=S.mode,this.signal=S.signal,!$&&S._bodyInit!=null&&($=S._bodyInit,S.bodyUsed=!0)}else this.url=String(S);if(this.credentials=I.credentials||this.credentials||"same-origin",(I.headers||!this.headers)&&(this.headers=new m(I.headers)),this.method=U(I.method||this.method||"GET"),this.mode=I.mode||this.mode||null,this.signal=I.signal||this.signal||function(){if("AbortController"in a){var D=new AbortController;return D.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&$)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody($),(this.method==="GET"||this.method==="HEAD")&&(I.cache==="no-store"||I.cache==="no-cache")){var A=/([?&])_=[^&]*/;if(A.test(this.url))this.url=this.url.replace(A,"$1_="+new Date().getTime());else{var O=/\?/;this.url+=(O.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function k(S){var I=new FormData;return S.trim().split("&").forEach(function($){if($){var A=$.split("="),O=A.shift().replace(/\+/g," "),D=A.join("=").replace(/\+/g," ");I.append(decodeURIComponent(O),decodeURIComponent(D))}}),I}function R(S){var I=new m,$=S.replace(/\r?\n[\t ]+/g," ");return $.split("\r").map(function(A){return A.indexOf(`
`)===0?A.substr(1,A.length):A}).forEach(function(A){var O=A.split(":"),D=O.shift().trim();if(D){var M=O.join(":").trim();try{I.append(D,M)}catch(H){console.warn("Response "+H.message)}}}),I}T.call(E.prototype);function j(S,I){if(!(this instanceof j))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(I||(I={}),this.type="default",this.status=I.status===void 0?200:I.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=I.statusText===void 0?"":""+I.statusText,this.headers=new m(I.headers),this.url=I.url||"",this._initBody(S)}T.call(j.prototype),j.prototype.clone=function(){return new j(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},j.error=function(){var S=new j(null,{status:200,statusText:""});return S.ok=!1,S.status=0,S.type="error",S};var L=[301,302,303,307,308];j.redirect=function(S,I){if(L.indexOf(I)===-1)throw new RangeError("Invalid status code");return new j(null,{status:I,headers:{location:S}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(I,$){this.message=I,this.name=$;var A=Error(I);this.stack=A.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function B(S,I){return new Promise(function($,A){var O=new E(S,I);if(O.signal&&O.signal.aborted)return A(new o.DOMException("Aborted","AbortError"));var D=new XMLHttpRequest;function M(){D.abort()}D.onload=function(){var F={statusText:D.statusText,headers:R(D.getAllResponseHeaders()||"")};O.url.indexOf("file://")===0&&(D.status<200||D.status>599)?F.status=200:F.status=D.status,F.url="responseURL"in D?D.responseURL:F.headers.get("X-Request-URL");var Q="response"in D?D.response:D.responseText;setTimeout(function(){$(new j(Q,F))},0)},D.onerror=function(){setTimeout(function(){A(new TypeError("Network request failed"))},0)},D.ontimeout=function(){setTimeout(function(){A(new TypeError("Network request timed out"))},0)},D.onabort=function(){setTimeout(function(){A(new o.DOMException("Aborted","AbortError"))},0)};function H(F){try{return F===""&&a.location.href?a.location.href:F}catch{return F}}if(D.open(O.method,H(O.url),!0),O.credentials==="include"?D.withCredentials=!0:O.credentials==="omit"&&(D.withCredentials=!1),"responseType"in D&&(c.blob?D.responseType="blob":c.arrayBuffer&&(D.responseType="arraybuffer")),I&&typeof I.headers=="object"&&!(I.headers instanceof m||a.Headers&&I.headers instanceof a.Headers)){var Z=[];Object.getOwnPropertyNames(I.headers).forEach(function(F){Z.push(h(F)),D.setRequestHeader(F,f(I.headers[F]))}),O.headers.forEach(function(F,Q){Z.indexOf(Q)===-1&&D.setRequestHeader(Q,F)})}else O.headers.forEach(function(F,Q){D.setRequestHeader(Q,F)});O.signal&&(O.signal.addEventListener("abort",M),D.onreadystatechange=function(){D.readyState===4&&O.signal.removeEventListener("abort",M)}),D.send(typeof O._bodyInit>"u"?null:O._bodyInit)})}return B.polyfill=!0,a.fetch||(a.fetch=B,a.Headers=m,a.Request=E,a.Response=j),o.Headers=m,o.Request=E,o.Response=j,o.fetch=B,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(dv,dv.exports);var uW=dv.exports;const c2=Yl(uW),dW=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),hW=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function fW(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return hW(t)}catch{return t}}function l2(t){return typeof t=="string"?t:dW(t)||""}var pW=Object.defineProperty,mW=Object.defineProperties,gW=Object.getOwnPropertyDescriptors,u2=Object.getOwnPropertySymbols,yW=Object.prototype.hasOwnProperty,wW=Object.prototype.propertyIsEnumerable,d2=(t,e,n)=>e in t?pW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,h2=(t,e)=>{for(var n in e||(e={}))yW.call(e,n)&&d2(t,n,e[n]);if(u2)for(var n of u2(e))wW.call(e,n)&&d2(t,n,e[n]);return t},f2=(t,e)=>mW(t,gW(e));const bW={Accept:"application/json","Content-Type":"application/json"},vW="POST",p2={headers:bW,method:vW},m2=10;let _s=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Kr.EventEmitter,this.isAvailable=!1,this.registering=!1,!s2(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=l2(e),r=await(await c2(this.url,f2(h2({},p2),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!s2(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=l2({id:1,jsonrpc:"2.0",method:"test",params:[]});await c2(e,f2(h2({},p2),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?fW(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=r0(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return eO(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>m2&&this.events.setMaxListeners(m2)}};const Ed={getSIWX(){return V.state.siwx},async initializeIfEnabled(){var i;const t=V.state.siwx,e=P.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(P.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await Qe.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),tt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=de._getClient())==null?void 0:i.disconnect().catch(console.error)),xe.reset("Connect"),fs.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=V.state.siwx,e=ge.getPlainAddress(P.getActiveCaipAddress()),n=P.getActiveCaipNetwork(),r=de._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();re.getConnectorId(n.chainNamespace)===q.CONNECTOR_ID.AUTH&&xe.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),P.setLastConnectedSIWECaipNetwork(n),Qe.close(),tt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Qe.state.open||xe.state.view==="ApproveTransaction")&&await Qe.open({view:"SIWXSignMessage"}),i.isSmartAccount?fs.showError("This application might not support Smart Accounts"):fs.showError("Signature declined"),tt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=P.getLastConnectedSIWECaipNetwork();r?P.switchActiveNetwork(r):await de.disconnect()}else Qe.close();xe.reset("Connect"),tt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=P.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,ge.getPlainAddress(P.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=V.state.siwx,e=ge.getPlainAddress(P.getActiveCaipAddress()),n=P.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=xe.state.view==="ApproveTransaction",r=xe.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Ed.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=P.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(fs.showLoading("Authenticating...",{autoClose:!1}),ne.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),tt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Ed.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),tt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Ed.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{fs.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=P.state.activeChain;return{network:((e=P.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=ne.state.preferredAccountTypes)==null?void 0:n[t])===Jt.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};var iO={exports:{}},oO={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ml=te;function EW(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xW=typeof Object.is=="function"?Object.is:EW,CW=Ml.useState,_W=Ml.useEffect,SW=Ml.useLayoutEffect,AW=Ml.useDebugValue;function IW(t,e){var n=e(),r=CW({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return SW(function(){s.value=n,s.getSnapshot=e,Ny(s)&&i({inst:s})},[t,n,e]),_W(function(){return Ny(s)&&i({inst:s}),t(function(){Ny(s)&&i({inst:s})})},[t]),AW(n),n}function Ny(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xW(t,n)}catch{return!0}}function NW(t,e){return e()}var TW=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?NW:IW;oO.useSyncExternalStore=Ml.useSyncExternalStore!==void 0?Ml.useSyncExternalStore:TW;iO.exports=oO;var PW=iO.exports;const OW=Yl(PW),kW={BASE_URL:"/hushr/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{use:g2}=e1,{useSyncExternalStore:RW}=OW,$W=(t,e)=>{const n=te.useRef();te.useEffect(()=>{n.current=XL(t,e)}),te.useDebugValue(n.current)},DW=new WeakMap;function UW(t,e){const r=te.useRef(),s=te.useRef();let i=!0;const o=RW(te.useCallback(l=>{const u=Qt(t,l);return l(),u},[t,void 0]),()=>{const l=Za(t,g2);try{if(!i&&r.current&&s.current&&!OP(r.current,l,s.current,new WeakMap))return r.current}catch{}return l},()=>Za(t,g2));i=!1;const a=new WeakMap;te.useEffect(()=>{r.current=o,s.current=a}),(kW?"production":void 0)!=="production"&&$W(o,a);const c=te.useMemo(()=>new WeakMap,[]);return PP(o,a,c,DW)}function jW(t){var o,a;const e=UW(P.state),n=e.activeChain;if(!n)return{allAccounts:[],address:void 0,caipAddress:void 0,status:void 0,isConnected:!1,embeddedWalletInfo:void 0};const r=(o=e.chains.get(n))==null?void 0:o.accountState,s=re.getAuthConnector(n),i=ee.getConnectedConnectorId(n);return{allAccounts:(r==null?void 0:r.allAccounts)||[],caipAddress:r==null?void 0:r.caipAddress,address:ge.getPlainAddress(r==null?void 0:r.caipAddress),isConnected:!!(r!=null&&r.caipAddress),status:r==null?void 0:r.status,embeddedWalletInfo:s&&i===q.CONNECTOR_ID.AUTH?{user:r!=null&&r.user?{...r.user,username:ee.getConnectedSocialUsername()}:void 0,authProvider:(r==null?void 0:r.socialProvider)||"email",accountType:(a=r==null?void 0:r.preferredAccountTypes)==null?void 0:a[n],isSmartAccountDeployed:!!(r!=null&&r.smartAccountDeployed)}:void 0}}const gt={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},_o={ConnectorExplorerIds:{[q.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[q.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[q.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[q.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[q.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[gt.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[gt.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[gt.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[gt.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[gt.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[gt.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[gt.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[gt.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[gt.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[gt.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[gt.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[q.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[q.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[q.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[q.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[q.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[q.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[q.CONNECTOR_ID.INJECTED]:"Browser Wallet",[q.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[q.CONNECTOR_ID.COINBASE]:"Coinbase",[q.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[q.CONNECTOR_ID.LEDGER]:"Ledger",[q.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[q.CONNECTOR_ID.INJECTED]:"INJECTED",[q.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[q.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[q.CONNECTOR_ID.AUTH]:"AUTH"},WalletConnectRpcChainIds:[1,5,11155111,10,420,42161,421613,137,80001,42220,1313161554,1313161555,56,97,43114,43113,100,8453,84531,7777777,999,324,280]},hh={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${gt.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=P.state.activeChain;return q.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>re.getConnectorId(e)===q.CONNECTOR_ID.AUTH&&e===t)}},LW=new AbortController,Et={EmbeddedWalletAbortController:LW,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${MW()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:t=>`Failed to get App Configuration ${t||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function MW(){return typeof window<"u"}const BW={createLogger(t,e="error"){const n=tu({level:e}),{logger:r}=EE({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}};function FW(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function y2(t){return FW(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const aO="2.31.0";let ku={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${aO}`},Li=class hv extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof hv?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof hv&&n.cause.docsPath||n.docsPath,i=(a=ku.getDocsUrl)==null?void 0:a.call(ku,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...ku.version?[`Version: ${ku.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=aO}walk(e){return cO(this,e)}};function cO(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?cO(t.cause,e):e?null:t}let lO=class extends Li{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};function zW(t,{dir:e,size:n=32}={}){return typeof t=="string"?qW(t,{dir:e,size:n}):HW(t,{dir:e,size:n})}function qW(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new lO({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function HW(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new lO({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let WW=class extends Li{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function VW(t,{size:e}){if(y2(t)>e)throw new WW({givenSize:y2(t),maxSize:e})}const GW=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function KW(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=GW[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(VW(r,{size:e.size}),zW(r,{dir:"right",size:e.size})):r}const YW=new TextEncoder;function ZW(t,e={}){const n=YW.encode(t);return KW(n,e)}let JW=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const ja=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),DE=t=>t;class xd extends Li{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${DE(o)}`,e&&`Request body: ${ja(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class uO extends Li{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${DE(r)}`,`Request body: ${ja(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class w2 extends Li{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${DE(n)}`,`Request body: ${ja(e)}`],name:"TimeoutError"})}}const QW=-1;class ur extends Li{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof uO?e.code:n??QW}}class Ir extends ur{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class fh extends ur{constructor(e){super(e,{code:fh.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(fh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class ph extends ur{constructor(e){super(e,{code:ph.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(ph,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class mh extends ur{constructor(e,{method:n}={}){super(e,{code:mh.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(mh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class gh extends ur{constructor(e){super(e,{code:gh.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(gh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Bl extends ur{constructor(e){super(e,{code:Bl.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Bl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class yh extends ur{constructor(e){super(e,{code:yh.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(yh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class wh extends ur{constructor(e){super(e,{code:wh.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(wh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class bh extends ur{constructor(e){super(e,{code:bh.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(bh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Fl extends ur{constructor(e){super(e,{code:Fl.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Fl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Ca extends ur{constructor(e,{method:n}={}){super(e,{code:Ca.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Ca,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class zl extends ur{constructor(e){super(e,{code:zl.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(zl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class vh extends ur{constructor(e){super(e,{code:vh.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(vh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class La extends Ir{constructor(e){super(e,{code:La.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(La,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Eh extends Ir{constructor(e){super(e,{code:Eh.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Eh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class xh extends Ir{constructor(e,{method:n}={}){super(e,{code:xh.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(xh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Ch extends Ir{constructor(e){super(e,{code:Ch.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Ch,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class _h extends Ir{constructor(e){super(e,{code:_h.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(_h,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Sh extends Ir{constructor(e){super(e,{code:Sh.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Sh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Ah extends Ir{constructor(e){super(e,{code:Ah.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Ah,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Ih extends Ir{constructor(e){super(e,{code:Ih.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Ih,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Nh extends Ir{constructor(e){super(e,{code:Nh.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Nh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Th extends Ir{constructor(e){super(e,{code:Th.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Th,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Ph extends Ir{constructor(e){super(e,{code:Ph.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Ph,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Oh extends Ir{constructor(e){super(e,{code:Oh.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Oh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class kh extends Ir{constructor(e){super(e,{code:kh.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(kh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class XW extends ur{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class UE extends Li{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(UE,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(UE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});function eV(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const Ty=new Map;function tV({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>Ty.delete(e),a=()=>c().map(({args:u})=>u),c=()=>Ty.get(e)||[],l=u=>Ty.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=eV();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function dO(t){return new Promise(e=>setTimeout(e,t))}const fv=256;let dp=fv,hp;function nV(t=11){if(!hp||dp+t>fv*2){hp="",dp=0;for(let e=0;e<fv;e++)hp+=(256+Math.random()*256|0).toString(16).substring(1)}return hp.substring(dp,dp+++t)}const fp=new JW(8192);function rV(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(fp.get(n))return fp.get(n);const r=t().finally(()=>fp.delete(n));return fp.set(n,r),r}function sV(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await dO(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function iV(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Ca(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Ca(new Error("method not supported"),{method:l});const u=s?ZW(`${c}.${ja(n)}`):void 0;return rV(()=>sV(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case fh.code:throw new fh(f);case ph.code:throw new ph(f);case mh.code:throw new mh(f,{method:n.method});case gh.code:throw new gh(f);case Bl.code:throw new Bl(f);case yh.code:throw new yh(f);case wh.code:throw new wh(f);case bh.code:throw new bh(f);case Fl.code:throw new Fl(f);case Ca.code:throw new Ca(f,{method:n.method});case zl.code:throw new zl(f);case vh.code:throw new vh(f);case La.code:throw new La(f);case Eh.code:throw new Eh(f);case xh.code:throw new xh(f);case Ch.code:throw new Ch(f);case _h.code:throw new _h(f);case Sh.code:throw new Sh(f);case Ah.code:throw new Ah(f);case Ih.code:throw new Ih(f);case Nh.code:throw new Nh(f);case Th.code:throw new Th(f);case Ph.code:throw new Ph(f);case Oh.code:throw new Oh(f);case kh.code:throw new kh(f);case 5e3:throw new La(f);default:throw h instanceof Li?h:new XW(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof xd){const m=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(m!=null&&m.match(/\d/))return Number.parseInt(m)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>oV(h)}),{enabled:s,id:u})}}function oV(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===zl.code||t.code===Bl.code:t instanceof xd&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function hO({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=nV();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:iV(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function b2(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=aV,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=hO({key:n,name:r,async request({method:m,params:v}){let y;const w=async(b=0)=>{const C=h[b]({...d,chain:c,retryCount:0,timeout:u});try{const x=await C.request({method:m,params:v});return f({method:m,params:v,response:x,transport:C,status:"success"}),x}catch(x){if(f({error:x,method:m,params:v,transport:C,status:"error"}),i(x)||b===h.length-1||(y??(y=h.slice(b+1).some(T=>{const{include:N,exclude:U}=T({chain:c}).config.methods||{};return N?N.includes(m):U?!U.includes(m):!0})),!y))throw x;return w(b+1)}};return w()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:m=>f=m,transports:h.map(m=>m({chain:c,retryCount:0}))});if(s){const m=typeof s=="object"?s:{};cV({chain:c,interval:m.interval??l,onTransports:v=>h=v,ping:m.ping,sampleCount:m.sampleCount,timeout:m.timeout,transports:h,weights:m.weights})}return p}}function aV(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Fl.code||t.code===La.code||UE.nodeMessage.test(t.message)||t.code===5e3))}function cV({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async m=>{const v=m({chain:t,retryCount:0,timeout:i}),y=Date.now();let w,b;try{await(r?r({transport:v}):v.request({method:"net_listening"})),b=1}catch{b=0}finally{w=Date.now()}return{latency:w-y,success:b}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(m=>Math.max(...m.map(({latency:v})=>v)))),p=o.map((m,v)=>{const y=u.map(T=>T[v].latency),b=1-y.reduce((T,N)=>T+N,0)/y.length/f,C=u.map(T=>T[v].success),x=C.reduce((T,N)=>T+N,0)/C.length;return x===0?[0,v]:[l*b+c*x,v]}).sort((m,v)=>v[0]-m[0]);n(p.map(([,m])=>o[m])),await dO(e),d()};d()}class lV extends Li{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function uV(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function dV(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const v2=dV();function hV(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await uV(async({signal:p})=>{const m={...a,body:Array.isArray(r)?ja(r.map(b=>({jsonrpc:"2.0",id:b.id??v2.take(),...b}))):ja({jsonrpc:"2.0",id:r.id??v2.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},v=new Request(t,m),y=await(s==null?void 0:s(v,m))??{...m,url:t};return await fetch(y.url??t,y)},{errorInstance:new w2({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new xd({body:r,details:ja(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof xd||h instanceof w2?h:new xd({body:r,cause:h,url:t})}}}}function pp(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:m=0}=typeof n=="object"?n:{},v=e.retryCount??h,y=f??e.timeout??1e4,w=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!w)throw new lV;const b=hV(w,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return hO({key:s,methods:i,name:o,async request({method:C,params:x}){const T={method:C,params:x},{schedule:N}=tV({id:w,wait:m,shouldSplitBatch(R){return R.length>p},fn:R=>b.request({body:R}),sort:(R,j)=>R.id-j.id}),U=async R=>n?N(R):[await b.request({body:R})],[{error:E,result:k}]=await U(T);if(u)return{error:E,result:k};if(E)throw new uO({body:T,error:E,url:w});return k},retryCount:v,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:w})}}const fV="rpc.walletconnect.org";function E2(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const Py=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],zs={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===fV}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:q.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${q.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return Py.includes(e)?E2(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,m,v;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((m=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:m[0])||o,l=((v=r==null?void 0:r[i])==null?void 0:v.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:_o.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>zs.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(pp(a.url,a.config))}),Py.includes(t.caipNetworkId)&&r.push(pp(E2(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(pp(a))}),b2(r)},extendWagmiTransports(t,e,n){if(Py.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return b2([n,pp(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:q.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=ee.getActiveCaipNetworkId(),n=P.getAllRequestedCaipNetworks(),r=Array.from(((c=P.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},Gm={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Wn=ht({providers:{...Gm},providerIds:{...Gm}}),it={state:Wn,subscribeKey(t,e){return un(Wn,t,e)},subscribe(t){return Qt(Wn,()=>{t(Wn)})},subscribeProviders(t){return Qt(Wn.providers,()=>t(Wn.providers))},setProvider(t,e){e&&(Wn.providers[t]=Ja(e))},getProvider(t){return Wn.providers[t]},setProviderId(t,e){e&&(Wn.providerIds[t]=e)},getProviderId(t){if(t)return Wn.providerIds[t]},reset(){Wn.providers={...Gm},Wn.providerIds={...Gm}},resetChain(t){Wn.providers[t]=void 0,Wn.providerIds[t]=void 0}},x2={address:/^0x(?:[A-Fa-f0-9]{40})$/u,transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},sn={set(t,e){yr.isClient&&localStorage.setItem(`${fe.STORAGE_KEY}${t}`,e)},get(t){return yr.isClient?localStorage.getItem(`${fe.STORAGE_KEY}${t}`):null},delete(t,e){yr.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${fe.STORAGE_KEY}${t}`))}},mp=30*1e3,yr={checkIfAllowedToTriggerEmail(){const t=sn.get(fe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<mp){const n=Math.ceil((mp-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=sn.get(fe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<mp)return Math.ceil((mp-e)/1e3)}return 0},checkIfRequestExists(t){return Jt.NOT_SAFE_RPC_METHODS.includes(t.method)||Jt.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(x2.transactionHash))||(t==null?void 0:t.match(x2.signedMessage)))?fe.RPC_RESPONSE_TYPE_TX:fe.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Jt.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var Ke;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Ke||(Ke={}));var pv;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(pv||(pv={}));const ce=Ke.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),fo=t=>{switch(typeof t){case"undefined":return ce.undefined;case"string":return ce.string;case"number":return isNaN(t)?ce.nan:ce.number;case"boolean":return ce.boolean;case"function":return ce.function;case"bigint":return ce.bigint;case"symbol":return ce.symbol;case"object":return Array.isArray(t)?ce.array:t===null?ce.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ce.promise:typeof Map<"u"&&t instanceof Map?ce.map:typeof Set<"u"&&t instanceof Set?ce.set:typeof Date<"u"&&t instanceof Date?ce.date:ce.object;default:return ce.unknown}},Y=Ke.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),pV=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ws extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ke.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ws.create=t=>new ws(t);const Rh=(t,e)=>{let n;switch(t.code){case Y.invalid_type:t.received===ce.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Y.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ke.jsonStringifyReplacer)}`;break;case Y.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ke.joinValues(t.keys,", ")}`;break;case Y.invalid_union:n="Invalid input";break;case Y.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ke.joinValues(t.options)}`;break;case Y.invalid_enum_value:n=`Invalid enum value. Expected ${Ke.joinValues(t.options)}, received '${t.received}'`;break;case Y.invalid_arguments:n="Invalid function arguments";break;case Y.invalid_return_type:n="Invalid function return type";break;case Y.invalid_date:n="Invalid date";break;case Y.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ke.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Y.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Y.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Y.custom:n="Invalid input";break;case Y.invalid_intersection_types:n="Intersection results could not be merged";break;case Y.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Y.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ke.assertNever(t)}return{message:n}};let fO=Rh;function mV(t){fO=t}function Km(){return fO}const Ym=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},gV=[];function he(t,e){const n=Ym({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Km(),Rh].filter(r=>!!r)});t.common.issues.push(n)}class Tn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Ie;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return Tn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Ie;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Ie=Object.freeze({status:"aborted"}),pO=t=>({status:"dirty",value:t}),Ln=t=>({status:"valid",value:t}),mv=t=>t.status==="aborted",gv=t=>t.status==="dirty",$h=t=>t.status==="valid",Zm=t=>typeof Promise<"u"&&t instanceof Promise;var be;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(be||(be={}));class Zs{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const C2=(t,e)=>{if($h(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ws(t.common.issues);return this._error=n,this._error}}};function Oe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Re{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return fo(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:fo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Tn,ctx:{common:e.parent.common,data:e.data,parsedType:fo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Zm(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fo(e)},i=this._parseSync({data:e,path:s.path,parent:s});return C2(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fo(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Zm(s)?s:Promise.resolve(s));return C2(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Y.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new xs({schema:this,typeName:Se.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Si.create(this,this._def)}nullable(){return tc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return bs.create(this,this._def)}promise(){return Hl.create(this,this._def)}or(e){return Lh.create([this,e],this._def)}and(e){return Mh.create(this,e,this._def)}transform(e){return new xs({...Oe(this._def),schema:this,typeName:Se.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Hh({...Oe(this._def),innerType:this,defaultValue:n,typeName:Se.ZodDefault})}brand(){return new gO({typeName:Se.ZodBranded,type:this,...Oe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new eg({...Oe(this._def),innerType:this,catchValue:n,typeName:Se.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return vf.create(this,e)}readonly(){return ng.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const yV=/^c[^\s-]{8,}$/i,wV=/^[a-z][a-z0-9]*$/,bV=/^[0-9A-HJKMNP-TV-Z]{26}$/,vV=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,EV=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,xV="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Oy;const CV=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,_V=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,SV=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function AV(t,e){return!!((e==="v4"||!e)&&CV.test(t)||(e==="v6"||!e)&&_V.test(t))}class ps extends Re{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ce.string){const i=this._getOrReturnCtx(e);return he(i,{code:Y.invalid_type,expected:ce.string,received:i.parsedType}),Ie}const r=new Tn;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),he(s,{code:Y.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),he(s,{code:Y.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?he(s,{code:Y.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&he(s,{code:Y.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")EV.test(e.data)||(s=this._getOrReturnCtx(e,s),he(s,{validation:"email",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Oy||(Oy=new RegExp(xV,"u")),Oy.test(e.data)||(s=this._getOrReturnCtx(e,s),he(s,{validation:"emoji",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")vV.test(e.data)||(s=this._getOrReturnCtx(e,s),he(s,{validation:"uuid",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")yV.test(e.data)||(s=this._getOrReturnCtx(e,s),he(s,{validation:"cuid",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")wV.test(e.data)||(s=this._getOrReturnCtx(e,s),he(s,{validation:"cuid2",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")bV.test(e.data)||(s=this._getOrReturnCtx(e,s),he(s,{validation:"ulid",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),he(s,{validation:"url",code:Y.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),he(s,{validation:"regex",code:Y.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),he(s,{code:Y.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),he(s,{code:Y.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),he(s,{code:Y.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?SV(i).test(e.data)||(s=this._getOrReturnCtx(e,s),he(s,{code:Y.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?AV(e.data,i.version)||(s=this._getOrReturnCtx(e,s),he(s,{validation:"ip",code:Y.invalid_string,message:i.message}),r.dirty()):Ke.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Y.invalid_string,...be.errToObj(r)})}_addCheck(e){return new ps({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...be.errToObj(e)})}url(e){return this._addCheck({kind:"url",...be.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...be.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...be.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...be.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...be.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...be.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...be.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...be.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...be.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...be.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...be.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...be.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...be.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...be.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...be.errToObj(n)})}nonempty(e){return this.min(1,be.errToObj(e))}trim(){return new ps({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ps({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ps({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ps.create=t=>{var e;return new ps({checks:[],typeName:Se.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Oe(t)})};function IV(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Ko extends Re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ce.number){const i=this._getOrReturnCtx(e);return he(i,{code:Y.invalid_type,expected:ce.number,received:i.parsedType}),Ie}let r;const s=new Tn;for(const i of this._def.checks)i.kind==="int"?Ke.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),he(r,{code:Y.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),he(r,{code:Y.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),he(r,{code:Y.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?IV(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),he(r,{code:Y.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),he(r,{code:Y.not_finite,message:i.message}),s.dirty()):Ke.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,be.toString(n))}gt(e,n){return this.setLimit("min",e,!1,be.toString(n))}lte(e,n){return this.setLimit("max",e,!0,be.toString(n))}lt(e,n){return this.setLimit("max",e,!1,be.toString(n))}setLimit(e,n,r,s){return new Ko({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:be.toString(s)}]})}_addCheck(e){return new Ko({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:be.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:be.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:be.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:be.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:be.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:be.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ke.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ko.create=t=>new Ko({checks:[],typeName:Se.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Oe(t)});class Yo extends Re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ce.bigint){const i=this._getOrReturnCtx(e);return he(i,{code:Y.invalid_type,expected:ce.bigint,received:i.parsedType}),Ie}let r;const s=new Tn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),he(r,{code:Y.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),he(r,{code:Y.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),he(r,{code:Y.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Ke.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,be.toString(n))}gt(e,n){return this.setLimit("min",e,!1,be.toString(n))}lte(e,n){return this.setLimit("max",e,!0,be.toString(n))}lt(e,n){return this.setLimit("max",e,!1,be.toString(n))}setLimit(e,n,r,s){return new Yo({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:be.toString(s)}]})}_addCheck(e){return new Yo({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:be.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:be.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Yo.create=t=>{var e;return new Yo({checks:[],typeName:Se.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Oe(t)})};class Dh extends Re{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ce.boolean){const r=this._getOrReturnCtx(e);return he(r,{code:Y.invalid_type,expected:ce.boolean,received:r.parsedType}),Ie}return Ln(e.data)}}Dh.create=t=>new Dh({typeName:Se.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Oe(t)});class Xa extends Re{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ce.date){const i=this._getOrReturnCtx(e);return he(i,{code:Y.invalid_type,expected:ce.date,received:i.parsedType}),Ie}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return he(i,{code:Y.invalid_date}),Ie}const r=new Tn;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),he(s,{code:Y.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),he(s,{code:Y.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Ke.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Xa({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:be.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:be.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Xa.create=t=>new Xa({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Se.ZodDate,...Oe(t)});class Jm extends Re{_parse(e){if(this._getType(e)!==ce.symbol){const r=this._getOrReturnCtx(e);return he(r,{code:Y.invalid_type,expected:ce.symbol,received:r.parsedType}),Ie}return Ln(e.data)}}Jm.create=t=>new Jm({typeName:Se.ZodSymbol,...Oe(t)});class Uh extends Re{_parse(e){if(this._getType(e)!==ce.undefined){const r=this._getOrReturnCtx(e);return he(r,{code:Y.invalid_type,expected:ce.undefined,received:r.parsedType}),Ie}return Ln(e.data)}}Uh.create=t=>new Uh({typeName:Se.ZodUndefined,...Oe(t)});class jh extends Re{_parse(e){if(this._getType(e)!==ce.null){const r=this._getOrReturnCtx(e);return he(r,{code:Y.invalid_type,expected:ce.null,received:r.parsedType}),Ie}return Ln(e.data)}}jh.create=t=>new jh({typeName:Se.ZodNull,...Oe(t)});class ql extends Re{constructor(){super(...arguments),this._any=!0}_parse(e){return Ln(e.data)}}ql.create=t=>new ql({typeName:Se.ZodAny,...Oe(t)});class Ma extends Re{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ln(e.data)}}Ma.create=t=>new Ma({typeName:Se.ZodUnknown,...Oe(t)});class Ri extends Re{_parse(e){const n=this._getOrReturnCtx(e);return he(n,{code:Y.invalid_type,expected:ce.never,received:n.parsedType}),Ie}}Ri.create=t=>new Ri({typeName:Se.ZodNever,...Oe(t)});class Qm extends Re{_parse(e){if(this._getType(e)!==ce.undefined){const r=this._getOrReturnCtx(e);return he(r,{code:Y.invalid_type,expected:ce.void,received:r.parsedType}),Ie}return Ln(e.data)}}Qm.create=t=>new Qm({typeName:Se.ZodVoid,...Oe(t)});class bs extends Re{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==ce.array)return he(n,{code:Y.invalid_type,expected:ce.array,received:n.parsedType}),Ie;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(he(n,{code:o?Y.too_big:Y.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(he(n,{code:Y.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(he(n,{code:Y.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Zs(n,o,n.path,a)))).then(o=>Tn.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Zs(n,o,n.path,a)));return Tn.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new bs({...this._def,minLength:{value:e,message:be.toString(n)}})}max(e,n){return new bs({...this._def,maxLength:{value:e,message:be.toString(n)}})}length(e,n){return new bs({...this._def,exactLength:{value:e,message:be.toString(n)}})}nonempty(e){return this.min(1,e)}}bs.create=(t,e)=>new bs({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Se.ZodArray,...Oe(e)});function Hc(t){if(t instanceof xt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Si.create(Hc(r))}return new xt({...t._def,shape:()=>e})}else return t instanceof bs?new bs({...t._def,type:Hc(t.element)}):t instanceof Si?Si.create(Hc(t.unwrap())):t instanceof tc?tc.create(Hc(t.unwrap())):t instanceof Js?Js.create(t.items.map(e=>Hc(e))):t}class xt extends Re{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ke.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ce.object){const l=this._getOrReturnCtx(e);return he(l,{code:Y.invalid_type,expected:ce.object,received:l.parsedType}),Ie}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ri&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Zs(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof Ri){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(he(s,{code:Y.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Zs(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>Tn.mergeObjectSync(r,l)):Tn.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return be.errToObj,new xt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=be.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new xt({...this._def,unknownKeys:"strip"})}passthrough(){return new xt({...this._def,unknownKeys:"passthrough"})}extend(e){return new xt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new xt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Se.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new xt({...this._def,catchall:e})}pick(e){const n={};return Ke.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new xt({...this._def,shape:()=>n})}omit(e){const n={};return Ke.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new xt({...this._def,shape:()=>n})}deepPartial(){return Hc(this)}partial(e){const n={};return Ke.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new xt({...this._def,shape:()=>n})}required(e){const n={};return Ke.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Si;)i=i._def.innerType;n[r]=i}}),new xt({...this._def,shape:()=>n})}keyof(){return mO(Ke.objectKeys(this.shape))}}xt.create=(t,e)=>new xt({shape:()=>t,unknownKeys:"strip",catchall:Ri.create(),typeName:Se.ZodObject,...Oe(e)});xt.strictCreate=(t,e)=>new xt({shape:()=>t,unknownKeys:"strict",catchall:Ri.create(),typeName:Se.ZodObject,...Oe(e)});xt.lazycreate=(t,e)=>new xt({shape:t,unknownKeys:"strip",catchall:Ri.create(),typeName:Se.ZodObject,...Oe(e)});class Lh extends Re{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new ws(a.ctx.common.issues));return he(n,{code:Y.invalid_union,unionErrors:o}),Ie}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new ws(c));return he(n,{code:Y.invalid_union,unionErrors:a}),Ie}}get options(){return this._def.options}}Lh.create=(t,e)=>new Lh({options:t,typeName:Se.ZodUnion,...Oe(e)});const Gp=t=>t instanceof Fh?Gp(t.schema):t instanceof xs?Gp(t.innerType()):t instanceof zh?[t.value]:t instanceof Zo?t.options:t instanceof qh?Object.keys(t.enum):t instanceof Hh?Gp(t._def.innerType):t instanceof Uh?[void 0]:t instanceof jh?[null]:null;class i0 extends Re{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.object)return he(n,{code:Y.invalid_type,expected:ce.object,received:n.parsedType}),Ie;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(he(n,{code:Y.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ie)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=Gp(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new i0({typeName:Se.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Oe(r)})}}function yv(t,e){const n=fo(t),r=fo(e);if(t===e)return{valid:!0,data:t};if(n===ce.object&&r===ce.object){const s=Ke.objectKeys(e),i=Ke.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=yv(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===ce.array&&r===ce.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=yv(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===ce.date&&r===ce.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Mh extends Re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(mv(i)||mv(o))return Ie;const a=yv(i.value,o.value);return a.valid?((gv(i)||gv(o))&&n.dirty(),{status:n.value,value:a.data}):(he(r,{code:Y.invalid_intersection_types}),Ie)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Mh.create=(t,e,n)=>new Mh({left:t,right:e,typeName:Se.ZodIntersection,...Oe(n)});class Js extends Re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.array)return he(r,{code:Y.invalid_type,expected:ce.array,received:r.parsedType}),Ie;if(r.data.length<this._def.items.length)return he(r,{code:Y.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ie;!this._def.rest&&r.data.length>this._def.items.length&&(he(r,{code:Y.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Zs(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Tn.mergeArray(n,o)):Tn.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Js({...this._def,rest:e})}}Js.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Js({items:t,typeName:Se.ZodTuple,rest:null,...Oe(e)})};class Bh extends Re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.object)return he(r,{code:Y.invalid_type,expected:ce.object,received:r.parsedType}),Ie;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Zs(r,a,r.path,a)),value:o._parse(new Zs(r,r.data[a],r.path,a))});return r.common.async?Tn.mergeObjectAsync(n,s):Tn.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Re?new Bh({keyType:e,valueType:n,typeName:Se.ZodRecord,...Oe(r)}):new Bh({keyType:ps.create(),valueType:e,typeName:Se.ZodRecord,...Oe(n)})}}class Xm extends Re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.map)return he(r,{code:Y.invalid_type,expected:ce.map,received:r.parsedType}),Ie;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Zs(r,a,r.path,[l,"key"])),value:i._parse(new Zs(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Ie;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Ie;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}Xm.create=(t,e,n)=>new Xm({valueType:e,keyType:t,typeName:Se.ZodMap,...Oe(n)});class ec extends Re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.set)return he(r,{code:Y.invalid_type,expected:ce.set,received:r.parsedType}),Ie;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(he(r,{code:Y.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(he(r,{code:Y.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Ie;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Zs(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new ec({...this._def,minSize:{value:e,message:be.toString(n)}})}max(e,n){return new ec({...this._def,maxSize:{value:e,message:be.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ec.create=(t,e)=>new ec({valueType:t,minSize:null,maxSize:null,typeName:Se.ZodSet,...Oe(e)});class yl extends Re{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.function)return he(n,{code:Y.invalid_type,expected:ce.function,received:n.parsedType}),Ie;function r(a,c){return Ym({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Km(),Rh].filter(l=>!!l),issueData:{code:Y.invalid_arguments,argumentsError:c}})}function s(a,c){return Ym({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Km(),Rh].filter(l=>!!l),issueData:{code:Y.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Hl){const a=this;return Ln(async function(...c){const l=new ws([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Ln(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new ws([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new ws([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new yl({...this._def,args:Js.create(e).rest(Ma.create())})}returns(e){return new yl({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new yl({args:e||Js.create([]).rest(Ma.create()),returns:n||Ma.create(),typeName:Se.ZodFunction,...Oe(r)})}}class Fh extends Re{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Fh.create=(t,e)=>new Fh({getter:t,typeName:Se.ZodLazy,...Oe(e)});class zh extends Re{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return he(n,{received:n.data,code:Y.invalid_literal,expected:this._def.value}),Ie}return{status:"valid",value:e.data}}get value(){return this._def.value}}zh.create=(t,e)=>new zh({value:t,typeName:Se.ZodLiteral,...Oe(e)});function mO(t,e){return new Zo({values:t,typeName:Se.ZodEnum,...Oe(e)})}class Zo extends Re{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return he(n,{expected:Ke.joinValues(r),received:n.parsedType,code:Y.invalid_type}),Ie}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return he(n,{received:n.data,code:Y.invalid_enum_value,options:r}),Ie}return Ln(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Zo.create(e)}exclude(e){return Zo.create(this.options.filter(n=>!e.includes(n)))}}Zo.create=mO;class qh extends Re{_parse(e){const n=Ke.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ce.string&&r.parsedType!==ce.number){const s=Ke.objectValues(n);return he(r,{expected:Ke.joinValues(s),received:r.parsedType,code:Y.invalid_type}),Ie}if(n.indexOf(e.data)===-1){const s=Ke.objectValues(n);return he(r,{received:r.data,code:Y.invalid_enum_value,options:s}),Ie}return Ln(e.data)}get enum(){return this._def.values}}qh.create=(t,e)=>new qh({values:t,typeName:Se.ZodNativeEnum,...Oe(e)});class Hl extends Re{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.promise&&n.common.async===!1)return he(n,{code:Y.invalid_type,expected:ce.promise,received:n.parsedType}),Ie;const r=n.parsedType===ce.promise?n.data:Promise.resolve(n.data);return Ln(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Hl.create=(t,e)=>new Hl({type:t,typeName:Se.ZodPromise,...Oe(e)});class xs extends Re{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Se.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{he(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ie:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Ie:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!$h(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>$h(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);Ke.assertNever(s)}}xs.create=(t,e,n)=>new xs({schema:t,typeName:Se.ZodEffects,effect:e,...Oe(n)});xs.createWithPreprocess=(t,e,n)=>new xs({schema:e,effect:{type:"preprocess",transform:t},typeName:Se.ZodEffects,...Oe(n)});class Si extends Re{_parse(e){return this._getType(e)===ce.undefined?Ln(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Si.create=(t,e)=>new Si({innerType:t,typeName:Se.ZodOptional,...Oe(e)});class tc extends Re{_parse(e){return this._getType(e)===ce.null?Ln(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tc.create=(t,e)=>new tc({innerType:t,typeName:Se.ZodNullable,...Oe(e)});class Hh extends Re{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ce.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Hh.create=(t,e)=>new Hh({innerType:t,typeName:Se.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Oe(e)});class eg extends Re{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Zm(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ws(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ws(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}eg.create=(t,e)=>new eg({innerType:t,typeName:Se.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Oe(e)});class tg extends Re{_parse(e){if(this._getType(e)!==ce.nan){const r=this._getOrReturnCtx(e);return he(r,{code:Y.invalid_type,expected:ce.nan,received:r.parsedType}),Ie}return{status:"valid",value:e.data}}}tg.create=t=>new tg({typeName:Se.ZodNaN,...Oe(t)});const NV=Symbol("zod_brand");class gO extends Re{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class vf extends Re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ie:i.status==="dirty"?(n.dirty(),pO(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ie:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new vf({in:e,out:n,typeName:Se.ZodPipeline})}}class ng extends Re{_parse(e){const n=this._def.innerType._parse(e);return $h(n)&&(n.value=Object.freeze(n.value)),n}}ng.create=(t,e)=>new ng({innerType:t,typeName:Se.ZodReadonly,...Oe(e)});const yO=(t,e={},n)=>t?ql.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):ql.create(),TV={object:xt.lazycreate};var Se;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Se||(Se={}));const PV=(t,e={message:`Input not instance of ${t.name}`})=>yO(n=>n instanceof t,e),wO=ps.create,bO=Ko.create,OV=tg.create,kV=Yo.create,vO=Dh.create,RV=Xa.create,$V=Jm.create,DV=Uh.create,UV=jh.create,jV=ql.create,LV=Ma.create,MV=Ri.create,BV=Qm.create,FV=bs.create,zV=xt.create,qV=xt.strictCreate,HV=Lh.create,WV=i0.create,VV=Mh.create,GV=Js.create,KV=Bh.create,YV=Xm.create,ZV=ec.create,JV=yl.create,QV=Fh.create,XV=zh.create,eG=Zo.create,tG=qh.create,nG=Hl.create,_2=xs.create,rG=Si.create,sG=tc.create,iG=xs.createWithPreprocess,oG=vf.create,aG=()=>wO().optional(),cG=()=>bO().optional(),lG=()=>vO().optional(),uG={string:t=>ps.create({...t,coerce:!0}),number:t=>Ko.create({...t,coerce:!0}),boolean:t=>Dh.create({...t,coerce:!0}),bigint:t=>Yo.create({...t,coerce:!0}),date:t=>Xa.create({...t,coerce:!0})},dG=Ie;var _=Object.freeze({__proto__:null,defaultErrorMap:Rh,setErrorMap:mV,getErrorMap:Km,makeIssue:Ym,EMPTY_PATH:gV,addIssueToContext:he,ParseStatus:Tn,INVALID:Ie,DIRTY:pO,OK:Ln,isAborted:mv,isDirty:gv,isValid:$h,isAsync:Zm,get util(){return Ke},get objectUtil(){return pv},ZodParsedType:ce,getParsedType:fo,ZodType:Re,ZodString:ps,ZodNumber:Ko,ZodBigInt:Yo,ZodBoolean:Dh,ZodDate:Xa,ZodSymbol:Jm,ZodUndefined:Uh,ZodNull:jh,ZodAny:ql,ZodUnknown:Ma,ZodNever:Ri,ZodVoid:Qm,ZodArray:bs,ZodObject:xt,ZodUnion:Lh,ZodDiscriminatedUnion:i0,ZodIntersection:Mh,ZodTuple:Js,ZodRecord:Bh,ZodMap:Xm,ZodSet:ec,ZodFunction:yl,ZodLazy:Fh,ZodLiteral:zh,ZodEnum:Zo,ZodNativeEnum:qh,ZodPromise:Hl,ZodEffects:xs,ZodTransformer:xs,ZodOptional:Si,ZodNullable:tc,ZodDefault:Hh,ZodCatch:eg,ZodNaN:tg,BRAND:NV,ZodBranded:gO,ZodPipeline:vf,ZodReadonly:ng,custom:yO,Schema:Re,ZodSchema:Re,late:TV,get ZodFirstPartyTypeKind(){return Se},coerce:uG,any:jV,array:FV,bigint:kV,boolean:vO,date:RV,discriminatedUnion:WV,effect:_2,enum:eG,function:JV,instanceof:PV,intersection:VV,lazy:QV,literal:XV,map:YV,nan:OV,nativeEnum:tG,never:MV,null:UV,nullable:sG,number:bO,object:zV,oboolean:lG,onumber:cG,optional:rG,ostring:aG,pipeline:oG,preprocess:iG,promise:nG,record:KV,set:ZV,strictObject:qV,string:wO,symbol:$V,transformer:_2,tuple:GV,undefined:DV,union:HV,unknown:LV,void:BV,NEVER:dG,ZodIssueCode:Y,quotelessJson:pV,ZodError:ws});const At=_.object({message:_.string()});function le(t){return _.literal(fe[t])}_.object({accessList:_.array(_.string()),blockHash:_.string().nullable(),blockNumber:_.string().nullable(),chainId:_.string().or(_.number()),from:_.string(),gas:_.string(),hash:_.string(),input:_.string().nullable(),maxFeePerGas:_.string(),maxPriorityFeePerGas:_.string(),nonce:_.string(),r:_.string(),s:_.string(),to:_.string(),transactionIndex:_.string().nullable(),type:_.string(),v:_.string(),value:_.string()});const hG=_.object({chainId:_.string().or(_.number())}),fG=_.object({email:_.string().email()}),pG=_.object({otp:_.string()}),mG=_.object({uri:_.string(),preferredAccountType:_.optional(_.string()),chainId:_.optional(_.string().or(_.number()))}),gG=_.object({chainId:_.optional(_.string().or(_.number())),preferredAccountType:_.optional(_.string()),socialUri:_.optional(_.string())}),yG=_.object({provider:_.enum(["google","github","apple","facebook","x","discord"])}),wG=_.object({email:_.string().email()}),bG=_.object({otp:_.string()}),vG=_.object({otp:_.string()}),EG=_.object({themeMode:_.optional(_.enum(["light","dark"])),themeVariables:_.optional(_.record(_.string(),_.string().or(_.number()))),w3mThemeVariables:_.optional(_.record(_.string(),_.string()))}),xG=_.object({metadata:_.object({name:_.string(),description:_.string(),url:_.string(),icons:_.array(_.string())}).optional(),sdkVersion:_.string().optional(),sdkType:_.string().optional(),projectId:_.string()}),CG=_.object({type:_.string()}),_G=_.object({action:_.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),SG=_.object({url:_.string()}),AG=_.object({userName:_.string()}),IG=_.object({email:_.string().optional().nullable(),address:_.string(),chainId:_.string().or(_.number()),accounts:_.array(_.object({address:_.string(),type:_.enum([Jt.ACCOUNT_TYPES.EOA,Jt.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:_.string().optional().nullable(),preferredAccountType:_.optional(_.string())}),NG=_.object({action:_.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),TG=_.object({email:_.string().email().optional().nullable(),address:_.string(),chainId:_.string().or(_.number()),smartAccountDeployed:_.optional(_.boolean()),accounts:_.array(_.object({address:_.string(),type:_.enum([Jt.ACCOUNT_TYPES.EOA,Jt.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:_.optional(_.string())}),PG=_.object({uri:_.string()}),OG=_.object({isConnected:_.boolean()}),kG=_.object({chainId:_.string().or(_.number())}),RG=_.object({chainId:_.string().or(_.number())}),$G=_.object({newEmail:_.string().email()}),DG=_.object({smartAccountEnabledNetworks:_.array(_.number())});_.object({address:_.string(),isDeployed:_.boolean()});const UG=_.object({version:_.string().optional()}),jG=_.object({type:_.string(),address:_.string()}),LG=_.any(),MG=_.object({method:_.literal("eth_accounts")}),BG=_.object({method:_.literal("eth_blockNumber")}),FG=_.object({method:_.literal("eth_call"),params:_.array(_.any())}),zG=_.object({method:_.literal("eth_chainId")}),qG=_.object({method:_.literal("eth_estimateGas"),params:_.array(_.any())}),HG=_.object({method:_.literal("eth_feeHistory"),params:_.array(_.any())}),WG=_.object({method:_.literal("eth_gasPrice")}),VG=_.object({method:_.literal("eth_getAccount"),params:_.array(_.any())}),GG=_.object({method:_.literal("eth_getBalance"),params:_.array(_.any())}),KG=_.object({method:_.literal("eth_getBlockByHash"),params:_.array(_.any())}),YG=_.object({method:_.literal("eth_getBlockByNumber"),params:_.array(_.any())}),ZG=_.object({method:_.literal("eth_getBlockReceipts"),params:_.array(_.any())}),JG=_.object({method:_.literal("eth_getBlockTransactionCountByHash"),params:_.array(_.any())}),QG=_.object({method:_.literal("eth_getBlockTransactionCountByNumber"),params:_.array(_.any())}),XG=_.object({method:_.literal("eth_getCode"),params:_.array(_.any())}),eK=_.object({method:_.literal("eth_getFilterChanges"),params:_.array(_.any())}),tK=_.object({method:_.literal("eth_getFilterLogs"),params:_.array(_.any())}),nK=_.object({method:_.literal("eth_getLogs"),params:_.array(_.any())}),rK=_.object({method:_.literal("eth_getProof"),params:_.array(_.any())}),sK=_.object({method:_.literal("eth_getStorageAt"),params:_.array(_.any())}),iK=_.object({method:_.literal("eth_getTransactionByBlockHashAndIndex"),params:_.array(_.any())}),oK=_.object({method:_.literal("eth_getTransactionByBlockNumberAndIndex"),params:_.array(_.any())}),aK=_.object({method:_.literal("eth_getTransactionByHash"),params:_.array(_.any())}),cK=_.object({method:_.literal("eth_getTransactionCount"),params:_.array(_.any())}),lK=_.object({method:_.literal("eth_getTransactionReceipt"),params:_.array(_.any())}),uK=_.object({method:_.literal("eth_getUncleCountByBlockHash"),params:_.array(_.any())}),dK=_.object({method:_.literal("eth_getUncleCountByBlockNumber"),params:_.array(_.any())}),hK=_.object({method:_.literal("eth_maxPriorityFeePerGas")}),fK=_.object({method:_.literal("eth_newBlockFilter")}),pK=_.object({method:_.literal("eth_newFilter"),params:_.array(_.any())}),mK=_.object({method:_.literal("eth_newPendingTransactionFilter")}),gK=_.object({method:_.literal("eth_sendRawTransaction"),params:_.array(_.any())}),yK=_.object({method:_.literal("eth_syncing"),params:_.array(_.any())}),wK=_.object({method:_.literal("eth_uninstallFilter"),params:_.array(_.any())}),S2=_.object({method:_.literal("personal_sign"),params:_.array(_.any())}),bK=_.object({method:_.literal("eth_signTypedData_v4"),params:_.array(_.any())}),vK=_.object({method:_.literal("eth_sendTransaction"),params:_.array(_.any())}),EK=_.object({method:_.literal("solana_signMessage"),params:_.object({message:_.string(),pubkey:_.string()})}),xK=_.object({method:_.literal("solana_signTransaction"),params:_.object({transaction:_.string()})}),CK=_.object({method:_.literal("solana_signAllTransactions"),params:_.object({transactions:_.array(_.string())})}),_K=_.object({method:_.literal("solana_signAndSendTransaction"),params:_.object({transaction:_.string(),options:_.object({skipPreflight:_.boolean().optional(),preflightCommitment:_.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:_.number().optional(),minContextSlot:_.number().optional()}).optional()})}),SK=_.object({method:_.literal("wallet_sendCalls"),params:_.array(_.object({chainId:_.string().or(_.number()).optional(),from:_.string().optional(),version:_.string().optional(),capabilities:_.any().optional(),calls:_.array(_.object({to:_.string().startsWith("0x"),data:_.string().startsWith("0x").optional(),value:_.string().optional()}))}))}),AK=_.object({method:_.literal("wallet_getCallsStatus"),params:_.array(_.string())}),IK=_.object({method:_.literal("wallet_getCapabilities")}),NK=_.object({method:_.literal("wallet_grantPermissions"),params:_.array(_.any())}),TK=_.object({method:_.literal("wallet_revokePermissions"),params:_.any()}),PK=_.object({method:_.literal("wallet_getAssets"),params:_.any()}),A2=_.object({token:_.string()}),ue=_.object({id:_.string().optional()}),Ru={appEvent:ue.extend({type:le("APP_SWITCH_NETWORK"),payload:hG}).or(ue.extend({type:le("APP_CONNECT_EMAIL"),payload:fG})).or(ue.extend({type:le("APP_CONNECT_DEVICE")})).or(ue.extend({type:le("APP_CONNECT_OTP"),payload:pG})).or(ue.extend({type:le("APP_CONNECT_SOCIAL"),payload:mG})).or(ue.extend({type:le("APP_GET_FARCASTER_URI")})).or(ue.extend({type:le("APP_CONNECT_FARCASTER")})).or(ue.extend({type:le("APP_GET_USER"),payload:_.optional(gG)})).or(ue.extend({type:le("APP_GET_SOCIAL_REDIRECT_URI"),payload:yG})).or(ue.extend({type:le("APP_SIGN_OUT")})).or(ue.extend({type:le("APP_IS_CONNECTED"),payload:_.optional(A2)})).or(ue.extend({type:le("APP_GET_CHAIN_ID")})).or(ue.extend({type:le("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(ue.extend({type:le("APP_INIT_SMART_ACCOUNT")})).or(ue.extend({type:le("APP_SET_PREFERRED_ACCOUNT"),payload:CG})).or(ue.extend({type:le("APP_RPC_REQUEST"),payload:S2.or(PK).or(MG).or(BG).or(FG).or(zG).or(qG).or(HG).or(WG).or(VG).or(GG).or(KG).or(YG).or(ZG).or(JG).or(QG).or(XG).or(eK).or(tK).or(nK).or(rK).or(sK).or(iK).or(oK).or(aK).or(cK).or(lK).or(uK).or(dK).or(hK).or(fK).or(pK).or(mK).or(gK).or(yK).or(wK).or(S2).or(bK).or(vK).or(EK).or(xK).or(CK).or(_K).or(AK).or(SK).or(IK).or(NK).or(TK)})).or(ue.extend({type:le("APP_UPDATE_EMAIL"),payload:wG})).or(ue.extend({type:le("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:bG})).or(ue.extend({type:le("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:vG})).or(ue.extend({type:le("APP_SYNC_THEME"),payload:EG})).or(ue.extend({type:le("APP_SYNC_DAPP_DATA"),payload:xG})).or(ue.extend({type:le("APP_RELOAD")})),frameEvent:ue.extend({type:le("FRAME_SWITCH_NETWORK_ERROR"),payload:At}).or(ue.extend({type:le("FRAME_SWITCH_NETWORK_SUCCESS"),payload:RG})).or(ue.extend({type:le("FRAME_CONNECT_EMAIL_SUCCESS"),payload:_G})).or(ue.extend({type:le("FRAME_CONNECT_EMAIL_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:SG})).or(ue.extend({type:le("FRAME_GET_FARCASTER_URI_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:AG})).or(ue.extend({type:le("FRAME_CONNECT_FARCASTER_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_CONNECT_OTP_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_CONNECT_OTP_SUCCESS")})).or(ue.extend({type:le("FRAME_CONNECT_DEVICE_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_CONNECT_DEVICE_SUCCESS")})).or(ue.extend({type:le("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:IG})).or(ue.extend({type:le("FRAME_CONNECT_SOCIAL_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_GET_USER_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_GET_USER_SUCCESS"),payload:TG})).or(ue.extend({type:le("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:PG})).or(ue.extend({type:le("FRAME_SIGN_OUT_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_SIGN_OUT_SUCCESS")})).or(ue.extend({type:le("FRAME_IS_CONNECTED_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_IS_CONNECTED_SUCCESS"),payload:OG})).or(ue.extend({type:le("FRAME_GET_CHAIN_ID_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_GET_CHAIN_ID_SUCCESS"),payload:kG})).or(ue.extend({type:le("FRAME_RPC_REQUEST_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_RPC_REQUEST_SUCCESS"),payload:LG})).or(ue.extend({type:le("FRAME_SESSION_UPDATE"),payload:A2})).or(ue.extend({type:le("FRAME_UPDATE_EMAIL_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_UPDATE_EMAIL_SUCCESS"),payload:NG})).or(ue.extend({type:le("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(ue.extend({type:le("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:$G})).or(ue.extend({type:le("FRAME_SYNC_THEME_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_SYNC_THEME_SUCCESS")})).or(ue.extend({type:le("FRAME_SYNC_DAPP_DATA_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(ue.extend({type:le("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:DG})).or(ue.extend({type:le("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:jG})).or(ue.extend({type:le("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_READY"),payload:UG})).or(ue.extend({type:le("FRAME_RELOAD_ERROR"),payload:At})).or(ue.extend({type:le("FRAME_RELOAD_SUCCESS")}))};function ky(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}class OK{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=q.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!ky(fe.FRAME_EVENT_KEY,l))return;const u=Ru.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}yr.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{yr.isClient&&window.addEventListener("message",({data:o})=>{if(!ky(fe.FRAME_EVENT_KEY,o))return;const a=Ru.frameEvent.parse(o);i(a)})},onAppEvent:i=>{yr.isClient&&window.addEventListener("message",({data:o})=>{if(!ky(fe.APP_EVENT_KEY,o))return;const a=Ru.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(yr.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");Ru.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(yr.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Ru.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),yr.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${UM}?projectId=${e}&chainId=${r}&version=${LM}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class kK{constructor(e){var i;const n=tu({level:jM}),{logger:r,chunkLoggerController:s}=EE({opts:n});this.logger=Pn(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class RK{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new kK(e)),this.abortController=i,this.w3mFrame=new OK({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===fe.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!sn.get(fe.EMAIL_LOGIN_USED_KEY)}getEmail(){return sn.get(fe.EMAIL)}getUsername(){return sn.get(fe.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:fe.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{yr.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:fe.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:fe.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:fe.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:fe.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:fe.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:fe.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:fe.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:fe.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:fe.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:fe.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:fe.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:fe.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:fe.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:fe.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:fe.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:fe.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:fe.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:fe.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:fe.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:fe.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Jt.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:fe.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===fe.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===fe.FRAME_IS_CONNECTED_ERROR&&e(),n.type===fe.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===fe.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===fe.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===fe.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===fe.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Jt.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===fe.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===fe.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Jt.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[fe.APP_SYNC_DAPP_DATA,fe.APP_SYNC_THEME,fe.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[fe.APP_CONNECT_EMAIL,fe.APP_CONNECT_DEVICE,fe.APP_CONNECT_OTP,fe.APP_CONNECT_SOCIAL,fe.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,m;const u=Math.random().toString(36).substring(7);(m=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||m.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const v=e;this.openRpcRequests=[...this.openRpcRequests,{...v.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(v,y){var w,b,C;v.id===u&&((b=y==null?void 0:(w=y.logger).info)==null||b.call(w,{framEvent:v,id:u},"Received frame response"),v.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in v&&c(v.payload),c(void 0)):v.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in v&&l(new Error(((C=v.payload)==null?void 0:C.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,v=>h(v,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){sn.set(fe.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){sn.set(fe.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&sn.set(fe.EMAIL,e),sn.set(fe.EMAIL_LOGIN_USED_KEY,"true"),sn.delete(fe.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){sn.delete(fe.EMAIL_LOGIN_USED_KEY),sn.delete(fe.EMAIL),sn.delete(fe.LAST_USED_CHAIN_KEY),sn.delete(fe.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&sn.set(fe.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=sn.get(fe.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){sn.set(fe.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class Ba{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return Ba.instance||(Ba.instance=new RK({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),Ba.instance}}function $K(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Wt(t,...e){try{return $K(t(...e))}catch(n){return Promise.reject(n)}}function DK(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function UK(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Kp(t){if(DK(t))return String(t);if(UK(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Kp(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const wv="base64:";function jK(t){return typeof t=="string"?t:wv+BK(t)}function LK(t){return typeof t!="string"||!t.startsWith(wv)?t:MK(t.slice(wv.length))}function MK(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function BK(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Kn(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function FK(...t){return Kn(t.join(":"))}function gp(t){return t=Kn(t),t?t+":":""}function zK(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function qK(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const HK="memory",WK=()=>{const t=new Map;return{name:HK,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function VK(t={}){const e={mounts:{"":t.driver||WK()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Kn(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await I2(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let m=h.get(p.base);return m||(m={driver:p.driver,base:p.base,items:[]},h.set(p.base,m)),m};for(const p of l){const m=typeof p=="string",v=Kn(m?p:p.key),y=m?void 0:p.value,w=m||!p.options?u:{...u,...p.options},b=n(v);f(b).items.push({key:v,value:y,relativeKey:b.relativeKey,options:w})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Kn(l);const{relativeKey:d,driver:h}=n(l);return Wt(h.hasItem,d,u)},getItem(l,u={}){l=Kn(l);const{relativeKey:d,driver:h}=n(l);return Wt(h.getItem,d,u).then(f=>np(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Wt(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:FK(d.base,f.key),value:np(f.value)}))):Promise.all(d.items.map(h=>Wt(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:np(f)})))))},getItemRaw(l,u={}){l=Kn(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?Wt(h.getItemRaw,d,u):Wt(h.getItem,d,u).then(f=>LK(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Kn(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await Wt(f.setItem,h,Kp(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Wt(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:Kp(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>Wt(d.driver.setItem,h.relativeKey,Kp(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Kn(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await Wt(f.setItemRaw,h,u,d);else if(f.setItem)await Wt(f.setItem,h,jK(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Kn(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await Wt(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Wt(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Kn(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await Wt(h.getMeta,d,u)),!u.nativeOnly){const p=await Wt(h.getItem,d+"$",u).then(m=>np(m));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var v;l=gp(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(v=y.driver.flags)!=null&&v.maxDepth||(p=!1);const w=await Wt(y.driver.getKeys,y.relativeBase,u);for(const b of w){const C=y.mountpoint+Kn(b);h.some(x=>C.startsWith(x))||f.push(C)}h=[y.mountpoint,...h.filter(b=>!b.startsWith(y.mountpoint))]}const m=u.maxDepth!==void 0&&!p;return f.filter(y=>(!m||zK(y,u.maxDepth))&&qK(y,l))},async clear(l,u={}){l=gp(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return Wt(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>N2(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=gp(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(I2(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=gp(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await N2(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Kn(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Kn(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function I2(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function N2(t){typeof t.dispose=="function"&&await Wt(t.dispose)}const GK=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),KK=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function rg(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return KK(t)}catch{return t}}function jE(t){return typeof t=="string"?t:GK(t)||""}const YK="idb-keyval";var ZK=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=ZP(t.dbName,t.storeName)),{name:YK,options:t,async hasItem(s){return!(typeof await A_(n(s),r)>"u")},async getItem(s){return await A_(n(s),r)??null},setItem(s,i){return q9(n(s),i,r)},removeItem(s){return H9(n(s),r)},getKeys(){return G9(r)},clear(){return W9(r)}}};const JK="WALLET_CONNECT_V2_INDEXED_DB",QK="keyvaluestorage";let XK=class{constructor(){this.indexedDb=VK({driver:ZK({dbName:JK,storeName:QK})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,jE(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yp={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Ry<"u"&&Ry.localStorage?Yp.exports=Ry.localStorage:typeof window<"u"&&window.localStorage?Yp.exports=window.localStorage:Yp.exports=new e})();function eY(t){var e;return[t[0],rg((e=t[1])!=null?e:"")]}let tY=class{constructor(){this.localStorage=Yp.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(eY)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return rg(n)}async setItem(e,n){this.localStorage.setItem(e,jE(n))}async removeItem(e){this.localStorage.removeItem(e)}};const nY="wc_storage_version",T2=1,rY=async(t,e,n)=>{const r=nY,s=await e.getItem(r);if(s&&s>=T2){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,T2),n(e),sY(t,o)},sY=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let iY=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new tY;this.storage=e;try{const n=new XK;rY(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var oY=Object.defineProperty,aY=(t,e,n)=>e in t?oY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,P2=(t,e,n)=>aY(t,typeof e!="symbol"?e+"":e,n);let cY=class extends hc{constructor(e){super(),this.opts=e,P2(this,"protocol","wc"),P2(this,"version",2)}};var lY=Object.defineProperty,uY=(t,e,n)=>e in t?lY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dY=(t,e,n)=>uY(t,e+"",n);let hY=class extends hc{constructor(e,n){super(),this.core=e,this.logger=n,dY(this,"records",new Map)}},fY=class{constructor(e,n){this.logger=e,this.core=n}},pY=class extends hc{constructor(e,n){super(),this.relayer=e,this.logger=n}},mY=class extends hc{constructor(e){super()}},gY=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},yY=class extends hc{constructor(e,n){super(),this.relayer=e,this.logger=n}},wY=class extends hc{constructor(e,n){super(),this.core=e,this.logger=n}},bY=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},vY=class{constructor(e,n){this.projectId=e,this.logger=n}},EY=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var xY=Object.defineProperty,CY=(t,e,n)=>e in t?xY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O2=(t,e,n)=>CY(t,typeof e!="symbol"?e+"":e,n);let _Y=class{constructor(e){this.opts=e,O2(this,"protocol","wc"),O2(this,"version",2)}},SY=class{constructor(e){this.client=e}};var k2=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},AY=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),IY=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),NY=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),TY=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),PY=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),OY=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,kY=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,R2=3,RY=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",OY]],$2=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function $Y(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new PY:typeof navigator<"u"?UY(navigator.userAgent):LY()}function DY(t){return t!==""&&RY.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function UY(t){var e=DY(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new TY;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<R2&&(s=k2(k2([],s,!0),MY(R2-s.length),!0)):s=[];var i=s.join("."),o=jY(t),a=kY.exec(t);return a&&a[1]?new NY(n,i,o,a[1]):new AY(n,i,o)}function jY(t){for(var e=0,n=$2.length;e<n;e++){var r=$2[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function LY(){var t=typeof process<"u"&&process.version;return t?new IY(process.version.slice(1)):null}function MY(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var ut={};Object.defineProperty(ut,"__esModule",{value:!0});ut.getLocalStorage=ut.getLocalStorageOrThrow=ut.getCrypto=ut.getCryptoOrThrow=EO=ut.getLocation=ut.getLocationOrThrow=LE=ut.getNavigator=ut.getNavigatorOrThrow=nc=ut.getDocument=ut.getDocumentOrThrow=ut.getFromWindowOrThrow=ut.getFromWindow=void 0;function mc(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}ut.getFromWindow=mc;function su(t){const e=mc(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}ut.getFromWindowOrThrow=su;function BY(){return su("document")}ut.getDocumentOrThrow=BY;function FY(){return mc("document")}var nc=ut.getDocument=FY;function zY(){return su("navigator")}ut.getNavigatorOrThrow=zY;function qY(){return mc("navigator")}var LE=ut.getNavigator=qY;function HY(){return su("location")}ut.getLocationOrThrow=HY;function WY(){return mc("location")}var EO=ut.getLocation=WY;function VY(){return su("crypto")}ut.getCryptoOrThrow=VY;function GY(){return mc("crypto")}ut.getCrypto=GY;function KY(){return su("localStorage")}ut.getLocalStorageOrThrow=KY;function YY(){return mc("localStorage")}ut.getLocalStorage=YY;var ME={};Object.defineProperty(ME,"__esModule",{value:!0});var xO=ME.getWindowMetadata=void 0;const D2=ut;function ZY(){let t,e;try{t=D2.getDocumentOrThrow(),e=D2.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],m=p.getAttribute("rel");if(m&&m.toLowerCase().indexOf("icon")>-1){const v=p.getAttribute("href");if(v)if(v.toLowerCase().indexOf("https:")===-1&&v.toLowerCase().indexOf("http:")===-1&&v.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(v.indexOf("/")===0)y+=v;else{const w=e.pathname.split("/");w.pop();const b=w.join("/");y+=b+"/"+v}h.push(y)}else if(v.indexOf("//")===0){const y=e.protocol+v;h.push(y)}else h.push(v)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],m=["itemprop","property","name"].map(v=>p.getAttribute(v)).filter(v=>v?d.includes(v):!1);if(m.length&&m){const v=p.getAttribute("content");if(v)return v}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}xO=ME.getWindowMetadata=ZY;function Wh(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function bv(t){return Wh(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const CO="2.31.0";let $u={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${CO}`};class rc extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof rc?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof rc&&n.cause.docsPath||n.docsPath,i=(a=$u.getDocsUrl)==null?void 0:a.call($u,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...$u.version?[`Version: ${$u.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=CO}walk(e){return _O(this,e)}}function _O(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?_O(t.cause,e):e?null:t}class SO extends rc{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function iu(t,{dir:e,size:n=32}={}){return typeof t=="string"?JY(t,{dir:e,size:n}):QY(t,{dir:e,size:n})}function JY(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new SO({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function QY(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new SO({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class XY extends rc{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class eZ extends rc{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function ou(t,{size:e}){if(bv(t)>e)throw new eZ({givenSize:bv(t),maxSize:e})}function vv(t,e={}){const{signed:n}=e;e.size&&ou(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function tZ(t,e={}){return Number(vv(t,e))}const nZ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Vh(t,e={}){return typeof t=="number"||typeof t=="bigint"?IO(t,e):typeof t=="string"?iZ(t,e):typeof t=="boolean"?rZ(t,e):AO(t,e)}function rZ(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(ou(n,{size:e.size}),iu(n,{size:e.size})):n}function AO(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=nZ[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(ou(r,{size:e.size}),iu(r,{dir:"right",size:e.size})):r}function IO(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new XY({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?iu(a,{size:r}):a}const sZ=new TextEncoder;function iZ(t,e={}){const n=sZ.encode(t);return AO(n,e)}const oZ=new TextEncoder;function aZ(t,e={}){return typeof t=="number"||typeof t=="bigint"?lZ(t,e):typeof t=="boolean"?cZ(t,e):Wh(t)?NO(t,e):TO(t,e)}function cZ(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(ou(n,{size:e.size}),iu(n,{size:e.size})):n}const ci={zero:48,nine:57,A:65,F:70,a:97,f:102};function U2(t){if(t>=ci.zero&&t<=ci.nine)return t-ci.zero;if(t>=ci.A&&t<=ci.F)return t-(ci.A-10);if(t>=ci.a&&t<=ci.f)return t-(ci.a-10)}function NO(t,e={}){let n=t;e.size&&(ou(n,{size:e.size}),n=iu(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=U2(r.charCodeAt(a++)),l=U2(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new rc(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function lZ(t,e){const n=IO(t,e);return NO(n)}function TO(t,e={}){const n=oZ.encode(t);return typeof e.size=="number"?(ou(n,{size:e.size}),iu(n,{dir:"right",size:e.size})):n}const yp=BigInt(2**32-1),j2=BigInt(32);function uZ(t,e=!1){return e?{h:Number(t&yp),l:Number(t>>j2&yp)}:{h:Number(t>>j2&yp)|0,l:Number(t&yp)|0}}function dZ(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=uZ(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const hZ=(t,e,n)=>t<<n|e>>>32-n,fZ=(t,e,n)=>e<<n|t>>>32-n,pZ=(t,e,n)=>e<<n-32|t>>>64-n,mZ=(t,e,n)=>t<<n-32|e>>>64-n,Ic=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function gZ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function sg(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Gh(t,...e){if(!gZ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ale(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");sg(t.outputLen),sg(t.blockLen)}function L2(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function yZ(t,e){Gh(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function wZ(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function PO(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function cle(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function lle(t,e){return t<<32-e|t>>>e}const bZ=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function vZ(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function EZ(t){for(let e=0;e<t.length;e++)t[e]=vZ(t[e]);return t}const M2=bZ?t=>t:EZ;function xZ(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function OO(t){return typeof t=="string"&&(t=xZ(t)),Gh(t),t}function ule(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Gh(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class CZ{}function _Z(t){const e=r=>t().update(OO(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function dle(t=32){if(Ic&&typeof Ic.getRandomValues=="function")return Ic.getRandomValues(new Uint8Array(t));if(Ic&&typeof Ic.randomBytes=="function")return Uint8Array.from(Ic.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const SZ=BigInt(0),Du=BigInt(1),AZ=BigInt(2),IZ=BigInt(7),NZ=BigInt(256),TZ=BigInt(113),kO=[],RO=[],$O=[];for(let t=0,e=Du,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],kO.push(2*(5*r+n)),RO.push((t+1)*(t+2)/2%64);let s=SZ;for(let i=0;i<7;i++)e=(e<<Du^(e>>IZ)*TZ)%NZ,e&AZ&&(s^=Du<<(Du<<BigInt(i))-Du);$O.push(s)}const DO=dZ($O,!0),PZ=DO[0],OZ=DO[1],B2=(t,e,n)=>n>32?pZ(t,e,n):hZ(t,e,n),F2=(t,e,n)=>n>32?mZ(t,e,n):fZ(t,e,n);function kZ(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=B2(l,u,1)^n[a],h=F2(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=RO[o],c=B2(s,i,a),l=F2(s,i,a),u=kO[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=PZ[r],t[1]^=OZ[r]}PO(n)}class BE extends CZ{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,sg(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=wZ(this.state)}clone(){return this._cloneInto()}keccak(){M2(this.state32),kZ(this.state32,this.rounds),M2(this.state32),this.posOut=0,this.pos=0}update(e){L2(this),e=OO(e),Gh(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){L2(this,!1),Gh(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return sg(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(yZ(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,PO(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new BE(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const RZ=(t,e,n)=>_Z(()=>new BE(e,t,n)),$Z=RZ(1,136,256/8);function UO(t,e){const n=e||"hex",r=$Z(Wh(t,{strict:!1})?aZ(t):t);return n==="bytes"?r:Vh(r)}class DZ extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const $y=new DZ(8192);function UZ(t,e){if($y.has(`${t}.${e}`))return $y.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=UO(TO(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return $y.set(`${t}.${e}`,i),i}function jZ(t){const e=UO(`0x${t.substring(4)}`).substring(26);return UZ(`0x${e}`)}async function LZ({hash:t,signature:e}){const n=Wh(t)?t:Vh(t),{secp256k1:r}=await _n(async()=>{const{secp256k1:o}=await import("./secp256k1-DQXY94NA.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=z2(f);return new r.Signature(vv(l),vv(u)).addRecoveryBit(p)}const o=Wh(e)?e:Vh(e);if(bv(o)!==65)throw new Error("invalid signature length");const a=tZ(`0x${o.slice(130)}`),c=z2(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function z2(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function MZ({hash:t,signature:e}){return jZ(await LZ({hash:t,signature:e}))}function FE(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function jO(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?FE(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Cd(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=jO(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return FE(n)}function LO(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const q2=LO("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Dy=LO("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=jO(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),MO={utf8:q2,"utf-8":q2,hex:X_.base16,latin1:Dy,ascii:Dy,binary:Dy,...X_};function Br(t,e="utf8"){const n=MO[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?FE(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function or(t,e="utf8"){const n=MO[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}var BZ={};const FZ=":";function wl(t){const[e,n]=t.split(FZ);return{namespace:e,reference:n}}function BO(t,e){return t.includes(":")?[t]:e.chains||[]}var zZ=Object.defineProperty,qZ=Object.defineProperties,HZ=Object.getOwnPropertyDescriptors,H2=Object.getOwnPropertySymbols,WZ=Object.prototype.hasOwnProperty,VZ=Object.prototype.propertyIsEnumerable,W2=(t,e,n)=>e in t?zZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V2=(t,e)=>{for(var n in e||(e={}))WZ.call(e,n)&&W2(t,n,e[n]);if(H2)for(var n of H2(e))VZ.call(e,n)&&W2(t,n,e[n]);return t},GZ=(t,e)=>qZ(t,HZ(e));const KZ="ReactNative",br={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},YZ="js";function ig(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function na(){return!nc()&&!!LE()&&navigator.product===KZ}function ZZ(){return na()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function JZ(){return na()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function au(){return!ig()&&!!LE()&&!!nc()}function Ef(){return na()?br.reactNative:ig()?br.node:au()?br.browser:br.unknown}function G2(){var t;try{return na()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function QZ(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function XZ(t){var e,n;const r=FO();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),GZ(V2(V2({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function FO(){return xO()||{name:"",description:"",url:"",icons:[""]}}function eJ(){if(Ef()===br.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=$Y();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function tJ(){var t;const e=Ef();return e===br.browser?[e,((t=EO())==null?void 0:t.host)||"unknown"].join(":"):e}function zO(t,e,n){const r=eJ(),s=tJ();return[[t,e].join("-"),[YZ,n].join("-"),r,s].join("/")}function nJ({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=zO(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},h=QZ(l[1]||"",d);return l[0]+"?"+h}function _a(t,e){return t.filter(n=>e.includes(n)).length===t.length}function Ev(t){return Object.fromEntries(t.entries())}function xv(t){return new Map(Object.entries(t))}function pa(t=J.FIVE_MINUTES,e){const n=J.toMiliseconds(t||J.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function So(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function qO(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function rJ(t){return qO("topic",t)}function sJ(t){return qO("id",t)}function HO(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Mt(t,e){return J.fromMiliseconds(Date.now()+J.toMiliseconds(t))}function oo(t){return Date.now()>=J.toMiliseconds(t)}function Je(t,e){return`${t}${e?`:${e}`:""}`}function Ks(t=[],e=[]){return[...new Set([...t,...e])]}async function iJ({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=oJ(i,t,e),a=Ef();if(a===br.browser){if(!((r=nc())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}aJ(o)}else a===br.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function oJ(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${dJ(r,!0)}`}else s=`${s}/wc?${r}`;return s}function aJ(t){let e="_self";uJ()?e="_top":(lJ()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function cJ(t,e){let n="";try{if(au()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function K2(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function Y2(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function zE(){return typeof process<"u"&&BZ.IS_VITEST==="true"}function lJ(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function uJ(){try{return window.self!==window.top}catch{return!1}}function dJ(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function WO(t){return Buffer.from(t,"base64").toString("utf-8")}function hJ(t){return new Promise(e=>setTimeout(e,t))}const wp=BigInt(2**32-1),Z2=BigInt(32);function VO(t,e=!1){return e?{h:Number(t&wp),l:Number(t>>Z2&wp)}:{h:Number(t>>Z2&wp)|0,l:Number(t&wp)|0}}function GO(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=VO(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const J2=(t,e,n)=>t>>>n,Q2=(t,e,n)=>t<<32-n|e>>>n,ao=(t,e,n)=>t>>>n|e<<32-n,co=(t,e,n)=>t<<32-n|e>>>n,td=(t,e,n)=>t<<64-n|e>>>n-32,nd=(t,e,n)=>t>>>n-32|e<<64-n,fJ=(t,e)=>e,pJ=(t,e)=>t,mJ=(t,e,n)=>t<<n|e>>>32-n,gJ=(t,e,n)=>e<<n|t>>>32-n,yJ=(t,e,n)=>e<<n-32|t>>>64-n,wJ=(t,e,n)=>t<<n-32|e>>>64-n;function rs(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const qE=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),HE=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,bJ=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),vJ=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,EJ=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),xJ=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Nc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function WE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function $i(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Wr(t,...e){if(!WE(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function VE(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");$i(t.outputLen),$i(t.blockLen)}function Jo(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function GE(t,e){Wr(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Kh(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Vr(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Uy(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ns(t,e){return t<<32-e|t>>>e}const KO=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function YO(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const di=KO?t=>t:t=>YO(t);function CJ(t){for(let e=0;e<t.length;e++)t[e]=YO(t[e]);return t}const lo=KO?t=>t:CJ,ZO=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",_J=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Yh(t){if(Wr(t),ZO)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=_J[t[n]];return e}const li={_0:48,_9:57,A:65,F:70,a:97,f:102};function X2(t){if(t>=li._0&&t<=li._9)return t-li._0;if(t>=li.A&&t<=li.F)return t-(li.A-10);if(t>=li.a&&t<=li.f)return t-(li.a-10)}function KE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(ZO)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=X2(t.charCodeAt(i)),a=X2(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function SJ(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function vs(t){return typeof t=="string"&&(t=SJ(t)),Wr(t),t}function Sa(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Wr(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let o0=class{};function xf(t){const e=r=>t().update(vs(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function AJ(t){const e=(r,s)=>t(s).update(vs(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function cu(t=32){if(Nc&&typeof Nc.getRandomValues=="function")return Nc.getRandomValues(new Uint8Array(t));if(Nc&&typeof Nc.randomBytes=="function")return Uint8Array.from(Nc.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const IJ=BigInt(0),Uu=BigInt(1),NJ=BigInt(2),TJ=BigInt(7),PJ=BigInt(256),OJ=BigInt(113),JO=[],QO=[],XO=[];for(let t=0,e=Uu,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],JO.push(2*(5*r+n)),QO.push((t+1)*(t+2)/2%64);let s=IJ;for(let i=0;i<7;i++)e=(e<<Uu^(e>>TJ)*OJ)%PJ,e&NJ&&(s^=Uu<<(Uu<<BigInt(i))-Uu);XO.push(s)}const ek=GO(XO,!0),kJ=ek[0],RJ=ek[1],eS=(t,e,n)=>n>32?yJ(t,e,n):mJ(t,e,n),tS=(t,e,n)=>n>32?wJ(t,e,n):gJ(t,e,n);function $J(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=eS(l,u,1)^n[a],h=tS(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=QO[o],c=eS(s,i,a),l=tS(s,i,a),u=JO[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=kJ[r],t[1]^=RJ[r]}Vr(n)}let DJ=class tk extends o0{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,$i(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Kh(this.state)}clone(){return this._cloneInto()}keccak(){lo(this.state32),$J(this.state32,this.rounds),lo(this.state32),this.posOut=0,this.pos=0}update(e){Jo(this),e=vs(e),Wr(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Jo(this,!1),Wr(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return $i(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(GE(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Vr(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new tk(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const UJ=(t,e,n)=>xf(()=>new DJ(e,t,n)),jJ=UJ(1,136,256/8);function LJ(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function MJ(t,e,n){return t&e^~t&n}function BJ(t,e,n){return t&e^t&n^e&n}let nk=class extends o0{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Uy(this.buffer)}update(e){Jo(this),e=vs(e),Wr(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Uy(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Jo(this),GE(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Vr(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;LJ(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Uy(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Yi=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),bn=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),vn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),FJ=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Zi=new Uint32Array(64);let zJ=class extends nk{constructor(e=32){super(64,e,8,!1),this.A=Yi[0]|0,this.B=Yi[1]|0,this.C=Yi[2]|0,this.D=Yi[3]|0,this.E=Yi[4]|0,this.F=Yi[5]|0,this.G=Yi[6]|0,this.H=Yi[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Zi[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Zi[d-15],f=Zi[d-2],p=Ns(h,7)^Ns(h,18)^h>>>3,m=Ns(f,17)^Ns(f,19)^f>>>10;Zi[d]=m+Zi[d-7]+p+Zi[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Ns(a,6)^Ns(a,11)^Ns(a,25),f=u+h+MJ(a,c,l)+FJ[d]+Zi[d]|0,p=(Ns(r,2)^Ns(r,13)^Ns(r,22))+BJ(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Vr(Zi)}destroy(){this.set(0,0,0,0,0,0,0,0),Vr(this.buffer)}};const rk=GO(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),qJ=rk[0],HJ=rk[1],Ji=new Uint32Array(80),Qi=new Uint32Array(80);let YE=class extends nk{constructor(e=64){super(128,e,16,!1),this.Ah=vn[0]|0,this.Al=vn[1]|0,this.Bh=vn[2]|0,this.Bl=vn[3]|0,this.Ch=vn[4]|0,this.Cl=vn[5]|0,this.Dh=vn[6]|0,this.Dl=vn[7]|0,this.Eh=vn[8]|0,this.El=vn[9]|0,this.Fh=vn[10]|0,this.Fl=vn[11]|0,this.Gh=vn[12]|0,this.Gl=vn[13]|0,this.Hh=vn[14]|0,this.Hl=vn[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:m,Hl:v}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,v]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,v){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=m|0,this.Hl=v|0}process(e,n){for(let b=0;b<16;b++,n+=4)Ji[b]=e.getUint32(n),Qi[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const C=Ji[b-15]|0,x=Qi[b-15]|0,T=ao(C,x,1)^ao(C,x,8)^J2(C,x,7),N=co(C,x,1)^co(C,x,8)^Q2(C,x,7),U=Ji[b-2]|0,E=Qi[b-2]|0,k=ao(U,E,19)^td(U,E,61)^J2(U,E,6),R=co(U,E,19)^nd(U,E,61)^Q2(U,E,6),j=bJ(N,R,Qi[b-7],Qi[b-16]),L=vJ(j,T,k,Ji[b-7],Ji[b-16]);Ji[b]=L|0,Qi[b]=j|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:m,Gl:v,Hh:y,Hl:w}=this;for(let b=0;b<80;b++){const C=ao(d,h,14)^ao(d,h,18)^td(d,h,41),x=co(d,h,14)^co(d,h,18)^nd(d,h,41),T=d&f^~d&m,N=h&p^~h&v,U=EJ(w,x,N,HJ[b],Qi[b]),E=xJ(U,y,C,T,qJ[b],Ji[b]),k=U|0,R=ao(r,s,28)^td(r,s,34)^td(r,s,39),j=co(r,s,28)^nd(r,s,34)^nd(r,s,39),L=r&i^r&a^i&a,B=s&o^s&c^o&c;y=m|0,w=v|0,m=f|0,v=p|0,f=d|0,p=h|0,{h:d,l:h}=rs(l|0,u|0,E|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const S=qE(k,j,B);r=HE(S,E,R,L),s=S|0}({h:r,l:s}=rs(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=rs(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=rs(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=rs(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=rs(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=rs(this.Fh|0,this.Fl|0,f|0,p|0),{h:m,l:v}=rs(this.Gh|0,this.Gl|0,m|0,v|0),{h:y,l:w}=rs(this.Hh|0,this.Hl|0,y|0,w|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,m,v,y,w)}roundClean(){Vr(Ji,Qi)}destroy(){Vr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},WJ=class extends YE{constructor(){super(48),this.Ah=bn[0]|0,this.Al=bn[1]|0,this.Bh=bn[2]|0,this.Bl=bn[3]|0,this.Ch=bn[4]|0,this.Cl=bn[5]|0,this.Dh=bn[6]|0,this.Dl=bn[7]|0,this.Eh=bn[8]|0,this.El=bn[9]|0,this.Fh=bn[10]|0,this.Fl=bn[11]|0,this.Gh=bn[12]|0,this.Gl=bn[13]|0,this.Hh=bn[14]|0,this.Hl=bn[15]|0}};const En=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let VJ=class extends YE{constructor(){super(32),this.Ah=En[0]|0,this.Al=En[1]|0,this.Bh=En[2]|0,this.Bl=En[3]|0,this.Ch=En[4]|0,this.Cl=En[5]|0,this.Dh=En[6]|0,this.Dl=En[7]|0,this.Eh=En[8]|0,this.El=En[9]|0,this.Fh=En[10]|0,this.Fl=En[11]|0,this.Gh=En[12]|0,this.Gl=En[13]|0,this.Hh=En[14]|0,this.Hl=En[15]|0}};const a0=xf(()=>new zJ),GJ=xf(()=>new YE),KJ=xf(()=>new WJ),YJ=xf(()=>new VJ),ZJ=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Lt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ie=new Uint32Array(32);function Xi(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=ie[2*t],l=ie[2*t+1],u=ie[2*e],d=ie[2*e+1],h=ie[2*n],f=ie[2*n+1],p=ie[2*r],m=ie[2*r+1],v=qE(c,u,o);l=HE(v,l,d,a),c=v|0,{Dh:m,Dl:p}={Dh:m^l,Dl:p^c},{Dh:m,Dl:p}={Dh:fJ(m,p),Dl:pJ(m)},{h:f,l:h}=rs(f,h,m,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:ao(d,u,24),Bl:co(d,u,24)},ie[2*t]=c,ie[2*t+1]=l,ie[2*e]=u,ie[2*e+1]=d,ie[2*n]=h,ie[2*n+1]=f,ie[2*r]=p,ie[2*r+1]=m}function eo(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=ie[2*t],l=ie[2*t+1],u=ie[2*e],d=ie[2*e+1],h=ie[2*n],f=ie[2*n+1],p=ie[2*r],m=ie[2*r+1],v=qE(c,u,o);l=HE(v,l,d,a),c=v|0,{Dh:m,Dl:p}={Dh:m^l,Dl:p^c},{Dh:m,Dl:p}={Dh:ao(m,p,16),Dl:co(m,p,16)},{h:f,l:h}=rs(f,h,m,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:td(d,u,63),Bl:nd(d,u,63)},ie[2*t]=c,ie[2*t+1]=l,ie[2*e]=u,ie[2*e+1]=d,ie[2*n]=h,ie[2*n+1]=f,ie[2*r]=p,ie[2*r+1]=m}function JJ(t,e={},n,r,s){if($i(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class QJ extends o0{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,$i(e),$i(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=Kh(this.buffer)}update(e){Jo(this),e=vs(e),Wr(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(lo(s),this.compress(s,0,!1),lo(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));lo(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);lo(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){Jo(this),GE(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,Vr(this.buffer.subarray(n)),lo(r),this.compress(r,0,!0),lo(r);const s=Kh(e);this.get().forEach((i,o)=>s[o]=di(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class XJ extends QJ{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=Lt[0]|0,this.v0h=Lt[1]|0,this.v1l=Lt[2]|0,this.v1h=Lt[3]|0,this.v2l=Lt[4]|0,this.v2h=Lt[5]|0,this.v3l=Lt[6]|0,this.v3h=Lt[7]|0,this.v4l=Lt[8]|0,this.v4h=Lt[9]|0,this.v5l=Lt[10]|0,this.v5h=Lt[11]|0,this.v6l=Lt[12]|0,this.v6h=Lt[13]|0,this.v7l=Lt[14]|0,this.v7h=Lt[15]|0,JJ(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=vs(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=vs(i);const a=Kh(i);this.v4l^=di(a[0]),this.v4h^=di(a[1]),this.v5l^=di(a[2]),this.v5h^=di(a[3])}if(s!==void 0){s=vs(s);const a=Kh(s);this.v6l^=di(a[0]),this.v6h^=di(a[1]),this.v7l^=di(a[2]),this.v7h^=di(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:h,v6l:f,v6h:p,v7l:m,v7h:v}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,v]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,v){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=f|0,this.v6h=p|0,this.v7l=m|0,this.v7h=v|0}compress(e,n,r){this.get().forEach((c,l)=>ie[l]=c),ie.set(Lt,16);let{h:s,l:i}=VO(BigInt(this.length));ie[24]=Lt[8]^i,ie[25]=Lt[9]^s,r&&(ie[28]=~ie[28],ie[29]=~ie[29]);let o=0;const a=ZJ;for(let c=0;c<12;c++)Xi(0,4,8,12,e,n+2*a[o++]),eo(0,4,8,12,e,n+2*a[o++]),Xi(1,5,9,13,e,n+2*a[o++]),eo(1,5,9,13,e,n+2*a[o++]),Xi(2,6,10,14,e,n+2*a[o++]),eo(2,6,10,14,e,n+2*a[o++]),Xi(3,7,11,15,e,n+2*a[o++]),eo(3,7,11,15,e,n+2*a[o++]),Xi(0,5,10,15,e,n+2*a[o++]),eo(0,5,10,15,e,n+2*a[o++]),Xi(1,6,11,12,e,n+2*a[o++]),eo(1,6,11,12,e,n+2*a[o++]),Xi(2,7,8,13,e,n+2*a[o++]),eo(2,7,8,13,e,n+2*a[o++]),Xi(3,4,9,14,e,n+2*a[o++]),eo(3,4,9,14,e,n+2*a[o++]);this.v0l^=ie[0]^ie[16],this.v0h^=ie[1]^ie[17],this.v1l^=ie[2]^ie[18],this.v1h^=ie[3]^ie[19],this.v2l^=ie[4]^ie[20],this.v2h^=ie[5]^ie[21],this.v3l^=ie[6]^ie[22],this.v3h^=ie[7]^ie[23],this.v4l^=ie[8]^ie[24],this.v4h^=ie[9]^ie[25],this.v5l^=ie[10]^ie[26],this.v5h^=ie[11]^ie[27],this.v6l^=ie[12]^ie[28],this.v6h^=ie[13]^ie[29],this.v7l^=ie[14]^ie[30],this.v7h^=ie[15]^ie[31],Vr(ie)}destroy(){this.destroyed=!0,Vr(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const eQ=AJ(t=>new XJ(t)),tQ="https://rpc.walletconnect.org/v1";function sk(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(jJ(n)).toString("hex")}async function nQ(t,e,n,r,s,i){switch(n.t){case"eip191":return await rQ(t,e,n.s);case"eip1271":return await sQ(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function rQ(t,e,n){return(await MZ({hash:sk(e),signature:n})).toLowerCase()===t.toLowerCase()}async function sQ(t,e,n,r,s,i){const o=wl(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:sk(e)).substring(2),h=a+d+c+u+l,f=await fetch(`${i||tQ}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:iQ(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function iQ(){return Date.now()+Math.floor(Math.random()*1e3)}function oQ(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return ru.encode(i)}function aQ(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=eQ(r,{dkLen:32});return ru.encode(s)}function nS(t){const e=new Uint8Array(a0(cQ(t)));return ru.encode(e)}function cQ(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function rS(t){const e=Buffer.from(t,"base64"),n=eq(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=Wz(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=YJ(i);return cq.encode(o).replace(/=+$/,"")}function jy(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function lQ(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(jy(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(jy(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(jy(r.length)),s.push(r);const i=Buffer.concat(s),o=a0(i);return Buffer.from(o).toString("hex").toUpperCase()}var uQ=Object.defineProperty,dQ=Object.defineProperties,hQ=Object.getOwnPropertyDescriptors,sS=Object.getOwnPropertySymbols,fQ=Object.prototype.hasOwnProperty,pQ=Object.prototype.propertyIsEnumerable,iS=(t,e,n)=>e in t?uQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mQ=(t,e)=>{for(var n in e||(e={}))fQ.call(e,n)&&iS(t,n,e[n]);if(sS)for(var n of sS(e))pQ.call(e,n)&&iS(t,n,e[n]);return t},gQ=(t,e)=>dQ(t,hQ(e));const yQ="did:pkh:",ZE=t=>t==null?void 0:t.split(":"),wQ=t=>{const e=t&&ZE(t);if(e)return t.includes(yQ)?e[3]:e[1]},Cv=t=>{const e=t&&ZE(t);if(e)return e[2]+":"+e[3]},og=t=>{const e=t&&ZE(t);if(e)return e.pop()};async function oS(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=ik(s,s.iss),o=og(s.iss);return await nQ(o,i,r,Cv(s.iss),n)}const ik=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=og(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${wQ(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(m=>`
- ${m}`).join("")}`:void 0,p=Zp(t.resources);if(p){const m=Zh(p);s=IQ(s,m)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(m=>m!=null).join(`
`)};function bQ(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function vQ(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function sc(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function EQ(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:xQ(e,n,r)}}}function xQ(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function ok(t){return sc(t),`urn:recap:${bQ(t).replace(/=/g,"")}`}function Zh(t){const e=vQ(t.replace("urn:recap:",""));return sc(e),e}function CQ(t,e,n){const r=EQ(t,e,n);return ok(r)}function _Q(t){return t&&t.includes("urn:recap:")}function SQ(t,e){const n=Zh(t),r=Zh(e),s=AQ(n,r);return ok(s)}function AQ(t,e){sc(t),sc(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=gQ(mQ({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function IQ(t="",e){sc(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function aS(t){var e;const n=Zh(t);sc(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function cS(t){const e=Zh(t);sc(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function Zp(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return _Q(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function ak(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function _v(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function Ly(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Qn(t,...e){if(!ak(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function lS(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function NQ(t,e){Qn(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Do(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Wl(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function TQ(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const PQ=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function OQ(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Sv(t){if(typeof t=="string")t=OQ(t);else if(ak(t))t=Av(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function kQ(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function RQ(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const $Q=(t,e)=>{function n(r,...s){if(Qn(r),!PQ)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Qn(l):Qn(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Qn(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Qn(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Qn(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Qn(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function uS(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!UQ(e))throw new Error("invalid output, must be aligned");return e}function dS(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function DQ(t,e,n){_v(n);const r=new Uint8Array(16),s=TQ(r);return dS(s,0,BigInt(e),n),dS(s,8,BigInt(t),n),r}function UQ(t){return t.byteOffset%4===0}function Av(t){return Uint8Array.from(t)}const ck=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),jQ=ck("expand 16-byte k"),LQ=ck("expand 32-byte k"),MQ=Do(jQ),BQ=Do(LQ);function We(t,e){return t<<e|t>>>32-e}function Iv(t){return t.byteOffset%4===0}const bp=64,FQ=16,lk=2**32-1,hS=new Uint32Array;function zQ(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(bp),u=Do(l),d=Iv(s)&&Iv(i),h=d?Do(s):hS,f=d?Do(i):hS;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=lk)throw new Error("arx: counter overflow");const m=Math.min(bp,c-p);if(d&&m===bp){const v=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,w;y<FQ;y++)w=v+y,f[w]=h[w]^u[y];p+=bp;continue}for(let v=0,y;v<m;v++)y=p+v,i[y]=s[y]^l[v];p+=m}}function qQ(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=kQ({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Ly(s),Ly(o),_v(i),_v(n),(a,c,l,u,d=0)=>{Qn(a),Qn(c),Qn(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Qn(u),Ly(d),d<0||d>=lk)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,m,v;if(p===32)f.push(m=Av(a)),v=BQ;else if(p===16&&n)m=new Uint8Array(32),m.set(a),m.set(a,16),v=MQ,f.push(m);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);Iv(c)||f.push(c=Av(c));const y=Do(m);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(v,y,Do(c.subarray(0,16)),y),c=c.subarray(16)}const w=16-s;if(w!==c.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(w!==12){const C=new Uint8Array(12);C.set(c,i?0:12-c.length),c=C,f.push(c)}const b=Do(c);return zQ(t,v,y,b,l,u,d,o),Wl(...f),u}}const tn=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class HQ{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Sv(e),Qn(e,32);const n=tn(e,0),r=tn(e,2),s=tn(e,4),i=tn(e,6),o=tn(e,8),a=tn(e,10),c=tn(e,12),l=tn(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=tn(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],m=o[8],v=o[9],y=tn(e,n+0),w=tn(e,n+2),b=tn(e,n+4),C=tn(e,n+6),x=tn(e,n+8),T=tn(e,n+10),N=tn(e,n+12),U=tn(e,n+14);let E=i[0]+(y&8191),k=i[1]+((y>>>13|w<<3)&8191),R=i[2]+((w>>>10|b<<6)&8191),j=i[3]+((b>>>7|C<<9)&8191),L=i[4]+((C>>>4|x<<12)&8191),B=i[5]+(x>>>1&8191),S=i[6]+((x>>>14|T<<2)&8191),I=i[7]+((T>>>11|N<<5)&8191),$=i[8]+((N>>>8|U<<8)&8191),A=i[9]+(U>>>5|s),O=0,D=O+E*a+k*(5*v)+R*(5*m)+j*(5*p)+L*(5*f);O=D>>>13,D&=8191,D+=B*(5*h)+S*(5*d)+I*(5*u)+$*(5*l)+A*(5*c),O+=D>>>13,D&=8191;let M=O+E*c+k*a+R*(5*v)+j*(5*m)+L*(5*p);O=M>>>13,M&=8191,M+=B*(5*f)+S*(5*h)+I*(5*d)+$*(5*u)+A*(5*l),O+=M>>>13,M&=8191;let H=O+E*l+k*c+R*a+j*(5*v)+L*(5*m);O=H>>>13,H&=8191,H+=B*(5*p)+S*(5*f)+I*(5*h)+$*(5*d)+A*(5*u),O+=H>>>13,H&=8191;let Z=O+E*u+k*l+R*c+j*a+L*(5*v);O=Z>>>13,Z&=8191,Z+=B*(5*m)+S*(5*p)+I*(5*f)+$*(5*h)+A*(5*d),O+=Z>>>13,Z&=8191;let F=O+E*d+k*u+R*l+j*c+L*a;O=F>>>13,F&=8191,F+=B*(5*v)+S*(5*m)+I*(5*p)+$*(5*f)+A*(5*h),O+=F>>>13,F&=8191;let Q=O+E*h+k*d+R*u+j*l+L*c;O=Q>>>13,Q&=8191,Q+=B*a+S*(5*v)+I*(5*m)+$*(5*p)+A*(5*f),O+=Q>>>13,Q&=8191;let me=O+E*f+k*h+R*d+j*u+L*l;O=me>>>13,me&=8191,me+=B*c+S*a+I*(5*v)+$*(5*m)+A*(5*p),O+=me>>>13,me&=8191;let De=O+E*p+k*f+R*h+j*d+L*u;O=De>>>13,De&=8191,De+=B*l+S*c+I*a+$*(5*v)+A*(5*m),O+=De>>>13,De&=8191;let ze=O+E*m+k*p+R*f+j*h+L*d;O=ze>>>13,ze&=8191,ze+=B*u+S*l+I*c+$*a+A*(5*v),O+=ze>>>13,ze&=8191;let Ue=O+E*v+k*m+R*p+j*f+L*h;O=Ue>>>13,Ue&=8191,Ue+=B*d+S*u+I*l+$*c+A*a,O+=Ue>>>13,Ue&=8191,O=(O<<2)+O|0,O=O+D|0,D=O&8191,O=O>>>13,M+=O,i[0]=D,i[1]=M,i[2]=H,i[3]=Z,i[4]=F,i[5]=Q,i[6]=me,i[7]=De,i[8]=ze,i[9]=Ue}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Wl(r)}update(e){lS(this),e=Sv(e),Qn(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Wl(this.h,this.r,this.buffer,this.pad)}digestInto(e){lS(this),NQ(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function WQ(t){const e=(r,s)=>t(s).update(Sv(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const VQ=WQ(t=>new HQ(t));function GQ(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],m=e[5],v=e[6],y=e[7],w=s,b=n[0],C=n[1],x=n[2],T=o,N=a,U=c,E=l,k=u,R=d,j=h,L=f,B=p,S=m,I=v,$=y,A=w,O=b,D=C,M=x;for(let Z=0;Z<i;Z+=2)T=T+k|0,A=We(A^T,16),B=B+A|0,k=We(k^B,12),T=T+k|0,A=We(A^T,8),B=B+A|0,k=We(k^B,7),N=N+R|0,O=We(O^N,16),S=S+O|0,R=We(R^S,12),N=N+R|0,O=We(O^N,8),S=S+O|0,R=We(R^S,7),U=U+j|0,D=We(D^U,16),I=I+D|0,j=We(j^I,12),U=U+j|0,D=We(D^U,8),I=I+D|0,j=We(j^I,7),E=E+L|0,M=We(M^E,16),$=$+M|0,L=We(L^$,12),E=E+L|0,M=We(M^E,8),$=$+M|0,L=We(L^$,7),T=T+R|0,M=We(M^T,16),I=I+M|0,R=We(R^I,12),T=T+R|0,M=We(M^T,8),I=I+M|0,R=We(R^I,7),N=N+j|0,A=We(A^N,16),$=$+A|0,j=We(j^$,12),N=N+j|0,A=We(A^N,8),$=$+A|0,j=We(j^$,7),U=U+L|0,O=We(O^U,16),B=B+O|0,L=We(L^B,12),U=U+L|0,O=We(O^U,8),B=B+O|0,L=We(L^B,7),E=E+k|0,D=We(D^E,16),S=S+D|0,k=We(k^S,12),E=E+k|0,D=We(D^E,8),S=S+D|0,k=We(k^S,7);let H=0;r[H++]=o+T|0,r[H++]=a+N|0,r[H++]=c+U|0,r[H++]=l+E|0,r[H++]=u+k|0,r[H++]=d+R|0,r[H++]=h+j|0,r[H++]=f+L|0,r[H++]=p+B|0,r[H++]=m+S|0,r[H++]=v+I|0,r[H++]=y+$|0,r[H++]=w+A|0,r[H++]=b+O|0,r[H++]=C+D|0,r[H++]=x+M|0}const KQ=qQ(GQ,{counterRight:!1,counterLength:4,allowShortKeys:!1}),YQ=new Uint8Array(16),fS=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(YQ.subarray(n))},ZQ=new Uint8Array(32);function pS(t,e,n,r,s){const i=t(e,n,ZQ),o=VQ.create(i);s&&fS(o,s),fS(o,r);const a=DQ(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return Wl(i,a),c}const JQ=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=uS(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=pS(t,e,n,a,r);return i.set(c,o),Wl(c),i},decrypt(s,i){i=uS(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=pS(t,e,n,o,r);if(!RQ(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Wl(c),i}}),uk=$Q({blockSize:64,nonceLength:12,tagLength:16},JQ(KQ));let dk=class extends o0{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,VE(e);const r=vs(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Vr(i)}update(e){return Jo(this),this.iHash.update(e),this}digestInto(e){Jo(this),Wr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const c0=(t,e,n)=>new dk(t,e).update(n).digest();c0.create=(t,e)=>new dk(t,e);function QQ(t,e,n){return VE(t),n===void 0&&(n=new Uint8Array(t.outputLen)),c0(t,vs(n),vs(e))}const My=Uint8Array.from([0]),mS=Uint8Array.of();function XQ(t,e,n,r=32){VE(t),$i(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=mS);const o=new Uint8Array(i*s),a=c0.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)My[0]=u+1,c.update(u===0?mS:l).update(n).update(My).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),Vr(l,My),o.slice(0,r)}const eX=(t,e,n,r,s)=>XQ(t,QQ(t,e,n),r,s),l0=a0,JE=BigInt(0),Nv=BigInt(1);function ag(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function vp(t){const e=t.toString(16);return e.length&1?"0"+e:e}function hk(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?JE:BigInt("0x"+t)}function u0(t){return hk(Yh(t))}function cg(t){return Wr(t),hk(Yh(Uint8Array.from(t).reverse()))}function QE(t,e){return KE(t.toString(16).padStart(e*2,"0"))}function XE(t,e){return QE(t,e).reverse()}function Jn(t,e,n){let r;if(typeof e=="string")try{r=KE(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(WE(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const By=t=>typeof t=="bigint"&&JE<=t;function tX(t,e,n){return By(t)&&By(e)&&By(n)&&e<=t&&t<n}function Tv(t,e,n,r){if(!tX(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function nX(t){let e;for(e=0;t>JE;t>>=Nv,e+=1);return e}const d0=t=>(Nv<<BigInt(t))-Nv;function rX(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...h)=>n(o,i,...h),u=(h=r(0))=>{o=l(s(0),h),i=l(),h.length!==0&&(o=l(s(1),h),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){i=l();const p=i.slice();f.push(p),h+=i.length}return Sa(...f)};return(h,f)=>{c(),u(h);let p;for(;!(p=f(d()));)u();return c(),p}}function h0(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function gS(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const tr=BigInt(0),Dn=BigInt(1),Aa=BigInt(2),sX=BigInt(3),fk=BigInt(4),pk=BigInt(5),mk=BigInt(8);function Ur(t,e){const n=t%e;return n>=tr?n:e+n}function ns(t,e,n){let r=t;for(;e-- >tr;)r*=r,r%=n;return r}function yS(t,e){if(t===tr)throw new Error("invert: expected non-zero number");if(e<=tr)throw new Error("invert: expected positive modulus, got "+e);let n=Ur(t,e),r=e,s=tr,i=Dn;for(;n!==tr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Dn)throw new Error("invert: does not exist");return Ur(s,e)}function gk(t,e){const n=(t.ORDER+Dn)/fk,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function iX(t,e){const n=(t.ORDER-pk)/mk,r=t.mul(e,Aa),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Aa),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function oX(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Dn,n=0;for(;e%Aa===tr;)e/=Aa,n++;let r=Aa;const s=lu(t);for(;wS(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return gk;let i=s.pow(r,e);const o=(e+Dn)/Aa;return function(a,c){if(a.is0(c))return c;if(wS(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),h=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let f=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(f++,p=a.sqr(p),f===l)throw new Error("Cannot find square root");const m=Dn<<BigInt(l-f-1),v=a.pow(u,m);l=f,u=a.sqr(v),d=a.mul(d,u),h=a.mul(h,v)}return h}}function aX(t){return t%fk===sX?gk:t%mk===pk?iX:oX(t)}const cX=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function lX(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=cX.reduce((r,s)=>(r[s]="function",r),e);return h0(t,n),t}function uX(t,e,n){if(n<tr)throw new Error("invalid exponent, negatives unsupported");if(n===tr)return t.ONE;if(n===Dn)return e;let r=t.ONE,s=e;for(;n>tr;)n&Dn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Dn;return r}function yk(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function wS(t,e){const n=(t.ORDER-Dn)/Aa,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function dX(t,e){e!==void 0&&$i(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function lu(t,e,n=!1,r={}){if(t<=tr)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=dX(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:d0(o),ZERO:tr,ONE:Dn,create:u=>Ur(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return tr<=u&&u<t},is0:u=>u===tr,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Dn)===Dn,neg:u=>Ur(-u,t),eql:(u,d)=>u===d,sqr:u=>Ur(u*u,t),add:(u,d)=>Ur(u+d,t),sub:(u,d)=>Ur(u-d,t),mul:(u,d)=>Ur(u*d,t),pow:(u,d)=>uX(l,u,d),div:(u,d)=>Ur(u*yS(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>yS(u,t),sqrt:i||(u=>(c||(c=aX(t)),c(l,u))),toBytes:u=>n?XE(u,a):QE(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?cg(u):u0(u)},invertBatch:u=>yk(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function wk(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function bk(t){const e=wk(t);return e+Math.ceil(e/2)}function hX(t,e,n=!1){const r=t.length,s=wk(e),i=bk(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?cg(t):u0(t),a=Ur(o,e-Dn)+Dn;return n?XE(a,s):QE(a,s)}const Vl=BigInt(0),Ia=BigInt(1);function _d(t,e){const n=e.negate();return t?n:e}function fX(t,e,n){const r=i=>i.pz,s=yk(t.Fp,n.map(r));return n.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function vk(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Fy(t,e){vk(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=d0(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function bS(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Ia);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function pX(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function mX(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const zy=new WeakMap,Ek=new WeakMap;function qy(t){return Ek.get(t)||1}function vS(t){if(t!==Vl)throw new Error("invalid wNAF")}function gX(t,e){return{constTimeNegate:_d,hasPrecomputes(n){return qy(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Vl;)r&Ia&&(s=s.add(i)),i=i.double(),r>>=Ia;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Fy(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=Fy(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=bS(s,c,a);s=l,d?o=o.add(_d(f,r[p])):i=i.add(_d(h,r[u]))}return vS(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=Fy(n,e);for(let a=0;a<o.windows&&s!==Vl;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=bS(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return vS(s),i},getPrecomputes(n,r,s){let i=zy.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),zy.set(r,i))),i},wNAFCached(n,r,s){const i=qy(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=qy(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){vk(r,e),Ek.set(n,r),zy.delete(n)}}}function yX(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Vl||r>Vl;)n&Ia&&(i=i.add(s)),r&Ia&&(o=o.add(s)),s=s.double(),n>>=Ia,r>>=Ia;return{p1:i,p2:o}}function wX(t,e,n,r){pX(n,t),mX(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=nX(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=d0(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let m=0;m<i;m++){const v=r[m],y=Number(v>>BigInt(f)&l);u[y]=u[y].add(n[m])}let p=o;for(let m=u.length-1,v=o;m>0;m--)v=v.add(u[m]),p=p.add(v);if(h=h.add(p),f!==0)for(let m=0;m<c;m++)h=h.double()}return h}function ES(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return lX(e),e}else return lu(t)}function bX(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>Vl))throw new Error(`CURVE.${o} must be positive bigint`)}const r=ES(e.p,n.Fp),s=ES(e.n,n.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const ju=BigInt(0),Tc=BigInt(1),Ep=BigInt(2);function vX(t){return h0(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function EX(t){const e=vX(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||cu,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),h=BigInt(a?121665:39081),f=a?Ep**BigInt(254):Ep**BigInt(447),p=a?BigInt(8)*Ep**BigInt(251)-Tc:BigInt(4)*Ep**BigInt(445)-Tc,m=f+p+Tc,v=E=>Ur(E,n),y=w(d);function w(E){return XE(v(E),u)}function b(E){const k=Jn("u coordinate",E,u);return a&&(k[31]&=127),v(cg(k))}function C(E){return cg(s(Jn("scalar",E,u)))}function x(E,k){const R=U(b(k),C(E));if(R===ju)throw new Error("invalid private or public key received");return w(R)}function T(E){return x(E,y)}function N(E,k,R){const j=v(E*(k-R));return k=v(k-j),R=v(R+j),{x_2:k,x_3:R}}function U(E,k){Tv("u",E,ju,n),Tv("scalar",k,f,m);const R=k,j=E;let L=Tc,B=ju,S=E,I=Tc,$=ju;for(let O=BigInt(l-1);O>=ju;O--){const D=R>>O&Tc;$^=D,{x_2:L,x_3:S}=N($,L,S),{x_2:B,x_3:I}=N($,B,I),$=D;const M=L+B,H=v(M*M),Z=L-B,F=v(Z*Z),Q=H-F,me=S+I,De=S-I,ze=v(De*M),Ue=v(me*Z),Tt=ze+Ue,Xt=ze-Ue;S=v(Tt*Tt),I=v(j*v(Xt*Xt)),L=v(H*F),B=v(Q*(H+v(h*Q)))}({x_2:L,x_3:S}=N($,L,S)),{x_2:B,x_3:I}=N($,B,I);const A=i(B);return v(L*A)}return{scalarMult:x,scalarMultBase:T,getSharedSecret:(E,k)=>x(E,k),getPublicKey:E=>T(E),utils:{randomPrivateKey:()=>c(u)},GuBytes:y.slice()}}BigInt(0);const xX=BigInt(1),xS=BigInt(2),CX=BigInt(3),_X=BigInt(5),SX=BigInt(8),xk={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:SX,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function AX(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=xk.p,o=t*t%i*t%i,a=ns(o,xS,i)*o%i,c=ns(a,xX,i)*t%i,l=ns(c,_X,i)*c%i,u=ns(l,e,i)*l%i,d=ns(u,n,i)*u%i,h=ns(d,r,i)*d%i,f=ns(h,s,i)*h%i,p=ns(f,s,i)*h%i,m=ns(p,e,i)*l%i;return{pow_p_5_8:ns(m,xS,i)*t%i,b2:o}}function IX(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Pv=(()=>{const t=xk.p;return EX({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=AX(e);return Ur(ns(n,CX,t)*r,t)},adjustScalarBytes:IX})})();function CS(t){t.lowS!==void 0&&ag("lowS",t.lowS),t.prehash!==void 0&&ag("prehash",t.prehash)}class NX extends Error{constructor(e=""){super(e)}}const gi={Err:NX,_tlv:{encode:(t,e)=>{const{Err:n}=gi;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=vp(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?vp(s.length/2|128):"";return vp(t)+i+s+e},decode(t,e){const{Err:n}=gi;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=gi;if(t<Sd)throw new e("integer: negative integers are not allowed");let n=vp(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=gi;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return u0(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=gi,s=Jn("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=gi,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Sd=BigInt(0),Ad=BigInt(1),TX=BigInt(2),xp=BigInt(3),PX=BigInt(4);function OX(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function Ck(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Jn("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function kX(t,e={}){const{Fp:n,Fn:r}=bX("weierstrass",t,e),{h:s,n:i}=t;h0(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(U,E,k){const{x:R,y:j}=E.toAffine(),L=n.toBytes(R);if(ag("isCompressed",k),k){a();const B=!n.isOdd(j);return Sa(_k(B),L)}else return Sa(Uint8Array.of(4),L,n.toBytes(j))}function l(U){Wr(U);const E=n.BYTES,k=E+1,R=2*E+1,j=U.length,L=U[0],B=U.subarray(1);if(j===k&&(L===2||L===3)){const S=n.fromBytes(B);if(!n.isValid(S))throw new Error("bad point: is not on curve, wrong x");const I=h(S);let $;try{$=n.sqrt(I)}catch(O){const D=O instanceof Error?": "+O.message:"";throw new Error("bad point: is not on curve, sqrt error"+D)}a();const A=n.isOdd($);return(L&1)===1!==A&&($=n.neg($)),{x:S,y:$}}else if(j===R&&L===4){const S=n.fromBytes(B.subarray(E*0,E*1)),I=n.fromBytes(B.subarray(E*1,E*2));if(!f(S,I))throw new Error("bad point: is not on curve");return{x:S,y:I}}else throw new Error(`bad point: got length ${j}, expected compressed=${k} or uncompressed=${R}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=OX(n,t.a,t.b);function f(U,E){const k=n.sqr(E),R=h(U);return n.eql(k,R)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,xp),PX),m=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,m)))throw new Error("bad curve params: a or b");function v(U,E,k=!1){if(!n.isValid(E)||k&&n.is0(E))throw new Error(`bad point coordinate ${U}`);return E}function y(U){if(!(U instanceof x))throw new Error("ProjectivePoint expected")}const w=gS((U,E)=>{const{px:k,py:R,pz:j}=U;if(n.eql(j,n.ONE))return{x:k,y:R};const L=U.is0();E==null&&(E=L?n.ONE:n.inv(j));const B=n.mul(k,E),S=n.mul(R,E),I=n.mul(j,E);if(L)return{x:n.ZERO,y:n.ZERO};if(!n.eql(I,n.ONE))throw new Error("invZ was invalid");return{x:B,y:S}}),b=gS(U=>{if(U.is0()){if(e.allowInfinityPoint&&!n.is0(U.py))return;throw new Error("bad point: ZERO")}const{x:E,y:k}=U.toAffine();if(!n.isValid(E)||!n.isValid(k))throw new Error("bad point: x or y not field elements");if(!f(E,k))throw new Error("bad point: equation left != right");if(!U.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function C(U,E,k,R,j){return k=new x(n.mul(k.px,U),k.py,k.pz),E=_d(R,E),k=_d(j,k),E.add(k)}class x{constructor(E,k,R){this.px=v("x",E),this.py=v("y",k,!0),this.pz=v("z",R),Object.freeze(this)}static fromAffine(E){const{x:k,y:R}=E||{};if(!E||!n.isValid(k)||!n.isValid(R))throw new Error("invalid affine point");if(E instanceof x)throw new Error("projective point not allowed");return n.is0(k)&&n.is0(R)?x.ZERO:new x(k,R,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){return fX(x,"pz",E)}static fromBytes(E){return Wr(E),x.fromHex(E)}static fromHex(E){const k=x.fromAffine(d(Jn("pointHex",E)));return k.assertValidity(),k}static fromPrivateKey(E){const k=Ck(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return x.BASE.multiply(k(E))}static msm(E,k){return wX(x,r,E,k)}precompute(E=8,k=!0){return N.setWindowSize(this,E),k||this.multiply(xp),this}_setWindowSize(E){this.precompute(E)}assertValidity(){b(this)}hasEvenY(){const{y:E}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(E)}equals(E){y(E);const{px:k,py:R,pz:j}=this,{px:L,py:B,pz:S}=E,I=n.eql(n.mul(k,S),n.mul(L,j)),$=n.eql(n.mul(R,S),n.mul(B,j));return I&&$}negate(){return new x(this.px,n.neg(this.py),this.pz)}double(){const{a:E,b:k}=t,R=n.mul(k,xp),{px:j,py:L,pz:B}=this;let S=n.ZERO,I=n.ZERO,$=n.ZERO,A=n.mul(j,j),O=n.mul(L,L),D=n.mul(B,B),M=n.mul(j,L);return M=n.add(M,M),$=n.mul(j,B),$=n.add($,$),S=n.mul(E,$),I=n.mul(R,D),I=n.add(S,I),S=n.sub(O,I),I=n.add(O,I),I=n.mul(S,I),S=n.mul(M,S),$=n.mul(R,$),D=n.mul(E,D),M=n.sub(A,D),M=n.mul(E,M),M=n.add(M,$),$=n.add(A,A),A=n.add($,A),A=n.add(A,D),A=n.mul(A,M),I=n.add(I,A),D=n.mul(L,B),D=n.add(D,D),A=n.mul(D,M),S=n.sub(S,A),$=n.mul(D,O),$=n.add($,$),$=n.add($,$),new x(S,I,$)}add(E){y(E);const{px:k,py:R,pz:j}=this,{px:L,py:B,pz:S}=E;let I=n.ZERO,$=n.ZERO,A=n.ZERO;const O=t.a,D=n.mul(t.b,xp);let M=n.mul(k,L),H=n.mul(R,B),Z=n.mul(j,S),F=n.add(k,R),Q=n.add(L,B);F=n.mul(F,Q),Q=n.add(M,H),F=n.sub(F,Q),Q=n.add(k,j);let me=n.add(L,S);return Q=n.mul(Q,me),me=n.add(M,Z),Q=n.sub(Q,me),me=n.add(R,j),I=n.add(B,S),me=n.mul(me,I),I=n.add(H,Z),me=n.sub(me,I),A=n.mul(O,Q),I=n.mul(D,Z),A=n.add(I,A),I=n.sub(H,A),A=n.add(H,A),$=n.mul(I,A),H=n.add(M,M),H=n.add(H,M),Z=n.mul(O,Z),Q=n.mul(D,Q),H=n.add(H,Z),Z=n.sub(M,Z),Z=n.mul(O,Z),Q=n.add(Q,Z),M=n.mul(H,Q),$=n.add($,M),M=n.mul(me,Q),I=n.mul(F,I),I=n.sub(I,M),M=n.mul(F,H),A=n.mul(me,A),A=n.add(A,M),new x(I,$,A)}subtract(E){return this.add(E.negate())}is0(){return this.equals(x.ZERO)}multiply(E){const{endo:k}=e;if(!r.isValidNot0(E))throw new Error("invalid scalar: out of range");let R,j;const L=B=>N.wNAFCached(this,B,x.normalizeZ);if(k){const{k1neg:B,k1:S,k2neg:I,k2:$}=k.splitScalar(E),{p:A,f:O}=L(S),{p:D,f:M}=L($);j=O.add(M),R=C(k.beta,A,D,B,I)}else{const{p:B,f:S}=L(E);R=B,j=S}return x.normalizeZ([R,j])[0]}multiplyUnsafe(E){const{endo:k}=e,R=this;if(!r.isValid(E))throw new Error("invalid scalar: out of range");if(E===Sd||R.is0())return x.ZERO;if(E===Ad)return R;if(N.hasPrecomputes(this))return this.multiply(E);if(k){const{k1neg:j,k1:L,k2neg:B,k2:S}=k.splitScalar(E),{p1:I,p2:$}=yX(x,R,L,S);return C(k.beta,I,$,j,B)}else return N.wNAFCachedUnsafe(R,E)}multiplyAndAddUnsafe(E,k,R){const j=this.multiplyUnsafe(k).add(E.multiplyUnsafe(R));return j.is0()?void 0:j}toAffine(E){return w(this,E)}isTorsionFree(){const{isTorsionFree:E}=e;return s===Ad?!0:E?E(x,this):N.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:E}=e;return s===Ad?this:E?E(x,this):this.multiplyUnsafe(s)}toBytes(E=!0){return ag("isCompressed",E),this.assertValidity(),u(x,this,E)}toRawBytes(E=!0){return this.toBytes(E)}toHex(E=!0){return Yh(this.toBytes(E))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}x.BASE=new x(t.Gx,t.Gy,n.ONE),x.ZERO=new x(n.ZERO,n.ONE,n.ZERO),x.Fp=n,x.Fn=r;const T=r.BITS,N=gX(x,e.endo?Math.ceil(T/2):T);return x}function _k(t){return Uint8Array.of(t?2:3)}function RX(t,e,n={}){h0(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||cu,s=e.hmac||((R,...j)=>c0(e.hash,R,Sa(...j))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(R){const j=a>>Ad;return R>j}function u(R){return l(R)?o.neg(R):R}function d(R,j){if(!o.isValidNot0(j))throw new Error(`invalid signature ${R}: out of range 1..CURVE.n`)}class h{constructor(j,L,B){d("r",j),d("s",L),this.r=j,this.s=L,B!=null&&(this.recovery=B),Object.freeze(this)}static fromCompact(j){const L=o.BYTES,B=Jn("compactSignature",j,L*2);return new h(o.fromBytes(B.subarray(0,L)),o.fromBytes(B.subarray(L,L*2)))}static fromDER(j){const{r:L,s:B}=gi.toSig(Jn("DER",j));return new h(L,B)}assertValidity(){}addRecoveryBit(j){return new h(this.r,this.s,j)}recoverPublicKey(j){const L=i.ORDER,{r:B,s:S,recovery:I}=this;if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");if(a*TX<L&&I>1)throw new Error("recovery id is ambiguous for h>1 curve");const $=I===2||I===3?B+a:B;if(!i.isValid($))throw new Error("recovery id 2 or 3 invalid");const A=i.toBytes($),O=t.fromHex(Sa(_k((I&1)===0),A)),D=o.inv($),M=b(Jn("msgHash",j)),H=o.create(-M*D),Z=o.create(S*D),F=t.BASE.multiplyUnsafe(H).add(O.multiplyUnsafe(Z));if(F.is0())throw new Error("point at infinify");return F.assertValidity(),F}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(j){if(j==="compact")return Sa(o.toBytes(this.r),o.toBytes(this.s));if(j==="der")return KE(gi.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Yh(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Yh(this.toBytes("compact"))}}const f=Ck(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(R){try{return f(R),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const R=a;return hX(r(bk(R)),R)},precompute(R=8,j=t.BASE){return j.precompute(R,!1)}};function m(R,j=!0){return t.fromPrivateKey(R).toBytes(j)}function v(R){if(typeof R=="bigint")return!1;if(R instanceof t)return!0;const j=Jn("key",R).length,L=i.BYTES,B=L+1,S=2*L+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===B))return j===B||j===S}function y(R,j,L=!0){if(v(R)===!0)throw new Error("first arg must be private key");if(v(j)===!1)throw new Error("second arg must be public key");return t.fromHex(j).multiply(f(R)).toBytes(L)}const w=e.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const j=u0(R),L=R.length*8-c;return L>0?j>>BigInt(L):j},b=e.bits2int_modN||function(R){return o.create(w(R))},C=d0(c);function x(R){return Tv("num < 2^"+c,R,Sd,C),o.toBytes(R)}function T(R,j,L=N){if(["recovered","canonical"].some(F=>F in L))throw new Error("sign() legacy options not supported");const{hash:B}=e;let{lowS:S,prehash:I,extraEntropy:$}=L;S==null&&(S=!0),R=Jn("msgHash",R),CS(L),I&&(R=Jn("prehashed msgHash",B(R)));const A=b(R),O=f(j),D=[x(O),x(A)];if($!=null&&$!==!1){const F=$===!0?r(i.BYTES):$;D.push(Jn("extraEntropy",F))}const M=Sa(...D),H=A;function Z(F){const Q=w(F);if(!o.isValidNot0(Q))return;const me=o.inv(Q),De=t.BASE.multiply(Q).toAffine(),ze=o.create(De.x);if(ze===Sd)return;const Ue=o.create(me*o.create(H+ze*O));if(Ue===Sd)return;let Tt=(De.x===ze?0:2)|Number(De.y&Ad),Xt=Ue;return S&&l(Ue)&&(Xt=u(Ue),Tt^=1),new h(ze,Xt,Tt)}return{seed:M,k2sig:Z}}const N={lowS:e.lowS,prehash:!1},U={lowS:e.lowS,prehash:!1};function E(R,j,L=N){const{seed:B,k2sig:S}=T(R,j,L);return rX(e.hash.outputLen,o.BYTES,s)(B,S)}t.BASE.precompute(8);function k(R,j,L,B=U){const S=R;j=Jn("msgHash",j),L=Jn("publicKey",L),CS(B);const{lowS:I,prehash:$,format:A}=B;if("strict"in B)throw new Error("options.strict was renamed to lowS");if(A!==void 0&&!["compact","der","js"].includes(A))throw new Error('format must be "compact", "der" or "js"');const O=typeof S=="string"||WE(S),D=!O&&!A&&typeof S=="object"&&S!==null&&typeof S.r=="bigint"&&typeof S.s=="bigint";if(!O&&!D)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let M,H;try{if(D)if(A===void 0||A==="js")M=new h(S.r,S.s);else throw new Error("invalid format");if(O){try{A!=="compact"&&(M=h.fromDER(S))}catch(Tt){if(!(Tt instanceof gi.Err))throw Tt}!M&&A!=="der"&&(M=h.fromCompact(S))}H=t.fromHex(L)}catch{return!1}if(!M||I&&M.hasHighS())return!1;$&&(j=e.hash(j));const{r:Z,s:F}=M,Q=b(j),me=o.inv(F),De=o.create(Q*me),ze=o.create(Z*me),Ue=t.BASE.multiplyUnsafe(De).add(H.multiplyUnsafe(ze));return Ue.is0()?!1:o.create(Ue.x)===Z}return Object.freeze({getPublicKey:m,getSharedSecret:y,sign:E,verify:k,utils:p,Point:t,Signature:h})}function $X(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=lu(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function DX(t){const{CURVE:e,curveOpts:n}=$X(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function UX(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function jX(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=DX(t),s=kX(e,n),i=RX(s,r,n);return UX(t,i)}function Ov(t,e){const n=r=>jX({...t,hash:r});return{...n(e),create:n}}const Sk={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Ak={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Ik={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},LX=lu(Sk.p),MX=lu(Ak.p),BX=lu(Ik.p),FX=Ov({...Sk,Fp:LX,lowS:!1},a0);Ov({...Ak,Fp:MX,lowS:!1},KJ),Ov({...Ik,Fp:BX,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},GJ);const zX=FX,Nk="base10",Un="base16",ms="base64pad",po="base64url",Cf="utf8",Tk=0,Ai=1,_f=2,qX=0,_S=1,Id=12,ex=32;function HX(){const t=Pv.utils.randomPrivateKey(),e=Pv.getPublicKey(t);return{privateKey:or(t,Un),publicKey:or(e,Un)}}function kv(){const t=cu(ex);return or(t,Un)}function WX(t,e){const n=Pv.getSharedSecret(Br(t,Un),Br(e,Un)),r=eX(l0,n,void 0,void 0,ex);return or(r,Un)}function Jp(t){const e=l0(Br(t,Un));return or(e,Un)}function Bs(t){const e=l0(Br(t,Cf));return or(e,Un)}function Pk(t){return Br(`${t}`,Nk)}function ic(t){return Number(or(t,Nk))}function Ok(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function kk(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function VX(t){const e=Pk(typeof t.type<"u"?t.type:Tk);if(ic(e)===Ai&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Br(t.senderPublicKey,Un):void 0,r=typeof t.iv<"u"?Br(t.iv,Un):cu(Id),s=Br(t.symKey,Un),i=uk(s,r).encrypt(Br(t.message,Cf)),o=Rk({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===po?Ok(o):o}function GX(t){const e=Br(t.symKey,Un),{sealed:n,iv:r}=Jh({encoded:t.encoded,encoding:t.encoding}),s=uk(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return or(s,Cf)}function KX(t,e){const n=Pk(_f),r=cu(Id),s=Br(t,Cf),i=Rk({type:n,sealed:s,iv:r});return e===po?Ok(i):i}function YX(t,e){const{sealed:n}=Jh({encoded:t,encoding:e});return or(n,Cf)}function Rk(t){if(ic(t.type)===_f)return or(Cd([t.type,t.sealed]),ms);if(ic(t.type)===Ai){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return or(Cd([t.type,t.senderPublicKey,t.iv,t.sealed]),ms)}return or(Cd([t.type,t.iv,t.sealed]),ms)}function Jh(t){const e=(t.encoding||ms)===po?kk(t.encoded):t.encoded,n=Br(e,ms),r=n.slice(qX,_S),s=_S;if(ic(r)===Ai){const c=s+ex,l=c+Id,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(ic(r)===_f){const c=n.slice(s),l=cu(Id);return{type:r,sealed:c,iv:l}}const i=s+Id,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function ZX(t,e){const n=Jh({encoded:t,encoding:e==null?void 0:e.encoding});return $k({type:ic(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?or(n.senderPublicKey,Un):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function $k(t){const e=(t==null?void 0:t.type)||Tk;if(e===Ai){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function SS(t){return t.type===Ai&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function AS(t){return t.type===_f}function JX(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return Cd([new Uint8Array([4]),e,n])}function QX(t,e){const[n,r,s]=t.split("."),i=Buffer.from(kk(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=l0(c),u=JX(e);if(!zX.verify(Cd([o,a]),l,u))throw new Error("Invalid signature");return sv(t).payload}const XX="irn";function lg(t){return(t==null?void 0:t.relay)||{protocol:XX}}function rd(t){const e=iH[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function eee(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function IS(t){if(!t.includes("wc:")){const l=WO(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:tee(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:eee(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function tee(t){return t.startsWith("//")?t.substring(2):t}function nee(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function NS(t){const e=new URLSearchParams,n=nee(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function Cp(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var ree=Object.defineProperty,see=Object.defineProperties,iee=Object.getOwnPropertyDescriptors,TS=Object.getOwnPropertySymbols,oee=Object.prototype.hasOwnProperty,aee=Object.prototype.propertyIsEnumerable,PS=(t,e,n)=>e in t?ree(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cee=(t,e)=>{for(var n in e||(e={}))oee.call(e,n)&&PS(t,n,e[n]);if(TS)for(var n of TS(e))aee.call(e,n)&&PS(t,n,e[n]);return t},lee=(t,e)=>see(t,iee(e));function uu(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function uee(t){const e=[];return Object.values(t).forEach(n=>{e.push(...uu(n.accounts))}),e}function dee(t,e){const n=[];return Object.values(t).forEach(r=>{uu(r.accounts).includes(e)&&n.push(...r.methods)}),n}function hee(t,e){const n=[];return Object.values(t).forEach(r=>{uu(r.accounts).includes(e)&&n.push(...r.events)}),n}function f0(t){return t.includes(":")}function ol(t){return f0(t)?t.split(":")[0]:t}function OS(t){var e,n,r;const s={};if(!Uo(t))return s;for(const[i,o]of Object.entries(t)){const a=f0(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=ol(i);s[u]=lee(cee({},s[u]),{chains:Ks(a,(e=s[u])==null?void 0:e.chains),methods:Ks(c,(n=s[u])==null?void 0:n.methods),events:Ks(l,(r=s[u])==null?void 0:r.events)})}return s}function fee(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function kS(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=fee(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Ks(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function pee(t,e){var n,r,s,i,o,a;const c=OS(t),l=OS(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Ks((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Ks((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Ks((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const mee={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},gee={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function X(t,e){const{message:n,code:r}=gee[t];return{message:e?`${n} ${e}`:n,code:r}}function wt(t,e){const{message:n,code:r}=mee[t];return{message:e?`${n} ${e}`:n,code:r}}function Ii(t,e){return!!Array.isArray(t)}function Uo(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function An(t){return typeof t>"u"}function $t(t,e){return e&&An(t)?!0:typeof t=="string"&&!!t.trim().length}function tx(t,e){return typeof t=="number"&&!isNaN(t)}function yee(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return _a(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=uu(a),d=n[o];(!_a(BO(o,d),u)||!_a(d.methods,c)||!_a(d.events,l))&&(i=!1)}),i):!1}function ug(t){return $t(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function wee(t){if($t(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&ug(n)}}return!1}function bee(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if($t(t,!1)){if(e(t))return!0;const n=WO(t);return e(n)}}catch{}return!1}function vee(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Eee(t){return t==null?void 0:t.topic}function xee(t,e){let n=null;return $t(t==null?void 0:t.publicKey,!1)||(n=X("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function RS(t){let e=!0;return Ii(t)?t.length&&(e=t.every(n=>$t(n,!1))):e=!1,e}function Cee(t,e,n){let r=null;return Ii(e)&&e.length?e.forEach(s=>{r||ug(s)||(r=wt("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):ug(t)||(r=wt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function _ee(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=Cee(s,BO(s,i),`${e} ${n}`);o&&(r=o)}),r}function See(t,e){let n=null;return Ii(t)?t.forEach(r=>{n||wee(r)||(n=wt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=wt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Aee(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=See(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function Iee(t,e){let n=null;return RS(t==null?void 0:t.methods)?RS(t==null?void 0:t.events)||(n=wt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=wt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function Dk(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=Iee(r,`${e}, namespace`);s&&(n=s)}),n}function Nee(t,e,n){let r=null;if(t&&Uo(t)){const s=Dk(t,e);s&&(r=s);const i=_ee(t,e,n);i&&(r=i)}else r=X("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function Hy(t,e){let n=null;if(t&&Uo(t)){const r=Dk(t,e);r&&(n=r);const s=Aee(t,e);s&&(n=s)}else n=X("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function Uk(t){return $t(t.protocol,!0)}function Tee(t,e){let n=!1;return t?t&&Ii(t)&&t.length&&t.forEach(r=>{n=Uk(r)}):n=!0,n}function Pee(t){return typeof t=="number"}function Yn(t){return typeof t<"u"&&typeof t!==null}function Oee(t){return!(!t||typeof t!="object"||!t.code||!tx(t.code)||!t.message||!$t(t.message,!1))}function kee(t){return!(An(t)||!$t(t.method,!1))}function Ree(t){return!(An(t)||An(t.result)&&An(t.error)||!tx(t.id)||!$t(t.jsonrpc,!1))}function $ee(t){return!(An(t)||!$t(t.name,!1))}function $S(t,e){return!(!ug(e)||!uee(t).includes(e))}function Dee(t,e,n){return $t(n,!1)?dee(t,e).includes(n):!1}function Uee(t,e,n){return $t(n,!1)?hee(t,e).includes(n):!1}function DS(t,e,n){let r=null;const s=jee(t),i=Lee(e),o=Object.keys(s),a=Object.keys(i),c=US(Object.keys(t)),l=US(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=X("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),_a(o,a)||(r=X("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=uu(e[d].accounts);h.includes(d)||(r=X("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(_a(s[d].methods,i[d].methods)?_a(s[d].events,i[d].events)||(r=X("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=X("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function jee(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function US(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Lee(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=uu(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function Mee(t,e){return tx(t)&&t<=e.max&&t>=e.min}function jS(){const t=Ef();return new Promise(e=>{switch(t){case br.browser:e(Bee());break;case br.reactNative:e(Fee());break;case br.node:e(zee());break;default:e(!0)}})}function Bee(){return au()&&(navigator==null?void 0:navigator.onLine)}async function Fee(){if(na()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function zee(){return!0}function qee(t){switch(Ef()){case br.browser:Hee(t);break;case br.reactNative:Wee(t);break}}function Hee(t){!na()&&au()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Wee(t){na()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function Vee(){var t;return au()&&nc()?((t=nc())==null?void 0:t.visibilityState)==="visible":!0}const Wy={};class Lu{static get(e){return Wy[e]}static set(e,n){Wy[e]=n}static delete(e){delete Wy[e]}}function Gee(t){const e=ru.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function Kee({publicKey:t,signature:e,payload:n}){var r;const s=Rv(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=Jee(n.address),a=n.era==="00"?new Uint8Array([0]):Rv(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${Zee(n.tip)}`),d=Xee(u),h=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),f=Qee(h.length+1);return new Uint8Array([...f,i,...h])}function Yee(t){const e=Rv(t),n=yH.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function Rv(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Zee(t){return t.startsWith("0x")?t.slice(2):t}function Jee(t){const e=ru.decode(t)[0];return e===42?0:e===60?2:1}function Qee(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function Xee(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function ete(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=Gee(t.transaction.address),r=Kee({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return Yee(s)}var tte={};const jk="wc",Lk=2,dg="core",Qs=`${jk}@2:${dg}:`,nte={name:dg,logger:"error"},rte={database:":memory:"},ste="crypto",LS="client_ed25519_seed",ite=J.ONE_DAY,ote="keychain",ate="0.3",cte="messages",lte="0.3",MS=J.SIX_HOURS,ute="publisher",Mk="irn",dte="error",Bk="wss://relay.walletconnect.org",hte="relayer",Gt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},fte="_subscription",Pr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},pte=.1,$v="2.21.3",mt={link_mode:"link_mode",relay:"relay"},Qp={inbound:"inbound",outbound:"outbound"},mte="0.3",gte="WALLETCONNECT_CLIENT_ID",BS="WALLETCONNECT_LINK_MODE_APPS",fr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},yte="subscription",wte="0.3",bte="pairing",vte="0.3",Mu={wc_pairingDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:J.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:J.ONE_DAY,prompt:!1,tag:0},res:{ttl:J.ONE_DAY,prompt:!1,tag:0}}},ga={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Xr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Ete="history",xte="0.3",Cte="expirer",Rr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},_te="0.3",Ste="verify-api",Ate="https://verify.walletconnect.com",Fk="https://verify.walletconnect.org",Nd=Fk,Ite=`${Nd}/v3`,Nte=[Ate,Fk],Tte="echo",Pte="https://echo.walletconnect.com",Os={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},hi={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},es={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},ca={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},la={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},Bu={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Ote=.1,kte="event-client",Rte=86400,$te="https://pulse.walletconnect.org/batch";function Dte(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,v=0,y=0,w=p.length;y!==w&&p[y]===0;)y++,m++;for(var b=(w-y)*u+1>>>0,C=new Uint8Array(b);y!==w;){for(var x=p[y],T=0,N=b-1;(x!==0||T<v)&&N!==-1;N--,T++)x+=256*C[N]>>>0,C[N]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");v=T,y++}for(var U=b-v;U!==b&&C[U]===0;)U++;for(var E=c.repeat(m);U<b;++U)E+=t.charAt(C[U]);return E}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var v=0,y=0;p[m]===c;)v++,m++;for(var w=(p.length-m)*l+1>>>0,b=new Uint8Array(w);p[m];){var C=n[p.charCodeAt(m)];if(C===255)return;for(var x=0,T=w-1;(C!==0||x<y)&&T!==-1;T--,x++)C+=a*b[T]>>>0,b[T]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");y=x,m++}if(p[m]!==" "){for(var N=w-y;N!==w&&b[N]===0;)N++;for(var U=new Uint8Array(v+(w-N)),E=v;N!==w;)U[E++]=b[N++];return U}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Ute=Dte,jte=Ute;const zk=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Lte=t=>new TextEncoder().encode(t),Mte=t=>new TextDecoder().decode(t);class Bte{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Fte{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return qk(this,e)}}class zte{constructor(e){this.decoders=e}or(e){return qk(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const qk=(t,e)=>new zte({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class qte{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Bte(e,n,r),this.decoder=new Fte(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const p0=({name:t,prefix:e,encode:n,decode:r})=>new qte(t,e,n,r),Sf=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=jte(n,e);return p0({prefix:t,name:e,encode:r,decode:i=>zk(s(i))})},Hte=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Wte=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},fn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>p0({prefix:e,name:t,encode(s){return Wte(s,r,n)},decode(s){return Hte(s,r,n,t)}}),Vte=p0({prefix:"\0",name:"identity",encode:t=>Mte(t),decode:t=>Lte(t)});var Gte=Object.freeze({__proto__:null,identity:Vte});const Kte=fn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Yte=Object.freeze({__proto__:null,base2:Kte});const Zte=fn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Jte=Object.freeze({__proto__:null,base8:Zte});const Qte=Sf({prefix:"9",name:"base10",alphabet:"0123456789"});var Xte=Object.freeze({__proto__:null,base10:Qte});const ene=fn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),tne=fn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var nne=Object.freeze({__proto__:null,base16:ene,base16upper:tne});const rne=fn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),sne=fn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ine=fn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),one=fn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ane=fn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),cne=fn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),lne=fn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),une=fn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),dne=fn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var hne=Object.freeze({__proto__:null,base32:rne,base32upper:sne,base32pad:ine,base32padupper:one,base32hex:ane,base32hexupper:cne,base32hexpad:lne,base32hexpadupper:une,base32z:dne});const fne=Sf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),pne=Sf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var mne=Object.freeze({__proto__:null,base36:fne,base36upper:pne});const gne=Sf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yne=Sf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var wne=Object.freeze({__proto__:null,base58btc:gne,base58flickr:yne});const bne=fn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),vne=fn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ene=fn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xne=fn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Cne=Object.freeze({__proto__:null,base64:bne,base64pad:vne,base64url:Ene,base64urlpad:xne});const Hk=Array.from(""),_ne=Hk.reduce((t,e,n)=>(t[n]=e,t),[]),Sne=Hk.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Ane(t){return t.reduce((e,n)=>(e+=_ne[n],e),"")}function Ine(t){const e=[];for(const n of t){const r=Sne[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Nne=p0({prefix:"",name:"base256emoji",encode:Ane,decode:Ine});var Tne=Object.freeze({__proto__:null,base256emoji:Nne}),Pne=Wk,FS=128,One=127,kne=~One,Rne=Math.pow(2,31);function Wk(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Rne;)e[n++]=t&255|FS,t/=128;for(;t&kne;)e[n++]=t&255|FS,t>>>=7;return e[n]=t|0,Wk.bytes=n-r+1,e}var $ne=Dv,Dne=128,zS=127;function Dv(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw Dv.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&zS)<<s:(o&zS)*Math.pow(2,s),s+=7}while(o>=Dne);return Dv.bytes=i-r,n}var Une=Math.pow(2,7),jne=Math.pow(2,14),Lne=Math.pow(2,21),Mne=Math.pow(2,28),Bne=Math.pow(2,35),Fne=Math.pow(2,42),zne=Math.pow(2,49),qne=Math.pow(2,56),Hne=Math.pow(2,63),Wne=function(t){return t<Une?1:t<jne?2:t<Lne?3:t<Mne?4:t<Bne?5:t<Fne?6:t<zne?7:t<qne?8:t<Hne?9:10},Vne={encode:Pne,decode:$ne,encodingLength:Wne},Vk=Vne;const qS=(t,e,n=0)=>(Vk.encode(t,e,n),e),HS=t=>Vk.encodingLength(t),Uv=(t,e)=>{const n=e.byteLength,r=HS(t),s=r+HS(n),i=new Uint8Array(s+n);return qS(t,i,0),qS(n,i,r),i.set(e,s),new Gne(t,n,e,i)};class Gne{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const Gk=({name:t,code:e,encode:n})=>new Kne(t,e,n);class Kne{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?Uv(this.code,n):n.then(r=>Uv(this.code,r))}else throw Error("Unknown type, must be binary type")}}const Kk=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Yne=Gk({name:"sha2-256",code:18,encode:Kk("SHA-256")}),Zne=Gk({name:"sha2-512",code:19,encode:Kk("SHA-512")});var Jne=Object.freeze({__proto__:null,sha256:Yne,sha512:Zne});const Yk=0,Qne="identity",Zk=zk,Xne=t=>Uv(Yk,Zk(t)),ere={code:Yk,name:Qne,encode:Zk,digest:Xne};var tre=Object.freeze({__proto__:null,identity:ere});new TextEncoder,new TextDecoder;const WS={...Gte,...Yte,...Jte,...Xte,...nne,...hne,...mne,...wne,...Cne,...Tne};({...Jne,...tre});function Jk(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function nre(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Jk(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Qk(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const VS=Qk("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Vy=Qk("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=nre(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),rre={utf8:VS,"utf-8":VS,hex:WS.base16,latin1:Vy,ascii:Vy,binary:Vy,...WS};function sre(t,e="utf8"){const n=rre[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Jk(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var ire=Object.defineProperty,ore=(t,e,n)=>e in t?ire(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ts=(t,e,n)=>ore(t,typeof e!="symbol"?e+"":e,n);class are{constructor(e,n){this.core=e,this.logger=n,Ts(this,"keychain",new Map),Ts(this,"name",ote),Ts(this,"version",ate),Ts(this,"initialized",!1),Ts(this,"storagePrefix",Qs),Ts(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Ts(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Ts(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Ts(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=X("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Ts(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Pn(n,this.name)}get context(){return lr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Ev(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?xv(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var cre=Object.defineProperty,lre=(t,e,n)=>e in t?cre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nn=(t,e,n)=>lre(t,typeof e!="symbol"?e+"":e,n);class ure{constructor(e,n,r){this.core=e,this.logger=n,nn(this,"name",ste),nn(this,"keychain"),nn(this,"randomSessionIdentifier",kv()),nn(this,"initialized",!1),nn(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),nn(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),nn(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=Z_(s);return N5(i.publicKey)}),nn(this,"generateKeyPair",()=>{this.isInitialized();const s=HX();return this.setPrivateKey(s.publicKey,s.privateKey)}),nn(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=Z_(i),a=this.randomSessionIdentifier;return await gz(a,s,ite,o)}),nn(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=WX(a,i);return this.setSymKey(c,o)}),nn(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||Jp(s);return await this.keychain.set(o,s),o}),nn(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),nn(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),nn(this,"encode",async(s,i,o)=>{this.isInitialized();const a=$k(o),c=jE(i);if(AS(a))return KX(c,o==null?void 0:o.encoding);if(SS(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return VX({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),nn(this,"decode",async(s,i,o)=>{this.isInitialized();const a=ZX(i,o);if(AS(a)){const c=YX(i,o==null?void 0:o.encoding);return rg(c)}if(SS(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=GX({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return rg(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),nn(this,"getPayloadType",(s,i=ms)=>{const o=Jh({encoded:s,encoding:i});return ic(o.type)}),nn(this,"getPayloadSenderPublicKey",(s,i=ms)=>{const o=Jh({encoded:s,encoding:i});return o.senderPublicKey?or(o.senderPublicKey,Un):void 0}),this.core=e,this.logger=Pn(n,this.name),this.keychain=r||new are(this.core,this.logger)}get context(){return lr(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(LS)}catch{e=kv(),await this.keychain.set(LS,e)}return sre(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var dre=Object.defineProperty,hre=Object.defineProperties,fre=Object.getOwnPropertyDescriptors,GS=Object.getOwnPropertySymbols,pre=Object.prototype.hasOwnProperty,mre=Object.prototype.propertyIsEnumerable,jv=(t,e,n)=>e in t?dre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gre=(t,e)=>{for(var n in e||(e={}))pre.call(e,n)&&jv(t,n,e[n]);if(GS)for(var n of GS(e))mre.call(e,n)&&jv(t,n,e[n]);return t},yre=(t,e)=>hre(t,fre(e)),hr=(t,e,n)=>jv(t,typeof e!="symbol"?e+"":e,n);class wre extends fY{constructor(e,n){super(e,n),this.logger=e,this.core=n,hr(this,"messages",new Map),hr(this,"messagesWithoutClientAck",new Map),hr(this,"name",cte),hr(this,"version",lte),hr(this,"initialized",!1),hr(this,"storagePrefix",Qs),hr(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),hr(this,"set",async(r,s,i)=>{this.isInitialized();const o=Bs(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===Qp.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,yre(gre({},c),{[o]:s}))}return await this.persist(),o}),hr(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),hr(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),hr(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Bs(s);return typeof i[o]<"u"}),hr(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Bs(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),hr(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Pn(e,this.name),this.core=n}get context(){return lr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Ev(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Ev(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?xv(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?xv(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var bre=Object.defineProperty,vre=Object.defineProperties,Ere=Object.getOwnPropertyDescriptors,KS=Object.getOwnPropertySymbols,xre=Object.prototype.hasOwnProperty,Cre=Object.prototype.propertyIsEnumerable,Lv=(t,e,n)=>e in t?bre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_p=(t,e)=>{for(var n in e||(e={}))xre.call(e,n)&&Lv(t,n,e[n]);if(KS)for(var n of KS(e))Cre.call(e,n)&&Lv(t,n,e[n]);return t},Gy=(t,e)=>vre(t,Ere(e)),ts=(t,e,n)=>Lv(t,typeof e!="symbol"?e+"":e,n);class _re extends pY{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,ts(this,"events",new Kr.EventEmitter),ts(this,"name",ute),ts(this,"queue",new Map),ts(this,"publishTimeout",J.toMiliseconds(J.ONE_MINUTE)),ts(this,"initialPublishTimeout",J.toMiliseconds(J.ONE_SECOND*15)),ts(this,"needsTransportRestart",!1),ts(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||MS,c=lg(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||xa().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async m=>{const v=({id:w})=>{h.opts.id===w&&(this.removeRequestFromQueue(w),this.relayer.events.removeListener(Gt.publish,v),m(h))};this.relayer.events.on(Gt.publish,v);const y=So(new Promise((w,b)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(w).catch(C=>{this.logger.warn(C,C==null?void 0:C.message),b(C)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(Gt.publish,v)}catch(w){this.queue.set(d,Gy(_p({},h),{attempt:1})),this.logger.warn(w,w==null?void 0:w.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await So(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),ts(this,"on",(r,s)=>{this.events.on(r,s)}),ts(this,"once",(r,s)=>{this.events.once(r,s)}),ts(this,"off",(r,s)=>{this.events.off(r,s)}),ts(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Pn(n,this.name),this.registerEventListeners()}get context(){return lr(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=MS,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:rd(lg().protocol).publish,params:_p({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};An((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),An((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const m=await this.relayer.request(p);return this.relayer.events.emit(Gt.publish,e),this.logger.debug("Successfully Published Payload"),m}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,Gy(_p({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(Gy(_p({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(fc.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Gt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Gt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var Sre=Object.defineProperty,Are=(t,e,n)=>e in t?Sre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pc=(t,e,n)=>Are(t,typeof e!="symbol"?e+"":e,n);class Ire{constructor(){Pc(this,"map",new Map),Pc(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Pc(this,"get",e=>this.map.get(e)||[]),Pc(this,"exists",(e,n)=>this.get(e).includes(n)),Pc(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Pc(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var Nre=Object.defineProperty,Tre=Object.defineProperties,Pre=Object.getOwnPropertyDescriptors,YS=Object.getOwnPropertySymbols,Ore=Object.prototype.hasOwnProperty,kre=Object.prototype.propertyIsEnumerable,Mv=(t,e,n)=>e in t?Nre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fu=(t,e)=>{for(var n in e||(e={}))Ore.call(e,n)&&Mv(t,n,e[n]);if(YS)for(var n of YS(e))kre.call(e,n)&&Mv(t,n,e[n]);return t},Ky=(t,e)=>Tre(t,Pre(e)),at=(t,e,n)=>Mv(t,typeof e!="symbol"?e+"":e,n);class Rre extends yY{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,at(this,"subscriptions",new Map),at(this,"topicMap",new Ire),at(this,"events",new Kr.EventEmitter),at(this,"name",yte),at(this,"version",wte),at(this,"pending",new Map),at(this,"cached",[]),at(this,"initialized",!1),at(this,"storagePrefix",Qs),at(this,"subscribeTimeout",J.toMiliseconds(J.ONE_MINUTE)),at(this,"initialSubscribeTimeout",J.toMiliseconds(J.ONE_SECOND*15)),at(this,"clientId"),at(this,"batchSubscribeTopicsLimit",500),at(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),at(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=lg(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),at(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),at(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),at(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),at(this,"on",(r,s)=>{this.events.on(r,s)}),at(this,"once",(r,s)=>{this.events.once(r,s)}),at(this,"off",(r,s)=>{this.events.off(r,s)}),at(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),at(this,"start",async()=>{await this.onConnect()}),at(this,"stop",async()=>{await this.onDisconnect()}),at(this,"restart",async()=>{await this.restore(),await this.onRestart()}),at(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),at(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(fc.pulse,async()=>{await this.checkPending()}),this.events.on(fr.created,async r=>{const s=fr.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(fr.deleted,async r=>{const s=fr.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Pn(n,this.name),this.clientId=""}get context(){return lr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=lg(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=wt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===mt.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:rd(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===mt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},J.toMiliseconds(J.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(fr.created,d),u(h.id))};this.events.on(fr.created,d);try{const h=await So(new Promise((f,p)=>{this.relayer.request(i).catch(m=>{this.logger.warn(m,m==null?void 0:m.message),p(m)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(fr.created,d),u(h)}catch{}}),l=await So(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Gt.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:rd(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await So(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Gt.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:rd(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await So(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Gt.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:rd(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,Ky(Fu({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Fu({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Fu({},n)),this.topicMap.set(n.topic,e),this.events.emit(fr.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(fr.deleted,Ky(Fu({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(fr.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(fr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>Ky(Fu({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await hJ(J.toMiliseconds(J.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Bs(e+await this.getClientId())}}var $re=Object.defineProperty,ZS=Object.getOwnPropertySymbols,Dre=Object.prototype.hasOwnProperty,Ure=Object.prototype.propertyIsEnumerable,Bv=(t,e,n)=>e in t?$re(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,JS=(t,e)=>{for(var n in e||(e={}))Dre.call(e,n)&&Bv(t,n,e[n]);if(ZS)for(var n of ZS(e))Ure.call(e,n)&&Bv(t,n,e[n]);return t},Ve=(t,e,n)=>Bv(t,typeof e!="symbol"?e+"":e,n);class jre extends mY{constructor(e){super(e),Ve(this,"protocol","wc"),Ve(this,"version",2),Ve(this,"core"),Ve(this,"logger"),Ve(this,"events",new Kr.EventEmitter),Ve(this,"provider"),Ve(this,"messages"),Ve(this,"subscriber"),Ve(this,"publisher"),Ve(this,"name",hte),Ve(this,"transportExplicitlyClosed",!1),Ve(this,"initialized",!1),Ve(this,"connectionAttemptInProgress",!1),Ve(this,"relayUrl"),Ve(this,"projectId"),Ve(this,"packageName"),Ve(this,"bundleId"),Ve(this,"hasExperiencedNetworkDisruption",!1),Ve(this,"pingTimeout"),Ve(this,"heartBeatTimeout",J.toMiliseconds(J.THIRTY_SECONDS+J.FIVE_SECONDS)),Ve(this,"reconnectTimeout"),Ve(this,"connectPromise"),Ve(this,"reconnectInProgress",!1),Ve(this,"requestsInFlight",[]),Ve(this,"connectTimeout",J.toMiliseconds(J.ONE_SECOND*15)),Ve(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||xa().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Ve(this,"resetPingTimeout",()=>{ig()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Ve(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Ve(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Gt.connect)}),Ve(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Ve(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Gt.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ve(this,"registerProviderListeners",()=>{this.provider.on(Pr.payload,this.onPayloadHandler),this.provider.on(Pr.connect,this.onConnectHandler),this.provider.on(Pr.disconnect,this.onDisconnectHandler),this.provider.on(Pr.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Pn(e.logger,this.name):gf(tu({level:e.logger||dte})),this.messages=new wre(this.logger,e.core),this.subscriber=new Rre(this,this.logger),this.publisher=new _re(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Bk,this.projectId=e.projectId,ZZ()?this.packageName=G2():JZ()&&(this.bundleId=G2()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return lr(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:mt.relay},Qp.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(fr.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(fr.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,JS({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await So(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await jS())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Mt(J.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(Gt.message,e),await this.recordMessageEvent(e,Qp.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Pr.disconnect,i),await So(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Pr.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Pr.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Pr.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,J.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(ig())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Yr(new lW(nJ({sdkVersion:$v,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),$E(e)){if(!e.method.endsWith(fte))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:mt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(JS({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else s0(e)&&this.events.emit(Gt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Qp.inbound),this.events.emit(Gt.message,e))}async acknowledgePayload(e){const n=n0(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Pr.payload,this.onPayloadHandler),this.provider.off(Pr.connect,this.onConnectHandler),this.provider.off(Pr.disconnect,this.onDisconnectHandler),this.provider.off(Pr.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await jS();qee(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(fc.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&Vee())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Gt.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},J.toMiliseconds(pte)))))}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function Lre(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function QS(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function XS(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Mre="[object RegExp]",Bre="[object String]",Fre="[object Number]",zre="[object Boolean]",eA="[object Arguments]",qre="[object Symbol]",Hre="[object Date]",Wre="[object Map]",Vre="[object Set]",Gre="[object Array]",Kre="[object Function]",Yre="[object ArrayBuffer]",Yy="[object Object]",Zre="[object Error]",Jre="[object DataView]",Qre="[object Uint8Array]",Xre="[object Uint8ClampedArray]",ese="[object Uint16Array]",tse="[object Uint32Array]",nse="[object BigUint64Array]",rse="[object Int8Array]",sse="[object Int16Array]",ise="[object Int32Array]",ose="[object BigInt64Array]",ase="[object Float32Array]",cse="[object Float64Array]";function lse(){}function tA(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function use(t,e,n){return sd(t,e,void 0,void 0,void 0,void 0,n)}function sd(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Td(t,e,i,o)}return Td(t,e,i,o)}function Td(t,e,n,r){if(Object.is(t,e))return!0;let s=XS(t),i=XS(e);if(s===eA&&(s=Yy),i===eA&&(i=Yy),s!==i)return!1;switch(s){case Bre:return t.toString()===e.toString();case Fre:{const c=t.valueOf(),l=e.valueOf();return Lre(c,l)}case zre:case Hre:case qre:return Object.is(t.valueOf(),e.valueOf());case Mre:return t.source===e.source&&t.flags===e.flags;case Kre:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case Wre:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!sd(l,e.get(c),c,t,e,n,r))return!1;return!0}case Vre:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>sd(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case Gre:case Qre:case Xre:case ese:case tse:case nse:case rse:case sse:case ise:case ose:case ase:case cse:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!sd(t[c],e[c],c,t,e,n,r))return!1;return!0}case Yre:return t.byteLength!==e.byteLength?!1:Td(new Uint8Array(t),new Uint8Array(e),n,r);case Jre:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Td(new Uint8Array(t),new Uint8Array(e),n,r);case Zre:return t.name===e.name&&t.message===e.message;case Yy:{if(!(Td(t.constructor,e.constructor,n,r)||tA(t)&&tA(e)))return!1;const c=[...Object.keys(t),...QS(t)],l=[...Object.keys(e),...QS(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!sd(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function dse(t,e){return use(t,e,lse)}var hse=Object.defineProperty,nA=Object.getOwnPropertySymbols,fse=Object.prototype.hasOwnProperty,pse=Object.prototype.propertyIsEnumerable,Fv=(t,e,n)=>e in t?hse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rA=(t,e)=>{for(var n in e||(e={}))fse.call(e,n)&&Fv(t,n,e[n]);if(nA)for(var n of nA(e))pse.call(e,n)&&Fv(t,n,e[n]);return t},Vn=(t,e,n)=>Fv(t,typeof e!="symbol"?e+"":e,n);class gc extends gY{constructor(e,n,r,s=Qs,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Vn(this,"map",new Map),Vn(this,"version",mte),Vn(this,"cached",[]),Vn(this,"initialized",!1),Vn(this,"getKey"),Vn(this,"storagePrefix",Qs),Vn(this,"recentlyDeleted",[]),Vn(this,"recentlyDeletedLimit",200),Vn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!An(o)?this.map.set(this.getKey(o),o):vee(o)?this.map.set(o.id,o):Eee(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Vn(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Vn(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Vn(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>dse(a[c],o[c]))):this.values)),Vn(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=rA(rA({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Vn(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Pn(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return lr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=X("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var mse=Object.defineProperty,gse=(t,e,n)=>e in t?mse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,je=(t,e,n)=>gse(t,typeof e!="symbol"?e+"":e,n);class yse{constructor(e,n){this.core=e,this.logger=n,je(this,"name",bte),je(this,"version",vte),je(this,"events",new bE),je(this,"pairings"),je(this,"initialized",!1),je(this,"storagePrefix",Qs),je(this,"ignoredPayloadTypes",[Ai]),je(this,"registeredMethods",[]),je(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),je(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),je(this,"create",async r=>{this.isInitialized();const s=kv(),i=await this.core.crypto.setSymKey(s),o=Mt(J.FIVE_MINUTES),a={protocol:Mk},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=NS({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(ga.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),je(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Os.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=IS(r.uri);s.props.properties.topic=i,s.addTrace(Os.pairing_uri_validation_success),s.addTrace(Os.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Os.existing_pairing),u.active)throw s.setError(hi.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Os.pairing_not_expired)}const d=c||Mt(J.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(Os.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(ga.create,h),s.addTrace(Os.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Os.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(hi.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(hi.subscribe_pairing_topic_failure),f}return s.addTrace(Os.subscribe_pairing_topic_success),h}),je(this,"activate",async({topic:r})=>{this.isInitialized();const s=Mt(J.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),je(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=pa();this.events.once(Je("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),je(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),je(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),je(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),je(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",wt("USER_DISCONNECTED")),await this.deletePairing(s))}),je(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return NS({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),je(this,"sendRequest",async(r,s,i)=>{const o=Co(s,i),a=await this.core.crypto.encode(r,o),c=Mu[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),je(this,"sendResult",async(r,s,i)=>{const o=n0(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Mu[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),je(this,"sendError",async(r,s,i)=>{const o=r0(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Mu[c]?Mu[c].res:Mu.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),je(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,wt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),je(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>oo(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),je(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),je(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),je(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(ga.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),je(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{$s(s)?this.events.emit(Je("pairing_ping",i),{}):Dr(s)&&this.events.emit(Je("pairing_ping",i),{error:s.error})},500)}),je(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(ga.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),je(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=wt("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),je(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(wt("WC_METHOD_UNSUPPORTED",r))}),je(this,"isValidPair",(r,s)=>{var i;if(!Yn(r)){const{message:a}=X("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(hi.malformed_pairing_uri),new Error(a)}if(!bee(r.uri)){const{message:a}=X("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(hi.malformed_pairing_uri),new Error(a)}const o=IS(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=X("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(hi.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=X("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(hi.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&J.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(hi.pairing_expired);const{message:a}=X("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),je(this,"isValidPing",async r=>{if(!Yn(r)){const{message:i}=X("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),je(this,"isValidDisconnect",async r=>{if(!Yn(r)){const{message:i}=X("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),je(this,"isValidPairingTopic",async r=>{if(!$t(r,!1)){const{message:s}=X("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=X("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(oo(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=X("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Pn(n,this.name),this.pairings=new gc(this.core,this.logger,this.name,this.storagePrefix)}get context(){return lr(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Gt.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==mt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);$E(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):s0(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Rr.expired,async e=>{const{topic:n}=HO(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(ga.expire,{topic:n}))})}}var wse=Object.defineProperty,bse=(t,e,n)=>e in t?wse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rn=(t,e,n)=>bse(t,typeof e!="symbol"?e+"":e,n);class vse extends hY{constructor(e,n){super(e,n),this.core=e,this.logger=n,rn(this,"records",new Map),rn(this,"events",new Kr.EventEmitter),rn(this,"name",Ete),rn(this,"version",xte),rn(this,"cached",[]),rn(this,"initialized",!1),rn(this,"storagePrefix",Qs),rn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),rn(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Mt(J.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Xr.created,o)}),rn(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Dr(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Xr.updated,s))}),rn(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),rn(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Xr.deleted,i)}}),this.persist()}),rn(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),rn(this,"on",(r,s)=>{this.events.on(r,s)}),rn(this,"once",(r,s)=>{this.events.once(r,s)}),rn(this,"off",(r,s)=>{this.events.off(r,s)}),rn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Pn(n,this.name)}get context(){return lr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Co(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Xr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Xr.created,e=>{const n=Xr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Xr.updated,e=>{const n=Xr.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Xr.deleted,e=>{const n=Xr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(fc.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{J.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Xr.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Ese=Object.defineProperty,xse=(t,e,n)=>e in t?Ese(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xn=(t,e,n)=>xse(t,typeof e!="symbol"?e+"":e,n);class Cse extends wY{constructor(e,n){super(e,n),this.core=e,this.logger=n,xn(this,"expirations",new Map),xn(this,"events",new Kr.EventEmitter),xn(this,"name",Cte),xn(this,"version",_te),xn(this,"cached",[]),xn(this,"initialized",!1),xn(this,"storagePrefix",Qs),xn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),xn(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),xn(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Rr.created,{target:i,expiration:o})}),xn(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),xn(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Rr.deleted,{target:s,expiration:i})}}),xn(this,"on",(r,s)=>{this.events.on(r,s)}),xn(this,"once",(r,s)=>{this.events.once(r,s)}),xn(this,"off",(r,s)=>{this.events.off(r,s)}),xn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Pn(n,this.name)}get context(){return lr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return rJ(e);if(typeof e=="number")return sJ(e);const{message:n}=X("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Rr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;J.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Rr.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(fc.pulse,()=>this.checkExpirations()),this.events.on(Rr.created,e=>{const n=Rr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Rr.expired,e=>{const n=Rr.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Rr.deleted,e=>{const n=Rr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var _se=Object.defineProperty,Sse=(t,e,n)=>e in t?_se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kt=(t,e,n)=>Sse(t,typeof e!="symbol"?e+"":e,n);class Ase extends bY{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,kt(this,"name",Ste),kt(this,"abortController"),kt(this,"isDevEnv"),kt(this,"verifyUrlV3",Ite),kt(this,"storagePrefix",Qs),kt(this,"version",Lk),kt(this,"publicKey"),kt(this,"fetchPromise"),kt(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&J.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),kt(this,"register",async s=>{if(!au()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=nc(),u=this.startAbortTimer(J.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",v),l.body.removeChild(m),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const m=l.createElement("iframe");m.src=c,m.style.display="none",m.addEventListener("error",p,{signal:this.abortController.signal});const v=y=>{if(y.data&&typeof y.data=="string")try{const w=JSON.parse(y.data);if(w.type==="verify_attestation"){if(sv(w.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(m),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",v),h(w.attestation===null?"":w.attestation)}}catch(w){this.logger.warn(w)}};l.body.appendChild(m),window.addEventListener("message",v,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),kt(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(sv(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),kt(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(J.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),kt(this,"getVerifyUrl",s=>{let i=s||Nd;return Nte.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${Nd}`),i=Nd),i}),kt(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(J.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),kt(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),kt(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),kt(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),kt(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),kt(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),kt(this,"validateAttestation",(s,i)=>{const o=QX(s,i.publicKey),a={hasExpired:J.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Pn(n,this.name),this.abortController=new AbortController,this.isDevEnv=zE(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return lr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),J.toMiliseconds(e))}}var Ise=Object.defineProperty,Nse=(t,e,n)=>e in t?Ise(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sA=(t,e,n)=>Nse(t,typeof e!="symbol"?e+"":e,n);class Tse extends vY{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,sA(this,"context",Tte),sA(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${Pte}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Pn(n,this.context)}}var Pse=Object.defineProperty,iA=Object.getOwnPropertySymbols,Ose=Object.prototype.hasOwnProperty,kse=Object.prototype.propertyIsEnumerable,zv=(t,e,n)=>e in t?Pse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zu=(t,e)=>{for(var n in e||(e={}))Ose.call(e,n)&&zv(t,n,e[n]);if(iA)for(var n of iA(e))kse.call(e,n)&&zv(t,n,e[n]);return t},qt=(t,e,n)=>zv(t,typeof e!="symbol"?e+"":e,n);class Rse extends EY{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,qt(this,"context",kte),qt(this,"storagePrefix",Qs),qt(this,"storageVersion",Ote),qt(this,"events",new Map),qt(this,"shouldPersist",!1),qt(this,"init",async()=>{if(!zE())try{const s={eventId:Y2(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:zO(this.core.relayer.protocol,this.core.relayer.version,$v)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),qt(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=Y2(),u=this.core.projectId||"",d=Date.now(),h=zu({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),qt(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return zu(zu({},a),this.setMethods(a.eventId))}),qt(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),qt(this,"setEventListeners",()=>{this.core.heartbeat.on(fc.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{J.fromMiliseconds(Date.now())-J.fromMiliseconds(s.timestamp)>Rte&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),qt(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),qt(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),qt(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),qt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),qt(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,zu(zu({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),qt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),qt(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${$te}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${$v}${i}`,{method:"POST",body:JSON.stringify(s)})}),qt(this,"getAppDomain",()=>FO().url),this.logger=Pn(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var $se=Object.defineProperty,oA=Object.getOwnPropertySymbols,Dse=Object.prototype.hasOwnProperty,Use=Object.prototype.propertyIsEnumerable,qv=(t,e,n)=>e in t?$se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aA=(t,e)=>{for(var n in e||(e={}))Dse.call(e,n)&&qv(t,n,e[n]);if(oA)for(var n of oA(e))Use.call(e,n)&&qv(t,n,e[n]);return t},lt=(t,e,n)=>qv(t,typeof e!="symbol"?e+"":e,n);let jse=class Xk extends cY{constructor(e){var n;super(e),lt(this,"protocol",jk),lt(this,"version",Lk),lt(this,"name",dg),lt(this,"relayUrl"),lt(this,"projectId"),lt(this,"customStoragePrefix"),lt(this,"events",new Kr.EventEmitter),lt(this,"logger"),lt(this,"heartbeat"),lt(this,"relayer"),lt(this,"crypto"),lt(this,"storage"),lt(this,"history"),lt(this,"expirer"),lt(this,"pairing"),lt(this,"verify"),lt(this,"echoClient"),lt(this,"linkModeSupportedApps"),lt(this,"eventClient"),lt(this,"initialized",!1),lt(this,"logChunkController"),lt(this,"on",(a,c)=>this.events.on(a,c)),lt(this,"once",(a,c)=>this.events.once(a,c)),lt(this,"off",(a,c)=>this.events.off(a,c)),lt(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),lt(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:mt.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Bk,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=tu({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:nte.logger,name:dg}),{logger:i,chunkLoggerController:o}=EE({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Pn(i,this.name),this.heartbeat=new j9,this.crypto=new ure(this,this.logger,e==null?void 0:e.keychain),this.history=new vse(this,this.logger),this.expirer=new Cse(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new iY(aA(aA({},rte),e==null?void 0:e.storageOptions)),this.relayer=new jre({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new yse(this,this.logger),this.verify=new Ase(this,this.logger,this.storage),this.echoClient=new Tse(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Rse(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new Xk(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(gte,r),n}get context(){return lr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(BS,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(BS)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&tte.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const Lse=jse,eR="wc",tR=2,nR="client",nx=`${eR}@${tR}:${nR}:`,Zy={name:nR,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"},cA="WALLETCONNECT_DEEPLINK_CHOICE",Mse="proposal",lA="Proposal expired",Bse="session",Oc=J.SEVEN_DAYS,Fse="engine",Ht={wc_sessionPropose:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1104},res:{ttl:J.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1106},res:{ttl:J.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1112},res:{ttl:J.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1114},res:{ttl:J.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:J.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:J.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1119}}},Jy={min:J.FIVE_MINUTES,max:J.SEVEN_DAYS},Ps={idle:"IDLE",active:"ACTIVE"},zse={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},qse="request",Hse=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Wse="wc",Vse="auth",Gse="authKeys",Kse="pairingTopics",Yse="requests",m0=`${Wse}@${1.5}:${Vse}:`,Xp=`${m0}:PUB_KEY`;var Zse=Object.defineProperty,Jse=Object.defineProperties,Qse=Object.getOwnPropertyDescriptors,uA=Object.getOwnPropertySymbols,Xse=Object.prototype.hasOwnProperty,eie=Object.prototype.propertyIsEnumerable,Hv=(t,e,n)=>e in t?Zse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ft=(t,e)=>{for(var n in e||(e={}))Xse.call(e,n)&&Hv(t,n,e[n]);if(uA)for(var n of uA(e))eie.call(e,n)&&Hv(t,n,e[n]);return t},Gn=(t,e)=>Jse(t,Qse(e)),W=(t,e,n)=>Hv(t,typeof e!="symbol"?e+"":e,n);class tie extends SY{constructor(e){super(e),W(this,"name",Fse),W(this,"events",new bE),W(this,"initialized",!1),W(this,"requestQueue",{state:Ps.idle,queue:[]}),W(this,"sessionRequestQueue",{state:Ps.idle,queue:[]}),W(this,"requestQueueDelay",J.ONE_SECOND),W(this,"expectedPairingMethodMap",new Map),W(this,"recentlyDeletedMap",new Map),W(this,"recentlyDeletedLimit",200),W(this,"relayMessageCache",[]),W(this,"pendingSessions",new Map),W(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Ht)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay)))}),W(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Gn(ft({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=pee(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const T=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=T.active}}catch(T){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),T}if(!u||!h){const{topic:T,uri:N}=await this.client.core.pairing.create();u=T,d=N}if(!u){const{message:T}=X("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(T)}const f=await this.client.core.crypto.generateKeyPair(),p=Ht.wc_sessionPropose.req.ttl||J.FIVE_MINUTES,m=Mt(p),v=Gn(ft(ft({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:Mk}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:m,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Rs()}),y=Je("session_connect",v.id),{reject:w,resolve:b,done:C}=pa(p,lA),x=({id:T})=>{T===v.id&&(this.client.events.off("proposal_expire",x),this.pendingSessions.delete(v.id),this.events.emit(y,{error:{message:lA,code:0}}))};return this.client.events.on("proposal_expire",x),this.events.once(y,({error:T,session:N})=>{this.client.events.off("proposal_expire",x),T?w(T):N&&b(N)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:v,throwOnFailedPublish:!0,clientRpcId:v.id}),await this.setProposal(v.id,v),{uri:d,approval:C}}),W(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),W(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[es.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(E){throw o.setError(ca.no_internet_connection),E}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(E){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(ca.proposal_not_found),E}try{await this.isValidApprove(n)}catch(E){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(ca.session_approve_namespace_validation_failure),E}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:m,requiredNamespaces:v,optionalNamespaces:y}=f;let w=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});w||(w=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:es.session_approve_started,properties:{topic:p,trace:[es.session_approve_started,es.session_namespaces_validation_success]}}));const b=await this.client.core.crypto.generateKeyPair(),C=m.publicKey,x=await this.client.core.crypto.generateSharedKey(b,C),T=ft(ft(ft({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:b,metadata:this.client.metadata},expiry:Mt(Oc)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),N=mt.relay;w.addTrace(es.subscribing_session_topic);try{await this.client.core.relayer.subscribe(x,{transportType:N})}catch(E){throw w.setError(ca.subscribe_session_topic_failure),E}w.addTrace(es.subscribe_session_topic_success);const U=Gn(ft({},T),{topic:x,requiredNamespaces:v,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:T.controller,peer:{publicKey:m.publicKey,metadata:m.metadata},controller:b,transportType:mt.relay});await this.client.session.set(x,U),w.addTrace(es.store_session);try{w.addTrace(es.publishing_session_settle),await this.sendRequest({topic:x,method:"wc_sessionSettle",params:T,throwOnFailedPublish:!0}).catch(E=>{throw w==null||w.setError(ca.session_settle_publish_failure),E}),w.addTrace(es.session_settle_publish_success),w.addTrace(es.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:b},throwOnFailedPublish:!0}).catch(E=>{throw w==null||w.setError(ca.session_approve_publish_failure),E}),w.addTrace(es.session_approve_publish_success)}catch(E){throw this.client.logger.error(E),this.client.session.delete(x,wt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(x),E}return this.client.core.eventClient.deleteEvent({eventId:w.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:m.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(x,Mt(Oc)),{topic:x,acknowledged:()=>Promise.resolve(this.client.session.get(x))}}),W(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:Ht.wc_sessionPropose.reject}),await this.deleteProposal(r)}),W(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=pa(),c=Rs(),l=xa().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Je("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),W(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Rs(),{done:i,resolve:o,reject:a}=pa();return this.events.once(Je("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Mt(Oc)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),W(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(v){throw this.client.logger.error("request() -> isValidRequest() failed"),v}const{chainId:r,request:s,topic:i,expiry:o=Ht.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===mt.relay&&await this.confirmOnlineStateOrThrow();const c=Rs(),l=xa().toString(),{done:u,resolve:d,reject:h}=pa(o,"Request expired. Please try again.");this.events.once(Je("session_request",c),({error:v,result:y})=>{v?h(v):d(y)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:Gn(ft({},s),{expiryTimestamp:Mt(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(v=>h(v)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const m={request:Gn(ft({},s),{expiryTimestamp:Mt(o)}),chainId:r};return await Promise.all([new Promise(async v=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:m,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,m)}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),v()}),new Promise(async v=>{var y;if(!((y=a.sessionConfig)!=null&&y.disableDeepLink)){const w=await cJ(this.client.core.storage,cA);await iJ({id:c,topic:i,wcDeepLink:w})}v()}),u()]).then(v=>v[2])}),W(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===mt.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);$s(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Dr(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),W(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Rs(),i=xa().toString(),{done:o,resolve:a,reject:c}=pa();this.events.once(Je("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),W(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=xa().toString(),a=Rs();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),W(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:wt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=X("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),W(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>yee(r,n)))),W(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),W(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?mt.link_mode:mt.relay;o===mt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:m=[],expiry:v}=n,y=[...n.resources||[]],{topic:w,uri:b}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:b}});const C=await this.client.core.crypto.generateKeyPair(),x=Jp(C);if(await Promise.all([this.client.auth.authKeys.set(Xp,{responseTopic:x,publicKey:C}),this.client.auth.pairingTopics.set(x,{topic:x,pairingTopic:w})]),await this.client.core.relayer.subscribe(x,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${w}`),m.length>0){const{namespace:O}=wl(a[0]);let D=CQ(O,"request",m);Zp(y)&&(D=SQ(D,y.pop())),y.push(D)}const T=v&&v>Ht.wc_sessionAuthenticate.req.ttl?v:Ht.wc_sessionAuthenticate.req.ttl,N={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:C,metadata:this.client.metadata},expiryTimestamp:Mt(T)},U={eip155:{chains:a,methods:[...new Set(["personal_sign",...m])],events:["chainChanged","accountsChanged"]}},E={requiredNamespaces:{},optionalNamespaces:U,relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:C,metadata:this.client.metadata},expiryTimestamp:Mt(Ht.wc_sessionPropose.req.ttl),id:Rs()},{done:k,resolve:R,reject:j}=pa(T,"Request expired"),L=Rs(),B=Je("session_connect",E.id),S=Je("session_request",L),I=async({error:O,session:D})=>{this.events.off(S,$),O?j(O):D&&R({session:D})},$=async O=>{var D,M,H;if(await this.deletePendingAuthRequest(L,{message:"fulfilled",code:0}),O.error){const Ue=wt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return O.error.code===Ue.code?void 0:(this.events.off(B,I),j(O.error.message))}await this.deleteProposal(E.id),this.events.off(B,I);const{cacaos:Z,responder:F}=O.result,Q=[],me=[];for(const Ue of Z){await oS({cacao:Ue,projectId:this.client.core.projectId})||(this.client.logger.error(Ue,"Signature verification failed"),j(wt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Tt}=Ue,Xt=Zp(Tt.resources),ra=[Cv(Tt.iss)],Nf=og(Tt.iss);if(Xt){const bc=aS(Xt),y0=cS(Xt);Q.push(...bc),ra.push(...y0)}for(const bc of ra)me.push(`${bc}:${Nf}`)}const De=await this.client.core.crypto.generateSharedKey(C,F.publicKey);let ze;Q.length>0&&(ze={topic:De,acknowledged:!0,self:{publicKey:C,metadata:this.client.metadata},peer:F,controller:F.publicKey,expiry:Mt(Oc),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:kS([...new Set(Q)],[...new Set(me)]),transportType:o},await this.client.core.relayer.subscribe(De,{transportType:o}),await this.client.session.set(De,ze),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:F.metadata}),ze=this.client.session.get(De)),(D=this.client.metadata.redirect)!=null&&D.linkMode&&(M=F.metadata.redirect)!=null&&M.linkMode&&(H=F.metadata.redirect)!=null&&H.universal&&r&&(this.client.core.addLinkModeSupportedApp(F.metadata.redirect.universal),this.client.session.update(De,{transportType:mt.link_mode})),R({auths:Z,session:ze})};this.events.once(B,I),this.events.once(S,$);let A;try{if(i){const O=Co("wc_sessionAuthenticate",N,L);this.client.core.history.set(w,O);const D=await this.client.core.crypto.encode("",O,{type:_f,encoding:po});A=Cp(r,w,D)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:N,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:L}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:E,expiry:Ht.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:E.id})])}catch(O){throw this.events.off(B,I),this.events.off(S,$),O}return await this.setProposal(E.id,E),await this.setAuthRequest(L,{request:Gn(ft({},N),{verifyContext:{}}),pairingTopic:w,transportType:o}),{uri:A??b,response:k}}),W(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[la.authenticated_session_approve_started]}});try{this.isInitialized()}catch(v){throw i.setError(Bu.no_internet_connection),v}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Bu.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||mt.relay;a===mt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=Jp(c),d={type:Ai,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const v of s){if(!await oS({cacao:v,projectId:this.client.core.projectId})){i.setError(Bu.invalid_cacao);const x=wt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:x,encodeOpts:d}),new Error(x.message)}i.addTrace(la.cacaos_verified);const{p:y}=v,w=Zp(y.resources),b=[Cv(y.iss)],C=og(y.iss);if(w){const x=aS(w),T=cS(w);h.push(...x),b.push(...T)}for(const x of b)f.push(`${x}:${C}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(la.create_authenticated_session_topic);let m;if((h==null?void 0:h.length)>0){m={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Mt(Oc),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:kS([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(la.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(v){throw i.setError(Bu.subscribe_authenticated_session_topic_failure),v}i.addTrace(la.subscribe_authenticated_session_topic_success),await this.client.session.set(p,m),i.addTrace(la.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(la.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(v){throw i.setError(Bu.authenticated_session_approve_publish_failure),v}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:m}}),W(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===mt.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Jp(o),l={type:Ai,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Ht.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),W(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return ik(r,s)}),W(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),W(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),W(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,wt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(cA).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,wt("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Ps.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),W(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(ca.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,wt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),W(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Ps.idle,this.client.events.emit("session_request_expire",{id:n}))}),W(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),W(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),W(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Mt(Ht.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),W(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=mt.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),W(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Mt(Ht.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),W(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Co(s,i,c);let f;const p=!!u;try{const y=p?po:ms;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let m;if(Hse.includes(s)){const y=Bs(JSON.stringify(h)),w=Bs(f);m=await this.client.core.verify.register({id:w,decryptedId:y})}const v=Ht[s].req;if(v.attestation=m,o&&(v.ttl=o),a&&(v.id=a),this.client.core.history.set(r,h),p){const y=Cp(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=Ht[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=Gn(ft({},d),{correlationId:h.id}),l?(y.internal=Gn(ft({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(w=>this.client.logger.error(w))}return h.id}),W(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=n0(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?po:ms;u=await this.client.core.crypto.encode(s,l,Gn(ft({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{f=this.getTVFParams(r,p.params,i)}catch(m){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${m==null?void 0:m.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=Cp(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,m=Ht[p].res;m.tvf=Gn(ft({},f),{correlationId:r}),o?(m.internal=Gn(ft({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,m)):this.client.core.relayer.publish(s,u,m).catch(v=>this.client.logger.error(v))}await this.client.core.history.resolve(l)}),W(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=r0(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?po:ms;u=await this.client.core.crypto.encode(s,l,Gn(ft({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=Cp(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||Ht[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),W(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;oo(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{oo(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),W(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),W(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),W(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Ps.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Ps.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Ps.idle}),W(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),W(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),W(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=X("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),W(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),W(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(hi.proposal_listener_not_found)),this.isValidConnect(ft({},s.params));const u=a.expiryTimestamp||Mt(Ht.wc_sessionPropose.req.ttl),d=ft({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Bs(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(Os.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Ht.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),W(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if($s(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Dr(r)){await this.deleteProposal(i);const o=Je("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),W(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(v=>v.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),m=Gn(ft(ft(ft({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:mt.relay});await this.client.session.set(m.topic,m),await this.setExpiry(m.topic,m.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:m.peer.metadata}),this.client.events.emit("session_connect",{session:m}),this.events.emit(Je("session_connect",f.proposalId),{session:m}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(m),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),W(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;$s(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Je("session_approve",s),{})):Dr(r)&&(await this.client.session.delete(n,wt("USER_DISCONNECTED")),this.events.emit(Je("session_approve",s),{error:r.error}))}),W(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=Lu.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:wt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(ft({topic:n},s));try{Lu.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw Lu.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),W(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),W(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Je("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);$s(r)?this.events.emit(Je("session_update",s),{}):Dr(r)&&this.events.emit(Je("session_update",s),{error:r.error})}),W(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Mt(Oc)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),W(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Je("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);$s(r)?this.events.emit(Je("session_extend",s),{}):Dr(r)&&this.events.emit(Je("session_extend",s),{error:r.error})}),W(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),W(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Je("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);$s(r)?this.events.emit(Je("session_ping",s),{}):Dr(r)&&this.events.emit(Je("session_ping",s),{error:r.error})},500)}),W(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Gt.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:wt("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),W(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(ft({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Bs(JSON.stringify(Co("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),m={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(m),u===mt.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(m):(this.addSessionRequestToSessionRequestQueue(m),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),W(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Je("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);$s(r)?this.events.emit(Je("session_request",s),{result:r.result}):Dr(r)&&this.events.emit(Je("session_request",s),{error:r.error})}),W(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=Lu.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(ft({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Lu.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),W(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),$s(r)?this.events.emit(Je("session_request",s),{result:r.result}):Dr(r)&&this.events.emit(Je("session_request",s),{error:r.error})}),W(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Bs(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===mt.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Ai,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:Ht.wc_sessionAuthenticate.autoReject,appLink:h})}}),W(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),W(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Ps.idle,this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay))}),W(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Je("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Je("session_request",i.request.id),{error:r})})}),W(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Ps.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Ps.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),W(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),W(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Co("wc_sessionPropose",Gn(ft({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),W(this,"isValidConnect",async n=>{if(!Yn(n)){const{message:l}=X("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(An(r)||await this.isValidPairingTopic(r),!Tee(c)){const{message:l}=X("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!An(s)&&Uo(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!An(i)&&Uo(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),An(o)||this.validateSessionProps(o,"sessionProperties"),!An(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),W(this,"validateNamespaces",(n,r)=>{const s=Nee(n,"connect()",r);if(s)throw new Error(s.message)}),W(this,"isValidApprove",async n=>{if(!Yn(n))throw new Error(X("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=Hy(s,"approve()");if(l)throw new Error(l.message);const u=DS(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!$t(i,!0)){const{message:d}=X("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(An(o)||this.validateSessionProps(o,"sessionProperties"),!An(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),W(this,"isValidReject",async n=>{if(!Yn(n)){const{message:i}=X("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!Oee(s)){const{message:i}=X("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),W(this,"isValidSessionSettleRequest",n=>{if(!Yn(n)){const{message:l}=X("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!Uk(r)){const{message:l}=X("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=xee(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Hy(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(oo(o)){const{message:l}=X("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),W(this,"isValidUpdate",async n=>{if(!Yn(n)){const{message:c}=X("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=Hy(s,"update()");if(o)throw new Error(o.message);const a=DS(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),W(this,"isValidExtend",async n=>{if(!Yn(n)){const{message:s}=X("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),W(this,"isValidRequest",async n=>{if(!Yn(n)){const{message:c}=X("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!$S(a,i)){const{message:c}=X("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!kee(s)){const{message:c}=X("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!Dee(a,i,s.method)){const{message:c}=X("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!Mee(o,Jy)){const{message:c}=X("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Jy.min} and ${Jy.max}`);throw new Error(c)}}),W(this,"isValidRespond",async n=>{var r;if(!Yn(n)){const{message:o}=X("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!Ree(i)){const{message:o}=X("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),W(this,"isValidPing",async n=>{if(!Yn(n)){const{message:s}=X("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),W(this,"isValidEmit",async n=>{if(!Yn(n)){const{message:a}=X("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!$S(o,i)){const{message:a}=X("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!$ee(s)){const{message:a}=X("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!Uee(o,i,s.name)){const{message:a}=X("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),W(this,"isValidDisconnect",async n=>{if(!Yn(n)){const{message:s}=X("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),W(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!$t(s,!1))throw new Error("uri is required parameter");if(!$t(i,!1))throw new Error("domain is required parameter");if(!$t(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>wl(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=wl(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),W(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||Nd,validation:"UNKNOWN",origin:o.url||""}};try{if(a===mt.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),W(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=X("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),W(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),W(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),W(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=X("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),W(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==mt.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),W(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),W(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=K2(n,"topic")||"",s=decodeURIComponent(K2(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:mt.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),W(this,"registerLinkModeListeners",async()=>{var n;if(zE()||na()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),W(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),W(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),W(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=zse[i];if(i==="sui_signTransaction")return[aQ(r.transactionBytes)];if(i==="near_signTransaction")return[nS(r)];if(i==="near_signTransactions")return r.map(c=>nS(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[ete({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return Ii(r)?r.map(c=>rS(c)):[rS(r)];if(i==="cosmos_signDirect")return[lQ(r)];if(typeof r=="string")return[r];const a=r[o.key];if(Ii(a))return i==="solana_signAllTransactions"?a.map(c=>oQ(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Gt.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Xp)?this.client.auth.authKeys.get(Xp):{responseTopic:void 0,publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===mt.link_mode?po:ms});$E(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Bs(r)})):s0(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Rr.expired,async e=>{const{topic:n,id:r}=HO(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,X("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,X("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(ga.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ga.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!$t(e,!1)){const{message:n}=X("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=X("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(oo(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=X("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!$t(e,!1)){const{message:n}=X("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=X("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(oo(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=X("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=X("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if($t(e,!1)){const{message:n}=X("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=X("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!Pee(e)){const{message:n}=X("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=X("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(oo(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=X("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class nie extends gc{constructor(e,n){super(e,n,Mse,nx),this.core=e,this.logger=n}}let rie=class extends gc{constructor(e,n){super(e,n,Bse,nx),this.core=e,this.logger=n}};class sie extends gc{constructor(e,n){super(e,n,qse,nx,r=>r.id),this.core=e,this.logger=n}}class iie extends gc{constructor(e,n){super(e,n,Gse,m0,()=>Xp),this.core=e,this.logger=n}}class oie extends gc{constructor(e,n){super(e,n,Kse,m0),this.core=e,this.logger=n}}class aie extends gc{constructor(e,n){super(e,n,Yse,m0,r=>r.id),this.core=e,this.logger=n}}var cie=Object.defineProperty,lie=(t,e,n)=>e in t?cie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qy=(t,e,n)=>lie(t,typeof e!="symbol"?e+"":e,n);class uie{constructor(e,n){this.core=e,this.logger=n,Qy(this,"authKeys"),Qy(this,"pairingTopics"),Qy(this,"requests"),this.authKeys=new iie(this.core,this.logger),this.pairingTopics=new oie(this.core,this.logger),this.requests=new aie(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var die=Object.defineProperty,hie=(t,e,n)=>e in t?die(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Le=(t,e,n)=>hie(t,typeof e!="symbol"?e+"":e,n);let fie=class rR extends _Y{constructor(e){super(e),Le(this,"protocol",eR),Le(this,"version",tR),Le(this,"name",Zy.name),Le(this,"metadata"),Le(this,"core"),Le(this,"logger"),Le(this,"events",new Kr.EventEmitter),Le(this,"engine"),Le(this,"session"),Le(this,"proposal"),Le(this,"pendingRequest"),Le(this,"auth"),Le(this,"signConfig"),Le(this,"on",(r,s)=>this.events.on(r,s)),Le(this,"once",(r,s)=>this.events.once(r,s)),Le(this,"off",(r,s)=>this.events.off(r,s)),Le(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Le(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Le(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Le(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Le(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Le(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Le(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Le(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Le(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Le(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Le(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Le(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Le(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Le(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Le(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Le(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Le(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Le(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Le(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||Zy.name,this.metadata=XZ(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:gf(tu({level:(e==null?void 0:e.logger)||Zy.logger}));this.core=(e==null?void 0:e.core)||new Lse(e),this.logger=Pn(n,this.name),this.session=new rie(this.core,this.logger),this.proposal=new nie(this.core,this.logger),this.pendingRequest=new sie(this.core,this.logger),this.engine=new tie(this),this.auth=new uie(this.core,this.logger)}static async init(e){const n=new rR(e);return await n.initialize(),n}get context(){return lr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},J.toMiliseconds(J.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const dA="error",pie="wss://relay.walletconnect.org",mie="wc",gie="universal_provider",Sp=`${mie}@2:${gie}:`,sR="https://rpc.walletconnect.org/v1/",Wc="generic",yie=`${sR}bundler`,Zr={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function rx(t){return t==null||typeof t!="object"&&typeof t!="function"}function iR(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function oR(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const wie="[object RegExp]",aR="[object String]",cR="[object Number]",lR="[object Boolean]",uR="[object Arguments]",bie="[object Symbol]",vie="[object Date]",Eie="[object Map]",xie="[object Set]",Cie="[object Array]",_ie="[object ArrayBuffer]",Sie="[object Object]",Aie="[object DataView]",Iie="[object Uint8Array]",Nie="[object Uint8ClampedArray]",Tie="[object Uint16Array]",Pie="[object Uint32Array]",Oie="[object Int8Array]",kie="[object Int16Array]",Rie="[object Int32Array]",$ie="[object Float32Array]",Die="[object Float64Array]";function sx(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Uie(t,e){return al(t,void 0,t,new Map,e)}function al(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(rx(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=al(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,al(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(al(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(sx(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=al(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),ya(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),ya(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),ya(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,ya(o,t,n,r,s),o}if(typeof t=="object"&&jie(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),ya(o,t,n,r,s),o}return t}function ya(t,e,n=t,r,s){const i=[...Object.keys(e),...iR(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=al(e[a],a,n,r,s))}}function jie(t){switch(oR(t)){case uR:case Cie:case _ie:case Aie:case lR:case vie:case $ie:case Die:case Oie:case kie:case Rie:case Eie:case cR:case Sie:case wie:case xie:case aR:case bie:case Iie:case Nie:case Tie:case Pie:return!0;default:return!1}}function Lie(t,e){return Uie(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case cR:case aR:case lR:{const o=new t.constructor(t==null?void 0:t.valueOf());return ya(o,t),o}case uR:{const o={};return ya(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function hA(t){return Lie(t)}function fA(t){return t!==null&&typeof t=="object"&&oR(t)==="[object Arguments]"}function pA(t){return typeof t=="object"&&t!==null}function Mie(){}function Bie(t){return sx(t)}function Fie(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function zie(t){if(rx(t))return t;if(Array.isArray(t)||sx(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function qie(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=Wv(s,o,r,new Map)}return s}function Wv(t,e,n,r){if(rx(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return zie(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...iR(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(fA(a)&&(a={...a}),fA(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=hA(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||pA(c)&&pA(a)?t[o]=Wv(c,a,n,r):c==null&&Fie(a)?t[o]=Wv({},a,n,r):c==null&&Bie(a)?t[o]=hA(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function Hie(t,...e){return qie(t,...e,Mie)}var Wie=Object.defineProperty,Vie=Object.defineProperties,Gie=Object.getOwnPropertyDescriptors,mA=Object.getOwnPropertySymbols,Kie=Object.prototype.hasOwnProperty,Yie=Object.prototype.propertyIsEnumerable,gA=(t,e,n)=>e in t?Wie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ap=(t,e)=>{for(var n in e||(e={}))Kie.call(e,n)&&gA(t,n,e[n]);if(mA)for(var n of mA(e))Yie.call(e,n)&&gA(t,n,e[n]);return t},Zie=(t,e)=>Vie(t,Gie(e));function xr(t,e,n){var r;const s=wl(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${sR}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function yc(t){return t.includes(":")?t.split(":")[1]:t}function dR(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Jie(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function Ip(t={},e={}){const n=yA(t),r=yA(e);return Hie(n,r)}function yA(t){var e,n,r,s,i;const o={};if(!Uo(t))return o;for(const[a,c]of Object.entries(t)){const l=f0(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=ol(a);o[f]=Zie(Ap(Ap({},o[f]),c),{chains:Ks(l,(e=o[f])==null?void 0:e.chains),methods:Ks(u,(n=o[f])==null?void 0:n.methods),events:Ks(d,(r=o[f])==null?void 0:r.events)}),(Uo(h)||Uo(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=Ap(Ap({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function wA(t){return t.includes(":")?t.split(":")[2]:t}function bA(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=f0(n)?[n]:r.chains?r.chains:dR(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function Xy(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const hR={},Ye=t=>hR[t],ew=(t,e)=>{hR[t]=e};var Qie=Object.defineProperty,Xie=(t,e,n)=>e in t?Qie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kc=(t,e,n)=>Xie(t,typeof e!="symbol"?e+"":e,n);class eoe{constructor(e){kc(this,"name","polkadot"),kc(this,"client"),kc(this,"httpProviders"),kc(this,"events"),kc(this,"namespace"),kc(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Zr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=yc(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yr(new _s(r,Ye("disableProviderPing")))}}var toe=Object.defineProperty,noe=Object.defineProperties,roe=Object.getOwnPropertyDescriptors,vA=Object.getOwnPropertySymbols,soe=Object.prototype.hasOwnProperty,ioe=Object.prototype.propertyIsEnumerable,Vv=(t,e,n)=>e in t?toe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,EA=(t,e)=>{for(var n in e||(e={}))soe.call(e,n)&&Vv(t,n,e[n]);if(vA)for(var n of vA(e))ioe.call(e,n)&&Vv(t,n,e[n]);return t},xA=(t,e)=>noe(t,roe(e)),Rc=(t,e,n)=>Vv(t,typeof e!="symbol"?e+"":e,n);class ooe{constructor(e){Rc(this,"name","eip155"),Rc(this,"client"),Rc(this,"chainId"),Rc(this,"namespace"),Rc(this,"httpProviders"),Rc(this,"events"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Zr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||xr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yr(new _s(r,Ye("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(yc(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:xA(EA({},u.sessionProperties||{}),{capabilities:xA(EA({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Co("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${yie}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var aoe=Object.defineProperty,coe=(t,e,n)=>e in t?aoe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$c=(t,e,n)=>coe(t,typeof e!="symbol"?e+"":e,n);class loe{constructor(e){$c(this,"name","solana"),$c(this,"client"),$c(this,"httpProviders"),$c(this,"events"),$c(this,"namespace"),$c(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Zr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=yc(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yr(new _s(r,Ye("disableProviderPing")))}}var uoe=Object.defineProperty,doe=(t,e,n)=>e in t?uoe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dc=(t,e,n)=>doe(t,typeof e!="symbol"?e+"":e,n);class hoe{constructor(e){Dc(this,"name","cosmos"),Dc(this,"client"),Dc(this,"httpProviders"),Dc(this,"events"),Dc(this,"namespace"),Dc(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Zr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=yc(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yr(new _s(r,Ye("disableProviderPing")))}}var foe=Object.defineProperty,poe=(t,e,n)=>e in t?foe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Uc=(t,e,n)=>poe(t,typeof e!="symbol"?e+"":e,n);class moe{constructor(e){Uc(this,"name","algorand"),Uc(this,"client"),Uc(this,"httpProviders"),Uc(this,"events"),Uc(this,"namespace"),Uc(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||xr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Zr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xr(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Yr(new _s(r,Ye("disableProviderPing")))}}var goe=Object.defineProperty,yoe=(t,e,n)=>e in t?goe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jc=(t,e,n)=>yoe(t,typeof e!="symbol"?e+"":e,n);class woe{constructor(e){jc(this,"name","cip34"),jc(this,"client"),jc(this,"httpProviders"),jc(this,"events"),jc(this,"namespace"),jc(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Zr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=yc(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yr(new _s(r,Ye("disableProviderPing")))}}var boe=Object.defineProperty,voe=(t,e,n)=>e in t?boe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lc=(t,e,n)=>voe(t,typeof e!="symbol"?e+"":e,n);class Eoe{constructor(e){Lc(this,"name","elrond"),Lc(this,"client"),Lc(this,"httpProviders"),Lc(this,"events"),Lc(this,"namespace"),Lc(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Zr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=yc(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yr(new _s(r,Ye("disableProviderPing")))}}var xoe=Object.defineProperty,Coe=(t,e,n)=>e in t?xoe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mc=(t,e,n)=>Coe(t,typeof e!="symbol"?e+"":e,n);class _oe{constructor(e){Mc(this,"name","multiversx"),Mc(this,"client"),Mc(this,"httpProviders"),Mc(this,"events"),Mc(this,"namespace"),Mc(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Zr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=yc(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yr(new _s(r,Ye("disableProviderPing")))}}var Soe=Object.defineProperty,Aoe=(t,e,n)=>e in t?Soe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bc=(t,e,n)=>Aoe(t,typeof e!="symbol"?e+"":e,n);class Ioe{constructor(e){Bc(this,"name","near"),Bc(this,"client"),Bc(this,"httpProviders"),Bc(this,"events"),Bc(this,"namespace"),Bc(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||xr(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Zr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xr(e,this.namespace);return typeof r>"u"?void 0:new Yr(new _s(r,Ye("disableProviderPing")))}}var Noe=Object.defineProperty,Toe=(t,e,n)=>e in t?Noe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fc=(t,e,n)=>Toe(t,typeof e!="symbol"?e+"":e,n);class Poe{constructor(e){Fc(this,"name","tezos"),Fc(this,"client"),Fc(this,"httpProviders"),Fc(this,"events"),Fc(this,"namespace"),Fc(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||xr(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Zr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xr(e,this.namespace);return typeof r>"u"?void 0:new Yr(new _s(r))}}var Ooe=Object.defineProperty,koe=(t,e,n)=>e in t?Ooe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zc=(t,e,n)=>koe(t,typeof e!="symbol"?e+"":e,n);class Roe{constructor(e){zc(this,"name",Wc),zc(this,"client"),zc(this,"httpProviders"),zc(this,"events"),zc(this,"namespace"),zc(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Zr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=wl(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yr(new _s(r,Ye("disableProviderPing")))}}var $oe=Object.defineProperty,Doe=Object.defineProperties,Uoe=Object.getOwnPropertyDescriptors,CA=Object.getOwnPropertySymbols,joe=Object.prototype.hasOwnProperty,Loe=Object.prototype.propertyIsEnumerable,Gv=(t,e,n)=>e in t?$oe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Np=(t,e)=>{for(var n in e||(e={}))joe.call(e,n)&&Gv(t,n,e[n]);if(CA)for(var n of CA(e))Loe.call(e,n)&&Gv(t,n,e[n]);return t},tw=(t,e)=>Doe(t,Uoe(e)),Or=(t,e,n)=>Gv(t,typeof e!="symbol"?e+"":e,n);let Moe=class fR{constructor(e){Or(this,"client"),Or(this,"namespaces"),Or(this,"optionalNamespaces"),Or(this,"sessionProperties"),Or(this,"scopedProperties"),Or(this,"events",new bE),Or(this,"rpcProviders",{}),Or(this,"session"),Or(this,"providerOpts"),Or(this,"logger"),Or(this,"uri"),Or(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:gf(tu({level:(e==null?void 0:e.logger)||dA})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new fR(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Np({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,n0(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:wt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=bA(this.session.namespaces);this.namespaces=Ip(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=bA(s.namespaces);return this.namespaces=Ip(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Wc?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Ii(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await fie.init({core:this.providerOpts.core,logger:this.providerOpts.logger||dA,relayUrl:this.providerOpts.relayUrl||pie,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>ol(n)))];ew("client",this.client),ew("events",this.events),ew("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=Jie(n,this.session),s=dR(r),i=Ip(this.namespaces,this.optionalNamespaces),o=tw(Np({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new ooe({namespace:o});break;case"algorand":this.rpcProviders[n]=new moe({namespace:o});break;case"solana":this.rpcProviders[n]=new loe({namespace:o});break;case"cosmos":this.rpcProviders[n]=new hoe({namespace:o});break;case"polkadot":this.rpcProviders[n]=new eoe({namespace:o});break;case"cip34":this.rpcProviders[n]=new woe({namespace:o});break;case"elrond":this.rpcProviders[n]=new Eoe({namespace:o});break;case"multiversx":this.rpcProviders[n]=new _oe({namespace:o});break;case"near":this.rpcProviders[n]=new Ioe({namespace:o});break;case"tezos":this.rpcProviders[n]=new Poe({namespace:o});break;default:this.rpcProviders[Wc]?this.rpcProviders[Wc].updateNamespace(o):this.rpcProviders[Wc]=new Roe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Ii(o)&&this.events.emit("accountsChanged",o.map(wA))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=ol(o),l=Xy(o)!==Xy(a)?`${c}:${Xy(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=tw(Np({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",tw(Np({},wt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Zr.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Wc]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=Ip(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>ol(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=ol(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(wA);if(!Ii(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Sp}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${Sp}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${Sp}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(Sp)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var _A={};const Boe={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof _A<"u"?_A.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},Kv={filterOutDuplicatesByRDNS(t){const e=V.state.enableEIP6963?re.state.connectors:[],n=ee.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ge.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=re.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=ee.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=re.state,{featuredWalletIds:n}=V.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=V.state.features)==null?void 0:c.connectMethodsOrder),r=e||re.state.connectors;if(n)return n;const{injected:s,announced:i}=em.getConnectorsByType(r,we.state.recommended,we.state.featured),o=s.filter(em.showConnector),a=i.filter(em.showConnector);return o.length||a.length?["wallet","email","social"]:Boe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&we.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&we.state.excludedWallets.some(r=>hh.isLowerCaseMatch(r.name,t.name));return e||n}},em={getConnectorsByType(t,e,n){const{customWallets:r}=V.state,s=ee.getRecentWallets(),i=Kv.filterOutDuplicateWallets(e),o=Kv.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&we.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&we.state.excludedWallets.some(i=>hh.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ge.isMobile()||ge.isMobile()&&!e&&!de.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(P.state.chains.values()).some(n=>re.getConnectorId(n.namespace)===q.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=V.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=em.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:V.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),m=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),v=f.filter(({type:y})=>!m.some(({type:b})=>b===y));return Array.from(new Set([...m,...v].map(({type:y})=>y)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!ge.isMobile())return{accounts:[],chainId:void 0};if(t.id===q.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const tm=globalThis,ix=tm.ShadowRoot&&(tm.ShadyCSS===void 0||tm.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ox=Symbol(),SA=new WeakMap;let pR=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==ox)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(ix&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=SA.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&SA.set(n,e))}return e}toString(){return this.cssText}};const kr=t=>new pR(typeof t=="string"?t:t+"",void 0,ox),bl=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new pR(n,t,ox)},Foe=(t,e)=>{if(ix)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=tm.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},AA=ix?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return kr(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:zoe,defineProperty:qoe,getOwnPropertyDescriptor:Hoe,getOwnPropertyNames:Woe,getOwnPropertySymbols:Voe,getPrototypeOf:Goe}=Object,jo=globalThis,IA=jo.trustedTypes,Koe=IA?IA.emptyScript:"",nw=jo.reactiveElementPolyfillSupport,Pd=(t,e)=>t,Yv={toAttribute(t,e){switch(e){case Boolean:t=t?Koe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},mR=(t,e)=>!zoe(t,e),NA={attribute:!0,type:String,converter:Yv,reflect:!1,useDefault:!1,hasChanged:mR};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),jo.litPropertyMetadata??(jo.litPropertyMetadata=new WeakMap);let Vc=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=NA){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&qoe(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=Hoe(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??NA}static _$Ei(){if(this.hasOwnProperty(Pd("elementProperties")))return;const e=Goe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Pd("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Pd("properties"))){const n=this.properties,r=[...Woe(n),...Voe(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(AA(s))}else e!==void 0&&n.push(AA(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Foe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:Yv).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:Yv;this._$Em=s,this[s]=c.fromAttribute(n,a.type)??((o=this._$Ej)==null?void 0:o.get(s))??null,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??mR)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Vc.elementStyles=[],Vc.shadowRootOptions={mode:"open"},Vc[Pd("elementProperties")]=new Map,Vc[Pd("finalized")]=new Map,nw==null||nw({ReactiveElement:Vc}),(jo.reactiveElementVersions??(jo.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Od=globalThis,hg=Od.trustedTypes,TA=hg?hg.createPolicy("lit-html",{createHTML:t=>t}):void 0,gR="$lit$",mo=`lit$${Math.random().toFixed(9).slice(2)}$`,yR="?"+mo,Yoe=`<${yR}>`,oc=document,Qh=()=>oc.createComment(""),Xh=t=>t===null||typeof t!="object"&&typeof t!="function",ax=Array.isArray,Zoe=t=>ax(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",rw=`[ 	
\f\r]`,qu=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,PA=/-->/g,OA=/>/g,ua=RegExp(`>|${rw}(?:([^\\s"'>=/]+)(${rw}*=${rw}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),kA=/'/g,RA=/"/g,wR=/^(?:script|style|textarea|title)$/i,bR=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),xle=bR(1),Cle=bR(2),Gl=Symbol.for("lit-noChange"),Kt=Symbol.for("lit-nothing"),$A=new WeakMap,Na=oc.createTreeWalker(oc,129);function vR(t,e){if(!ax(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return TA!==void 0?TA.createHTML(e):e}const Joe=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=qu;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===qu?u[1]==="!--"?o=PA:u[1]!==void 0?o=OA:u[2]!==void 0?(wR.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=ua):u[3]!==void 0&&(o=ua):o===ua?u[0]===">"?(o=s??qu,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?ua:u[3]==='"'?RA:kA):o===RA||o===kA?o=ua:o===PA||o===OA?o=qu:(o=ua,s=void 0);const f=o===ua&&t[a+1].startsWith("/>")?" ":"";i+=o===qu?c+Yoe:d>=0?(r.push(l),c.slice(0,d)+gR+c.slice(d)+mo+f):c+mo+(d===-2?a:f)}return[vR(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class ef{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=Joe(e,n);if(this.el=ef.createElement(l,r),Na.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Na.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(gR)){const h=u[o++],f=s.getAttribute(d).split(mo),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?Xoe:p[1]==="?"?eae:p[1]==="@"?tae:g0}),s.removeAttribute(d)}else d.startsWith(mo)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(wR.test(s.tagName)){const d=s.textContent.split(mo),h=d.length-1;if(h>0){s.textContent=hg?hg.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],Qh()),Na.nextNode(),c.push({type:2,index:++i});s.append(d[h],Qh())}}}else if(s.nodeType===8)if(s.data===yR)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(mo,d+1))!==-1;)c.push({type:7,index:i}),d+=mo.length-1}i++}}static createElement(e,n){const r=oc.createElement("template");return r.innerHTML=e,r}}function Kl(t,e,n=t,r){var o,a;if(e===Gl)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=Xh(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=Kl(t,s._$AS(t,e.values),s,r)),e}class Qoe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??oc).importNode(n,!0);Na.currentNode=s;let i=Na.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new Af(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new nae(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Na.nextNode(),o++)}return Na.currentNode=oc,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Af{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=Kt,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Kl(this,e,n),Xh(e)?e===Kt||e==null||e===""?(this._$AH!==Kt&&this._$AR(),this._$AH=Kt):e!==this._$AH&&e!==Gl&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Zoe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Kt&&Xh(this._$AH)?this._$AA.nextSibling.data=e:this.T(oc.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=ef.createElement(vR(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new Qoe(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=$A.get(e.strings);return n===void 0&&$A.set(e.strings,n=new ef(e)),n}k(e){ax(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new Af(this.O(Qh()),this.O(Qh()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class g0{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=Kt,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Kt}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=Kl(this,e,n,0),o=!Xh(e)||e!==this._$AH&&e!==Gl,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=Kl(this,a[r+c],n,c),l===Gl&&(l=this._$AH[c]),o||(o=!Xh(l)||l!==this._$AH[c]),l===Kt?e=Kt:e!==Kt&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===Kt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Xoe extends g0{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Kt?void 0:e}}class eae extends g0{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Kt)}}class tae extends g0{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=Kl(this,e,n,0)??Kt)===Gl)return;const r=this._$AH,s=e===Kt&&r!==Kt||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==Kt&&(r===Kt||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class nae{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Kl(this,e)}}const sw=Od.litHtmlPolyfillSupport;sw==null||sw(ef,Af),(Od.litHtmlVersions??(Od.litHtmlVersions=[])).push("3.3.0");const rae=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new Af(e.insertBefore(Qh(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Fa=globalThis;class nm extends Vc{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=rae(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Gl}}var rI;nm._$litElement$=!0,nm.finalized=!0,(rI=Fa.litElementHydrateSupport)==null||rI.call(Fa,{LitElement:nm});const iw=Fa.litElementPolyfillSupport;iw==null||iw({LitElement:nm});(Fa.litElementVersions??(Fa.litElementVersions=[])).push("4.2.0");let kd,Lo,Mo;function _le(t,e){kd=document.createElement("style"),Lo=document.createElement("style"),Mo=document.createElement("style"),kd.textContent=vl(t).core.cssText,Lo.textContent=vl(t).dark.cssText,Mo.textContent=vl(t).light.cssText,document.head.appendChild(kd),document.head.appendChild(Lo),document.head.appendChild(Mo),ER(e)}function ER(t){Lo&&Mo&&(t==="light"?(Lo.removeAttribute("media"),Mo.media="enabled"):(Mo.removeAttribute("media"),Lo.media="enabled"))}function sae(t){kd&&Lo&&Mo&&(kd.textContent=vl(t).core.cssText,Lo.textContent=vl(t).dark.cssText,Mo.textContent=vl(t).light.cssText)}function vl(t){return{core:bl`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${kr(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${kr((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${kr((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${kr((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${kr((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:bl`
      :root {
        --w3m-color-mix: ${kr((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${kr(Ei(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${kr(Ei(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:bl`
      :root {
        --w3m-color-mix: ${kr((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${kr(Ei(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${kr(Ei(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const Sle=bl`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Ale=bl`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,Ile=bl`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,id={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};function If(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const DA=If({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),UA=If({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});If({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});If({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});If({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const iae={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Rd={getMethodsByChainNamespace(t){return iae[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case DA.caipNetworkId:u.chains.push(DA.deprecatedCaipNetworkId);break;case UA.caipNetworkId:u.chains.push(UA.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await wd.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};class cx{constructor({provider:e,namespace:n}){this.id=q.CONNECTOR_ID.WALLET_CONNECT,this.name=_o.ConnectorNamesMap[q.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=_o.ConnectorImageIds[q.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=P.getCaipNetworks.bind(P),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=V.state.universalProviderConfigOverride,s=Rd.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Ed.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:oae})}}const oae=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class xR{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>P.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:q.CONNECTOR_ID.AUTH,type:"AUTH",name:q.CONNECTOR_NAMES.AUTH,provider:e,imageId:_o.ConnectorImageIds[q.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){ne.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=ne.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof cx);if(!e)throw new Error("WalletConnectConnector not found");return e}}class aae extends xR{setUniversalProvider(e){this.addConnector(new cx({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>ge.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&et.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(ne.state.balanceLoading&&e.chainId===((c=P.state.activeCaipNetwork)==null?void 0:c.id))return{balance:ne.state.balance||"0.00",symbol:ne.state.balanceSymbol||""};const s=(await ne.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=P.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===q.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:ru.encode(new TextEncoder().encode(r)),pubkey:s}},(a=P.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=P.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===q.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Vh(n.id)}]}))}catch(u){if(u.code===id.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===id.ERROR_INVALID_CHAIN_ID||u.code===id.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===id.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Vh(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const cae=["email","socials","swaps","onramp","activity","reownBranding"],Tp={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?et.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?et.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?et.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?et.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?et.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?et.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?et.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?et.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?et.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},lae={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=Tp[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=Tp[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return Tp[t].processApi(e)},processFallbackFeature(t,e){return Tp[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await we.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?et.DEFAULT_REMOTE_FEATURES:et.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of cae){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),et.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Rt.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class uae{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=P.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=P.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=P.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return P.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>P.getCaipNetworks(n),this.getActiveChainNamespace=()=>P.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{P.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>P.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>P.state.activeChain===n||!n?P.state.activeCaipAddress:P.getAccountProp("caipAddress",n),this.setClientId=n=>{Ee.setClientId(n)},this.getProvider=n=>it.getProvider(n),this.getProviderType=n=>it.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=ne.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{ne.setCaipAddress(n,r),n&&V.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{ne.setBalance(n,r,s)},this.setProfileName=(n,r)=>{ne.setProfileName(n,r)},this.setProfileImage=(n,r)=>{ne.setProfileImage(n,r)},this.setUser=(n,r)=>{ne.setUser(n,r)},this.resetAccount=n=>{ne.resetAccount(n)},this.setCaipNetwork=n=>{P.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{P.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{ne.setAllAccounts(n,r),V.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{ne.setStatus(n,r),re.isConnected()?ee.setConnectionStatus("connected"):ee.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>P.getAccountProp("address",n),this.setConnectors=n=>{const r=[...re.state.allConnectors,...n];re.setConnectors(r)},this.setConnections=(n,r)=>{de.setConnections(n,r)},this.fetchIdentity=n=>Ee.fetchIdentity(n),this.getReownName=n=>wd.getNamesForAddress(n),this.getConnectors=()=>re.getConnectors(),this.getConnectorImage=n=>DP.getConnectorImage(n),this.getConnections=n=>ah.getConnectionsData(n).connections,this.getRecentConnections=n=>ah.getConnectionsData(n).recentConnections,this.switchConnection=n=>de.switchConnection(n),this.deleteConnection=n=>ee.deleteAddressFromConnection(n),this.setConnectedWalletInfo=(n,r)=>{const s=it.getProviderId(r),i=n?{...n,type:s}:void 0;ne.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!P.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{ne.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{ne.removeAddressLabel(n,r)},this.getAddress=n=>P.state.activeChain===n||!n?ne.state.address:P.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>P.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{P.resetNetwork(n)},this.addConnector=n=>{re.addConnector(n)},this.resetWcConnection=()=>{de.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{ne.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{ne.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{P.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{ne.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{V.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await lae.fetchRemoteFeatures(e),V.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&Kb.setOnrampProviders(this.remoteFeatures.onramp),((n=V.state.remoteFeatures)!=null&&n.email||Array.isArray((r=V.state.remoteFeatures)==null?void 0:r.socials)&&((s=V.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await we.fetchAllowedOrigins();if(!e||!ge.isClient()){Rt.open(Et.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;Rd.isOriginAllowed(n,e,id.DEFAULT_ALLOWED_ANCESTORS)||Rt.open(Et.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}catch(e){if(!(e instanceof Error)){Rt.open(Et.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":Rt.open(Et.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;Rt.open({shortMessage:Et.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:Et.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(n.message)},"error");break}default:Rt.open(Et.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,tt.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Zn.setThemeMode(e.themeMode),e.themeVariables&&Zn.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");P.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&P.setActiveCaipNetwork(n)}initializeConnectionController(e){de.initialize(e.adapters??[]),de.setWcBasic(e.basic??!1)}initializeConnectorController(){re.initialize(this.chainNamespaces)}initializeProjectSettings(e){V.setProjectId(e.projectId),V.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;V.setDebug(e.debug!==!1),V.setEnableWalletConnect(e.enableWalletConnect!==!1),V.setEnableWalletGuide(e.enableWalletGuide!==!1),V.setEnableWallets(e.enableWallets!==!1),V.setEIP6963Enabled(e.enableEIP6963!==!1),V.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),V.setEnableAuthLogger(e.enableAuthLogger!==!1),V.setCustomRpcUrls(e.customRpcUrls),V.setEnableEmbedded(e.enableEmbedded),V.setAllWallets(e.allWallets),V.setIncludeWalletIds(e.includeWalletIds),V.setExcludeWalletIds(e.excludeWalletIds),V.setFeaturedWalletIds(e.featuredWalletIds),V.setTokens(e.tokens),V.setTermsConditionsUrl(e.termsConditionsUrl),V.setPrivacyPolicyUrl(e.privacyPolicyUrl),V.setCustomWallets(e.customWallets),V.setFeatures(e.features),V.setAllowUnsupportedChain(e.allowUnsupportedChain),V.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),V.setPreferUniversalLinks(e.experimental_preferUniversalLinks),V.setDefaultAccountTypes(e.defaultAccountTypes);const n=ee.getPreferredAccountTypes()||{},r={...V.state.defaultAccountTypes,...n};ne.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),V.setMetadata(e.metadata),V.setDisableAppend(e.disableAppend),V.setEnableEmbedded(e.enableEmbedded),V.setSIWX(e.siwx),!e.projectId){Rt.open(Et.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===q.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");V.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return ge.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=zs.getUnsupportedNetwork(`${n}:${e}`);P.setActiveCaipNetwork(r)}}getDefaultNetwork(){return zs.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return zs.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return zs.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?zs.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=it.getProvider(e),s=it.getProviderId(e),{caipAddress:i}=P.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),ee.removeConnectedNamespace(e),it.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),re.removeConnectorId(e),P.resetAccount(e),P.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=P.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),ee.setConnectedNamespaces([...P.state.chains.keys()]),this.chainNamespaces.forEach(o=>{re.setConnectorId(gt.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var m,v,y,w,b,C;const c=P.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const x=this.getCaipNetworks().find(T=>T.chainNamespace===i);x&&this.setCaipNetwork(x)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(v=(m=o==null?void 0:o.rpcUrls)==null?void 0:m.default)==null?void 0:v.http)==null?void 0:y[0])||((C=(b=(w=d==null?void 0:d.rpcUrls)==null?void 0:w.default)==null?void 0:b.http)==null?void 0:C[0])});if(!h)return;ee.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=ne.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=P.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),ee.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async({chainNamespace:e}={})=>{const n=qM(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));Ze.resetSend(),de.resetWcConnection(),await Ed.clearSessions(),re.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));ee.deleteConnectedSocialProvider(),tt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(P.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:ne.state.address,provider:it.getProvider(P.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(et.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(P.state.activeChain),s=it.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===q.CHAIN.EVM){const n=this.getAdapter(P.state.activeChain),r=it.getProvider(P.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:ne.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:P.state.activeChain}),ne.state.profileImage||!1},getEnsAddress:async e=>await Rd.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(P.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=it.getProvider(P.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(P.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(P.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(P.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(P.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(P.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(P.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!ne.state.address||this.updateNativeBalance(ne.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},de.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(it.getProviderId(P.state.activeChain)===gt.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=it.getProvider(n),i=it.getProviderId(n);if(e.chainNamespace===P.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===gt.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=mr.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new aae({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=ee.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(ee.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=P.state.activeChain===e,c=P.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=ne.state.address,i=P.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=P.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=P.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=P.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===q.CHAIN.EVM&&ge.isSafeApp()&&re.setConnectorId(q.CONNECTOR_ID.SAFE,e);const n=re.getConnectorId(e);switch(this.setStatus("connecting",e),n){case q.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case q.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=re.getConnectorId(e),s=this.getCaipNetwork(e),o=re.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([ge.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var u,d,h,f,p;const o=this.getAdapter(i),a=((f=(h=(d=(u=this.universalProvider)==null?void 0:u.session)==null?void 0:d.namespaces)==null?void 0:h[i])==null?void 0:f.accounts)||[],c=(p=P.state.activeCaipNetwork)==null?void 0:p.id,l=a.find(m=>{const{chainId:v}=mr.parseCaipAddress(m);return v===(c==null?void 0:c.toString())})||a[0];if(l){const m=mr.validateCaipAddress(l),{chainId:v,address:y}=mr.parseCaipAddress(m);if(it.setProviderId(i,gt.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&P.state.activeCaipNetwork&&(o==null?void 0:o.namespace)!==q.CHAIN.EVM){const w=o==null?void 0:o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:P.state.activeCaipNetwork});it.setProvider(i,w)}else it.setProvider(i,this.universalProvider);re.setConnectorId(q.CONNECTOR_ID.WALLET_CONNECT,i),ee.addConnectedNamespace(i),this.syncWalletConnectAccounts(i),await this.syncAccount({address:y,chainId:v,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await P.setApprovedCaipNetworksData(i)});await Promise.all(n)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=mr.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>ge.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){it.setProviderId(s,e),it.setProvider(s,n),re.setConnectorId(r,s)}async syncAllAccounts(e){const n=re.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===P.state.activeChain,r=P.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=ee.getActiveNetworkProps(),c=i||a,l=((d=P.state.activeCaipNetwork)==null?void 0:d.name)===q.UNSUPPORTED_NETWORK_NAME,u=P.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(v=>v.id.toString()===c.toString()),p=this.getCaipNetworks().find(v=>v.chainNamespace===o);if(!u&&!f&&!p){const v=this.getApprovedCaipNetworkIds()||[],y=v.find(b=>{var C;return((C=mr.parseCaipNetworkId(b))==null?void 0:C.chainId)===c.toString()}),w=v.find(b=>{var C;return((C=mr.parseCaipNetworkId(b))==null?void 0:C.chainNamespace)===o});f=this.getCaipNetworks().find(b=>b.caipNetworkId===y),p=this.getCaipNetworks().find(b=>b.caipNetworkId===w||"deprecatedCaipNetworkId"in b&&b.deprecatedCaipNetworkId===w)}const m=f||p;(m==null?void 0:m.chainNamespace)===P.state.activeChain?V.state.enableNetworkSwitch&&!V.state.allowUnsupportedChain&&((h=P.state.activeCaipNetwork)==null?void 0:h.name)===q.UNSUPPORTED_NETWORK_NAME?P.showUnsupportedChainUI():this.setCaipNetwork(m):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),hh.isLowerCaseMatch(s,ne.state.address)||this.syncAccountInfo(s,m==null?void 0:m.id,o),n?await this.syncBalance({address:s,chainId:m==null?void 0:m.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=re.getConnectorId(e),r=it.getProviderId(e);if(r===gt.CONNECTOR_TYPE_ANNOUNCED||r===gt.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===gt.CONNECTOR_TYPE_WALLET_CONNECT){const i=it.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===q.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===q.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!oh.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=P.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=BW.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};V.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await Moe.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{de.setUri(e)}),this.universalProvider.on("connect",de.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),de.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(Rd.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&ge.isCaipAddress(r[0])&&this.syncAccount(mr.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&ge.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){tt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Et.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Et.ALERT_ERRORS[o];a&&(Rt.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&de.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Qe.open({...e,data:{swap:e.arguments}})}return Qe.open(e)}async close(){await this.injectModalUi(),Qe.close()}setLoading(e,n){Qe.setLoading(e,n)}async disconnect(e){await de.disconnect({namespace:e})}getSIWX(){return V.state.siwx}getError(){return""}getChainId(){var e;return(e=P.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Rt.open(Et.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await P.switchActiveNetwork(n)}getWalletProvider(){return P.state.activeChain?it.state.providers[P.state.activeChain]:null}getWalletProviderType(){return it.getProviderId(P.state.activeChain)}subscribeProviders(e){return it.subscribeProviders(e)}getThemeMode(){return Zn.state.themeMode}getThemeVariables(){return Zn.state.themeVariables}setThemeMode(e){Zn.setThemeMode(e),ER(Zn.state.themeMode)}setTermsConditionsUrl(e){V.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){V.setPrivacyPolicyUrl(e)}setThemeVariables(e){Zn.setThemeVariables(e),sae(Zn.state.themeVariables)}subscribeTheme(e){return Zn.subscribe(e)}subscribeConnections(e){return de.subscribe(e)}getWalletInfo(e){return e?P.getAccountProp("connectedWalletInfo",e):ne.state.connectedWalletInfo}getAccount(e){var o;const n=re.getAuthConnector(e),r=P.getAccountData(e),s=P.state.activeChain,i=ee.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:ge.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===q.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:ee.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?P.subscribeChainProp("accountState",r,n):P.subscribe(r),re.subscribe(r)}subscribeNetwork(e){return P.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?ne.subscribeKey("connectedWalletInfo",e,n):ne.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){ne.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){P.subscribeKey("activeCaipNetwork",e)}getState(){return Vs.state}subscribeState(e){return Vs.subscribe(e)}showErrorMessage(e){fs.showError(e)}showSuccessMessage(e){fs.showSuccess(e)}getEvent(){return{...tt.state}}subscribeEvents(e){return tt.subscribe(e)}replace(e){xe.replace(e)}redirect(e){xe.push(e)}popTransactionStack(e){xe.popTransactionStack(e)}isOpen(){return Qe.state.open}isTransactionStackEmpty(){return xe.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){V.setFeatures(e)}updateRemoteFeatures(e){V.setRemoteFeatures(e)}updateOptions(e){const r={...V.state||{},...e};V.setOptions(r)}setConnectMethodsOrder(e){V.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){V.setWalletFeaturesOrder(e)}setCollapseWallets(e){V.setCollapseWallets(e)}setSocialsOrder(e){V.setSocialsOrder(e)}getConnectMethodsOrder(){return Kv.getConnectOrderMethod(V.state.features,re.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||P.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&P.removeNetwork(e,n)}}let jA=!1;class dae extends uae{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{yr.checkIfRequestExists(n)?yr.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Jt.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Jt.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=yr.checkIfRequestIsSafe(r),i=ne.state.address,o=P.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=P.state.activeChain;re.getConnectorId(n)===q.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=P.state.activeChain,s=r===q.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=V.state.defaultAccountTypes[r],o=(l=ne.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;hh.isLowerCaseMatch(n.address,ne.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...ne.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>ge.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[ge.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...ne.state.user||{},username:n},P.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,P.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,P.state.activeChain)})}async syncAuthConnector(e,n){var d,h,f,p;const r=q.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===P.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...((d=ne.state)==null?void 0:d.user)||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected(),l=Zn.getSnapshot(),u=V.getSnapshot();await Promise.all([e.syncDappData({metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType}),e.syncTheme({themeMode:l.themeMode,themeVariables:l.themeVariables,w3mThemeVariables:Ei(l.themeVariables,l.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&s&&(c&&((h=this.connectionControllerClient)!=null&&h.connectExternal)?(await((p=this.connectionControllerClient)==null?void 0:p.connectExternal({id:q.CONNECTOR_ID.AUTH,info:{name:q.CONNECTOR_ID.AUTH},type:gt.CONNECTOR_TYPE_AUTH,provider:e,chainId:(f=P.state.activeCaipNetwork)==null?void 0:f.id,chain:n})),this.setStatus("connected",n)):re.getConnectorId(n)===q.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),ee.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!ge.isTelegram())return;const r=ee.getTelegramSocialProvider();if(!r||!ge.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;ne.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=re.getAuthConnector();r&&o&&(this.setLoading(!0,e),await de.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),ee.setConnectedSocialProvider(r),ee.removeTelegramSocialProvider(),tt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var l,u,d,h;if(!q.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=hh.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=Ba.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(h=this.getCaipNetwork(a))==null?void 0:h.caipNetworkId,abortController:Et.EmbeddedWalletAbortController,onTimeout:f=>{f==="iframe_load_failed"?Rt.open(Et.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):f==="iframe_request_timeout"?Rt.open(Et.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):f==="unverified_domain"&&Rt.open(Et.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Vs.subscribeOpen(f=>{var p;!f&&this.isTransactionStackEmpty()&&((p=this.authProvider)==null||p.rejectRpcRequests())}));const c=e===P.state.activeChain;this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&we.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=P.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=it.getProvider(r),u=it.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=it.getProviderId(n)===gt.CONNECTOR_TYPE_AUTH,u=it.getProviderId(r),d=u===gt.CONNECTOR_TYPE_AUTH,h=q.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(P.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:q.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:gt.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===gt.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Vs.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==q.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=it.getProviderId(e);if(n===gt.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=ee.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(ge.isClient()&&!jA)try{const e={...et.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),ge.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!V.state.disableAppend&&!V.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}jA=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!ge.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(_n(()=>import("./embedded-wallet-CfDOy3xt.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(_n(()=>import("./email-3WT4MjUy.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(_n(()=>import("./socials-Ds-QhU8-.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(_n(()=>import("./swaps-3qWx75O4.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(_n(()=>import("./send-CVvvnwuB.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(_n(()=>import("./receive-D3dqxqwc.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(_n(()=>import("./onramp-qFhiio1R.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(_n(()=>import("./transactions-C9wBOu1U.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(_n(()=>import("./index-m9b_yTwT.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,_n(()=>import("./index-BqLtgZkU.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,27,4,6,13,15,16,17,2,18,29,19,33])),_n(()=>import("./w3m-modal-BMmqR0Rq.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}const hae="1.7.10";let ow;function fae(t){return ow||(ow=new dae({...t,sdkVersion:ge.generateSdkVersion(t.adapters??[],"react",hae)})),ow}const pae={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},mae={block:WD({format(t){var n;return{transactions:(n=t.transactions)==null?void 0:n.map(r=>{if(typeof r=="string")return r;const s=Mg(r);return s.typeHex==="0x7e"&&(s.isSystemTx=r.isSystemTx,s.mint=r.mint?ds(r.mint):void 0,s.sourceHash=r.sourceHash,s.type="deposit"),s}),stateRoot:t.stateRoot}}}),transaction:qD({format(t){const e={};return t.type==="0x7e"&&(e.isSystemTx=t.isSystemTx,e.mint=t.mint?ds(t.mint):void 0,e.sourceHash=t.sourceHash,e.type="deposit"),e}}),transactionReceipt:oj({format(t){return{l1GasPrice:t.l1GasPrice?ds(t.l1GasPrice):null,l1GasUsed:t.l1GasUsed?ds(t.l1GasUsed):null,l1Fee:t.l1Fee?ds(t.l1Fee):null,l1FeeScalar:t.l1FeeScalar?Number(t.l1FeeScalar):null}}})};function gae(t,e){return bae(t)?wae(t):gj(t,e)}const yae={transaction:gae};function wae(t){vae(t);const{sourceHash:e,data:n,from:r,gas:s,isSystemTx:i,mint:o,to:a,value:c}=t,l=[e,r,a??"0x",o?Ci(o):"0x",c?Ci(c):"0x",s?Ci(s):"0x",i?"0x1":"0x",n??"0x"];return Ui(["0x7e",Wo(l)])}function bae(t){return t.type==="deposit"||typeof t.sourceHash<"u"}function vae(t){const{from:e,to:n}=t;if(e&&!ln(e))throw new ar({address:e});if(n&&!ln(n))throw new ar({address:n})}const LA={blockTime:2e3,contracts:pae,formatters:mae,serializers:yae},CR=zg({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),_R=zg({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),Hu=1,SR=zg({...LA,id:10,name:"OP Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.optimism.io"]}},blockExplorers:{default:{name:"Optimism Explorer",url:"https://optimistic.etherscan.io",apiUrl:"https://api-optimistic.etherscan.io/api"}},contracts:{...LA.contracts,disputeGameFactory:{[Hu]:{address:"0xe5965Ab5962eDc7477C8520243A95517CD252fA9"}},l2OutputOracle:{[Hu]:{address:"0xdfe97868233d1aa22e815a266982f2cf17685a27"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:4286263},portal:{[Hu]:{address:"0xbEb5Fc579115071764c7423A4f12eDde41f106Ed"}},l1StandardBridge:{[Hu]:{address:"0x99C9fc46f92E8a1c0deC1b1747d010903E884bE1"}}},sourceId:Hu}),AR=zg({id:137,name:"Polygon",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://polygon-rpc.com"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.polygonscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:25770160}}});function Eae(t){let e=[],n,r;function s(a){return oh.parseEvmChainId(a)||1}function i(){var a;return n||(n=Ba.getInstance({projectId:t.options.projectId,chainId:(a=P.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?Rt.open(Et.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Rt.open(Et.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Rt.open(Et.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Et.EmbeddedWalletAbortController})),n}async function o(a={}){var m,v;const c=i();let l=a.chainId;if(a.isReconnecting){const y=oh.parseEvmChainId(c.getLastUsedChainId()||""),w=(m=t.chains)==null?void 0:m[0].id;if(l=y||w,!l)throw new Error("ChainId not found in provider")}const u=(v=ne.state.preferredAccountTypes)==null?void 0:v.eip155,{address:d,chainId:h,accounts:f}=await c.connect({chainId:l,preferredAccountType:u,socialUri:a.socialUri});e=(f==null?void 0:f.map(y=>y.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:q.CONNECTOR_ID.AUTH,name:q.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:q.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=Ba.getInstance({projectId:t.options.projectId,chainId:(c=P.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Et.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?Rt.open(Et.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?Rt.open(Et.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&Rt.open(Et.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=P.state.activeChain===q.CHAIN.EVM;if(q.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>re.getConnectorId(h)===q.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l,u;try{const d=a.chains.find(m=>m.id===c);if(!d)throw new Go(new Error("chain not found on connector."));const h=await this.getProvider(),f=(l=ne.state.preferredAccountTypes)==null?void 0:l.eip155,p=await h.connect({chainId:c,preferredAccountType:f});return e=((u=p==null?void 0:p.accounts)==null?void 0:u.map(m=>m.address))||[p.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),d}catch(d){throw d instanceof Error?new Go(d):d}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Ea)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}lx.type="walletConnect";function lx(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:lx.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const m=P.getCaipNetworks(),v=await this.getProvider();if(!v)throw new so;a||(a=this.onDisplayUri,v.on("display_uri",a));const y=await this.isChainsStale();v.session&&y&&await v.disconnect();const w=V.state.universalProviderConfigOverride;if(!v.session||y){const E=Rd.createNamespaces(m,w);await v.connect({optionalNamespaces:E,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(m.map(k=>Number(k.id)))}const b=await this.getAccounts(),C=await this.getChainId(),x=(p=(f=(h=v.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,T=x==null?void 0:x.some(E=>Number(E.split(":")[1])===C);let N=1;T?N=C:x!=null&&x[0]&&(N=Number(x[0].split(":")[1])),a&&(v.removeListener("display_uri",a),a=void 0),o&&(v.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),v.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),v.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),v.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),v.on("session_delete",c));const U=w==null?void 0:w.defaultChain;return v.setDefaultChain(U??`eip155:${N}`),{accounts:b,chainId:N}}catch(m){throw/(user rejected|connection request reset)/i.test(m==null?void 0:m.message)?new Sn(m):m}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var p,m,v;const d=await this.getProvider();if(!((p=d==null?void 0:d.session)!=null&&p.namespaces))return[];const h=(v=(m=d==null?void 0:d.session)==null?void 0:m.namespaces[q.CHAIN.EVM])==null?void 0:v.accounts;return(h==null?void 0:h.map(y=>y.split(":")[2]))??[]},async getProvider({chainId:d}={}){var p,m;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=ee.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const v=ee.getStoredActiveCaipNetworkId(),y=e.getCaipNetworks(h),w=y==null?void 0:y.find(b=>b.id===v);w&&w.chainNamespace===q.CHAIN.EVM&&await((m=this.switchChain)==null?void 0:m.call(this,{chainId:Number(w.id)}))}return r},async getChainId(){var m,v,y,w;const d=(m=e.getCaipNetwork(q.CHAIN.EVM))==null?void 0:m.id;if(d)return d;const f=(w=(y=(v=(await this.getProvider()).session)==null?void 0:v.namespaces[q.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:w[0],p=P.getCaipNetworks().find(b=>b.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var m,v,y,w;const f=await this.getProvider();if(!f)throw new so;const p=P.getCaipNetworks().find(b=>b.id===h);if(!p)throw new Go(new rh);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:ae(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const b=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...b,h]),{...p,id:p.id}}catch(b){const C=b;if(/(?:user rejected)/iu.test(C.message))throw new Sn(C);try{let x;d!=null&&d.blockExplorerUrls?x=d.blockExplorerUrls:x=(m=p.blockExplorers)!=null&&m.default.url?[(v=p.blockExplorers)==null?void 0:v.default.url]:[];const T=((w=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:w.http)||[],N={blockExplorerUrls:x,chainId:ae(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:T};await f.request({method:"wallet_addEthereumChain",params:[N]});const U=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...U,h]),{...p,id:p.id}}catch(x){throw new Sn(x)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Ea(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(P.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,m;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(m=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[q.CHAIN.EVM])==null?void 0:m.accounts;return(d==null?void 0:d.map(v=>Number.parseInt(v.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const Wu=ht({pendingTransactions:0}),MA={state:Wu,subscribeKey(t,e){return un(Wu,t,e)},increase(t){Wu[t]+=1},decrease(t){Wu[t]-=1},reset(t){Wu[t]=0}};function xae(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function Cae(t){if(ge.isSafeApp()){const{safe:e}=await _n(async()=>{const{safe:n}=await import("./index-CPme1vLO.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function _ae(t){try{const{coinbaseWallet:e}=await _n(async()=>{const{coinbaseWallet:n}=await import("./index-CPme1vLO.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const Sae={enable:!1,pollingInterval:3e4};class Aae extends xR{constructor(e){const n=zs.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=q.CHAIN.EVM,this.adapterType=q.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...Sae,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===q.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>ge.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=md(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>ge.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=md(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===q.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=zs.getCaipNetworkId(s);i?n[s.id]=zs.extendWagmiTransports(s,e.projectId,i):n[s.id]=zs.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=bL({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=Qj(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),MA.increase("pendingTransactions")}});const e=MA.subscribeKey("pendingTransactions",n=>{var r;n>=q.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){Zj(this.wagmiConfig,{onChange:(e,n)=>{e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"&&(e.address!==(n==null?void 0:n.address)||n.status!=="connected")&&(this.setupWatchPendingTransactions(),this.emit("accountChanged",{address:e.address,chainId:e.chainId}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await _ae(this.wagmiConfig.connectors);s&&n.push(s)}const r=await Cae(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(lx(e,n)),e.enableInjected!==!1&&r.push(Wg({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(Eae({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async signMessage(e){try{return{signature:await Kj(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=md(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await Vj(this.wagmiConfig,s);const i=await Gj(this.wagmiConfig,s);return await Xj(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(oh.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await eL(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await Fj(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return _j(e.value,e.decimals)}formatUnits(e){return uf(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(e.id===q.CONNECTOR_ID.AUTH||e.id===q.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:_o.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:_o.ConnectorNamesMap[e.id]??e.name,imageId:_o.ConnectorImageIds[e.id],type:_o.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===q.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){Jj(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=sa(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(ge.isSafeApp()&&n===q.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await ny(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await ny(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await JC(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var u,d,h,f,p;const{id:n,provider:r,type:s,info:i,chainId:o,socialUri:a}=e,c=this.getWagmiConnector(n);if(!c)throw new Error("connectionControllerClient:connectExternal - connector is undefined");if(r&&i&&c.id===q.CONNECTOR_ID.EIP6963&&((u=c.setEip6963Wallet)==null||u.call(c,{provider:r,info:i})),c.uid===((h=(d=this.wagmiConfig)==null?void 0:d.state)==null?void 0:h.current)){const m=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(c.uid);if(m)return{address:m==null?void 0:m.accounts[0],chainId:m==null?void 0:m.chainId,provider:r,type:s,id:n}}const l=await ny(this.wagmiConfig,{connector:c,chainId:o?Number(o):void 0,socialUri:a});return{address:l.accounts[0],chainId:l.chainId,provider:r,type:s,id:n}}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await Mb(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=ee.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await Wj(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});ee.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(){const e=sa(this.wagmiConfig);await Promise.allSettled(e.map(async n=>{const r=this.getWagmiConnector(n.connector.id);r&&await Bj(this.wagmiConfig,{connector:r})})),this.wagmiConfig.state.connections.clear()}async switchNetwork(e){var r,s,i,o,a;const{caipNetwork:n}=e;await JC(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:n.name,nativeCurrency:n.nativeCurrency,rpcUrls:[((i=(s=(r=n.rpcUrls)==null?void 0:r.chainDefault)==null?void 0:s.http)==null?void 0:i[0])??""],blockExplorerUrls:[((o=n.blockExplorers)==null?void 0:o.default.url)??""],iconUrls:[((a=n.assets)==null?void 0:a.imageUrl)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=sa(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=xae(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=sa(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=sa(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=sa(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setUniversalProvider(e){e.on("connect",()=>{const n=sa(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(P.state.activeChain==="eip155")return;Mb(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new cx({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}}const IR="d654d9b09f10ce0a913234a9b78e2e8c",NR=new Aae({networks:[_R,AR,CR,SR],projectId:IR}),Iae={name:"Hushr",description:"Hushr - Decentralized Social Network",url:"https://hushr.com",icons:["/favicon.png"]},BA=fae({adapters:[NR],networks:[_R,AR,CR,SR],metadata:Iae,projectId:IR,features:{analytics:!0}}),TR=te.createContext(void 0),Nae=({children:t})=>{const{address:e,isConnected:n}=jW(),[r,s]=te.useState(null),[i,o]=te.useState(!1),a=async()=>{o(!0);try{await BA.open()}catch(l){console.error(" Wallet connection failed:",l)}finally{o(!1)}},c=l=>{BA.disconnect(),s(null),console.log(" Wallet disconnected"),l&&l()};return te.useEffect(()=>{n&&e?(s({id:`user-${e}`,wallet_address:e,display_name:`${e.slice(0,6)}...${e.slice(-4)}`,avatar_url:null,bio:"Hushr user",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log(" Wallet connected:",e)):s(null)},[n,e]),g.jsx(TR.Provider,{value:{isConnected:n,walletAddress:e||null,user:r,connectWallet:a,disconnectWallet:c,loading:i},children:t})},wc=()=>{const t=te.useContext(TR);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},FA=({activeTab:t,onTabChange:e,hasMessagesNotification:n,isConnected:r,iconOnly:s=!1})=>{const{walletAddress:i,connectWallet:o}=wc(),a=()=>{r?e("profile"):o()},c=[{id:"threads",label:"Threads",iconPath:"/sidebar/threads.svg",requiresAuth:!1},{id:"messages",label:"Messages",iconPath:"/sidebar/messages.svg",requiresAuth:!0},{id:"inscribe",label:"Inscribe",iconPath:"/sidebar/inscribe.svg",requiresAuth:!0},{id:"private",label:"Private TXs",iconPath:"/sidebar/privatetxs.svg",requiresAuth:!0}],l=ye(i||"default");return s?g.jsxs("div",{className:"flex flex-col justify-between h-full py-8 px-2",children:[g.jsx("div",{className:"flex justify-center mb-8",children:g.jsxs("a",{href:"/",className:"w-8 h-8 flex items-center justify-center",children:[g.jsx("img",{src:oe("/logo.svg"),alt:"Hushr",className:"w-8 h-8 xl:block hidden object-contain"}),g.jsx("img",{src:oe("/favicon.png"),alt:"Hushr",className:"w-8 h-8 xl:hidden block object-contain"})]})}),g.jsx("div",{className:"flex-1 flex flex-col justify-center space-y-4",children:g.jsxs("div",{className:"relative space-y-4",children:[c.some(u=>u.id===t)&&g.jsx("div",{className:"absolute -left-2 -right-2 h-16 bg-white/10 rounded-2xl transition-all duration-300 ease-in-out pointer-events-none",style:{transform:`translateY(${c.findIndex(u=>u.id===t)*80+15}px)`}}),c.map(u=>{const d=t===u.id,h=u.requiresAuth&&!r;return g.jsx("div",{className:"relative flex justify-center",children:g.jsxs("button",{onClick:()=>e(u.id),disabled:h,className:`
                      relative group z-10 flex items-center justify-center w-14 h-16 rounded-2xl
                      transition-all duration-200
                      ${d?"text-white":h?"text-white/50 cursor-not-allowed pointer-events-none":"text-white hover:text-hushr-green hover:bg-white/5"}
                    `,children:[g.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:g.jsx("img",{src:oe(u.iconPath),alt:u.label,className:`w-8 h-8 ${d?"grayscale":"grayscale group-hover:grayscale-0"}`})}),u.id==="messages"&&n&&g.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-hushr-green rounded-full"})]})},u.id)})]})}),g.jsx("div",{className:"mt-8 flex justify-center",children:g.jsxs("div",{className:"relative group",children:[g.jsx("button",{onClick:a,className:`
                w-10 h-10 rounded-full overflow-hidden transition-all duration-200
                ${t==="profile"?"ring-2 ring-hushr-green":"hover:ring-2 hover:ring-white/50"}
              `,children:g.jsx("img",{src:l,alt:r?"Profile":"Connect Wallet",className:"w-full h-full object-cover"})}),g.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap",children:r?"Profile":"Connect Wallet"})]})})]}):g.jsxs("div",{className:"flex flex-col justify-between h-full py-8 gap-[26px]",children:[g.jsx("div",{className:"flex justify-center",children:g.jsx("div",{className:"w-[127px] h-14 flex items-center justify-center",children:g.jsx("img",{src:oe("/logo.svg"),alt:"Hushr",className:"w-full h-full object-contain"})})}),g.jsx("div",{className:"flex-1 flex flex-col justify-center",children:g.jsxs("div",{className:"flex flex-col w-44 h-64 space-y-0 relative",children:[c.some(u=>u.id===t)&&g.jsx("div",{className:"absolute -left-4 -right-8 w-52 h-16 bg-white/10 rounded-2xl transition-all duration-300 ease-in-out pointer-events-none",style:{transform:`translateY(${c.findIndex(u=>u.id===t)*64}px)`}}),c.map(u=>{const d=t===u.id,h=u.requiresAuth&&!r;return g.jsx("div",{className:"relative",children:g.jsxs("button",{onClick:()=>e(u.id),disabled:h,className:`
                    relative group z-10 flex items-center gap-4 w-44 h-16 px-0 py-4
                    font-quicksand font-semibold text-xl text-left
                    transition-all duration-200
                    ${d?"text-white":h?"text-white/50 cursor-not-allowed  pointer-events-none":"text-white hover:text-hushr-green"}
                  `,children:[g.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:g.jsx("img",{src:oe(u.iconPath),alt:u.label,className:`w-8 h-8 ${d?"grayscale":"grayscale group-hover:grayscale-0"}`})}),g.jsx("span",{className:"leading-[25px]",children:u.label}),u.id==="messages"&&n&&g.jsx("div",{className:"w-2 h-2 bg-hushr-green rounded-full ml-auto"})]})},u.id)})]})}),g.jsx("div",{className:"flex justify-center",children:g.jsxs("div",{className:"relative",children:[t==="profile"&&g.jsx("div",{className:"absolute -left-4 -right-8 top-0 w-52 h-16 bg-white/10 rounded-2xl"}),g.jsxs("button",{onClick:a,className:`
              relative group z-10 flex items-center rounded-[10px] gap-4 w-44 h-16 px-0 py-4
              font-quicksand font-semibold text-xl text-left
              transition-all duration-200
              text-white
                `,children:[g.jsx("div",{className:"absolute -left-4 -right-8 top-0 border group-hover:border-white w-52 h-16 border border-hushr-grayLess rounded-2xl transition-all duration-200"}),r&&g.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:g.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:g.jsx("img",{src:l,alt:r?"Profile":"Connect Wallet",className:"w-full h-full object-cover"})})}),g.jsx("span",{className:`leading-[25px] whitespace-nowrap ${r?"":"text-center w-full"}`,children:r?"Profile":"Connect Wallet"})]})]})})]})},zA=[{symbol:"HUSHR",name:"Hushr Token",icon:oe("/favicon.png"),balance:"1,250.45",usdValue:"$2,500.90"},{symbol:"USDC",name:"USD Coin",icon:oe("/coins/usdc.svg"),balance:"500.00",usdValue:"$500.00"},{symbol:"USDT",name:"Tether",icon:oe("/coins/usdt.svg"),balance:"750.25",usdValue:"$750.25"},{symbol:"ETH",name:"Ethereum",icon:oe("/coins/eth_logo.svg"),balance:"2.5",usdValue:"$5,750.00"},{symbol:"BTC",name:"Bitcoin",icon:oe("/coins/bitcoin-logo.svg"),balance:"0.15",usdValue:"$6,450.00"},{symbol:"BNB",name:"Binance Coin",icon:oe("/coins/bnb.svg"),balance:"5.2",usdValue:"$1,560.00"},{symbol:"MATIC",name:"Polygon",icon:oe("/coins/matic.svg"),balance:"1,200.00",usdValue:"$840.00"},{symbol:"AVAX",name:"Avalanche",icon:oe("/coins/avax-token.svg"),balance:"25.5",usdValue:"$765.00"},{symbol:"UNI",name:"Uniswap",icon:oe("/coins/uni.svg"),balance:"45.2",usdValue:"$315.40"},{symbol:"LINK",name:"Chainlink",icon:oe("/coins/chainlink.svg"),balance:"125.8",usdValue:"$1,887.00"},{symbol:"DAI",name:"Dai Stablecoin",icon:oe("/coins/dai.svg"),balance:"1,000.00",usdValue:"$1,000.00"},{symbol:"COMP",name:"Compound",icon:oe("/coins/comp.svg"),balance:"8.5",usdValue:"$425.00"},{symbol:"MKR",name:"Maker",icon:oe("/coins/mkr.svg"),balance:"1.2",usdValue:"$1,680.00"},{symbol:"SUSHI",name:"SushiSwap",icon:oe("/coins/sushi.svg"),balance:"280.5",usdValue:"$224.40"},{symbol:"CRV",name:"Curve DAO",icon:oe("/coins/crv.svg"),balance:"450.0",usdValue:"$315.00"},{symbol:"FTM",name:"Fantom",icon:oe("/coins/ftm.svg"),balance:"1,500.0",usdValue:"$450.00"},{symbol:"ARB",name:"Arbitrum",icon:oe("/coins/arbitrum.svg"),balance:"350.0",usdValue:"$420.00"},{symbol:"OP",name:"Optimism",icon:oe("/coins/optimism.svg"),balance:"125.0",usdValue:"$250.00"},{symbol:"SOL",name:"Solana",icon:oe("/coins/solana-logo.svg"),balance:"12.5",usdValue:"$1,125.00"},{symbol:"MANA",name:"Decentraland",icon:oe("/coins/mana.svg"),balance:"850.0",usdValue:"$340.00"},{symbol:"SAND",name:"The Sandbox",icon:oe("/coins/SAND.svg"),balance:"1,200.0",usdValue:"$480.00"},{symbol:"ENJ",name:"Enjin Coin",icon:oe("/coins/enj.svg"),balance:"650.0",usdValue:"$195.00"},{symbol:"BAT",name:"Basic Attention",icon:oe("/coins/bat.svg"),balance:"2,500.0",usdValue:"$500.00"},{symbol:"GALA",name:"Gala",icon:oe("/coins/gala.svg"),balance:"8,500.0",usdValue:"$255.00"},{symbol:"SHIB",name:"Shiba Inu",icon:oe("/coins/shib.svg"),balance:"50,000,000",usdValue:"$450.00"},{symbol:"APE",name:"ApeCoin",icon:oe("/coins/ape.svg"),balance:"85.0",usdValue:"$102.00"},{symbol:"DYDX",name:"dYdX",icon:oe("/coins/dydx.svg"),balance:"125.0",usdValue:"$187.50"},{symbol:"LDO",name:"Lido DAO",icon:oe("/coins/LDO.svg"),balance:"250.0",usdValue:"$375.00"}],qA=[{id:"ethereum",name:"Ethereum",icon:oe("/networks/eth.png"),chainId:1},{id:"polygon",name:"Polygon",icon:oe("/networks/poligon.png"),chainId:137},{id:"bsc",name:"BSC",icon:oe("/networks/bsc.png"),chainId:56},{id:"arbitrum",name:"Arbitrum",icon:oe("/networks/arbitrum.png"),chainId:42161},{id:"optimism",name:"Optimism",icon:oe("/networks/op.png"),chainId:10},{id:"avalanche",name:"Avalanche",icon:oe("/networks/avalanche.png"),chainId:43114},{id:"solana",name:"Solana",icon:oe("/networks/sol.png"),chainId:101}],Tae=[{id:"mock-26",content:"Check out this amazing view! ",author:"Photo Master",walletAddress:"0xabcd...9356",handle:"@photomaster",avatar:ye("0xa012345678abcdef"),timestamp:"now",reactions:{comments:1,likes:3,views:12,shares:1},hasImage:!0,imageUrl:oe("/posts/3.webp")},{id:"mock-1",content:"Just launched my new DeFi protocol!  Building the future of decentralized finance one smart contract at a time.",author:"Alex Crypto",walletAddress:"0x1234...90ab",handle:"@alexcrypto",avatar:ye("0x1234567890abcdef"),timestamp:"2h",reactions:{comments:24,likes:156,views:1800,shares:43},hasImage:!0,imageUrl:oe("/posts/1.webp")},{id:"mock-2",content:"Privacy is not about hiding something. Privacy is about protecting something. Your data, your choice.",author:"Maria DeFi",walletAddress:"0x2345...1bcd",handle:"@mariadefi",avatar:ye("0x2345678901bcdef0"),timestamp:"4h",reactions:{comments:89,likes:342,views:2400,shares:127},hasImage:!1},{id:"mock-3",content:"The beauty of blockchain: immutable, transparent, and trustless. Here's my latest NFT collection dropping tomorrow!",author:"Bob NFT",walletAddress:"0x3456...2cde",handle:"@bobnft",avatar:ye("0x3456789012cdef01"),timestamp:"6h",reactions:{comments:67,likes:234,views:1200,shares:89},hasImage:!0,imageUrl:oe("/posts/1.png")},{id:"mock-4",content:"Web3 social networks will revolutionize how we connect and share value. No more centralized gatekeepers!",author:"Sarah Web3",walletAddress:"0x4567...3def",handle:"@sarahweb3",avatar:ye("0x4567890123def012"),timestamp:"8h",reactions:{comments:45,likes:198,views:890,shares:76},hasImage:!1},{id:"mock-28",content:"",author:"Silent Photographer",walletAddress:"0x9876...5432",handle:"@silentphoto",avatar:ye("0x987654321abcdef0"),timestamp:"6h",reactions:{comments:12,likes:67,views:234,shares:8},hasImage:!0,imageUrl:oe("/posts/1.png")},{id:"mock-5",content:"Smart contracts are eating the world. Traditional agreements will soon be obsolete. Code is law!",author:"Dev Master",walletAddress:"0x5678...4e01",handle:"@devmaster",avatar:ye("0x567890123def0123"),timestamp:"12h",reactions:{comments:123,likes:456,views:3200,shares:234},hasImage:!1},{id:"mock-6",content:"Just moved 50 ETH to my cold wallet. Security first! ",author:"Crypto Whale",walletAddress:"0x6789...5f12",handle:"@cryptowhale",avatar:ye("0x6789ab123def4567"),timestamp:"14h",reactions:{comments:5,likes:23,views:156,shares:7},hasImage:!1},{id:"mock-7",content:"New generative art collection dropping next week! Each piece is unique and algorithmically created. ",author:"NFT Artist",walletAddress:"0x789a...6023",handle:"@nftartist",avatar:ye("0x789abc234def5678"),timestamp:"15h",reactions:{comments:12,likes:89,views:234,shares:15},hasImage:!1},{id:"mock-8",content:"Yield farming on Uniswap V3 is printing money!  APY is insane right now.",author:"DeFi Farmer",walletAddress:"0x89ab...7134",handle:"@defifarmer",avatar:ye("0x89abcd345def6789"),timestamp:"16h",reactions:{comments:8,likes:45,views:178,shares:9},hasImage:!1},{id:"mock-9",content:"Building the future one smart contract at a time. Web3 infrastructure is getting so much better! ",author:"Web3 Builder",walletAddress:"0x9abc...8245",handle:"@web3builder",avatar:ye("0x9abcde456def789a"),timestamp:"17h",reactions:{comments:18,likes:67,views:289,shares:12},hasImage:!1},{id:"mock-10",content:"Gas optimization is an art form. Just saved 40% gas on my latest contract deployment! ",author:"Solidity Dev",walletAddress:"0xabcd...9356",handle:"@soliditydev",avatar:ye("0xabcdef567def89ab"),timestamp:"18h",reactions:{comments:25,likes:134,views:456,shares:28},hasImage:!1},{id:"mock-11",content:"Found a new yield farming opportunity with 200% APY! Risk level: moderate. DYOR! ",author:"Yield Hunter",walletAddress:"0xbcde...a467",handle:"@yieldhunter",avatar:ye("0xbcdef0678def9abc"),timestamp:"19h",reactions:{comments:7,likes:34,views:123,shares:6},hasImage:!1},{id:"mock-12",content:"Just voted on 5 different DAO proposals today. Governance participation is crucial for decentralization! ",author:"DAO Voter",walletAddress:"0xcdef...b578",handle:"@daovoter",avatar:ye("0xcdef01789defabcd"),timestamp:"20h",reactions:{comments:15,likes:78,views:234,shares:19},hasImage:!1},{id:"mock-13",content:"Extracted 2.3 ETH profit from sandwich attacks today. MEV is the new gold rush ",author:"MEV Bot",walletAddress:"0xdef0...c689",handle:"@mevbot",avatar:ye("0xdef0123abcdefbcd"),timestamp:"21h",reactions:{comments:3,likes:12,views:67,shares:2},hasImage:!1},{id:"mock-14",content:"Flash loan arbitrage between Uniswap and SushiSwap netted me 0.8 ETH in one transaction! ",author:"Flash Loan",walletAddress:"0xef01...d79a",handle:"@flashloan",avatar:ye("0xef01234bcdefcdef"),timestamp:"22h",reactions:{comments:9,likes:56,views:189,shares:11},hasImage:!1},{id:"mock-15",content:"Providing liquidity to ETH/USDC pool on Uniswap V3. Concentrated liquidity is the future! ",author:"Liquidity Pro",walletAddress:"0xf012...e8ab",handle:"@liquiditypro",avatar:ye("0xf012345cdefdefef"),timestamp:"23h",reactions:{comments:21,likes:98,views:345,shares:24},hasImage:!1},{id:"mock-16",content:"Gas prices are at 15 gwei right now! Perfect time for those pending transactions ",author:"Gas Tracker",walletAddress:"0x0123...f9bc",handle:"@gastracker",avatar:ye("0x0123456defef0123"),timestamp:"1d",reactions:{comments:4,likes:27,views:98,shares:5},hasImage:!1},{id:"mock-17",content:"Bridged 1000 USDC from Ethereum to Polygon. Layer 2 fees are so much cheaper! ",author:"Bridge User",walletAddress:"0x1234...0acd",handle:"@bridgeuser",avatar:ye("0x1234567ef012345"),timestamp:"1d",reactions:{comments:13,likes:71,views:223,shares:16},hasImage:!1},{id:"mock-18",content:"Staking rewards are compounding nicely! 32 ETH locked in ETH 2.0 for the long term ",author:"Staking Guru",walletAddress:"0x2345...1bde",handle:"@stakingguru",avatar:ye("0x2345678f0123456"),timestamp:"1d",reactions:{comments:29,likes:145,views:478,shares:32},hasImage:!1},{id:"mock-19",content:"Found alpha in a new DeFi protocol!  Early bird gets the worm. Research is key!",author:"Alpha Seeker",walletAddress:"0x3456...2cef",handle:"@alphaseeker",avatar:ye("0x3456789012345678"),timestamp:"1d",reactions:{comments:6,likes:38,views:134,shares:8},hasImage:!1},{id:"mock-20",content:"YOLOd into a memecoin and it 10xd! Sometimes being degen pays off ",author:"Degen Trader",walletAddress:"0x4567...3df0",handle:"@degentrader",avatar:ye("0x4567890123456789"),timestamp:"1d",reactions:{comments:17,likes:89,views:267,shares:21},hasImage:!1},{id:"mock-21",content:"Yield farming across 3 different protocols. Diversification is key in DeFi! ",author:"Yield Farmer",walletAddress:"0x5678...4e01",handle:"@yieldfarmer",avatar:ye("0x567890123456789a"),timestamp:"1d",reactions:{comments:11,likes:63,views:198,shares:14},hasImage:!1},{id:"mock-22",content:"Arbitrage opportunities are everywhere if you know where to look! Made 0.5 ETH today ",author:"Arbitrage Bot",walletAddress:"0x6789...5f12",handle:"@arbitragebot",avatar:ye("0x6789012345678abc"),timestamp:"1d",reactions:{comments:2,likes:19,views:76,shares:3},hasImage:!1},{id:"mock-23",content:"LP tokens are earning me passive income while I sleep. DeFi is beautiful! ",author:"LP Provider",walletAddress:"0x789a...6023",handle:"@lpprovider",avatar:ye("0x789012345678abcd"),timestamp:"1d",reactions:{comments:14,likes:82,views:245,shares:18},hasImage:!1},{id:"mock-24",content:"New governance proposal is live! Vote to shape the future of our protocol ",author:"Governance",walletAddress:"0x89ab...7134",handle:"@governance",avatar:ye("0x89012345678abcde"),timestamp:"1d",reactions:{comments:26,likes:127,views:389,shares:31},hasImage:!1},{id:"mock-25",content:"Shipped a new feature to our DeFi protocol! Zero downtime deployment on mainnet ",author:"Protocol Dev",walletAddress:"0x9abc...8245",handle:"@protocoldev",avatar:ye("0x9012345678abcdef"),timestamp:"1d",reactions:{comments:8,likes:47,views:156,shares:10},hasImage:!1}],HA=[{id:"load-1",content:"Just discovered a new layer 2 solution with 0.001 ETH gas fees! This is the future! ",author:"Layer2 Explorer",walletAddress:"0xabc1...def2",handle:"@layer2explorer",avatar:ye("0xabc123def456789"),timestamp:"3d",reactions:{comments:34,likes:178,views:892,shares:45},hasImage:!1},{id:"load-2",content:"My portfolio is up 300% this month thanks to DeFi yield strategies. WAGMI! ",author:"DeFi Degen",walletAddress:"0xdef2...abc3",handle:"@defidegen",avatar:ye("0xdef234abc567890"),timestamp:"3d",reactions:{comments:67,likes:445,views:1567,shares:89},hasImage:!1},{id:"load-3",content:"Built my first smart contract today! It automatically distributes rewards to stakers ",author:"Smart Contract Dev",walletAddress:"0x123a...bcd4",handle:"@smartcontractdev",avatar:ye("0x123abc456def789"),timestamp:"4d",reactions:{comments:28,likes:156,views:734,shares:23},hasImage:!1},{id:"load-4",content:"NFT drop was insane! Sold out in 3 minutes. Floor price already 10x ",author:"NFT Collector",walletAddress:"0x456b...cde5",handle:"@nftcollector",avatar:ye("0x456bcd789def012"),timestamp:"4d",reactions:{comments:92,likes:567,views:2134,shares:156},hasImage:!0,imageUrl:oe("/posts/1.webp")},{id:"load-5",content:"Cross-chain bridge working perfectly! Moved assets from ETH to Arbitrum in seconds ",author:"Bridge Master",walletAddress:"0x789c...def6",handle:"@bridgemaster",avatar:ye("0x789cdef012345678"),timestamp:"5d",reactions:{comments:15,likes:89,views:445,shares:12},hasImage:!1},{id:"load-6",content:"Governance vote passed! New tokenomics will make our protocol even more deflationary ",author:"DAO Member",walletAddress:"0xabc7...123d",handle:"@daomember",avatar:ye("0xabc789123def456"),timestamp:"5d",reactions:{comments:78,likes:234,views:1023,shares:67},hasImage:!1},{id:"load-7",content:"Liquidity mining rewards are crazy good right now! 400% APY on this new pool ",author:"Yield Farmer Pro",walletAddress:"0xdef8...456e",handle:"@yieldfarmerpro",avatar:ye("0xdef890456789abc"),timestamp:"6d",reactions:{comments:56,likes:312,views:1456,shares:89},hasImage:!1},{id:"load-8",content:"Zero-knowledge proofs are revolutionizing privacy! This technology is mind-blowing ",author:"ZK Researcher",walletAddress:"0x123f...789g",handle:"@zkresearcher",avatar:ye("0x123fab789cdef01"),timestamp:"6d",reactions:{comments:43,likes:201,views:856,shares:34},hasImage:!1},{id:"load-9",content:"Metaverse land prices going parabolic! Just bought a plot next to a major brand ",author:"Metaverse Investor",walletAddress:"0x456g...abc8",handle:"@metaverseinvestor",avatar:ye("0x456ghi890abcdef"),timestamp:"7d",reactions:{comments:123,likes:678,views:2345,shares:234},hasImage:!0,imageUrl:oe("/posts/3.webp")},{id:"load-10",content:"Decentralized identity is the future! No more centralized platforms controlling our data ",author:"Identity Protocol",walletAddress:"0x789h...def9",handle:"@identityprotocol",avatar:ye("0x789hij123defabc"),timestamp:"7d",reactions:{comments:67,likes:289,views:1123,shares:78},hasImage:!1},{id:"load-11",content:"Flash loan attack prevented by our new security module! DeFi security is evolving ",author:"Security Auditor",walletAddress:"0xabc9...123h",handle:"@securityauditor",avatar:ye("0xabc901234hijklm"),timestamp:"8d",reactions:{comments:89,likes:445,views:1567,shares:123},hasImage:!1},{id:"load-12",content:"Automated trading bot made 50% profit this week! Math and code never sleep ",author:"Bot Creator",walletAddress:"0xdef0...456i",handle:"@botcreator",avatar:ye("0xdef012345ijklmn"),timestamp:"8d",reactions:{comments:234,likes:789,views:3456,shares:345},hasImage:!1},{id:"load-13",content:"Community-driven development is the way! Our DAO just funded 10 new projects ",author:"Community Lead",walletAddress:"0x123i...789j",handle:"@communitylead",avatar:ye("0x123ijk789mnopqr"),timestamp:"9d",reactions:{comments:156,likes:567,views:2123,shares:189},hasImage:!1},{id:"load-14",content:"Interoperability between chains is finally seamless! One click, multiple networks ",author:"Interop Engineer",walletAddress:"0x456j...abc0",handle:"@interopenginer",avatar:ye("0x456jkl890pqrstu"),timestamp:"9d",reactions:{comments:78,likes:234,views:1012,shares:56},hasImage:!1},{id:"load-15",content:"Decentralized storage is replacing traditional cloud! Your data, your control ",author:"Storage Pioneer",walletAddress:"0x789k...def1",handle:"@storagepioneer",avatar:ye("0x789klm123stuvwx"),timestamp:"10d",reactions:{comments:134,likes:678,views:2890,shares:234},hasImage:!1},{id:"load-16",content:"Carbon credit tokenization is solving climate change through blockchain! ",author:"Green Crypto",walletAddress:"0xabc1...123k",handle:"@greencrypto",avatar:ye("0xabc123klm456stu"),timestamp:"10d",reactions:{comments:267,likes:1234,views:5678,shares:456},hasImage:!0,imageUrl:oe("/posts/1.png")},{id:"load-17",content:"Prediction markets called the election perfectly! Decentralized wisdom wins again ",author:"Prediction Trader",walletAddress:"0xdef2...456l",handle:"@predictiontrader",avatar:ye("0xdef234lmn567uvw"),timestamp:"11d",reactions:{comments:345,likes:890,views:4567,shares:234},hasImage:!1},{id:"load-18",content:"Recursive zero-knowledge proofs are enabling infinite scalability! Math is beautiful ",author:"Math Wizard",walletAddress:"0x123l...789m",handle:"@mathwizard",avatar:ye("0x123lmn789wxyz01"),timestamp:"11d",reactions:{comments:89,likes:345,views:1234,shares:67},hasImage:!1},{id:"load-19",content:"Decentralized social media is gaining momentum! Web3 creators earning more than Web2 ",author:"Creator Economy",walletAddress:"0x456m...abc2",handle:"@creatoreconomy",avatar:ye("0x456mno890yz0123"),timestamp:"12d",reactions:{comments:456,likes:1567,views:6789,shares:678},hasImage:!1},{id:"load-20",content:"Quantum-resistant cryptography is already here! Preparing for the quantum future ",author:"Quantum Guard",walletAddress:"0x789n...def3",handle:"@quantumguard",avatar:ye("0x789nop123z01234"),timestamp:"12d",reactions:{comments:123,likes:456,views:1890,shares:89},hasImage:!1}],_e=[{id:"user-1",wallet_address:"0x1234...5678",display_name:"Cases Discussion"},{id:"user-2",wallet_address:"0x2345...6789",display_name:"Alex Crypto"},{id:"user-3",wallet_address:"0x3456...789a",display_name:"Maria DeFi"},{id:"user-4",wallet_address:"0x4567...89ab",display_name:"Bob NFT"},{id:"user-5",wallet_address:"0x5678...9abc",display_name:"Sarah Web3"},{id:"user-6",wallet_address:"0x6789...bcde",display_name:"Tom Trader"},{id:"user-7",wallet_address:"0x789a...cdef",display_name:"Lisa Luna"}],WA=["Absolutely agree!","Interesting point","Let me think about this","Good idea","Makes sense","I see what you mean","That could work","Nice perspective","Worth considering","Solid reasoning","True that","Exactly!","I disagree","Not sure about that","Can you elaborate?","Sounds good","Let's do it","Maybe later","I'm in","Count me out","What do you think?","This is exciting!","Could be risky though","Need more research","I love this idea","Not my cup of tea","Brilliant suggestion","Have you tried this before?","Seems legit","Red flag for me","To the moon! ","HODL strong","Diamond hands ","Paper hands detected","This is the way","Bullish on this","Bearish vibes","WAGMI","LFG!","Wen moon?"],Pae=t=>[{id:"chat-1",name:"1bp5...0x15",wallet_address:"0x1bp5...0x15",lastMessage:"Some are looking good too",messages:[{id:"msg-1-1",content:"GM! Ready for trading?",sender_id:"user-2",created_at:new Date(Date.now()-36e5).toISOString(),sender:_e[1]},{id:"msg-1-2",content:"Always ready! What are you looking at?",sender_id:"current-user",created_at:new Date(Date.now()-35e5).toISOString(),sender:{id:"current-user",wallet_address:t||"0x5B...42A8",display_name:"You"}},{id:"msg-1-3",content:"ETH is looking bullish today",sender_id:"user-2",created_at:new Date(Date.now()-34e5).toISOString(),sender:_e[1]},{id:"msg-1-4",content:"I agree, volume is picking up",sender_id:"current-user",created_at:new Date(Date.now()-33e5).toISOString(),sender:{id:"current-user",wallet_address:t||"0x5B...42A8",display_name:"You"}},{id:"msg-1-5",content:"What about altcoins?",sender_id:"user-3",created_at:new Date(Date.now()-32e5).toISOString(),sender:_e[2]},{id:"msg-1-6",content:"Some are looking good too",sender_id:"user-2",created_at:new Date(Date.now()-31e5).toISOString(),sender:_e[1]},{id:"msg-1-7",content:"MATIC is pumping hard!",sender_id:"user-4",created_at:new Date(Date.now()-3e6).toISOString(),sender:_e[3]},{id:"msg-1-8",content:"Saw that too, up 15% today",sender_id:"current-user",created_at:new Date(Date.now()-29e5).toISOString(),sender:{id:"current-user",wallet_address:t||"0x5B...42A8",display_name:"You"}},{id:"msg-1-9",content:"To the moon! ",sender_id:"user-5",created_at:new Date(Date.now()-28e5).toISOString(),sender:_e[4]},{id:"msg-1-10",content:"Anyone buying the dip on LINK?",sender_id:"user-3",created_at:new Date(Date.now()-27e5).toISOString(),sender:_e[2]},{id:"msg-1-11",content:"Already loaded my bags",sender_id:"user-6",created_at:new Date(Date.now()-26e5).toISOString(),sender:_e[5]},{id:"msg-1-12",content:"Diamond hands ",sender_id:"current-user",created_at:new Date(Date.now()-25e5).toISOString(),sender:{id:"current-user",wallet_address:t||"0x5B...42A8",display_name:"You"}}]},{id:"chat-2",name:"Cases Discussion",wallet_address:"0xCases...Disc",lastMessage:"Count me in! ",messages:[{id:"msg-2-1",content:"Hey everyone! Welcome to the discussion",sender_id:"user-1",created_at:new Date(Date.now()-72e5).toISOString(),sender:_e[0]},{id:"msg-2-2",content:"Thanks for setting this up!",sender_id:"user-2",created_at:new Date(Date.now()-71e5).toISOString(),sender:_e[1]},{id:"msg-2-3",content:"Clear beats clever.",sender_id:"user-1",created_at:new Date(Date.now()-6e5).toISOString(),sender:_e[0]},{id:"msg-2-4",content:"Maybe we test both?",sender_id:"user-1",created_at:new Date(Date.now()-58e4).toISOString(),sender:_e[0]},{id:"msg-2-5",content:"Gut feeling says clarity wins.",sender_id:"current-user",created_at:new Date(Date.now()-56e4).toISOString(),sender:{id:"current-user",wallet_address:t||"0x5B...42A8",display_name:"You"}},{id:"msg-2-6",content:"Gut feeling says clarity wins.",sender_id:"user-2",created_at:new Date(Date.now()-54e4).toISOString(),sender:_e[1]},{id:"msg-2-7",content:"Bet",sender_id:"user-3",created_at:new Date(Date.now()-52e4).toISOString(),sender:_e[2]},{id:"msg-2-8",content:"meow-meow",sender_id:"user-3",created_at:new Date(Date.now()-5e5).toISOString(),sender:_e[2]},{id:"msg-2-9",content:"meow-meow",sender_id:"user-3",created_at:new Date(Date.now()-49e4).toISOString(),sender:_e[2]},{id:"msg-2-10",content:"meow-meow",sender_id:"user-3",created_at:new Date(Date.now()-485e3).toISOString(),sender:_e[2]},{id:"msg-2-11",content:"Lorem ipsum dolor sit amet consectetur. Proin at finibus mi libero consequat elementum. Quis arcu dolor porttitor in risus feugiat at tristique",sender_id:"user-4",created_at:new Date(Date.now()-48e4).toISOString(),sender:_e[3]},{id:"msg-2-12",content:"Lorem ipsum dolor sit amet consectetur.",sender_id:"current-user",created_at:new Date(Date.now()-46e4).toISOString(),sender:{id:"current-user",wallet_address:t||"0x5B...42A8",display_name:"You"}},{id:"msg-2-13",content:"This is getting interesting",sender_id:"user-4",created_at:new Date(Date.now()-44e4).toISOString(),sender:_e[3]},{id:"msg-2-14",content:"I think we should consider all options",sender_id:"user-4",created_at:new Date(Date.now()-42e4).toISOString(),sender:_e[3]},{id:"msg-2-15",content:"What do you think about the new proposal?",sender_id:"user-2",created_at:new Date(Date.now()-4e5).toISOString(),sender:_e[1]},{id:"msg-2-16",content:"Looks promising to me",sender_id:"user-3",created_at:new Date(Date.now()-38e4).toISOString(),sender:_e[2]},{id:"msg-2-17",content:"Need more details though",sender_id:"current-user",created_at:new Date(Date.now()-36e4).toISOString(),sender:{id:"current-user",wallet_address:t||"0x5B...42A8",display_name:"You"}},{id:"msg-2-18",content:"I can provide more info later",sender_id:"user-1",created_at:new Date(Date.now()-34e4).toISOString(),sender:_e[0]},{id:"msg-2-19",content:"That would be great!",sender_id:"user-4",created_at:new Date(Date.now()-32e4).toISOString(),sender:_e[3]},{id:"msg-2-20",content:"Looking forward to it",sender_id:"user-4",created_at:new Date(Date.now()-3e5).toISOString(),sender:_e[3]},{id:"msg-2-21",content:"This could be a game changer",sender_id:"user-5",created_at:new Date(Date.now()-28e4).toISOString(),sender:_e[4]},{id:"msg-2-22",content:"Absolutely agree!",sender_id:"user-6",created_at:new Date(Date.now()-26e4).toISOString(),sender:_e[5]},{id:"msg-2-23",content:"What timeline are we looking at?",sender_id:"current-user",created_at:new Date(Date.now()-24e4).toISOString(),sender:{id:"current-user",wallet_address:t||"0x5B...42A8",display_name:"You"}},{id:"msg-2-24",content:"Probably next quarter",sender_id:"user-1",created_at:new Date(Date.now()-22e4).toISOString(),sender:_e[0]},{id:"msg-2-25",content:"Perfect timing then",sender_id:"user-7",created_at:new Date(Date.now()-2e5).toISOString(),sender:_e[6]},{id:"msg-2-26",content:"Count me in! ",sender_id:"user-2",created_at:new Date(Date.now()-18e4).toISOString(),sender:_e[1]}]},{id:"chat-3",name:"DeFi Traders",wallet_address:"0xDeFi...Trad",lastMessage:"Always DYOR before investing",messages:[{id:"msg-3-1",content:"Check out this new yield farm!",sender_id:"user-3",created_at:new Date(Date.now()-18e5).toISOString(),sender:_e[2]},{id:"msg-3-2",content:"What are the APY rates?",sender_id:"current-user",created_at:new Date(Date.now()-17e5).toISOString(),sender:{id:"current-user",wallet_address:t||"0x5B...42A8",display_name:"You"}},{id:"msg-3-3",content:"Around 150% APY right now",sender_id:"user-3",created_at:new Date(Date.now()-16e5).toISOString(),sender:_e[2]},{id:"msg-3-4",content:"Sounds too good to be true",sender_id:"user-4",created_at:new Date(Date.now()-15e5).toISOString(),sender:_e[3]},{id:"msg-3-5",content:"Could be risky though",sender_id:"user-5",created_at:new Date(Date.now()-145e4).toISOString(),sender:_e[4]},{id:"msg-3-6",content:"What protocol is it?",sender_id:"user-6",created_at:new Date(Date.now()-144e4).toISOString(),sender:_e[5]},{id:"msg-3-7",content:"Some new fork of Uniswap",sender_id:"user-3",created_at:new Date(Date.now()-143e4).toISOString(),sender:_e[2]},{id:"msg-3-8",content:"Red flag for me",sender_id:"current-user",created_at:new Date(Date.now()-142e4).toISOString(),sender:{id:"current-user",wallet_address:t||"0x5B...42A8",display_name:"You"}},{id:"msg-3-9",content:"I agree with caution",sender_id:"user-7",created_at:new Date(Date.now()-141e4).toISOString(),sender:_e[6]},{id:"msg-3-10",content:"Always DYOR before investing",sender_id:"user-5",created_at:new Date(Date.now()-14e5).toISOString(),sender:_e[4]}]},{id:"chat-4",name:"NFT Collectors",wallet_address:"0xNFT...Coll",lastMessage:"Bullish on this collection",messages:[{id:"msg-4-1",content:"New drop coming soon!",sender_id:"user-4",created_at:new Date(Date.now()-9e5).toISOString(),sender:_e[3]},{id:"msg-4-2",content:"Which collection?",sender_id:"current-user",created_at:new Date(Date.now()-8e5).toISOString(),sender:{id:"current-user",wallet_address:t||"0x5B...42A8",display_name:"You"}},{id:"msg-4-3",content:"CryptoPunks derivative",sender_id:"user-4",created_at:new Date(Date.now()-7e5).toISOString(),sender:_e[3]},{id:"msg-4-4",content:"Mint price?",sender_id:"user-2",created_at:new Date(Date.now()-6e5).toISOString(),sender:_e[1]},{id:"msg-4-5",content:"0.1 ETH per NFT",sender_id:"user-4",created_at:new Date(Date.now()-5e5).toISOString(),sender:_e[3]},{id:"msg-4-6",content:"That seems reasonable",sender_id:"user-1",created_at:new Date(Date.now()-45e4).toISOString(),sender:_e[0]},{id:"msg-4-7",content:"Art looks decent too",sender_id:"user-3",created_at:new Date(Date.now()-4e5).toISOString(),sender:_e[2]},{id:"msg-4-8",content:"Team is doxxed?",sender_id:"user-5",created_at:new Date(Date.now()-35e4).toISOString(),sender:_e[4]},{id:"msg-4-9",content:"Yes, all verified",sender_id:"user-4",created_at:new Date(Date.now()-3e5).toISOString(),sender:_e[3]},{id:"msg-4-10",content:"Utility planned?",sender_id:"current-user",created_at:new Date(Date.now()-25e4).toISOString(),sender:{id:"current-user",wallet_address:t||"0x5B...42A8",display_name:"You"}},{id:"msg-4-11",content:"Gaming integration coming",sender_id:"user-4",created_at:new Date(Date.now()-2e5).toISOString(),sender:_e[3]},{id:"msg-4-12",content:"Bullish on this collection",sender_id:"user-6",created_at:new Date(Date.now()-15e4).toISOString(),sender:_e[5]}]}],Oae=[{id:"mock-1",from:"0x742d35cc6cf5cf4c4e2ec4b4c9c7e8d3e9a2f1c0",to:"0x8ba1f109551bd432803012645hac136c",amount:"1500",token:"HUSHR",network:"Ethereum",status:"completed",timestamp:new Date(Date.now()-1e3*60*60*2),hash:"0x1234567890abcdef1234567890abcdef12345678"},{id:"mock-2",from:"0x742d35cc6cf5cf4c4e2ec4b4c9c7e8d3e9a2f1c0",to:"0xa1b2c3d4e5f6789012345678901234567890abcd",amount:"50",token:"USDC",network:"Polygon",status:"completed",timestamp:new Date(Date.now()-1e3*60*60*6),hash:"0xabcdef1234567890abcdef1234567890abcdef12"},{id:"mock-3",from:"0x742d35cc6cf5cf4c4e2ec4b4c9c7e8d3e9a2f1c0",to:"0x9876543210fedcba9876543210fedcba98765432",amount:"1500",token:"USDT",network:"BSC",status:"completed",timestamp:new Date(Date.now()-1e3*60*60*12),hash:"0xfedcba0987654321fedcba0987654321fedcba09"},{id:"mock-4",from:"0x742d35cc6cf5cf4c4e2ec4b4c9c7e8d3e9a2f1c0",to:"0x1122334455667788991234567890123456789abc",amount:"5",token:"BNB",network:"BSC",status:"completed",timestamp:new Date(Date.now()-1e3*60*60*24),hash:"0x11223344556677889912345678901234567890ab"},{id:"mock-5",from:"0x742d35cc6cf5cf4c4e2ec4b4c9c7e8d3e9a2f1c0",to:"0xaa11bb22cc33dd44ee55ff6677889900aabbccdd",amount:"0.0025",token:"ETH",network:"Ethereum",status:"completed",timestamp:new Date(Date.now()-1e3*60*60*48),hash:"0xaa11bb22cc33dd44ee55ff6677889900aabbccdd"},{id:"mock-6",from:"0x742d35cc6cf5cf4c4e2ec4b4c9c7e8d3e9a2f1c0",to:"0xdeadbeefcafebabe1234567890123456789abcde",amount:"200",token:"MATIC",network:"Polygon",status:"completed",timestamp:new Date(Date.now()-1e3*60*60*72),hash:"0xdeadbeefcafebabe1234567890123456789abcde"},{id:"mock-7",from:"0x742d35cc6cf5cf4c4e2ec4b4c9c7e8d3e9a2f1c0",to:"0x1111222233334444555566667777888899990000",amount:"100",token:"USDC",network:"Arbitrum",status:"failed",timestamp:new Date(Date.now()-1e3*60*60*96)}],kae=({onNotificationChange:t,selectedChatId:e})=>{const{walletAddress:n}=wc(),[r,s]=te.useState(""),[i,o]=te.useState(e||"chat-1"),[a,c]=te.useState(null),l=te.useRef(null),u=te.useRef(null),d=["#4080F8","#40F8F8","#8040F8","#F84040","#F840B8","#F88040","#F8E040"],h=E=>{let k=0;for(let j=0;j<E.length;j++)k=E.charCodeAt(j)+((k<<5)-k);const R=Math.abs(k)%d.length;return d[R]},[f,p]=te.useState(Pae(n||void 0));te.useEffect(()=>{e&&o(e)},[e]);const m=()=>{var E;(E=u.current)==null||E.scrollIntoView({behavior:"smooth"})};te.useEffect(()=>{m()},[f,i]);const v=E=>{var R;const k=(R=E.target.files)==null?void 0:R[0];if(k&&k.type.startsWith("image/")){const j=new FileReader;j.onload=L=>{var S;const B=(S=L.target)==null?void 0:S.result;c(B)},j.readAsDataURL(k)}},y=()=>{var E;(E=l.current)==null||E.click()},w=()=>{c(null)},b=()=>{const E=_e.filter(L=>L.id!=="current-user"),k=E[Math.floor(Math.random()*E.length)],R=WA[Math.floor(Math.random()*WA.length)],j={id:`msg-${Date.now()}-${Math.random()}`,content:R,sender_id:k.id,created_at:new Date().toISOString(),sender:k};p(L=>L.map(B=>B.id===i?{...B,messages:[...B.messages,j],lastMessage:R}:B))},C=E=>{if(E.preventDefault(),!r.trim()&&!a)return;const k=`msg-${Date.now()}`,R={id:k,content:r||(a?"Image":""),sender_id:"current-user",created_at:new Date().toISOString(),sender:{id:"current-user",wallet_address:n||"0x5B...42A8",display_name:"You"},image:a||void 0,ticks:"one"};p(j=>j.map(L=>L.id===i?{...L,messages:[...L.messages,R],lastMessage:r}:L)),s(""),c(null),setTimeout(()=>{p(j=>j.map(L=>L.id===i?{...L,messages:L.messages.map(B=>B.id===k?{...B,ticks:"two"}:B)}:L)),b(),Math.random()>.5&&setTimeout(()=>{b()},2e3+Math.random()*3e3)},1e3+Math.random()*2e3),t(!1)},x=E=>new Date(E).toLocaleTimeString("uk-UA",{hour:"2-digit",minute:"2-digit",hour12:!1}),T=E=>{const k=new Set;return E.messages.forEach(R=>{k.add(R.sender_id)}),k.size},N=f.find(E=>E.id===i),U=N?N.messages:[];return g.jsx("div",{className:"flex h-screen w-full min-w-[696px] max-w-[696px] border-l border-r border-hushr-gray lg:border-l lg:border-r border-l-0 border-r-0 relative",children:g.jsxs("div",{className:"flex flex-col w-full",children:[g.jsx("div",{className:"sticky top-0 bg-black border-b border-hushr-gray p-4 z-10",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-white",children:g.jsx("div",{className:"w-full h-full flex items-center justify-center text-black font-bold",children:(N==null?void 0:N.name.substring(0,2).toUpperCase())||"CD"})}),g.jsxs("div",{children:[g.jsx("div",{className:"text-white font-quicksand font-semibold text-base",children:(N==null?void 0:N.name)||"Cases Discussion"}),g.jsx("div",{className:"text-white/70 font-quicksand text-sm",children:N?`${T(N)} members`:"3 members"})]})]})}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 mb-8",children:[U.map(E=>{var k,R,j,L,B;return g.jsxs("div",{className:`flex ${E.sender_id==="current-user"?"justify-end":"justify-start"}`,children:[E.sender_id!=="current-user"&&g.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden mr-3 flex-shrink-0",children:g.jsx("img",{src:ye(((k=E.sender)==null?void 0:k.wallet_address)||""),alt:(R=E.sender)==null?void 0:R.display_name,className:"w-full h-full object-cover"})}),g.jsx("div",{className:`max-w-md ${E.sender_id==="current-user"?"ml-12":"mr-12"}`,children:g.jsxs("div",{className:"px-4 py-2 rounded-2xl bg-white/10 text-white",children:[g.jsx("div",{className:`mb-1 ${E.sender_id==="current-user"?"text-right":"text-left"}`,children:g.jsx("span",{className:"font-quicksand font-semibold text-sm",style:{color:E.sender_id==="current-user"?"#40F8AB":h(E.sender_id)},children:E.sender_id==="current-user"?`${(((j=E.sender)==null?void 0:j.wallet_address)||"").slice(0,6)}...${(((L=E.sender)==null?void 0:L.wallet_address)||"").slice(-4)}`:(B=E.sender)==null?void 0:B.wallet_address})}),E.image&&g.jsx("div",{className:E.content&&E.content!=="Image"?"mb-2":"",children:g.jsx("img",{src:E.image,alt:"Shared image",className:"max-w-[200px] max-h-[200px] rounded-lg object-cover"})}),E.content&&E.content!=="Image"&&g.jsxs("div",{className:"flex items-end justify-between gap-2",children:[g.jsx("p",{className:"font-quicksand text-sm flex-1",children:E.content}),g.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[g.jsx("span",{className:"text-white/50 font-quicksand text-xs",children:x(E.created_at)}),E.sender_id==="current-user"&&E.ticks&&g.jsx("img",{src:E.ticks==="one"?oe("/chat/1tick.svg"):oe("/chat/2ticks.svg"),alt:E.ticks==="one"?"1 tick":"2 ticks",className:"w-4 h-3"})]})]}),E.image&&(!E.content||E.content==="Image")&&g.jsxs("div",{className:"flex items-center justify-end gap-1 mt-1",children:[g.jsx("span",{className:"text-white/50 font-quicksand text-xs",children:x(E.created_at)}),E.sender_id==="current-user"&&E.ticks&&g.jsx("img",{src:E.ticks==="one"?oe("/chat/1tick.svg"):oe("/chat/2ticks.svg"),alt:E.ticks==="one"?"1 tick":"2 ticks",className:"w-4 h-3"})]})]})}),E.sender_id==="current-user"&&g.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden ml-3 flex-shrink-0",children:g.jsx("img",{src:ye(n||"current-user"),alt:"You",className:"w-full h-full object-cover",onError:S=>{const I=S.target,$=oe("/avatars/1.webp");I.src!==$&&(I.src=$)}})})]},E.id)}),g.jsx("div",{ref:u})]}),a&&g.jsx("div",{className:"absolute bottom-24 left-4 z-20",children:g.jsxs("div",{className:"relative",children:[g.jsx("img",{src:a,alt:"Selected",className:"max-w-[100px] max-h-[100px] rounded-lg object-cover shadow-lg"}),g.jsx("button",{onClick:w,className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full text-xs flex items-center justify-center hover:bg-red-600 transition-colors",children:""})]})}),g.jsxs("div",{className:"sticky bottom-8 flex flex-col items-start px-4 z-10",children:[g.jsx("form",{onSubmit:C,className:"w-full max-w-[664px]",children:g.jsxs("div",{className:"flex items-center justify-between px-4 py-4 gap-4 w-full h-16 bg-black border border-hushr-gray rounded-2xl",children:[g.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[g.jsx("button",{type:"button",onClick:y,className:"group w-6 h-6 text-white/50 hover:text-hushr-green transition-colors",children:g.jsx("img",{src:oe("/buttons/attachImage.svg"),alt:"Attach Image",className:"w-full h-full group-hover:opacity-100 opacity-50 transition-opacity"})}),g.jsx("input",{type:"text",value:r,onChange:E=>s(E.target.value),placeholder:"Speak safely...",className:"flex-1 bg-transparent text-white placeholder-white/50 font-quicksand font-medium text-base leading-5 focus:outline-none"})]}),g.jsx("button",{type:"submit",disabled:!r.trim()&&!a,className:"w-7 h-7 disabled:opacity-30 transition-opacity",children:g.jsx("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",children:g.jsx("path",{d:"M4.03 15.75L10.5 14L4.03 12.25L4 4L24 14L4 24L4.03 15.75Z",fill:"#40F8AB"})})})]})}),g.jsx("input",{ref:l,type:"file",accept:"image/*",onChange:v,className:"hidden"})]})]})})},Rae=()=>g.jsxs("div",{className:"flex flex-col items-end py-8 gap-8 w-[280px] h-screen",children:[g.jsxs("div",{className:"flex justify-end items-center gap-4 w-[265px] h-[57px]",children:[g.jsx("div",{className:"flex items-center gap-2 w-[46px] h-[25px]",children:g.jsx("span",{className:"text-hushr-green font-quicksand font-medium text-xl leading-[25px]",children:"+21%"})}),g.jsxs("button",{className:"flex justify-center items-center px-6 py-4 gap-2 w-[203px] h-[57px] border border-hushr-green rounded-2xl hover:bg-hushr-green/10 transition-colors",children:[g.jsx("img",{width:24,height:24,src:oe("/favicon.png"),alt:"Buy $hushr"}),g.jsx("span",{className:"text-hushr-green font-quicksand font-semibold text-xl leading-[25px]",children:"Buy $hushr"})]})]}),g.jsxs("div",{className:"flex flex-col items-start px-8 py-8 gap-8 w-[280px] border border-white/25 rounded-2xl",children:[g.jsx("h2",{className:"text-white font-quicksand font-semibold text-2xl leading-[30px] w-[216px] h-[30px]",children:"Trending now"}),g.jsx("div",{className:"flex flex-col items-start gap-8 w-[216px]",children:[{hashtag:"#memes",count:"1m posts"},{hashtag:"#Cryptocats",count:"1m posts"},{hashtag:"#Investments",count:"1m posts"},{hashtag:"#wales_go",count:"1m posts"},{hashtag:"#scammed",count:"1m posts"}].map((t,e)=>g.jsxs("div",{className:"flex flex-col w-[216px] h-[45px] hover:bg-white/5 p-2 -m-2 rounded-lg transition-colors cursor-pointer",children:[g.jsx("div",{className:"w-[216px] h-[25px]",children:g.jsx("span",{className:"text-white font-quicksand font-semibold text-xl leading-[25px]",children:t.hashtag})}),g.jsx("div",{className:"w-[66px] h-5",children:g.jsx("span",{className:"text-white/50 font-quicksand font-medium text-base leading-5",children:t.count})})]},e))}),g.jsx("div",{className:"flex items-center gap-2 w-[245px] h-5",children:g.jsx("span",{className:"text-hushr-green font-quicksand font-semibold text-base leading-5 w-[86px] h-5 cursor-pointer hover:text-hushr-green/80 transition-colors",children:"Show more"})})]})]}),PR=te.createContext(void 0),$ae=({children:t})=>{const[e,n]=te.useState(Oae),r=a=>{const c=Date.now().toString(),l={...a,id:c,timestamp:new Date};return n(u=>[l,...u]),c},s=(a,c,l)=>{n(u=>u.map(d=>d.id===a?{...d,status:c,hash:l}:d))},i=e.filter(a=>a.status==="pending"),o=e.filter(a=>a.status==="completed"||a.status==="failed");return g.jsx(PR.Provider,{value:{pendingTransactions:i,completedTransactions:o,addTransaction:r,updateTransactionStatus:s},children:t})},OR=()=>{const t=te.useContext(PR);if(t===void 0)throw new Error("useTransactions must be used within a TransactionProvider");return t},Dae=()=>{const{completedTransactions:t}=OR(),e=t.filter(n=>n.status==="completed").sort((n,r)=>r.timestamp.getTime()-n.timestamp.getTime()).slice(0,5);return g.jsxs("div",{className:"flex flex-col items-end py-8 gap-8 w-[280px] h-screen",children:[g.jsxs("div",{className:"flex justify-end items-center gap-4 w-[265px] h-[57px]",children:[g.jsx("div",{className:"flex items-center gap-2 w-[46px] h-[25px]",children:g.jsx("span",{className:"text-hushr-green font-quicksand font-medium text-xl leading-[25px]",children:"+21%"})}),g.jsxs("button",{className:"flex justify-center items-center px-6 py-4 gap-2 w-[203px] h-[57px] border border-hushr-green rounded-2xl hover:bg-hushr-green/10 transition-colors",children:[g.jsx("img",{width:24,height:24,src:oe("/favicon.png"),alt:"Buy $hushr"}),g.jsx("span",{className:"text-hushr-green font-quicksand font-semibold text-xl leading-[25px]",children:"Buy $hushr"})]})]}),g.jsxs("div",{className:"flex flex-col items-start px-8 py-8 gap-8 w-[280px] border border-white/25 rounded-2xl",children:[g.jsx("h2",{className:"text-white font-quicksand font-semibold text-2xl leading-[30px]",children:"Last TXs"}),g.jsx("div",{className:"flex flex-col items-start gap-4 w-[216px]",children:e.length>0?e.map(n=>g.jsxs("div",{className:"flex flex-col items-start w-full hover:bg-white/5 p-2 -m-2 rounded-lg transition-colors cursor-pointer",children:[g.jsxs("div",{className:"flex items-center gap-2 w-full",children:[g.jsxs("span",{className:"text-white font-quicksand font-semibold text-xl leading-[25px]",children:[n.amount," ",n.token]}),g.jsx("svg",{className:"w-6 h-6 text-hushr-green opacity-50 hover:opacity-100 transition-opacity",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})})]}),g.jsxs("div",{className:"flex items-center gap-2 w-full text-sm",children:[g.jsxs("span",{className:"text-white/50 font-quicksand font-medium",children:[n.from.slice(0,6),"...",n.from.slice(-4)]}),g.jsx("svg",{className:"w-4 h-4 text-white/50 transform rotate-180",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"})}),g.jsxs("span",{className:"text-white/50 font-quicksand font-medium",children:[n.to.slice(0,6),"...",n.to.slice(-4)]})]}),g.jsxs("div",{className:"flex items-center justify-between w-full text-xs mt-1",children:[g.jsx("span",{className:"text-white/30 font-quicksand font-medium",children:n.network}),g.jsx("span",{className:"text-white/30 font-quicksand font-medium",children:n.timestamp.toLocaleTimeString()})]})]},n.id)):g.jsxs("div",{className:"flex flex-col items-center justify-center w-full py-8 gap-2",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-white/10 flex items-center justify-center",children:g.jsx("svg",{className:"w-6 h-6 text-white/30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),g.jsx("span",{className:"text-white/50 font-quicksand font-medium text-sm text-center",children:"No completed transactions yet"}),g.jsx("span",{className:"text-white/30 font-quicksand font-medium text-xs text-center",children:"Your transaction history will appear here"})]})}),e.length>0&&g.jsx("div",{className:"flex items-center gap-2 w-full",children:g.jsxs("span",{className:"text-hushr-green font-quicksand font-semibold text-base leading-5 cursor-pointer hover:text-hushr-green/80 transition-colors",children:["Show more (",t.length,")"]})})]})]})},Uae=({recentInscriptions:t})=>g.jsxs("div",{className:"flex flex-col items-end py-8 gap-8 w-[280px] h-screen",children:[g.jsxs("div",{className:"flex justify-end items-center gap-4 w-[265px] h-[57px]",children:[g.jsx("div",{className:"flex items-center gap-2 w-[46px] h-[25px]",children:g.jsx("span",{className:"text-hushr-green font-quicksand font-medium text-xl leading-[25px]",children:"+21%"})}),g.jsxs("button",{className:"flex justify-center items-center px-6 py-4 gap-2 w-[203px] h-[57px] border border-hushr-green rounded-2xl hover:bg-hushr-green/10 transition-colors",children:[g.jsx("img",{width:24,height:24,src:oe("/favicon.png"),alt:"Buy $hushr"}),g.jsx("span",{className:"text-hushr-green font-quicksand font-semibold text-xl leading-[25px]",children:"Buy $hushr"})]})]}),g.jsxs("div",{className:"flex flex-col items-start px-8 py-8 gap-8 w-[280px] h-[468px] border border-white/25 rounded-2xl",children:[g.jsx("h2",{className:"text-white font-quicksand font-semibold text-2xl leading-[30px] w-[216px] h-[30px]",children:"Recently Inscribed"}),g.jsx("div",{className:"flex flex-col items-start gap-4 w-[216px] h-[289px]",children:t.slice(0,5).map(e=>g.jsxs("div",{className:"flex flex-col items-start w-[216px] h-[45px]",children:[g.jsxs("div",{className:"flex items-center justify-between w-full h-[25px]",children:[g.jsx("span",{className:"text-white font-quicksand font-semibold text-xl leading-[25px] truncate flex-1 mr-2",children:e.name}),g.jsx("svg",{className:"w-6 h-6 text-hushr-green opacity-0 hover:opacity-100 transition-opacity cursor-pointer",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})})]}),g.jsx("div",{className:"flex items-center gap-2 w-[216px] h-5",children:g.jsxs("span",{className:"text-white/50 font-quicksand font-medium text-base leading-5",children:[e.type,"  ",e.size]})})]},e.id))}),g.jsx("div",{className:"flex items-center gap-2 w-[216px] h-5",children:g.jsx("span",{className:"text-hushr-green font-quicksand font-semibold text-base leading-5 w-[86px] h-5 cursor-pointer hover:text-hushr-green/80 transition-colors",children:"Show more"})})]})]}),jae=()=>g.jsxs("div",{className:"flex flex-col items-end py-8 gap-8 w-[280px] h-screen",children:[g.jsxs("div",{className:"flex justify-end items-center gap-4 w-[265px] h-[57px]",children:[g.jsx("div",{className:"flex items-center gap-2 w-[46px] h-[25px]",children:g.jsx("span",{className:"text-hushr-green font-quicksand font-medium text-xl leading-[25px]",children:"+21%"})}),g.jsxs("button",{className:"flex justify-center items-center px-6 py-4 gap-2 w-[203px] h-[57px] border border-hushr-green rounded-2xl hover:bg-hushr-green/10 transition-colors",children:[g.jsx("img",{width:24,height:24,src:oe("/favicon.png"),alt:"Buy $hushr"}),g.jsx("span",{className:"text-hushr-green font-quicksand font-semibold text-xl leading-[25px]",children:"Buy $hushr"})]})]}),g.jsxs("div",{className:"flex flex-col items-start px-8 py-8 gap-8 w-[280px] border border-white/25 rounded-2xl",children:[g.jsx("h2",{className:"text-white font-quicksand font-semibold text-2xl leading-[30px]",children:"Activity"}),g.jsx("div",{className:"flex flex-col items-start gap-4 w-[216px]",children:[{action:"Posts created",count:"12",time:"2h ago"},{action:"Messages sent",count:"34",time:"1d ago"},{action:"Likes received",count:"156",time:"3d ago"},{action:"Profile views",count:"89",time:"1w ago"},{action:"Followers gained",count:"23",time:"2w ago"}].map((t,e)=>g.jsxs("div",{className:"flex flex-col w-[216px] h-[60px] hover:bg-white/5 p-2 -m-2 rounded-lg transition-colors cursor-pointer",children:[g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("span",{className:"text-white font-quicksand font-medium text-sm",children:t.action}),g.jsx("span",{className:"text-hushr-green font-quicksand font-semibold text-sm",children:t.count})]}),g.jsx("span",{className:"text-white/50 font-quicksand text-xs",children:t.time})]},e))}),g.jsx("div",{className:"flex items-center gap-2 w-full",children:g.jsx("span",{className:"text-hushr-green font-quicksand font-semibold text-base leading-5 cursor-pointer hover:text-hushr-green/80 transition-colors",children:"View all activity"})})]}),g.jsxs("div",{className:"flex flex-col items-start px-8 py-8 gap-6 w-[280px] border border-white/25 rounded-2xl",children:[g.jsx("h2",{className:"text-white font-quicksand font-semibold text-xl",children:"Recent Connections"}),g.jsx("div",{className:"flex flex-col gap-3 w-full",children:[{address:"0x1234...5678",name:"Alex Crypto"},{address:"0x2345...6789",name:"Maria DeFi"},{address:"0x3456...789a",name:"Bob NFT"}].map((t,e)=>g.jsxs("div",{className:"flex items-center gap-3 w-full p-2 -m-2 rounded-lg hover:bg-white/5 transition-colors cursor-pointer",children:[g.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:g.jsx("img",{src:ye(t.address),alt:t.name,className:"w-full h-full object-cover"})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-white font-quicksand font-medium text-sm truncate",children:t.name}),g.jsx("div",{className:"text-white/50 font-quicksand text-xs truncate",children:t.address})]})]},e))}),g.jsx("div",{className:"flex items-center gap-2 w-full",children:g.jsx("span",{className:"text-hushr-green font-quicksand font-semibold text-base leading-5 cursor-pointer hover:text-hushr-green/80 transition-colors",children:"View all connections"})})]})]}),Lae=({selectedChatId:t="chat-2",onChatSelect:e})=>{const n=[{id:"chat-1",name:"1bp5...0x15",wallet_address:"0x1bp5...0x15",lastMessage:"GM! Ready for trading?",isActive:t==="chat-1"},{id:"chat-2",name:"Cases Discussion",wallet_address:"0xCases...Disc",lastMessage:"Looking forward to it",isActive:t==="chat-2"},{id:"chat-3",name:"DeFi Traders",wallet_address:"0xDeFi...Trad",lastMessage:"Always DYOR before investing",isActive:t==="chat-3"},{id:"chat-4",name:"NFT Collectors",wallet_address:"0xNFT...Coll",lastMessage:"0.1 ETH per NFT",isActive:t==="chat-4"}],r=s=>{e&&e(s)};return g.jsxs("div",{className:"flex flex-col items-end py-8 gap-8 w-[280px] h-screen",children:[g.jsxs("div",{className:"flex justify-end items-center gap-4 w-[265px] h-[57px]",children:[g.jsx("div",{className:"flex items-center gap-2 w-[46px] h-[25px]",children:g.jsx("span",{className:"text-hushr-green font-quicksand font-medium text-xl leading-[25px]",children:"+21%"})}),g.jsxs("button",{className:"flex justify-center items-center px-6 py-4 gap-2 w-[203px] h-[57px] border border-hushr-green rounded-2xl hover:bg-hushr-green/10 transition-colors",children:[g.jsx("img",{width:24,height:24,src:oe("/favicon.png"),alt:"Buy $hushr"}),g.jsx("span",{className:"text-hushr-green font-quicksand font-semibold text-xl leading-[25px]",children:"Buy $hushr"})]})]}),g.jsxs("div",{className:"flex flex-col items-start px-8 py-8 gap-8 w-[280px] border border-white/25 rounded-2xl",children:[g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("h2",{className:"text-white font-quicksand font-semibold text-2xl leading-[30px]",children:"Your chats"}),g.jsx("img",{src:oe("/chat/chreateChat.svg"),alt:"Create Chat"})]}),g.jsx("div",{className:"flex flex-col items-start gap-8 w-[216px]",children:n.map(s=>g.jsxs("div",{onClick:()=>r(s.id),className:`flex items-center gap-3 w-full p-3 -m-3 rounded-lg transition-colors cursor-pointer ${s.isActive?"bg-hushr-green/10 border border-hushr-green/30":"hover:bg-white/5"}`,children:[g.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:g.jsx("img",{src:ye(s.wallet_address),alt:s.name,className:"w-full h-full object-cover"})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-white font-quicksand font-semibold text-sm truncate",children:s.name}),g.jsx("div",{className:"text-white/50 font-quicksand text-xs truncate",children:s.lastMessage})]})]},s.id))}),g.jsx("div",{className:"flex items-center gap-2 w-full",children:g.jsx("span",{className:"text-hushr-green font-quicksand font-semibold text-base leading-5 cursor-pointer hover:text-hushr-green/80 transition-colors",children:"Show more"})})]})]})},VA=()=>{const{walletAddress:t,user:e,isConnected:n,connectWallet:r,loading:s}=wc(),[i,o]=te.useState(""),[a,c]=te.useState([]),[l,u]=te.useState([]),d=te.useRef(null),[h,f]=te.useState(new Set),[p,m]=te.useState(!1),[v,y]=te.useState(!1),[w,b]=te.useState(!1),[C,x]=te.useState(null),[T,N]=te.useState(Tae);e1.useEffect(()=>{n&&t&&e&&C&&(U(C.content,C.images,C.imageUrls),x(null))},[n,t,e,C]);const U=(A,O,D)=>{if(!A.trim()&&O.length===0)return;let M;O.length>0&&D.length>0&&(M=D[0]);const H=(e==null?void 0:e.display_name)||`${t.slice(0,6)}...${t.slice(-4)}`,Z=ye(t),F={id:`user-${Date.now()}`,content:A.trim()||"",author:e.display_name||"You",walletAddress:H,handle:`@${t.slice(0,8)}`,avatar:Z,timestamp:"now",reactions:{comments:0,likes:0,views:1,shares:0},hasImage:O.length>0,imageUrl:M};N(Q=>[F,...Q]),o(""),c([]),u([]),console.log(" Thread created successfully!")},E=A=>{const O=Array.from(A.target.files||[]);if(O.length===0)return;const D=O.slice(0,4-a.length),M=D.map(H=>URL.createObjectURL(H));c(H=>[...H,...D]),u(H=>[...H,...M])},k=A=>{URL.revokeObjectURL(l[A]),c(O=>O.filter((D,M)=>M!==A)),u(O=>O.filter((D,M)=>M!==A))},R=async()=>{if(!n||!t||!e){x({content:i,images:[...a],imageUrls:[...l]}),m(!0);try{await r()}catch(A){console.error("Failed to connect wallet:",A),x(null)}finally{m(!1)}return}U(i,a,l)},j=async A=>{A.preventDefault(),await R()},L=A=>{f(O=>{const D=new Set(O);return D.has(A)?D.delete(A):D.add(A),D}),N(O=>O.map(D=>{if(D.id===A){const M=h.has(A);return{...D,reactions:{...D.reactions,likes:M?D.reactions.likes-1:D.reactions.likes+1}}}return D}))},B=i.trim().length>0||a.length>0,S=p||s,I=A=>{const O=[...A];for(let D=O.length-1;D>0;D--){const M=Math.floor(Math.random()*(D+1));[O[D],O[M]]=[O[M],O[D]]}return O},$=async()=>{y(!0),await new Promise(O=>setTimeout(O,1500));const A=I(HA);N(O=>[...A,...O]),b(!0),y(!1)};return g.jsxs("div",{className:"w-full border-l border-r border-hushr-gray lg:border-l lg:border-r border-l-0 border-r-0 hide-scrollbar",children:[g.jsx("div",{className:"bg-black border-b border-hushr-gray",children:g.jsxs("div",{className:"flex flex-col justify-center items-start px-4 lg:px-20 py-6 lg:py-12 gap-4 w-full",children:[S&&g.jsx("div",{className:"w-full max-w-[536px] mb-3 bg-hushr-green/10 border border-hushr-green/20 rounded-xl p-3",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-4 h-4 border-2 border-hushr-green border-t-transparent rounded-full animate-spin"}),g.jsx("p",{className:"text-hushr-green font-quicksand text-sm",children:"Connecting wallet..."})]})}),g.jsxs("form",{onSubmit:j,className:"w-full",children:[g.jsxs("div",{className:"flex items-center gap-4 w-full max-w-[536px] h-[30px] mb-4",children:[g.jsx("div",{className:"flex-1 flex items-center gap-2",children:g.jsx("textarea",{value:i,onChange:A=>o(A.target.value),onKeyDown:A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),B&&!S&&R())},placeholder:"Speak safely... or just add images",disabled:S,className:"w-full bg-transparent text-white placeholder-white/50 text-xl lg:text-2xl font-quicksand font-medium leading-[30px] resize-none focus:outline-none disabled:opacity-50",rows:1,maxLength:280})}),g.jsx("button",{type:"submit",disabled:!B||S,className:`w-6 h-6 lg:w-7 lg:h-7 flex disabled:opacity-50 items-center\r
                 justify-center flex-shrink-0 transition-opacity duration-200 disabled:cursor-not-allowed`,children:g.jsx("img",{src:oe(B&&!S?"/buttons/createPostAble.svg":"/buttons/createPostDisable.svg"),alt:B&&!S?"Post":"Post (disabled)",className:"w-full h-full"})})]}),l.length>0&&g.jsx("div",{className:"mb-4 grid grid-cols-2 gap-2 max-w-[536px]",children:l.map((A,O)=>g.jsxs("div",{className:"relative group",children:[g.jsx("img",{src:A,alt:`Preview ${O+1}`,className:"w-full h-32 object-cover rounded-lg"}),g.jsx("button",{type:"button",onClick:()=>k(O),className:"absolute top-2 right-2 w-6 h-6 bg-black/70 rounded-full flex items-center justify-center text-white opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},O))}),g.jsx("div",{className:"flex items-center gap-4",children:g.jsx("button",{type:"button",onClick:()=>{var A;return(A=d.current)==null?void 0:A.click()},disabled:a.length>=4||S,className:"w-5 group h-5 lg:w-6 lg:h-6 flex items-center justify-center flex-shrink-0 disabled:opacity-50",children:g.jsx("img",{src:oe("/buttons/attachImage.svg"),alt:"Attach Image",className:"w-full h-full group-hover:opacity-100 opacity-50 transition-opacity"})})}),g.jsx("input",{ref:d,type:"file",accept:"image/*",multiple:!0,onChange:E,className:"hidden"})]})]})}),!w&&g.jsx("div",{className:"bg-black border-b border-hushr-gray",children:g.jsx("div",{className:"flex justify-center items-center px-4 py-4 w-full h-[52px]",children:g.jsx("button",{onClick:$,disabled:v,className:"flex items-center gap-2 text-hushr-green font-quicksand font-semibold text-base leading-5 hover:text-hushr-green/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:v?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-4 h-4 border-2 border-hushr-green border-t-transparent rounded-full animate-spin"}),"Loading posts..."]}):`Show ${HA.length} more posts`})})}),g.jsxs("div",{className:"flex flex-col",children:[T.map(A=>g.jsxs("div",{className:"flex items-start px-4 py-6 lg:py-8 gap-4 w-full border-b border-hushr-gray hover:bg-gray-950/10 transition-colors",children:[g.jsx("div",{className:"w-10 h-10 lg:w-12 lg:h-12 rounded-full overflow-hidden flex-shrink-0",children:g.jsx("img",{src:A.avatar,alt:A.walletAddress,className:"w-full h-full object-cover"})}),g.jsxs("div",{className:"flex flex-col gap-3 lg:gap-4 flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2 h-5",children:[g.jsx("span",{className:"text-white font-quicksand font-semibold text-sm lg:text-base leading-5 truncate",children:A.walletAddress}),g.jsx("span",{className:"text-white/50 font-quicksand font-semibold text-sm lg:text-base leading-5 flex-shrink-0",children:""}),g.jsx("span",{className:"text-white/50 font-quicksand font-medium text-sm lg:text-base leading-5 flex-shrink-0",children:A.timestamp})]}),A.content&&g.jsx("div",{className:"text-white font-quicksand font-medium text-sm lg:text-base leading-5 w-full",children:A.content}),A.hasImage&&A.imageUrl&&g.jsx("div",{className:"w-full max-w-[600px] aspect-square lg:h-[400px] xl:h-[600px] rounded-2xl overflow-hidden bg-gray-800",children:g.jsx("img",{src:A.imageUrl,alt:"Thread image",className:"w-full h-full object-cover",onError:O=>{const D=O.target;D.style.display="none";const M=D.parentElement;M&&(M.innerHTML=`
                          <div class="w-full h-full flex items-center justify-center bg-gray-800 text-white/50">
                            <div class="text-center">
                              <div class="text-2xl mb-2"></div>
                              <div class="text-sm">Image not available</div>
                            </div>
                          </div>
                        `)},onLoad:O=>{const D=O.target;D.style.display="block"}})}),g.jsxs("div",{className:"flex items-center w-full h-9 gap-2 lg:gap-0",children:[g.jsxs("button",{className:"flex group items-center py-2 gap-2 flex-1 lg:w-[150px] h-9",children:[g.jsx("div",{className:"w-4 h-4 flex-shrink-0",children:g.jsx("img",{src:oe("/buttons/comments.svg"),alt:"Comments",className:"w-4 h-4 group-hover:opacity-100 opacity-50 transition-opacity",onError:O=>{const D=O.target;D.style.display="none"}})}),g.jsx("span",{className:`text-white/50 group-hover:text-white transition-colors\r
                   font-quicksand font-medium text-sm lg:text-base leading-5`,children:A.reactions.comments})]}),g.jsxs("button",{onClick:()=>L(A.id),className:"flex group items-center py-2 gap-2 flex-1 lg:w-[150px] h-9",children:[g.jsx("div",{className:"w-4 h-4 flex-shrink-0",children:g.jsx("img",{src:h.has(A.id)?oe("/buttons/likeRed.svg"):oe("/buttons/like.svg"),alt:"Like",className:`w-4 h-4 transition-opacity ${h.has(A.id)?"opacity-100":"group-hover:opacity-100 opacity-50"}`,onError:O=>{const D=O.target;D.style.display="none"}})}),g.jsx("span",{className:`transition-colors font-quicksand font-medium text-sm lg:text-base leading-5 ${h.has(A.id)?"text-red-500":"text-white/50 group-hover:text-white"}`,children:A.reactions.likes})]}),g.jsxs("button",{className:"flex group items-center py-2 gap-2 flex-1 lg:w-[150px] h-9",children:[g.jsx("div",{className:"w-4 h-4 flex-shrink-0",children:g.jsx("img",{src:oe("/buttons/wievs.svg"),alt:"Views",className:"w-4 h-4 group-hover:opacity-100 opacity-50 transition-opacity",onError:O=>{const D=O.target;D.style.display="none"}})}),g.jsx("span",{className:`text-white/50 group-hover:text-white transition-colors\r
                     font-quicksand font-medium text-sm lg:text-base leading-5`,children:A.reactions.views})]}),g.jsxs("button",{className:"flex group items-center py-2 gap-2 flex-1 lg:w-[150px] h-9",children:[g.jsx("div",{className:"w-4 h-4 flex-shrink-0",children:g.jsx("img",{src:oe("/buttons/share.svg"),alt:"Share",className:"w-4 h-4 group-hover:opacity-100 opacity-50 transition-opacity",onError:O=>{const D=O.target;D.style.display="none"}})}),g.jsx("span",{className:`text-white/50 group-hover:text-white transition-colors\r
                     font-quicksand font-medium text-sm lg:text-base leading-5`,children:"Share"})]})]})]})]},A.id)),g.jsx("div",{className:"h-96 flex items-center justify-center w-full",children:g.jsxs("div",{className:"animate-pulse flex flex-col items-center gap-4",children:[g.jsx("div",{className:"w-8 h-8 bg-hushr-gray rounded-full"}),g.jsx("div",{className:"text-white/50 font-quicksand text-sm",children:"Loading more threads..."})]})})]})]})},Mae=({onInscriptionCreate:t})=>{const[e,n]=te.useState([]),[r,s]=te.useState(!1),[i,o]=te.useState(!1),[a,c]=te.useState(0),[l,u]=te.useState(!1),[d,h]=te.useState(null),[f,p]=te.useState(!1),[m,v]=te.useState(""),[y,w]=te.useState(""),b=te.useRef(null),C=$=>{$.preventDefault(),s(!0)},x=$=>{$.preventDefault(),s(!1)},T=$=>{$.preventDefault(),s(!1);const A=Array.from($.dataTransfer.files);U(A)},N=$=>{const A=Array.from($.target.files||[]);U(A)},U=$=>{$.forEach(A=>{const O={id:Date.now().toString()+Math.random(),name:A.name,size:k(A.size),type:R(A.name),progress:0,status:"uploading"};n(D=>[...D,O]),E(O.id)})},E=$=>{let A=0;const O=setInterval(()=>{A+=Math.random()*20,A>=100?(A=100,clearInterval(O),n(D=>D.map(M=>M.id===$?{...M,progress:100,status:"completed"}:M))):n(D=>D.map(M=>M.id===$?{...M,progress:A}:M))},200)},k=$=>{if($===0)return"0 Bytes";const A=1024,O=["Bytes","KB","MB","GB"],D=Math.floor(Math.log($)/Math.log(A));return parseFloat(($/Math.pow(A,D)).toFixed(2))+" "+O[D]},R=$=>{var O;switch((O=$.split(".").pop())==null?void 0:O.toLowerCase()){case"pdf":return"PDF";case"aac":case"mp3":case"wav":return"AAC";case"jpg":case"jpeg":case"png":return"IMG";case"mp4":case"avi":case"mov":return"VID";case"txt":case"doc":case"docx":return"TXT";default:return"FILE"}},j=$=>{switch($){case"PDF":return"#40F8AB";case"AAC":return"#40F8AB";case"IMG":return"#40F8AB";case"VID":return"#40F8AB";case"TXT":return"#40F8AB";default:return"#40F8AB"}},L=()=>{var $;($=b.current)==null||$.click()},B=$=>{n(A=>A.filter(O=>O.id!==$))},S=async()=>{var $,A;if(!(e.length===0||i)){o(!0),c(0);try{const O=["Preparing files...","Creating transaction...","Writing to blockchain...","Finalizing..."];for(let Z=0;Z<O.length;Z++)await new Promise(F=>setTimeout(F,750)),c((Z+1)/O.length*100);const D="0x"+Math.random().toString(16).substring(2,66),M="i"+Math.random().toString(36).substring(2,15);h({txHash:D,inscriptionId:M});const H={id:Date.now().toString(),name:m||(($=e[0])==null?void 0:$.name)||"Unknown",type:((A=e[0])==null?void 0:A.type.toLowerCase())||"file",size:e.length>0?e[0].size:"0 Bytes",inscriptionId:M,timestamp:new Date};t(Z=>[H,...Z]),u(!0),setTimeout(()=>{n([]),c(0),v(""),w(""),p(!1)},2e3)}catch(O){console.error("Inscription failed:",O)}finally{o(!1)}}},I=()=>{u(!1),h(null)};return g.jsxs("div",{className:"w-full border-l min-w-[696px] max-w-[696px] border-r border-hushr-gray overflow-y-auto hide-scrollbar",children:[g.jsxs("div",{className:"flex flex-col justify-center items-center px-8 gap-16 min-h-screen",children:[g.jsx("div",{className:"w-full h-0"}),g.jsxs("div",{className:"flex flex-col items-center gap-8 w-full max-w-[632px]",children:[g.jsxs("div",{className:"flex flex-col items-center gap-4 w-[277px]",children:[g.jsx("h1",{className:"text-white font-quicksand font-semibold text-2xl leading-[30px] text-center",children:"Upload your files"}),g.jsx("p",{className:"text-white/50 font-quicksand font-medium text-base leading-5 text-center",children:"Here we can describe our limitations, including formats and file size."})]}),g.jsxs("div",{className:`flex flex-col justify-center items-center px-0 py-16 gap-8 w-full border border-dashed rounded-2xl transition-colors ${r?"border-hushr-green bg-hushr-green/5":"border-white"}`,onDragOver:C,onDragLeave:x,onDrop:T,children:[g.jsx("div",{className:"w-16 h-16",children:g.jsx("img",{src:oe("/inscribe/dragAndDrop.svg"),alt:"Drag & Drop"})}),g.jsxs("div",{className:"flex flex-col items-center gap-4 w-[354px]",children:[g.jsx("p",{className:"text-hushr-grayLess font-quicksand font-semibold text-xl leading-[25px]",children:"Drag & Drop your content to Inscribe"}),g.jsx("p",{className:"text-hushr-grayLess font-quicksand font-medium text-base leading-6",children:"or"}),g.jsx("button",{onClick:L,className:"flex justify-center items-center px-8 py-4 gap-2 border border-hushr-green rounded-2xl hover:bg-hushr-green/10 transition-colors",children:g.jsx("span",{className:"text-hushr-green font-quicksand font-semibold text-base leading-6",children:"Browse files"})})]})]})]}),e.length>0&&g.jsxs("div",{className:"flex flex-col justify-center items-start gap-8 w-full max-w-[632px]",children:[g.jsx("div",{className:"flex flex-col justify-center items-start gap-4 w-[108px]",children:g.jsx("h3",{className:"text-hushr-grayLess font-quicksand font-medium text-base leading-6",children:"Uploaded files"})}),g.jsx("div",{className:"flex flex-col gap-8 w-full",children:e.map($=>g.jsxs("div",{className:"flex items-end gap-8 w-full",children:[g.jsx("div",{className:"flex items-center justify-center gap-2 w-14 h-14 border border-hushr-grayLess rounded-[10px]",children:g.jsx("div",{className:"flex flex-col justify-end items-center gap-2 w-12 h-12 bg-white/10 rounded-lg",children:g.jsx("div",{className:"flex justify-center items-center px-0 py-1 gap-2 w-12 h-7 rounded-[8px]",style:{backgroundColor:j($.type)},children:g.jsx("span",{className:"text-black font-quicksand font-semibold text-base leading-5 text-center",children:$.type})})})}),g.jsxs("div",{className:"flex flex-col justify-center items-start gap-2 flex-1 h-16",children:[g.jsxs("div",{className:"flex flex-col items-start",children:[g.jsx("h4",{className:"text-white font-quicksand font-semibold text-base leading-5",children:$.name}),g.jsx("p",{className:"text-hushr-grayLess font-quicksand font-medium text-base leading-6",children:$.size})]}),g.jsx("div",{className:"relative w-full h-2 bg-white/10 rounded-lg overflow-hidden",children:g.jsx("div",{className:"absolute top-0 left-0 h-full bg-hushr-green rounded-lg transition-all duration-300",style:{width:`${$.progress}%`}})})]}),g.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",children:$.status==="completed"?g.jsx("div",{className:"w-8 h-8 border border-hushr-green rounded-full flex items-center justify-center",children:g.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:g.jsx("path",{d:"M13.3334 4L6.00008 11.3333L2.66675 8",stroke:"#40F8AB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}):$.status==="uploading"?g.jsx("div",{className:"w-8 h-8 bg-white/10 rounded-full flex items-center justify-center",children:g.jsxs("svg",{className:"animate-spin",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[g.jsx("circle",{cx:"8",cy:"8",r:"6",stroke:"white",strokeOpacity:"0.5",strokeWidth:"2"}),g.jsx("path",{d:"M14 8C14 4.68629 11.3137 2 8 2",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})]})}):g.jsx("button",{onClick:()=>B($.id),className:"w-8 h-8 bg-red-500/20 rounded-full flex items-center justify-center hover:bg-red-500/30 transition-colors",children:g.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:g.jsx("path",{d:"M12 4L4 12M4 4L12 12",stroke:"#ef4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})})]},$.id))})]}),e.length>0&&g.jsxs("div",{className:"flex flex-col justify-center items-start gap-8 w-full max-w-[632px]",children:[g.jsxs("div",{className:"flex justify-between items-center w-full",children:[g.jsx("p",{className:"text-hushr-grayLess font-quicksand font-medium text-base leading-6",children:"Low fee: ~$45.9, within hours to days delivery"}),g.jsxs("button",{onClick:()=>p(!f),className:"flex justify-center items-center px-8 py-2 gap-2 bg-white/10 rounded-full hover:bg-white/20 transition-colors",children:[g.jsx("span",{className:"text-white/50 font-quicksand font-medium text-base leading-5 text-center",children:"Advanced options"}),g.jsx("svg",{className:`w-4 h-4 text-white/50 transition-transform duration-300 ease-in-out ${f?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),g.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out w-full ${f?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:g.jsxs("div",{className:"flex flex-col gap-4 w-full p-6 bg-white/5 rounded-2xl border border-white/10",children:[g.jsx("h3",{className:"text-white font-quicksand font-semibold text-lg leading-6",children:"Advanced Options"}),g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("label",{className:"text-white/70 font-quicksand font-medium text-sm leading-5",children:"Inscription Name (Optional)"}),g.jsx("input",{type:"text",value:m,onChange:$=>v($.target.value),placeholder:"Enter custom name for your inscription",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white font-quicksand font-medium text-base leading-6 placeholder:text-white/30 focus:outline-none focus:border-hushr-green/50 hover:bg-white/20 transition-colors"})]}),g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("label",{className:"text-white/70 font-quicksand font-medium text-sm leading-5",children:"Description (Optional)"}),g.jsx("textarea",{value:y,onChange:$=>w($.target.value),placeholder:"Add a description for your inscription",rows:3,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white font-quicksand font-medium text-base leading-6 placeholder:text-white/30 focus:outline-none focus:border-hushr-green/50 hover:bg-white/20 transition-colors resize-none"})]})]})}),g.jsxs("button",{onClick:S,className:"relative flex justify-center items-center px-8 py-4 gap-2 w-full bg-hushr-green rounded-2xl hover:bg-hushr-green/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden",disabled:e.length===0||i,children:[i&&g.jsx("div",{className:"absolute inset-0 bg-black/20 rounded-2xl",children:g.jsx("div",{className:"h-full bg-hushr-green/30 rounded-2xl transition-all duration-300",style:{width:`${a}%`}})}),g.jsx("div",{className:"relative z-10 flex items-center gap-2",children:i?g.jsxs(g.Fragment,{children:[g.jsxs("svg",{className:"animate-spin w-5 h-5",viewBox:"0 0 24 24",fill:"none",children:[g.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeOpacity:"0.3",strokeWidth:"2"}),g.jsx("path",{d:"M22 12C22 6.48 17.52 2 12 2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),g.jsxs("span",{className:"text-black font-quicksand font-semibold text-base leading-6",children:["Creating inscription... ",Math.round(a),"%"]})]}):g.jsx("span",{className:"text-black font-quicksand font-semibold text-base leading-6",children:"Inscribe"})})]})]}),g.jsx("div",{className:"w-full h-0"})]}),g.jsx("input",{ref:b,type:"file",multiple:!0,className:"hidden",onChange:N,accept:"*/*"}),l&&g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 animate-fadeIn",children:g.jsx("div",{className:"bg-black border border-hushr-green rounded-2xl p-8 max-w-md w-full mx-4 animate-scaleIn",children:g.jsxs("div",{className:"flex flex-col items-center gap-6",children:[g.jsx("div",{className:"w-16 h-16 bg-hushr-green rounded-full flex items-center justify-center",children:g.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:g.jsx("path",{d:"M26.6667 8L12.0001 22.6667L5.33344 16",stroke:"black",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})}),g.jsxs("div",{className:"text-center",children:[g.jsx("h3",{className:"text-white font-quicksand font-semibold text-xl leading-6 mb-2",children:"Inscription Created Successfully!"}),g.jsx("p",{className:"text-white/70 font-quicksand font-medium text-base leading-5",children:"Your files have been successfully written to the blockchain"})]}),d&&g.jsxs("div",{className:"w-full bg-black/30 rounded-lg p-4 space-y-2",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white/70 font-quicksand font-medium text-sm",children:"Inscription ID:"}),g.jsx("span",{className:"text-hushr-green font-quicksand font-semibold text-sm",children:d.inscriptionId})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white/70 font-quicksand font-medium text-sm",children:"Transaction:"}),g.jsxs("span",{className:"text-hushr-green font-quicksand font-semibold text-sm",children:[d.txHash.slice(0,8),"...",d.txHash.slice(-6)]})]})]}),g.jsx("button",{onClick:I,className:"flex justify-center items-center px-8 py-3 gap-2 w-full bg-hushr-green rounded-xl hover:bg-hushr-green/90 transition-colors",children:g.jsx("span",{className:"text-black font-quicksand font-semibold text-base leading-6",children:"Close"})})]})})})]})},GA=({tokens:t,selectedToken:e,onSelect:n,show:r,onToggle:s,showBalance:i=!0})=>g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:s,className:"flex items-center justify-between gap-2 px-4 py-3 bg-white/10 rounded-xl hover:bg-white/20 transition-colors min-w-[280px]",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("img",{src:oe(e.icon),alt:e.symbol,className:"w-8 h-8 rounded-full"}),g.jsxs("div",{className:"flex flex-col items-start",children:[g.jsx("span",{className:"text-white font-quicksand font-semibold text-base",children:e.symbol}),g.jsx("span",{className:"text-white/50 font-quicksand font-medium text-sm",children:e.name})]})]}),g.jsx("svg",{className:`w-5 h-5 text-white/50 transition-transform duration-300 ease-in-out ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&g.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-3 bg-black border border-white/20 rounded-xl shadow-lg z-50 max-h-[300px] overflow-hidden overflow-y-auto",children:t.map(o=>g.jsxs("button",{onClick:()=>{n(o),s()},className:"w-full flex items-center justify-between gap-2 px-4 py-3 hover:bg-white/10 transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("img",{src:o.icon,alt:o.symbol,className:"w-8 h-8 rounded-full"}),g.jsxs("div",{className:"flex flex-col items-start",children:[g.jsx("span",{className:"text-white font-quicksand font-semibold text-base",children:o.symbol}),g.jsx("span",{className:"text-white/50 font-quicksand font-medium text-sm",children:o.name})]})]}),i&&g.jsxs("div",{className:"flex flex-col items-end",children:[g.jsx("span",{className:"text-white/70 font-quicksand font-medium text-sm",children:o.balance}),g.jsx("span",{className:"text-white/50 font-quicksand font-medium text-sm",children:o.usdValue})]})]},o.symbol))})]}),KA=({networks:t,selectedNetwork:e,onSelect:n,show:r,onToggle:s})=>g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:s,className:"flex items-center justify-between gap-2 px-4 py-3 bg-white/10 rounded-lg hover:bg-white/20 transition-colors w-[168px]",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("img",{src:oe(e.icon),alt:e.name,className:"w-6 h-6"}),g.jsx("span",{className:"text-white/70 font-quicksand font-medium text-base",children:e.name})]}),g.jsx("svg",{className:`w-4 h-4 text-white/50 transition-transform duration-300 ease-in-out ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&g.jsx("div",{className:"absolute top-full right-0 w-[168px] mt-2 bg-black border max-h-[200px] border-white/20 rounded-xl shadow-lg z-40 overflow-hidden overflow-y-auto",children:t.map(i=>g.jsxs("button",{onClick:()=>{n(i),s()},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-white/10 transition-colors",children:[g.jsx("img",{src:i.icon,alt:i.name,className:"w-6 h-6"}),g.jsx("span",{className:"text-white font-quicksand font-medium text-base",children:i.name})]},i.id))})]}),Bae=({options:t,selected:e,onSelect:n,show:r,onToggle:s})=>g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:s,className:`w-full px-4 py-3 bg-white/10 border border-white/20 \r
      rounded-lg text-white font-quicksand text-sm hover:bg-white/20 \r
      transition-colors outline-none flex items-center justify-between relative`,children:[g.jsx("span",{children:e}),g.jsx("svg",{className:`w-4 h-4 text-white/50 absolute right-4 transition-transform duration-300 ease-in-out ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&g.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-black border border-white/20 rounded-lg shadow-lg z-[100] overflow-hidden",children:t.map(i=>g.jsxs("button",{onClick:()=>{n(i),s()},className:"w-full px-4 py-3 text-left text-white font-quicksand text-sm hover:bg-white/10 transition-colors flex items-center justify-between",children:[g.jsx("span",{children:i}),e===i&&g.jsx("svg",{className:"w-4 h-4 text-hushr-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},i))})]}),Fae=({options:t,selected:e,onSelect:n,show:r,onToggle:s})=>g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:s,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white font-quicksand text-sm hover:bg-white/20 transition-colors focus:outline-none focus:border-hushr-green/50 flex items-center justify-between relative",children:[g.jsx("span",{children:e}),g.jsx("svg",{className:`w-4 h-4 text-white/50 absolute right-4 transition-transform duration-300 ease-in-out ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&g.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-black border border-white/20 rounded-lg shadow-lg z-[100] overflow-hidden",children:t.map(i=>g.jsxs("button",{onClick:()=>{n(i),s()},className:"w-full px-4 py-3 text-left text-white font-quicksand text-sm hover:bg-white/10 transition-colors flex items-center justify-between",children:[g.jsx("span",{children:i}),e===i&&g.jsx("svg",{className:"w-4 h-4 text-hushr-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},i))})]}),zae=()=>{const{walletAddress:t}=wc(),{pendingTransactions:e,addTransaction:n,updateTransactionStatus:r}=OR(),[s,i]=te.useState(""),[o,a]=te.useState(""),[c,l]=te.useState(!1),[u,d]=te.useState(!1),[h,f]=te.useState(!1),[p,m]=te.useState(!1),[v,y]=te.useState(!1),[w,b]=te.useState(!1),[C,x]=te.useState(!1),[T,N]=te.useState("High Privacy"),[U,E]=te.useState("Fast"),[k,R]=te.useState(!1),[j,L]=te.useState({symbol:"HUSHR",name:"Hushr Token",icon:"/favicon.png",balance:"1,250.45",usdValue:"$2,500.90"}),[B,S]=te.useState({symbol:"USDC",name:"USD Coin",icon:"/coins/usdc.svg",balance:"500.00",usdValue:"$500.00"}),[I,$]=te.useState({id:"ethereum",name:"Ethereum",icon:"/networks/eth.png",chainId:1}),[A,O]=te.useState({id:"polygon",name:"Polygon",icon:"/networks/poligon.png",chainId:137}),D=F=>{const Q=parseFloat(F.balance.replace(/,/g,"")),me=parseFloat(F.usdValue.replace(/[$,]/g,""));return Q>0?me/Q:0},M=()=>{if(!s||s==="0")return"0";const F=D(j),Q=D(B);return F===0||Q===0?"0":(parseFloat(s)*F/Q).toFixed(6)},H=()=>{const F=j.balance.replace(/,/g,""),Q=parseFloat(F);isNaN(Q)||i(Q.toString())},Z=async()=>{if(!s||!o||!t)return;R(!0);const F={from:t,to:o,amount:s,token:j.symbol,network:I.name,status:"pending"},Q=n(F);try{await new Promise(me=>setTimeout(me,3e3)),r(Q,"completed",`0x${Math.random().toString(16).substr(2,64)}`),i(""),a("")}catch{r(Q,"failed")}finally{R(!1)}};return g.jsx("div",{className:"w-full border-l min-w-[696px] max-w-[696px] border-r border-hushr-gray lg:border-l lg:border-r border-l-0 border-r-0 hide-scrollbar overflow-y-auto",children:g.jsxs("div",{className:"flex flex-col justify-center items-center min-h-screen p-8 gap-8",children:[g.jsxs("div",{className:"flex flex-col gap-8 w-full max-w-[632px]",children:[g.jsxs("div",{className:"flex flex-col gap-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-white/70 font-quicksand font-medium text-base",children:"From:"}),g.jsx(KA,{networks:qA,selectedNetwork:I,onSelect:$,show:h,onToggle:()=>f(!h)})]}),g.jsx("div",{className:"flex items-center px-4 py-3 border border-hushr-green/50 rounded-xl bg-hushr-green/5",children:g.jsx("span",{className:"text-hushr-green font-quicksand font-medium text-sm",children:t?`${t.slice(0,8)}...${t.slice(-6)}`:"Connect Wallet"})}),g.jsxs("div",{className:"flex flex-col p-4 bg-white/5 rounded-xl border border-white/10",children:[g.jsxs("div",{className:"flex justify-between items-center gap-4",children:[g.jsxs("div",{className:"flex flex-col gap-1 flex-1 min-w-0",children:[g.jsx("input",{type:"number",placeholder:"0.0",value:s,onChange:F=>i(F.target.value),className:"bg-transparent text-white font-quicksand font-semibold text-2xl placeholder:text-white/30 border-none outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),g.jsxs("span",{className:"text-white/50 font-quicksand font-medium text-sm",children:["~$",(parseFloat(s||"0")*D(j)).toFixed(2)]})]}),g.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[g.jsx("button",{onClick:H,className:"px-3 py-1 text-hushr-green font-quicksand font-medium text-sm border border-hushr-green/50 rounded-lg hover:bg-hushr-green/10 transition-colors",children:"MAX"}),g.jsx("div",{className:"max-w-[280px]",children:g.jsx(GA,{tokens:zA,selectedToken:j,onSelect:L,show:c,onToggle:()=>l(!c),showBalance:!0})})]})]}),g.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs",children:[g.jsxs("span",{className:"text-white/50 font-quicksand",children:["Balance: ",j.balance," ",j.symbol]}),g.jsx("span",{className:"text-white/50 font-quicksand",children:j.usdValue})]})]})]}),g.jsx("div",{className:"flex justify-center",children:g.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center",children:g.jsx("svg",{className:"w-5 h-5 text-white/70",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})}),g.jsxs("div",{className:"flex flex-col gap-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-white/70 font-quicksand font-medium text-base",children:"To:"}),g.jsx(KA,{networks:qA,selectedNetwork:A,onSelect:O,show:p,onToggle:()=>m(!p)})]}),g.jsxs("div",{className:"flex items-center px-4 py-3 border border-white/20 rounded-xl bg-white/5",children:[g.jsx("input",{type:"text",placeholder:"Recipient's address (0x...)",value:o,onChange:F=>a(F.target.value),className:"bg-transparent text-white font-quicksand font-medium text-sm placeholder:text-white/30 border-none outline-none flex-1"}),g.jsxs("svg",{className:"w-5 h-5 text-white/30 ml-2",width:"24",height:"25",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("g",{clipPath:"url(#clip0_990_828)",children:g.jsx("path",{d:"M9.5 7V10H6.5V7H9.5ZM11 5.5H5V11.5H11V5.5ZM9.5 15V18H6.5V15H9.5ZM11 13.5H5V19.5H11V13.5ZM17.5 7V10H14.5V7H17.5ZM19 5.5H13V11.5H19V5.5ZM13 13.5H14.5V15H13V13.5ZM14.5 15H16V16.5H14.5V15ZM16 13.5H17.5V15H16V13.5ZM13 16.5H14.5V18H13V16.5ZM14.5 18H16V19.5H14.5V18ZM16 16.5H17.5V18H16V16.5ZM17.5 15H19V16.5H17.5V15ZM17.5 18H19V19.5H17.5V18ZM21 7.5C20.45 7.5 20 7.05 20 6.5V4.5H18C17.45 4.5 17 4.05 17 3.5C17 2.95 17.45 2.5 18 2.5H21C21.55 2.5 22 2.95 22 3.5V6.5C22 7.05 21.55 7.5 21 7.5ZM22 21.5V18.5C22 17.95 21.55 17.5 21 17.5C20.45 17.5 20 17.95 20 18.5V20.5H18C17.45 20.5 17 20.95 17 21.5C17 22.05 17.45 22.5 18 22.5H21C21.55 22.5 22 22.05 22 21.5ZM3 22.5H6C6.55 22.5 7 22.05 7 21.5C7 20.95 6.55 20.5 6 20.5H4V18.5C4 17.95 3.55 17.5 3 17.5C2.45 17.5 2 17.95 2 18.5V21.5C2 22.05 2.45 22.5 3 22.5ZM2 3.5V6.5C2 7.05 2.45 7.5 3 7.5C3.55 7.5 4 7.05 4 6.5V4.5H6C6.55 4.5 7 4.05 7 3.5C7 2.95 6.55 2.5 6 2.5H3C2.45 2.5 2 2.95 2 3.5Z",fill:"white",fillOpacity:"0.5"})}),g.jsx("defs",{children:g.jsx("clipPath",{id:"clip0_990_828",children:g.jsx("rect",{width:"24",height:"24",fill:"white",transform:"translate(0 0.5)"})})})]})]}),g.jsx("div",{className:"flex flex-col p-4 bg-white/5 rounded-xl border border-white/10",children:g.jsxs("div",{className:"flex justify-between items-center gap-4",children:[g.jsxs("div",{className:"flex flex-col gap-1 flex-1 min-w-0",children:[g.jsx("input",{type:"number",placeholder:"0.0",value:M(),readOnly:!0,className:"bg-transparent text-white font-quicksand font-semibold text-2xl placeholder:text-white/30 border-none outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),g.jsxs("span",{className:"text-white/50 font-quicksand font-medium text-sm",children:["~$",(parseFloat(M()||"0")*D(B)).toFixed(2)]})]}),g.jsx("div",{className:"max-w-[280px] flex-shrink-0",children:g.jsx(GA,{tokens:zA,selectedToken:B,onSelect:S,show:u,onToggle:()=>d(!u),showBalance:!1})})]})})]}),g.jsxs("div",{className:"flex flex-col gap-4",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white/50 font-quicksand font-medium text-sm",children:"Privacy fee: ~$0.05  Estimated time: 2-5 minutes"}),g.jsxs("button",{onClick:()=>y(!v),className:"flex items-center gap-2 px-4 py-2 bg-white/10 rounded-full hover:bg-white/20 transition-colors",children:[g.jsx("span",{className:"text-white/70 font-quicksand font-medium text-sm",children:"Advanced options"}),g.jsx("svg",{className:`w-4 h-4 text-white/50 transition-transform duration-300 ease-in-out ${v?"rotate-0":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),g.jsx("div",{className:`transition-all duration-300 ease-in-out ${v?"max-h-96 opacity-100":"max-h-0 opacity-0 overflow-hidden"}`,children:g.jsxs("div",{className:"flex flex-col gap-4 p-4 bg-white/5 rounded-xl border border-white/10",children:[g.jsx("h3",{className:"text-white font-quicksand font-semibold text-base",children:"Advanced Options"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("label",{className:"text-white/70 font-quicksand font-medium text-sm",children:"Privacy Level"}),g.jsx(Bae,{options:["High Privacy","Medium Privacy","Standard"],selected:T,onSelect:N,show:w,onToggle:()=>b(!w)})]}),g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("label",{className:"text-white/70 font-quicksand font-medium text-sm",children:"Gas Priority"}),g.jsx(Fae,{options:["Fast","Standard","Slow"],selected:U,onSelect:E,show:C,onToggle:()=>x(!C)})]})]})]})}),g.jsx("button",{onClick:Z,disabled:!t||!o||!s||k,className:"w-full px-8 py-4 bg-hushr-green rounded-xl hover:bg-hushr-green/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g.jsx("span",{className:"text-black font-quicksand font-semibold text-base",children:k?"Sending...":"Send Private Transaction"})})]})]}),e.length>0&&g.jsxs("div",{className:"w-full max-w-[632px] mt-8",children:[g.jsx("h3",{className:"text-white font-quicksand font-semibold text-lg mb-4",children:"Pending Transactions"}),g.jsx("div",{className:"flex flex-col gap-3",children:e.slice(0,5).map(F=>g.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-xl border border-white/10",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:`w-3 h-3 rounded-full ${F.status==="completed"?"bg-hushr-green":F.status==="pending"?"bg-yellow-500 animate-pulse":"bg-red-500"}`}),g.jsxs("div",{className:"flex flex-col",children:[g.jsxs("span",{className:"text-white font-quicksand font-medium text-sm",children:[F.amount," ",F.token,"  ",F.to.slice(0,8),"...",F.to.slice(-6)]}),g.jsxs("span",{className:"text-white/50 font-quicksand font-medium text-xs",children:[F.network,"  ",F.timestamp.toLocaleTimeString()]})]})]}),g.jsxs("div",{className:"flex flex-col items-end",children:[g.jsx("span",{className:`font-quicksand font-medium text-xs capitalize ${F.status==="completed"?"text-hushr-green":F.status==="pending"?"text-yellow-500":"text-red-500"}`,children:F.status}),F.hash&&g.jsxs("span",{className:"text-white/30 font-quicksand font-medium text-xs",children:[F.hash.slice(0,8),"..."]})]})]},F.id))})]})]})})},qae=({onTabChange:t})=>{const{user:e,walletAddress:n,isConnected:r,connectWallet:s,disconnectWallet:i}=wc(),[o,a]=te.useState(!1),[c,l]=te.useState({displayName:(e==null?void 0:e.display_name)||"",bio:(e==null?void 0:e.bio)||""}),[u,d]=te.useState(null),h=te.useRef(null),f=()=>{console.log("Saving profile:",c),a(!1),alert("Profile updated! (Mock implementation)")},p=()=>{l({displayName:(e==null?void 0:e.display_name)||"",bio:(e==null?void 0:e.bio)||""}),a(!1)},m=w=>{var x;const b=(x=w.target.files)==null?void 0:x[0];if(!b)return;if(!b.type.startsWith("image/")){alert("Please select an image file");return}if(b.size>5*1024*1024){alert("File size must be less than 5MB");return}const C=new FileReader;C.onload=()=>{d(C.result)},C.readAsDataURL(b)},v=()=>{var w;(w=h.current)==null||w.click()},y=()=>{i(()=>{t&&t("threads")})};return!r||!e?g.jsx("div",{className:"flex-1 flex items-center justify-center bg-black",children:g.jsxs("div",{className:"flex flex-col items-center gap-6 text-center",children:[g.jsx("div",{className:"w-24 h-24 rounded-full bg-hushr-gray flex items-center justify-center",children:g.jsx("span",{className:"text-4xl",children:""})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-white font-quicksand font-semibold text-2xl mb-2",children:"Connect Your Wallet"}),g.jsx("p",{className:"text-white/70 font-quicksand mb-6",children:"Connect your wallet to view and edit your profile"}),g.jsx("button",{onClick:s,className:"flex justify-center items-center px-6 py-3 gap-2 border border-hushr-green rounded-2xl hover:bg-hushr-green/10 transition-colors",children:g.jsx("span",{className:"text-hushr-green font-quicksand font-semibold text-lg",children:"Connect Wallet"})})]})]})}):g.jsx("div",{className:"w-full border-l min-w-[696px] max-w-[696px] min-h-screen border-r border-hushr-gray lg:border-l lg:border-r border-l-0 border-r-0",children:g.jsxs("div",{className:"flex flex-col px-8 py-8 gap-8 overflow-y-auto h-full",children:[g.jsxs("div",{className:"flex flex-col items-start gap-6 border border-white/25 rounded-2xl p-8",children:[g.jsxs("div",{className:"flex items-start justify-between w-full",children:[g.jsx("h1",{className:"text-white font-quicksand font-semibold text-2xl",children:o?"Edit Profile":"Profile"}),!o&&g.jsx("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-4 py-2 border border-hushr-green rounded-xl hover:bg-hushr-green/10 transition-colors",children:g.jsx("span",{className:"text-hushr-green font-quicksand font-semibold",children:"Edit"})})]}),g.jsxs("div",{className:"flex items-start gap-6 w-full",children:[g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden",children:g.jsx("img",{src:u||ye(n||"default"),alt:"Profile",className:"w-full h-full object-cover"})}),o&&g.jsx("button",{onClick:v,className:"absolute -bottom-2 -right-2 w-8 h-8 bg-hushr-green rounded-full flex items-center justify-center hover:bg-hushr-green/90 transition-colors",children:g.jsx("span",{className:"text-black text-sm",children:""})}),g.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:m,className:"hidden"})]}),g.jsxs("div",{className:"flex-1 space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-white/70 font-quicksand text-sm mb-2",children:"Display Name"}),o?g.jsx("input",{type:"text",value:c.displayName,onChange:w=>l(b=>({...b,displayName:w.target.value})),className:"w-full bg-black border border-white/25 text-white rounded-xl px-4 py-3 font-quicksand focus:outline-none focus:border-hushr-green transition-colors",placeholder:"Enter your display name"}):g.jsx("p",{className:"text-white font-quicksand text-lg",children:e.display_name||"Anonymous User"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-white/70 font-quicksand text-sm mb-2",children:"Bio"}),o?g.jsx("textarea",{value:c.bio,onChange:w=>l(b=>({...b,bio:w.target.value})),className:"w-full bg-black border border-white/25 text-white rounded-xl px-4 py-3 font-quicksand focus:outline-none focus:border-hushr-green transition-colors resize-none",rows:3,placeholder:"Tell us about yourself"}):g.jsx("p",{className:"text-white font-quicksand",children:e.bio||"No bio yet"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-white/70 font-quicksand text-sm mb-2",children:"Wallet Address"}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("code",{className:"text-hushr-green font-mono text-sm bg-black border border-white/25 px-3 py-2 rounded-xl",children:n}),g.jsx("div",{className:"w-6 h-6 rounded-full overflow-hidden",children:g.jsx("img",{src:ye(n||"default"),alt:"Wallet",className:"w-full h-full object-cover"})})]})]})]})]}),o&&g.jsxs("div",{className:"flex gap-3 w-full",children:[g.jsx("button",{onClick:f,className:"flex items-center justify-center gap-2 px-6 py-3 bg-hushr-green text-black rounded-xl hover:bg-hushr-green/90 transition-colors font-quicksand font-semibold",children:"Save Changes"}),g.jsx("button",{onClick:p,className:"flex items-center justify-center gap-2 px-6 py-3 border border-white/25 text-white rounded-xl hover:bg-white/5 transition-colors font-quicksand",children:"Cancel"})]})]}),g.jsxs("div",{className:"flex flex-col gap-6 border border-white/25 rounded-2xl p-8",children:[g.jsx("h2",{className:"text-white font-quicksand font-semibold text-xl",children:"Settings"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 bg-black border border-white/25 rounded-xl",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"text-2xl",children:""}),g.jsxs("div",{children:[g.jsx("p",{className:"text-white font-quicksand font-medium",children:"Notifications"}),g.jsx("p",{className:"text-white/70 font-quicksand text-sm",children:"Get notified about new messages and activity"})]})]}),g.jsx("button",{className:"px-4 py-2 bg-hushr-green text-black rounded-xl font-quicksand font-semibold hover:bg-hushr-green/90 transition-colors",children:"Enabled"})]}),g.jsxs("div",{className:"flex items-center justify-between p-4 bg-black border border-white/25 rounded-xl",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"text-2xl",children:""}),g.jsxs("div",{children:[g.jsx("p",{className:"text-white font-quicksand font-medium",children:"Privacy"}),g.jsx("p",{className:"text-white/70 font-quicksand text-sm",children:"Control who can message you and see your profile"})]})]}),g.jsx("button",{className:"px-4 py-2 border border-white/25 text-white rounded-xl font-quicksand hover:bg-white/5 transition-colors",children:"Public"})]}),g.jsxs("div",{className:"flex items-center justify-between p-4 bg-black border border-white/25 rounded-xl",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"text-2xl",children:""}),g.jsxs("div",{children:[g.jsx("p",{className:"text-white font-quicksand font-medium",children:"Theme"}),g.jsx("p",{className:"text-white/70 font-quicksand text-sm",children:"Customize your app appearance"})]})]}),g.jsx("button",{className:"px-4 py-2 border border-white/25 text-white rounded-xl font-quicksand hover:bg-white/5 transition-colors",children:"Dark"})]})]})]}),g.jsxs("div",{className:"flex flex-col gap-4 border border-red-500/25 rounded-2xl p-8",children:[g.jsx("h2",{className:"text-red-400 font-quicksand font-semibold text-xl",children:"Danger Zone"}),g.jsx("p",{className:"text-white/70 font-quicksand text-sm mb-4",children:"Once you disconnect your wallet, you will lose access to your profile and data."}),g.jsx("button",{onClick:y,className:"self-start px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-colors font-quicksand font-semibold",children:"Disconnect Wallet"})]})]})})},Hae=({onTabChange:t,message:e})=>{const{loading:n,connectWallet:r}=wc();return g.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:g.jsxs("div",{className:"bg-black/80 backdrop-blur-sm rounded-3xl p-8 w-full max-w-md border border-hushr-gray",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("div",{className:"w-24 h-12 mx-auto mb-4 flex items-center justify-center",children:g.jsx("img",{src:oe("/logo.svg"),alt:"Hushr",className:"w-full h-full object-contain"})}),g.jsx("h1",{className:"text-white text-3xl font-bold mb-2 font-quicksand",children:"Welcome to Hushr"}),e&&e.includes("disconnected")?g.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-3 mb-4",children:g.jsx("p",{className:"text-red-400 font-quicksand text-sm",children:e})}):g.jsx("p",{className:"text-gray-400 font-quicksand",children:e||"Connect your wallet to access all features"})]}),g.jsxs("div",{className:"space-y-4 mb-8",children:[g.jsxs("div",{className:"bg-gray-900 rounded-xl p-4 border border-gray-800",children:[g.jsx("h3",{className:"text-white font-semibold mb-2 font-quicksand",children:" Secure Authentication"}),g.jsx("p",{className:"text-gray-400 text-sm font-quicksand",children:"Your wallet is your identity - no passwords needed"})]}),g.jsxs("div",{className:"bg-gray-900 rounded-xl p-4 border border-gray-800",children:[g.jsx("h3",{className:"text-white font-semibold mb-2 font-quicksand",children:" Private Messaging"}),g.jsx("p",{className:"text-gray-400 text-sm font-quicksand",children:"End-to-end encrypted conversations"})]}),g.jsxs("div",{className:"bg-gray-900 rounded-xl p-4 border border-gray-800",children:[g.jsx("h3",{className:"text-white font-semibold mb-2 font-quicksand",children:" Content Creation"}),g.jsx("p",{className:"text-gray-400 text-sm font-quicksand",children:"Create and share your thoughts securely"})]})]}),g.jsx("button",{onClick:r,disabled:n,className:"w-full bg-hushr-green hover:bg-hushr-green/90 disabled:bg-hushr-green/50 disabled:cursor-not-allowed text-black font-bold py-4 rounded-xl transition-colors flex items-center justify-center gap-3 font-quicksand",children:n?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-5 h-5 border-2 border-black border-t-transparent rounded-full animate-spin"}),"Connecting..."]}):g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"text-xl",children:""}),"Connect Wallet"]})}),g.jsx("div",{className:"text-center mt-6",children:g.jsx("button",{onClick:()=>t("threads"),className:"text-hushr-green hover:text-hushr-green/80 text-sm font-quicksand",children:"Browse threads without connecting "})}),g.jsx("div",{className:"mt-8 pt-6 border-t border-gray-800",children:g.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500 text-sm font-quicksand",children:[g.jsx("span",{className:"text-lg",children:""}),g.jsx("span",{children:"Powered by Web3 technology"})]})})]})})};class Wae extends te.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error(" Application Error:",e,n)}render(){var e;return this.state.hasError?g.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:g.jsxs("div",{className:"bg-black border-[0.5px] border-white rounded-lg p-8 max-w-md w-full text-center",children:[g.jsx("h1",{className:"text-white text-xl font-bold mb-4",children:"Something went wrong"}),g.jsx("p",{className:"text-white text-sm mb-4",children:"The application encountered an error. Please check the console for details."}),g.jsxs("div",{className:"text-white text-xs bg-black p-3 rounded border-[0.5px] border-white mb-4 text-left overflow-auto",children:[g.jsx("strong",{children:"Error:"})," ",((e=this.state.error)==null?void 0:e.message)||"Unknown error"]}),g.jsx("button",{onClick:()=>window.location.reload(),className:"bg-green-500 hover:bg-green-600 text-black font-semibold px-4 py-2 rounded-lg transition-colors duration-200",children:"Reload Page"})]})}):this.props.children}}const Vae=()=>{const{isConnected:t}=wc(),[e,n]=te.useState("threads"),[r,s]=te.useState(!1),[i,o]=te.useState("chat-2"),[a,c]=te.useState(!1),[l,u]=te.useState([{id:"1",name:"tb1p...e3yz",type:"json",size:"1.23 Mb",inscriptionId:"i2b4f8a9c1d2e3f4",timestamp:new Date(Date.now()-1e3*60*30)},{id:"2",name:"tb1q...vrny",type:"text",size:"0.45 Kb",inscriptionId:"i7e9f2b1c4d8a5b2",timestamp:new Date(Date.now()-1e3*60*60)},{id:"3",name:"mqd...hb2f",type:"image",size:"2.1 Mb",inscriptionId:"i3c5d6e7f8a9b1c2",timestamp:new Date(Date.now()-1e3*60*60*2)},{id:"4",name:"2N7x...zWCs",type:"video",size:"15.7 Mb",inscriptionId:"i9f1a2b3c4d5e6f7",timestamp:new Date(Date.now()-1e3*60*60*5)},{id:"5",name:"tb1p...e3yz",type:"audio",size:"4.2 Mb",inscriptionId:"i8e7d6c5b4a3f2e1",timestamp:new Date(Date.now()-1e3*60*60*12)}]);e1.useEffect(()=>{!t&&e!=="threads"?c(!0):t&&c(!1)},[t,e]);const d=()=>{if(!t&&e!=="threads")return g.jsx(Hae,{onTabChange:n,message:a?"Wallet disconnected. Please connect to access this feature.":void 0});switch(e){case"threads":return g.jsx(VA,{});case"messages":return g.jsx(kae,{onNotificationChange:s,selectedChatId:i});case"inscribe":return g.jsx(Mae,{onInscriptionCreate:u});case"private":return g.jsx(zae,{});case"profile":return g.jsx(qae,{onTabChange:n});default:return g.jsx(VA,{})}},h=e==="threads"||e==="messages"||e==="private"||e==="inscribe"||e==="profile";return g.jsxs("div",{className:"min-h-screen bg-black font-quicksand prevent-scroll-shift",children:[g.jsx("div",{className:"hidden lg:flex justify-center min-h-screen",children:g.jsxs("div",{className:"w-full max-w-[1280px] flex justify-center",children:[g.jsx("div",{className:"w-44 xl:w-44 lg:w-16 mr-2 xl:mr-8 flex-shrink-0",children:g.jsxs("div",{className:"sticky top-0 h-screen",children:[g.jsx("div",{className:"xl:block hidden h-full",children:g.jsx(FA,{activeTab:e,onTabChange:n,hasMessagesNotification:r,isConnected:t,iconOnly:!1})}),g.jsx("div",{className:"xl:hidden lg:block hidden h-full",children:g.jsx(FA,{activeTab:e,onTabChange:n,hasMessagesNotification:r,isConnected:t,iconOnly:!0})})]})}),g.jsx("div",{className:"min-w-0 flex justify-center",children:g.jsx("div",{className:"w-full max-w-[696px]",children:d()})}),h&&g.jsx("div",{className:"hidden xl:block w-[280px] ml-8 flex-shrink-0",children:g.jsx("div",{className:"sticky top-0 h-screen",children:e==="messages"?g.jsx(Lae,{selectedChatId:i,onChatSelect:o}):e==="inscribe"?g.jsx(Uae,{recentInscriptions:l}):e==="private"?g.jsx(Dae,{}):e==="profile"?g.jsx(jae,{}):g.jsx(Rae,{})})})]})}),g.jsx("div",{className:"lg:hidden block",children:g.jsxs("div",{className:"flex flex-col min-h-screen",children:[g.jsx("div",{className:"flex-1",children:d()}),g.jsx("div",{className:"bg-black border-t border-hushr-gray",children:g.jsxs("div",{className:"flex justify-around py-3 relative",children:[g.jsx("div",{className:"absolute top-3 bottom-3 bg-white/10 rounded-lg transition-all duration-300 ease-in-out pointer-events-none",style:{width:"20%",left:`${["threads","messages","private","inscribe","profile"].findIndex(f=>f===e)*20}%`}}),[{id:"threads",icon:"",label:"Threads"},{id:"messages",icon:"",label:"Messages"},{id:"private",icon:"",label:"Private"},{id:"inscribe",icon:"",label:"Inscribe"},{id:"profile",icon:"",label:"Profile"}].map(f=>g.jsxs("button",{onClick:()=>n(f.id),className:`relative z-10 flex flex-col items-center py-2 px-3 rounded-lg transition-colors ${e===f.id?"text-hushr-green":f.id!=="threads"&&!t?"text-white/30":"text-white/70 hover:text-white"}`,children:[g.jsx("span",{className:"text-xl mb-1",children:f.icon}),g.jsx("span",{className:"text-xs font-quicksand",children:f.label}),f.id!=="threads"&&!t&&g.jsx("span",{className:"text-xs",children:""})]},f.id))]})})]})})]})};function Gae(){return g.jsx(Wae,{children:g.jsx(Nae,{children:g.jsx($ae,{children:g.jsx(Vae,{})})})})}const Kae=new VL;yT(document.getElementById("root")).render(g.jsx(te.StrictMode,{children:g.jsx(CL,{config:NR.wagmiConfig,children:g.jsx(KL,{client:Kae,children:g.jsx(Gae,{})})})}));export{Cle as $,ne as A,HM as B,re as C,Ee as D,wd as E,yE as F,we as G,Kb as H,Xu as I,us as J,mM as K,it as L,Qe as M,dM as N,V as O,mr as P,em as Q,xe as R,fs as S,Zn as T,ah as U,hh as V,Jt as W,Ile as X,Kv as Y,ZM as Z,Ed as _,nm as a,ale as a$,Kt as a0,Ls as a1,Yl as a2,_le as a3,Yv as a4,mR as a5,Gl as a6,_n as a7,vce as a8,Ea as a9,XU as aA,lP as aB,Ul as aC,QT as aD,zo as aE,kT as aF,sce as aG,W1 as aH,Jd as aI,Tm as aJ,Ga as aK,ice as aL,oce as aM,L8 as aN,ace as aO,Nm as aP,lce as aQ,o6 as aR,CZ as aS,cle as aT,L2 as aU,OO as aV,Gh as aW,yZ as aX,PO as aY,_Z as aZ,lle as a_,Sn as aa,Go as ab,rh as ac,ae as ad,so as ae,dj as af,Wg as ag,Qd as ah,cE as ai,Ho as aj,tce as ak,Bg as al,lE as am,ece as an,Xae as ao,zT as ap,Ui as aq,Im as ar,S8 as as,T8 as at,yce as au,bU as av,G as aw,JT as ax,Vo as ay,EU as az,et as b,sg as b0,ule as b1,dle as b2,sI as b3,Kr as b4,lf as b5,Ci as b6,sD as b7,ln as b8,ar as b9,uce as ba,Ut as bb,nce as bc,Pg as bd,jn as be,Fg as bf,q as c,ge as d,P as e,tt as f,Ei as g,Ale as h,bl as i,yr as j,de as k,gt as l,RK as m,Rt as n,Boe as o,ee as p,Et as q,Sle as r,Ze as s,DP as t,ht as u,Qt as v,Ar as w,xle as x,un as y,jP as z};
